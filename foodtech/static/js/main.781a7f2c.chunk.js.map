{"version":3,"sources":["components/Spinner/spinner.svg","pages/Cart/Cart.assets/bg@touch.jpg","pages/Promo/Promo.assets/popcorn-2.png","pages/Promo/Promo.assets/popcorn-promo.png","tools/browser.ts","tools/create-action.ts","store/actions/app.ts","store/selectors/index.ts","store/reducers/helpers/catalogPage.ts","tools/twoGis/api/doApiRequest.ts","tools/request.ts","tools/twoGis/api/suggest.ts","hooks/useSelector.tsx","hooks/useDispatch.tsx","store/actions/addressSimplePage.tsx","style/const/font.ts","style/const/transition.ts","style/const/color.ts","pages/AddressSimple/SuggestItem/AddressSimpleSuggestItem.tsx","hooks/useFocusOnMount.tsx","style/const/focus.ts","style/mixin/focus.ts","components/Button/Button.tsx","store/constants/router.tsx","store/constants/index.tsx","store/reducers/view/addressSimplePage.tsx","store/actions/native.tsx","store/thunks/addressFullPage.ts","store/actions/router.ts","store/thunks/native.ts","store/reducers/data/products.ts","store/reducers/data/productsDiff.ts","store/reducers/data/twoGisSuggests.ts","store/reducers/data/user.ts","store/reducers/data/delivery.ts","store/reducers/model/cart.ts","store/reducers/model/user.ts","pages/Catalog/Catalog.const/common.ts","tools/memoize.ts","store/reducers/view/catalogPage.ts","style/const/layout.ts","store/reducers/view/catalogPage@touch.ts","pages/Catalog/Catalog.const/portal.ts","store/reducers/view/catalogPage@portal.ts","tools/split-by-thousands.ts","store/reducers/helpers/cartPage.ts","tools/format-phone-number.ts","store/reducers/view/cartPage.ts","store/reducers/view/cartPage@touch.ts","store/reducers/view/cartPage@portal.ts","store/reducers/view/addressSimplePage@portal.tsx","store/reducers/view/addressFullPage.tsx","store/reducers/view/addressFullPage@portal.tsx","store/reducers/view/header.ts","store/reducers/view/errorPage.tsx","store/reducers/view/waitPage.ts","store/actions/server.tsx","store/index.tsx","store/reducers/index.tsx","store/reducers/model/router.ts","components/Text/Headline.ts","hooks/useThrottledFn.tsx","components/Text/Button.ts","style/const/icon.ts","components/HeaderButton/HeaderButton.tsx","components/HeaderAddress/HeaderAddress.tsx","components/HeaderCart/HeaderCart.tsx","components/Header/Header.tsx","tools/preventAllScroll.ts","components/AppLayout/AppLayout.tsx","hooks/useFocusOnChange.ts","store/actions/catalogPage.tsx","components/Text/Caption.ts","components/Badge/Badge.tsx","components/Text/Footnote.ts","components/Text/Body.ts","pages/Catalog/ListItem/CatalogListItem.tsx","pages/Catalog/List/CatalogList.tsx","components/Skeleton/Skeleton.tsx","pages/Catalog/Skeleton/CatalogSkeleton.tsx","pages/Catalog/Catalog.tsx","components/Pin/Pin.tsx","components/Text/Paragraph.ts","pages/Cart/Info/CartInfo.tsx","components/GradientFade/GradientFade.tsx","store/actions/cartPage.tsx","components/IndexBadge/IndexBadge.tsx","components/Label/Label.tsx","pages/Cart/ListItem/CartListItem.tsx","pages/Cart/List/CartList.tsx","pages/Cart/Cart.tsx","pages/Status/Status.tsx","pages/Promo/Promo.tsx","pages/NoArea/NoArea.tsx","store/actions/twoGisSuggests.ts","tools/twoGis/api/common.ts","tools/twoGis/getSuggestsList.ts","components/Input/Input.tsx","pages/AddressSimple/AddressSimple.tsx","tools/noop.ts","pages/AddressFullAll/AddressFullAll.tsx","store/actions/addressFullPage.ts","pages/AddressFullApartment/AddressFullApartment.tsx","pages/AddressFullDoorCode/AddressFullDoorCode.tsx","pages/AddressFullEntrance/AddressFullEntrance.tsx","pages/AddressFullFloor/AddressFullFloor.tsx","pages/AddressFullPhone/AddressFullPhone.tsx","pages/Error/Error.tsx","components/Spinner/Spinner.tsx","pages/Wait/Wait.tsx","tools/new-spatial-navigation.js","components/Root/Root@sberbox.tsx","style/const/layout@touch.ts","components/Text/Body@touch.ts","components/Text/Button@touch.ts","components/HeaderButton/HeaderButton@touch.tsx","components/HeaderAddress/HeaderAddress@touch.tsx","components/HeaderCart/HeaderCart@touch.tsx","components/Header/Header@touch.tsx","components/AppLayout/AppLayout@touch.tsx","components/Text/Footnote@touch.ts","pages/Cart/ListItem/CartListItem@touch.tsx","pages/Cart/List/CartList@touch.tsx","components/Pin/Pin@touch.tsx","components/Text/Paragraph@touch.ts","components/Text/Headline@touch.ts","pages/Cart/Info/CartInfo@touch.tsx","pages/Cart/Cart@touch.tsx","pages/Catalog/ListItem/CatalogListItem@touch.tsx","pages/Catalog/List/CatalogList@touch.tsx","pages/Catalog/Catalog@touch.tsx","components/Slider/Slider.tsx","pages/Promo/Promo@touch.tsx","pages/Status/Status@touch.tsx","components/Root/Root@touch.tsx","components/HeaderButton/HeaderButton@portal.tsx","components/HeaderAddress/HeaderAddress@portal.tsx","components/HeaderCart/HeaderCart@portal.tsx","components/HeaderBack/HeaderBack@portal.tsx","components/Header/Header@portal.tsx","style/const/layout@portal.ts","components/AppLayout/AppLayout@portal.tsx","pages/Catalog/ListItem/CatalogListItem@portal.tsx","pages/Catalog/List/CatalogList@portal.tsx","pages/Catalog/Skeleton/CatalogSkeleton@portal.tsx","pages/Catalog/Catalog@portal.tsx","components/Button/Button@portal.tsx","pages/Cart/Info/CartInfo@portal.tsx","pages/Cart/ListItem/CartListItem@portal.tsx","pages/Cart/List/CartList@portal.tsx","pages/Cart/Cart.const/portal.ts","pages/Cart/Cart@portal.tsx","pages/Status/Status@portal.tsx","pages/Promo/Promo@portal.tsx","pages/NoArea/NoArea@portal.tsx","pages/AddressSimple/SuggestItem/AddressSimpleSuggestItem@portal.tsx","pages/AddressSimple/AddressSimple@portal.tsx","components/Input/Input@portal.tsx","pages/AddressFullAll/AddressFullAll@portal.tsx","pages/AddressFullApartment/AddressFullApartment@portal.tsx","pages/AddressFullDoorCode/AddressFullDoorCode@portal.tsx","pages/AddressFullEntrance/AddressFullEntrance@portal.tsx","pages/AddressFullFloor/AddressFullFloor@portal.tsx","pages/AddressFullPhone/AddressFullPhone@portal.tsx","pages/Error/Error@portal.tsx","pages/Wait/Wait@portal.tsx","components/Root/Root@portal.tsx","index.tsx","components/Root/Root.tsx","assets/icons/add.svg","assets/icons/remove.svg","pages/Status/Status.assets/figure-4.svg","components/HeaderAddress/address.svg","components/HeaderCart/HeaderCart.assets/cart.svg","components/Header/Header.assets/logo.svg","pages/Status/Status.assets/figure-1.svg","pages/Status/Status.assets/figure-2.svg","pages/Status/Status.assets/figure-3.svg","pages/Status/Status.assets/figure-5.svg","pages/Status/Status.assets/figure-6.svg","pages/Status/Status.assets/figure-7.svg","pages/Status/Status.assets/figure-8.svg","pages/Status/Status.assets/figure-9.svg","pages/Promo/Promo.assets/popcorn-box_1.png","pages/Promo/Promo.assets/popcorn-box_2.png","pages/Promo/Promo.assets/popcorn-box_3.png","pages/Promo/Promo.assets/popcorn-box_4.png","assets/images/background-tv-sber.jpg","assets/icons/plus.svg","assets/icons/done.svg","components/Pin/shadow.svg","pages/Cart/Cart.assets/bg.jpg","pages/Promo/Promo.assets/popcorn-bites.png","pages/NoArea/NoArea.assets/face.svg","pages/NoArea/NoArea.assets/bg.jpg","pages/Error/Error.assets/circles.svg","pages/Error/Error.assets/warning.svg","components/HeaderBack/HeaderBack.assets/chevron-left.svg","pages/Promo/Promo.assets/popcorn-1.png","pages/Promo/Promo.assets/popcorn-3.png"],"names":["module","exports","isMobile","navigator","window","userAgent","vendor","test","substr","mobileDetect","isPortal","includes","isSberBox","createAction","type","payload","createEmptyAction","closeAppAction","selectProductById","state","itemId","productsData","itemsMap","selectProductDiffById","productsDiffData","selectCartItemById","cart","selectSuggestItemById","twoGisSuggestsData","selectPathname","router","location","pathname","selectHeader","layout","header","formatPrice","price","Math","ceil","prepareCount","cartItem","count","calculateButtonDisabled","productItem","quantityLeft","getQuantityLeftById","productItemDiff","getDisabled","getPriceById","preparePriceById","getOldPriceById","formatSale","oldValue","newValue","String","getCountById","countInCart","min","wantMoreThanHave","canAddMore","doDGApiRequest","async","url","params","paramsString","Object","keys","reduce","acc","key","push","join","response","fetch","ok","statusCode","status","json","doRequest","isStreetSuggest","suggest","isBuildingSuggest","useSelector","mapStateToProps","useReduxSelector","useDispatch","useReduxDispatch","addressChangeInputValueAction","addressClickSuggestItemAction","font","light","normal","regular","medium","semibold","bold","extrabold","duration","defaultMs","timingFn","easeInOut","default","transition","color","white","primary","secondary","tertiary","active","warning","secondary1","secondary2","critical","inactive","liquid1","liquid2","liquid3","card","solidWhite","solidBlack","solidTransparent","StyledRoot","styled","div","AddressSimpleSuggestListItem","index","name","id","addressSimplePage","suggests","dispatch","memoizedOnClick","React","useCallback","memoizedOnFocus","tabIndex","onClick","onFocus","useFocusOnMount","forwardRef","ref","useRef","onMountRef","useEffect","current","HTMLElement","focus","paddingPx","borderSizePx","positionPx","focusBorderMixin","isFocused","borderRadius","css","ruleset","undefined","syntheticFocus","ButtonViews","ButtonSize","mapSizeToButtonParams","l","borderRadiusPx","paddingXPx","paddingYPx","fontSizePx","lineHeightPx","m","s","buttonViewBackgroundMap","StyledButton","size","view","Button","shouldFocusOnMount","shouldLockAfterClick","lockTimeout","disabled","props","mountFocusRef","isDisabled","handleClick","timeoutId","setTimeoutId","useState","isBlocked","Boolean","event","setTimeout","clearTimeout","usePressedState","as","ROUTES","initialState","delivery","minimalPrice","deliveryTime","order","totalCount","totalPrice","orderId","userData","customerName","phoneNumber","addressLocationLatitude","addressLocationLongitude","deviceLocationLatitude","deviceLocationLongitude","address","city","street","house","building","floor","entrance","apartment","doorCode","userModel","catalogPage","selectedItemId","itemsFocusHashMap","screenIndexMap","wrapperXShift","listIndexOffset","catalogPageTouch","catalogPagePortal","cartPage","wrapperYShift","selectedItemIndex","topGradientVisible","bottomGradientVisible","toMinimumPrice","hasRequiredData","makePurchaseButtonView","isMakePurchaseButtonDisabled","personalAddress","cartPageTouch","cartPagePortal","errorPage","title","subtitle","isVisible","text","isBackButtonVisible","inputValue","selectedSuggestItemIndex","suggestListContainerYShift","isSubmitButtonDisabled","submitButtonFocusHash","inputFocusHash","addressSimplePagePortal","addressFullPage","addressInputValue","phoneNumberInputValue","apartmentInputValue","entranceInputValue","floorInputValue","doorCodeInputValue","nextFocus","ADDRESS_FULL_ALL","waitPage","getHasValidAddress","user","addressSimplePageView","action","suggestItem","random","values","result","address_name","prepareSuggestItems","length","max","prepareSuggestListContainerYShift","prepareIsSubmitButtonDisabled","addItemAction","removeItemAction","addressFullValidationOkThunk","getState","currentRoute","goBack","replace","addressFullSuccessThunk","goBackToStart","go","history","goToCatalogThunk","goToCatalogAction","CATALOG","goToPromoThunk","goToPromo","PROMO","validationOkThunk","validationOkAction","STATUS","normalizeProducts","productsMaps","guid","Number","quantity_left","imageUrl","images_urls","stock","assign","computeProductItemsMapBasedOnChanges","productsDiffMap","changes","entries","quantityLeftString","priceString","item","device_location","latitude","longitude","customer_name","phone_num","address_string","door_code","deliveryData","time","minimal_amount","cartModel","countString","shouldRemoveMention","actualCount","filter","cartItemId","clear","order_id","getTotalCount","getTotalPrice","normalizePhone","Array","from","symbol","firstSymbol","otherSymbols","slice","point","full_name","addressComponent","components","number","split","lat","lon","updateUserAddressBasedOnBuilding","input","ADDRESS_FULL_PHONE","ADDRESS_FULL_APARTMENT","ADDRESS_FULL_ENTRANCE","ADDRESS_FULL_FLOOR","ADDRESS_FULL_DOORCODE","inputType","data","fullCardsInViewPort","memoize","fn","store","Map","args","JSON","stringify","has","set","get","screenItemCount","prepareBadgeType","prepareBadgeContent","prepareIndex","memoizedPrepareOrder","catalogPageView","prepareOrder","indexOf","getListIndexOffset","catalogCardWidth","catalogCardGap","getWrapperXShift","fill","_","getScreenIndexMap","oldPrice","isWantMoreThanHave","badgeType","badgeContent","isButtonDisabled","prepareCatalogItemsMap","isEmpty","firstItem","prepareItemsFocusHashMap","prepareBadge","catalogPageTouchView","badge","buttonDisabled","catalogPagePortalView","splitByThousands","n","toString","prepareTotalPrice","prepareToMinimumPrice","getFormattedPersonalAddress","prepareHasRequiredData","formatPhoneNumber","map","digit","renderSpace","prepareLabel","content","cartPageView","label","isMoreButtonDisabled","prepareItemsMap","relatedIndex","getWrapperYShift","calculateMakePurchaseDisabled","calculateMakePurchaseButtonView","prepareTopGradientVisible","prepareBottomGradientVisible","getFormattedPhoneNumber","cartPageTouchView","cartPagePortalView","maxValue","prepareListIndexOffset","addressSimplePagePortalView","addressFullPageView","options","find","value","computeNextFocus","addressFullPagePortalView","routeToTitleMap","CART","ERROR","NO_AREA","ADDRESS_SIMPLE","routeToVisibilityMap","headerView","getTitle","getAddress","getCart","mapOrderErrorTypeToProps","partner","retryButtonText","closeButtonText","payment","timing","errorPageView","waitPageView","askForItemsChangesAction","makePurchaseAction","askForOrderStatusAction","addressSubmitAction","addressFullSubmitAction","createHashHistory","middlewares","thunk","routerMiddleware","next","AssistantClient","close","sendData","action_id","LOCATION_CHANGE","currentPathname","nextPathname","isAddressChanged","process","createReduxStore","recoveryState","routerModel","changeRouter","connectRouter","getRouterModel","reducers","produce","draft","forEach","reducer","getRootReducer","appRecoveryState","compose","applyMiddleware","dispatchToReduxStore","smart_app_data","command","itemsChangesAction","orderErrorAction","addressInputAction","addressInputAddAction","addressFullInputAction","addressFullInputAddAction","addressFullCommentAction","WAIT","castItemSelectorFromStore","ignored_words","items","visible","castCatalogItemSelectorFromStore","serializeAddress","storeUser","confirmed","prepareAddress","source","appInitialData","isArray","onStart","onData","message","AssistantHost","onRequestState","item_selector","foodtech","currentScreen","substring","products","quantity","discountValue","castFromStore","stateString","updateState","onRequestRecoveryState","ready","HeadlineText1","HeadlineText2","HeadlineText3","HeadlineText4","defaultOptions","leading","trailing","useThrottledFn","timeout","dependencies","_useThrottledFn","ButtonText1","ButtonText2","icon","sizePx","StyledHeaderButton","textHeightPx","StyledText","HeaderButton","children","addressIconSizePx","StyledIcon","addressIcon","HeaderAddress","cartIconSizePx","cartIcon","badgeOffsetPx","StyledBadge","span","HeaderCart","StyledHeader","StyledSection","StyledLogo","logoIcon","StyledTitle","preventAllScroll","currentTarget","scrollTop","scrollLeft","StyledContainer","gradientBackground","AppContent","layoutHeight","className","AppLayout","onScroll","useFocusOnChange","hash","onChangeFocusRef","catalogSlideListAction","CaptionText","lineHeight","contentMap","sale","backgroundColorMap","badgeHeightPx","Badge","contentProvider","FootnoteText1","FootnoteText2","BodyText1","BodyText2","StyledThumb","StyledDescription","catalogCardHeight","StyledName","StyledPriceContainer","StyledPrice","StyledOldPrice","StyledCount","isWarning","buttonIconSizePx","isActive","doneIcon","plusIcon","CatalogListItemBadge","StyledIndexBadge","AddAnimation","keyframes","addActiveDurationMs","ShakeAnimation","StyledCatalogListItem","isShaking","CatalogListItemIndexBadge","CatalogListItem","itemFocusHash","isCardActive","isButtonActive","displayCount","setCardActive","setButtonActive","setDisplayCount","prevCountRef","nextCount","useActive","doShake","setShaking","useShake","handleFocus","StyledWrapper","CatalogList","wrapperStyle","useMemo","transform","style","Skeleton","itemWidth","itemHeight","rowCount","columnCount","paddingBetweenColumns","paddingBetweenRows","list","columnIndex","rowIndex","x","y","width","height","rx","ry","skeletonWidthPx","backgroundColor","foregroundColor","CatalogSkeleton","speed","Catalog","StyledPin","StyledBody","StyledKernel","kernelWidthPx","StyledShadow","shadowImage","Pin","ParagraphText1","ParagraphText2","StyledCartInfo","StyledTime","StyledUnit","StyledAddress","StyledPersonal","StyledPersonalLocation","StyledPersonalPhoneNumber","StyledPersonalName","StyledAskPersonal","CartInfoButton","CartInfo","handlePurchaseClick","handleSetAddressClick","GradientFade","kind","yOffset","cartSlideListAction","mapSizeToPx","mapSizeToParams","xxs","xs","IndexBadge","textColorMap","StyledLabel","Label","StyledInfo","isOneLine","StyledSelector","StyledSelectorValue","iconTypeIconMap","less","removeIcon","more","addIcon","remove","selectorIconSizePx","StyledSelectorButton","button","selectorButtonSizePx","iconType","StyledCartListItem","StyledDeleteButton","CartListItem","handleLessClick","handleMoreClick","handleRemoveClick","Infinity","aria-label","preventScroll","e","StyledCartList","StyledTotalPrice","StyledMinimalPrice","CartList","StyledBackground","bgImage","Cart","StatusButton","StatusContainer","StatusOrderNumber","StatusOrderTime","StatusFigure","bgUrl","topPx","leftPx","figureList","figureIcon1","figureIcon2","figureIcon3","figureIcon4","figureIcon5","figureIcon6","figureIcon7","figureIcon8","figureIcon9","Status","handleButtonClick","TextContainer","Title","Subtitle","ButtonContainer","PopcornContainer","popcornBites","popcornList","popcorn1","popcorn2","popcorn3","popcorn4","Popcorn","popcornStyle","Promo","handleClickSubmitButton","handleCloseButtonClick","layoutContentHeight","StyledFaceIcon","faceIcon","StyledSubtitle","StyledButtonContainer","NoArea","handleChangeButtonClick","setTwoGisSuggests","regionData","searchRegionData","regionList","regions","memoizedGetSuggests","memoizeResolvedPromise","fields","suggestType","suggest_type","convertParams","isPointInBBox","bbox","getPolygonList","sort","a","b","getSuggestsList","q","locale","polygonList","parseFloat","Promise","all","polygonName","polygon","then","meta","isErrorResponse","Error","error","catch","Sentry","responseList","isMinified","StyledInput","Input","onSubmit","onChange","onRootKeyPress","shouldFocusInputOnMount","setFocus","isUsing","setUsing","inputRef","onMountRootRef","rootRef","handleRootFocus","handleRootBlur","handleRootKeyPress","defaultPrevented","handleInputKeyPress","stopPropagation","isTitleMinified","onBlur","onKeyPress","StyledInputContainer","StyledSuggestList","hidden","StyledSuggestListContainer","yShift","AddressSimple","isKeyboardExpanded","useMediaQuery","submitButtonRef","inputRootRef","memoizedOnInputChange","memoizedOnClickButton","noop","StyledFirstRow","StyledSecondRow","StyledThirdRow","StyledFourthRow","SubmitButton","AddressFullAll","handleSubmitClick","addressFullPhoneNumberInputChangeAction","addressFullApartmentInputChangeAction","addressFullEntranceInputChangeAction","addressFullFloorInputChangeAction","addressFullDoorCodeInputChangeAction","AddressFullApartment","handleInputChange","target","handleInputSubmit","AddressFullDoorCode","AddressFullEntrance","AddressFullFloor","AddressFullPhone","nativeEvent","InputEvent","ErrorPage","Circles","circlesImage","WarningIcon","warningIcon","handleRetryButtonClick","Spinner","spinnerImage","Text","Wait","spatialNavigationInit","ARROW_KEY_CODE","37","38","39","40","mapOfBoundRect","startingPoint","savedSearchOrigin","element","rect","navigate","dir","searchOrigin","document","activeElement","body","querySelector","elementStyle","getComputedStyle","invisibleStyle","getPropertyValue","documentElement","getBoundingClientRect","left","right","top","bottom","isVisibleInScroller","scroller","getScrollContainer","findSearchOrigin","console","log","eventTarget","elementFromPosition","elementFromPoint","isFocusable","isContainer","getSpatialNavigationContainer","container","nodeName","contentDocument","bestInsideCandidate","spatialNavigationSearch","candidates","getSpatialNavigationCandidates","mode","focusingController","parentContainer","parentElement","parent","navigateChain","bestCandidate","createSpatNavEvents","scrollingController","isScrollable","isScrollBoundary","moveScroll","isHTMLScrollBoundary","ownerDocument","option","childElementCount","getElementsByTagName","elem","isDelegableContainer","concat","getFilteredSpatialNavigationCandidates","targetElement","filteredCandidates","this","bestTarget","internalCandidates","externalCandidates","insideOverlappedCandidates","focusableAreas","overlappedCandidates","isEntirelyVisible","getOverlappedCandidates","defaultContainer","defaultCandidates","contains","candidate","fullyOverlapped","overlappedByParent","elm","flat","currentElm","getClosestElement","getDistanceFromPoint","getInnerDistance","selectBestCandidateFromEdge","selectBestCandidate","innerTarget","descendantsBest","splice","originalContainer","eventTargetRect","candidateRect","candidateBody","isOutside","isInside","spatialNavigationFunction","currentTargetRect","distanceFunction","alignedCandidates","isAligned","getAbsoluteDistance","getDistance","frameElement","minDistance","POSITIVE_INFINITY","minDistanceElements","i","distance","getEuclideanDistance","scrollContainer","isScrollContainer","focusables","prototype","call","eventType","containerElement","currentElement","direction","triggeredEvent","CustomEvent","bubbles","cancelable","detail","causedTarget","dispatchEvent","readCssVar","varName","trim","currentOption","nextContainer","offset","isCSSSpatNavContain","overflowX","overflowY","isOverflow","scrollWidth","clientWidth","scrollHeight","clientHeight","winScrollY","winScrollX","abs","elementRect","nearestScroller","scrollerRect","DOMRect","innerWidth","innerHeight","tagName","getAttribute","isAtagWithoutHref","isActuallyDisabled","inert","isExpresslyInert","isVisibleStyleProperty","opacity","isBeingRendered","offsetX","parseInt","offsetWidth","offsetY","offsetHeight","isNaN","hitTestPoint","middle","leftTop","rightBottom","elemFromPoint","hitTest","containerRect","thisVisibility","childRect","rightEdgeCheck","leftEdgeCheck","topEdgeCheck","bottomEdgeCheck","rect1","rect2","isRightSide","isBelow","points","getEntryAndExitPoints","P1","entryPoint","exitPoint","P2","sqrt","pow","baseEdge","up","down","orthogonalBias","alignBias","A","B","C","intersectionRect","intersection_rect","area","new_location","new_max_point","getIntersectionRect","D","boundingClientRect","toFixed","enableExperimentalAPIs","currentKeyMode","__spatialNavigation__","keyMode","getInitialAPIs","canScroll","findTarget","findCandidate","bestNextTarget","findCandidates","bind","findNextTarget","getDistanceFromTarget","candidateElement","getExperimentalAPI","seal","_keymode","setStartingPoint","__getSpatNavState","searchOriginRect","Element","CSS","registerProperty","syntax","inherits","initialValue","addEventListener","keyCode","shiftKey","ctrlKey","metaKey","altKey","focusNavigableArrowKey","startPosition","selectionStart","endPosition","selectionEnd","handlingEditableElement","preventDefault","clientX","clientY","requestAnimationFrame","scrollIntoView","behavior","block","inline","resolve","IntersectionObserver","entry","isIntersecting","threshold","observe","HTMLButtonElement","click","RootSberBox","path","HeaderButtonTouch","HeaderAddressTouch","HeaderCartTouch","backButtonIconSizePx","StyledBackButton","backButtonIcon","HeaderTouch","Container","AppLayoutTouch","StyledCartListItemTouch","StyledCountTouchButton","isDanger","StyledRemoveIcon","CartListItemTouch","LessIcon","MoreIcon","StyledCartListTouch","CartListTouch","StyledCartInfoTouch","StyledPlaceInfo","CartInfoTouch","CartTouch","StyledListItem","StyledButtonsContainer","StyledTouchButton","CatalogListItemTouch","isPossibleChangeCountActive","handleClickAdd","handleClickRemove","RemoveIcon","AddIcon","StyledCatalogList","StyledScrollableCatalogContainer","CatalogListTouch","itemIds","itemsList","CatalogTouch","StyledSliderContainer","StyledSlider","StyledSlide","popcornBoxList","popcornBox1","popcornBox2","popcornBox3","popcornBox4","auto","onSlideChange","slide","setSlide","isDragging","setDragging","springProps","setSpringProps","useSprings","gestureBinds","useGesture","onDrag","movement","xDelta","xDir","cancel","first","lower","upper","drag","delay","intervalId","setInterval","targetIndex","clearInterval","to","position","willChange","PopcornBox","SliderPinsContainer","CornsContainer","Corn","PromoTouch","promoRef","promoWidth","setPromoWidth","currentSlideIndex","setCurrentSlideIndex","cornsList","StatusTouchContainer","StatusTouchOrderInfo","StatusTouchOrderNumber","StatusTouchOrderTime","StatusTouchFigure","StatusTouch","touchFigureList","RootTouch","HeaderButtonPortal","HeaderAddressPortal","isCartEmpty","buttonText","HeaderCartPortal","StyledHeaderBack","AppLayoutPortal","buttonSizePx","buttonOffsetXPx","buttonOffsetYPx","CatalogListItemPortal","StyledSwiperSlide","CatalogListPortal","swiperRef","useLayoutEffect","HTMLDivElement","Swiper","slidesPerView","spaceBetween","initialSlide","roundLengths","normalizeSlideIndex","slidesOffsetBefore","slidesOffsetAfter","on","slideChange","activeIndex","slideTo","onKeyDown","nextIndex","removeEventListener","CatalogSkeletonPortal","CatalogPortal","ButtonPortal","CartInfoPortal","StyledInfoContainer","StyledRemoveButton","CartListItemPortal","CartListPortal","centeredSlides","centeredSlidesBounds","maxIndex","updateSize","updateSlides","updateProgress","updateSlidesClasses","isNotEnoughToMinimumPrice","bottomGradientYOffset","CartPortal","StatusPortal","popcornPromo","StyledPromoBadge","StyledPromoTitle","StyledPromoSubtitle","PromoPortal","NoAreaPortal","AddressSimpleSuggestListItemPortal","AddressSimplePortal","currentListIndex","setCurrentListIndex","setKeyboardExpanded","onWindowResize","useKeyboardExpanded","suggestItems","isTopGradientVisible","isBottomGradientVisible","InputPortal","onRootClick","handleRootClick","AddressFullAllPortal","AddressFullApartmentPortal","AddressFullDoorCodePortal","AddressFullEntrancePortal","AddressFullFloorPortal","AddressFullPhonePortal","ErrorPortal","WaitPortal","RootPortal","dsn","renderApp","App","ReactDOM","render","getElementById","REACT_APP_REV"],"mappings":"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","file":"static/js/main.781a7f2c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/spinner.ee0e70c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/bg@touch.1c0b9508.jpg\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/popcorn-promo.04f6d88f.png\";","export const mobileDetect = () => {\n    const navigator = window.navigator.userAgent || window.navigator.vendor;\n\n    /* eslint-disable */\n    return (\n        /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n            navigator,\n        ) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n            navigator.substr(0, 4),\n        )\n    );\n    /* eslint-enable */\n};\n\nexport const isMobile = mobileDetect();\n\nexport const isPortal = window.navigator.userAgent.includes('stargate');\n\nexport const isSberBox = window.navigator.userAgent.includes('SberBox');\n\nexport const isDesktop = () => !isPortal && !isSberBox && !isMobile;\n","export function createAction<T extends string, P>(type: T, payload: P) {\n    return {\n        type,\n        payload,\n    };\n}\n\nexport function createEmptyAction<T extends string>(type: T) {\n    return {\n        type,\n    };\n}\n","import { createEmptyAction } from 'tools/create-action';\n\nexport const closeAppAction = () => createEmptyAction('CLOSE_APP');\n\nexport const applyItemsChanges = () => createEmptyAction('APPLY_ITEMS_CHANGES');\n\nexport const revertUserChanges = () => createEmptyAction('REVERT_USER_CHANGES');\n","import { AppState } from '../constants';\n\nexport const selectProductById = (state: AppState, itemId: string) => state.productsData.itemsMap[itemId];\nexport const selectProductDiffById = (state: AppState, itemId: string) => state.productsDiffData.itemsMap[itemId];\nexport const selectCartItemById = (state: AppState, itemId: string) => state.cart.itemsMap[itemId];\nexport const selectSuggestItemById = (state: AppState, itemId: string) => state.twoGisSuggestsData.itemsMap[itemId];\nexport const selectPathname = (state: AppState) => state.router.location.pathname;\nexport const selectHeader = (state: AppState) => state.layout.header;\n","import { AppState } from 'store/constants';\nimport { selectCartItemById, selectProductById, selectProductDiffById } from 'store/selectors';\n\nexport const formatPrice = (price: number) => Math.ceil(price / 100);\n\nexport const prepareCount = (state: AppState, itemId: string) => {\n    const cartItem = selectCartItemById(state, itemId);\n\n    return cartItem ? cartItem.count : 0;\n};\n\nexport const calculateButtonDisabled = (state: AppState, itemId: string) => {\n    const productItem = selectProductById(state, itemId);\n    const cartItem = selectCartItemById(state, itemId);\n\n    return cartItem && cartItem.count === productItem.quantityLeft;\n};\n\nexport const getQuantityLeftById = (state: AppState, itemId: string) => {\n    const productItem = selectProductById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n\n    if (productItemDiff && typeof productItemDiff.quantityLeft !== 'undefined') {\n        return productItemDiff.quantityLeft;\n    }\n\n    return productItem.quantityLeft;\n};\n\nexport const getDisabled = (state: AppState, itemId: string) => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n\n    return quantityLeft === 0;\n};\n\nexport const getPriceById = (state: AppState, itemId: string) => {\n    const productItem = selectProductById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        return productItemDiff.price;\n    }\n\n    return productItem.price;\n};\n\nexport const preparePriceById = (state: AppState, itemId: string) => {\n    const price = getPriceById(state, itemId);\n\n    return formatPrice(price);\n};\n\nexport const getOldPriceById = (state: AppState, itemId: string) => {\n    const productItem = selectProductById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        return formatPrice(productItem.price);\n    }\n\n    return undefined;\n};\n\nexport const formatSale = (oldValue: number, newValue: number) =>\n    String(Math.ceil(((oldValue - newValue) / oldValue) * 100));\n\nexport const getCountById = (state: AppState, itemId: string) => {\n    const cartItem = selectCartItemById(state, itemId);\n    const countInCart = cartItem ? cartItem.count : 0;\n    const quantityLeft = getQuantityLeftById(state, itemId);\n\n    return Math.min(countInCart, quantityLeft);\n};\n\nexport const wantMoreThanHave = (state: AppState, itemId: string) => {\n    const cartItem = selectCartItemById(state, itemId);\n    const quantityLeft = getQuantityLeftById(state, itemId);\n\n    return cartItem && cartItem.count > quantityLeft;\n};\n\nexport const canAddMore = (state: AppState, itemId: string) => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const cartItem = selectCartItemById(state, itemId);\n\n    return (\n        quantityLeft !== 0 && // есть остатки\n        (!cartItem || cartItem.count < quantityLeft) // текущее кол-во меньше остатков\n    );\n};\n","import { doRequest } from 'tools/request';\n\nimport { DGApiResponse } from './common';\n\nconst apiKey = process.env.REACT_APP_ENVIRONMENT === 'production' ? 'rukrby5549' : 'ruvqwj0703';\n\nconst apiPrefix = 'https://catalog.api.2gis.ru';\n\nexport const doDGApiRequest = async <Params, ResponseType>(\n    url: string,\n    params: Params,\n): Promise<DGApiResponse<ResponseType>> => {\n    const response = await doRequest<DGApiResponse<ResponseType>>(`${apiPrefix}${url}`, {\n        key: apiKey,\n        ...params,\n    });\n\n    return response;\n};\n","const isStatusCode4xx = (statusCode: number) => statusCode >= 400 && statusCode <= 499;\n\nexport const doRequest = async <Result = unknown>(\n    url: string,\n    params: Record<string, string | number | boolean>,\n): Promise<Result> => {\n    const paramsString = Object.keys(params)\n        .reduce<string[]>((acc, key) => {\n            acc.push(`${key}=${params[key as keyof typeof params]}`);\n\n            return acc;\n        }, [])\n        .join('&');\n\n    const response = await fetch(`${url}?${paramsString}`);\n\n    // здесь выбрасываем только сетевые и серверные ошибки\n    if (!response.ok && !isStatusCode4xx(response.status)) {\n        throw response.status;\n    }\n\n    return response.json() as Promise<Result>;\n};\n","/* eslint-disable @typescript-eslint/camelcase */\nimport { doDGApiRequest } from './doApiRequest';\nimport { DGLocale, DGListResult, DGLatLng } from './common';\n\ntype DGGetSuggestsParams = {\n    locale: DGLocale;\n    q: string;\n    fields: string[];\n    suggestType: string;\n    type: string[];\n    polygon: string;\n};\n\ninterface DGApiGetSuggestsParams {\n    locale: DGLocale;\n    q: string;\n    fields: string;\n    suggest_type: string;\n    type: string;\n    polygon: string;\n}\n\nexport interface DGSuggest {\n    id: string;\n    full_name: string;\n    name: string;\n    search_attributes: {\n        suggested_text: string;\n    };\n    type: string;\n    point?: DGLatLng;\n}\n\nexport interface DGStreetSuggest extends DGSuggest {\n    type: 'street';\n}\n\nexport function isStreetSuggest(suggest: DGSuggest): suggest is DGStreetSuggest {\n    return suggest.type === 'street';\n}\n\ninterface DGBuildingAddressComponent {\n    number: string;\n    street: string;\n    street_id: string;\n    type: 'street_number';\n}\n\ninterface DGBuildingAddress {\n    building_id: string;\n    components: DGBuildingAddressComponent[];\n    postcode: string;\n}\n\nexport interface DGBuildingSuggest extends DGSuggest {\n    type: 'building';\n    address_name: string; // Кутузовский проспект, 43 ст2\n    purpose_name: string; // Жилой дом с административными помещениями\n    address: DGBuildingAddress;\n    point: DGLatLng;\n}\n\nexport function isBuildingSuggest(suggest: DGSuggest): suggest is DGBuildingSuggest {\n    return suggest.type === 'building';\n}\n\ninterface DGGetSuggestsResult {\n    total: number;\n    items: DGSuggest[];\n}\n\nconst convertParams = ({ fields, type, suggestType, ...params }: DGGetSuggestsParams): DGApiGetSuggestsParams => ({\n    ...params,\n    fields: fields.join(','),\n    type: type.join(','),\n    suggest_type: suggestType,\n});\n\nconst suggestsEndpointPath = '/3.0/suggests';\n\nexport const getSuggests = async (params: DGGetSuggestsParams) => {\n    return doDGApiRequest<DGApiGetSuggestsParams, DGListResult<DGSuggest>>(suggestsEndpointPath, convertParams(params));\n};\n","import { useSelector as useReduxSelector } from 'react-redux';\nimport { AppState } from 'store/constants';\n\nexport function useSelector<T = unknown>(mapStateToProps: (state: AppState) => T) {\n    return useReduxSelector<AppState, T>(mapStateToProps);\n}\n","import { useDispatch as useReduxDispatch } from 'react-redux';\nimport { AppDispatch } from 'store/constants';\n\nexport const useDispatch = () => useReduxDispatch<AppDispatch>();\n","import { createAction } from 'tools/create-action';\n\nexport const addressChangeInputValueAction = (payload: string) => createAction('address/CHANGE_INPUT_VALUE', payload);\n\nexport const addressSelectSuggestItemAction = (payload: number) => createAction('address/SELECT_SUGGEST_ITEM', payload);\n\nexport const addressClickSuggestItemAction = (payload: string) => createAction('address/CLICK_SUGGEST_ITEM', payload);\n","// TODO: FRNTND-1 mv to npm package\n\nexport const font = {\n    weight: {\n        light: 300,\n        normal: 400,\n        regular: 400,\n        medium: 500,\n        semibold: 600,\n        bold: 700,\n        extrabold: 800,\n    },\n};\n","// TODO: FRNTND-1 mv to npm package\n\nconst duration = {\n    defaultMs: 200,\n};\n\nconst timingFnEaseInOut = 'ease-in-out';\n\nconst timingFn = {\n    easeInOut: timingFnEaseInOut,\n    default: timingFnEaseInOut,\n};\n\nexport const transition = {\n    duration,\n    timingFn,\n    default: `${duration.defaultMs}ms ${timingFn.default}`,\n};\n","// TODO: FRNTND-1 mv to npm package\n\nexport const color = {\n    text: {\n        white: '#ffffff',\n        primary: '#ffffff',\n        secondary: 'rgba(255, 255, 255, 0.56)',\n        tertiary: 'rgba(255, 255, 255, 0.28)',\n        active: '#2ac673',\n        warning: '#f6650a',\n    },\n    button: {\n        secondary1: 'rgba(255, 255, 255, 0.12)',\n        secondary2: 'rgba(0, 0, 0, 0.56)',\n        primary: '#12a557',\n        warning: '#f6650a',\n        critical: '#dc283a',\n        inactive: '#3b3f44',\n    },\n    background: {\n        default: '#080808',\n        secondary: '#8F8F8F',\n    },\n    surface: {\n        liquid1: 'rgba(255, 255, 255, 0.06)',\n        liquid2: 'rgba(255, 255, 255, 0.12)',\n        liquid3: 'rgba(255, 255, 255, 0.20)',\n        card: 'rgba(255, 255, 255, 0.12)',\n        solidWhite: '#fff',\n        solidBlack: '#080808',\n        solidTransparent: 'transparent',\n    },\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { addressClickSuggestItemAction, addressSelectSuggestItemAction } from 'store/actions/addressSimplePage';\nimport { font } from 'style/const/font';\nimport { transition } from 'style/const/transition';\nimport { color } from 'style/const/color';\n\nexport const SUGGEST_ITEM_HEIGHT = 112;\nexport const SUGGEST_ITEM_MARGIN = 24;\n\nconst StyledRoot = styled.div`\n    margin-top: ${SUGGEST_ITEM_MARGIN}px;\n\n    height: ${SUGGEST_ITEM_HEIGHT}px;\n    padding: 36px 32px;\n    border: 4px solid transparent;\n    box-sizing: border-box;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n\n    border-radius: 24px;\n    font-weight: ${font.weight.medium};\n    font-size: 32px;\n    color: #fff;\n    background: ${color.surface.liquid1};\n\n    transition: border ${transition.default};\n\n    &:focus {\n        border-color: #68ea68;\n    }\n`;\n\ninterface SuggestListItemProps {\n    index: number;\n}\n\nexport interface AddressSimpleSuggestItemView {\n    id: string;\n    name: string;\n}\n\nexport const AddressSimpleSuggestListItem: React.FC<SuggestListItemProps> = ({ index }) => {\n    const { name, id } = useSelector(({ addressSimplePage: { suggests } }) => suggests[index]);\n    const dispatch = useDispatch();\n    const memoizedOnClick = React.useCallback(() => {\n        dispatch(addressClickSuggestItemAction(id));\n    }, [dispatch, id]);\n    const memoizedOnFocus = React.useCallback(() => {\n        dispatch(addressSelectSuggestItemAction(index));\n    }, [dispatch, index]);\n\n    return (\n        <StyledRoot tabIndex={0} onClick={memoizedOnClick} onFocus={memoizedOnFocus}>\n            {name}\n        </StyledRoot>\n    );\n};\n","import React from 'react';\n\nexport function useFocusOnMount<T>(forwardRef?: React.RefObject<T>) {\n    const ref = React.useRef<T>(null);\n\n    const onMountRef = forwardRef || ref;\n\n    React.useEffect(() => {\n        if (onMountRef.current instanceof HTMLElement) {\n            onMountRef.current.focus();\n        }\n    }, [onMountRef]);\n\n    return onMountRef;\n}\n","import { transition } from './transition';\nimport { color } from './color';\n\n// TODO: FRNTND-1 mv to npm package\n\nexport const focus = {\n    paddingPx: 4,\n    borderSizePx: 4,\n    color: color.text.active,\n    transition: transition.default,\n};\n","import { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { focus } from 'style/const/focus';\n\nexport const syntheticFocus = (ruleset: FlattenSimpleInterpolation, isFocused?: boolean) => {\n    if (isFocused === undefined) {\n        return css`\n            &:focus {\n                ${ruleset}\n            }\n        `;\n    }\n\n    return isFocused && ruleset;\n};\n\ninterface FocusMixinOptions {\n    isFocused?: boolean;\n    borderRadius?: number;\n}\n\nconst positionPx = -1 * (focus.paddingPx + focus.borderSizePx);\n\nexport const focusBorderMixin = ({ isFocused, borderRadius }: FocusMixinOptions) => css`\n    &::after {\n        content: '';\n\n        position: absolute;\n        top: ${positionPx}px;\n        bottom: ${positionPx}px;\n        left: ${positionPx}px;\n        right: ${positionPx}px;\n\n        display: block;\n        box-sizing: border-box;\n\n        border-width: ${focus.borderSizePx}px;\n        border-color: ${focus.color};\n        border-style: solid;\n        border-radius: ${borderRadius ? borderRadius + focus.paddingPx * 2 : 0}px;\n\n        opacity: 0;\n\n        transition: opacity ${focus.transition};\n\n        z-index: 2;\n        pointer-events: none;\n    }\n\n    ${syntheticFocus(\n        css`\n            &::after {\n                opacity: 1;\n            }\n        `,\n        isFocused,\n    )}\n`;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useFocusOnMount } from 'hooks/useFocusOnMount';\nimport { color } from 'style/const/color';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport { font } from 'style/const/font';\n\nexport enum ButtonViews {\n    primary = 'primary',\n    secondary = 'secondary',\n}\n\nexport enum ButtonSize {\n    l = 'l',\n    m = 'm',\n    s = 's',\n}\n\ninterface ButtonParams {\n    borderRadiusPx: number;\n    paddingXPx: number;\n    paddingYPx: number;\n    fontSizePx: number;\n    lineHeightPx: number;\n}\n\nconst mapSizeToButtonParams: Record<ButtonSize, ButtonParams> = {\n    [ButtonSize.l]: {\n        borderRadiusPx: 32,\n        paddingXPx: 56,\n        paddingYPx: 32,\n        fontSizePx: 32,\n        lineHeightPx: 40,\n    },\n    [ButtonSize.m]: {\n        borderRadiusPx: 24,\n        paddingXPx: 48,\n        paddingYPx: 24,\n        fontSizePx: 32,\n        lineHeightPx: 40,\n    },\n    [ButtonSize.s]: {\n        borderRadiusPx: 24,\n        paddingXPx: 28,\n        paddingYPx: 16,\n        fontSizePx: 28,\n        lineHeightPx: 32,\n    },\n};\n\nconst buttonViewBackgroundMap: Record<ButtonViews, string> = {\n    primary: color.button.primary,\n    secondary: color.button.secondary1,\n};\n\ninterface StyledButtonProps {\n    view: ButtonViews;\n    size: ButtonSize;\n}\nconst StyledButton = styled.div<StyledButtonProps>`\n    position: relative;\n\n    ${({ size }) => {\n        const { borderRadiusPx, paddingXPx, paddingYPx, fontSizePx, lineHeightPx } = mapSizeToButtonParams[size];\n\n        return css`\n            padding: ${paddingYPx}px ${paddingXPx}px;\n            font-size: ${fontSizePx}px;\n            line-height: ${lineHeightPx}px;\n            border-radius: ${borderRadiusPx}px;\n        `;\n    }}\n\n    border: none;\n    white-space: nowrap;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    transition: background-color 0.3s ease-in-out;\n\n    background-color: ${({ view }) => buttonViewBackgroundMap[view]};\n\n    font-family: inherit;\n    font-weight: ${font.weight.semibold};\n    color: ${color.text.primary};\n\n    ${({ size }) => focusBorderMixin({ borderRadius: mapSizeToButtonParams[size].borderRadiusPx })}\n\n    &[disabled] {\n        opacity: 0.5;\n    }\n`;\n\nexport interface ButtonProps {\n    className?: string;\n    shouldFocusOnMount?: boolean;\n    forwardRef?: React.RefObject<HTMLButtonElement>;\n    view: ButtonViews;\n    disabled?: boolean;\n    size?: ButtonSize;\n    shouldLockAfterClick?: boolean;\n    lockTimeout?: number;\n    onClick?: (event: React.SyntheticEvent<HTMLButtonElement>) => void;\n    onFocus?: (event: React.FocusEvent<HTMLButtonElement>) => void;\n}\n\nconst pressedStateTimeoutMs = 8000;\n\nconst usePressedState = ({\n    disabled,\n    shouldLockAfterClick,\n    lockTimeout = pressedStateTimeoutMs,\n    onClick,\n}: Pick<ButtonProps, 'disabled' | 'shouldLockAfterClick' | 'lockTimeout' | 'onClick'>) => {\n    const [timeoutId, setTimeoutId] = React.useState(0);\n\n    // если таймаут установлен - кнопка заблокирована\n    const isBlocked = Boolean(timeoutId);\n\n    const handleClick = React.useCallback(\n        (event: React.SyntheticEvent<HTMLButtonElement>) => {\n            if (shouldLockAfterClick && !timeoutId) {\n                setTimeoutId(setTimeout(() => setTimeoutId(0), lockTimeout));\n            }\n            onClick?.(event);\n        },\n        [shouldLockAfterClick, lockTimeout, timeoutId, onClick],\n    );\n\n    React.useEffect(() => {\n        const id = timeoutId;\n        return () => {\n            if (id) {\n                clearTimeout(id);\n            }\n        };\n    }, [timeoutId]);\n\n    return {\n        isDisabled: disabled || isBlocked,\n        handleClick,\n    };\n};\n\nexport const Button: React.FC<ButtonProps> = ({\n    shouldFocusOnMount,\n    forwardRef,\n    shouldLockAfterClick,\n    lockTimeout,\n    onClick,\n    disabled,\n    size = ButtonSize.m,\n    ...props\n}) => {\n    const mountFocusRef = useFocusOnMount<HTMLButtonElement>();\n    const ref = forwardRef || (shouldFocusOnMount ? mountFocusRef : null);\n    const { isDisabled, handleClick } = usePressedState({\n        disabled,\n        shouldLockAfterClick,\n        lockTimeout,\n        onClick,\n    });\n\n    return (\n        <StyledButton\n            as=\"button\"\n            type=\"button\"\n            size={size}\n            ref={ref}\n            disabled={isDisabled}\n            onClick={handleClick}\n            {...props}\n        />\n    );\n};\n","export enum ROUTES {\n    CATALOG = '/catalog',\n    CART = '/cart',\n    STATUS = '/status',\n    ADDRESS_SIMPLE = '/address-simple',\n    ADDRESS_FULL_ALL = '/address-full/all',\n    ADDRESS_FULL_PHONE = '/address-full/phone',\n    ADDRESS_FULL_APARTMENT = '/address-full/apartment',\n    ADDRESS_FULL_ENTRANCE = '/address-full/entrance',\n    ADDRESS_FULL_FLOOR = '/address-full/floor',\n    ADDRESS_FULL_DOORCODE = '/address-full/door-code',\n    PROMO = '/promo',\n    NO_AREA = '/no-area',\n    ERROR = '/error',\n    WAIT = '/wait',\n}\n","import { ButtonViews } from 'components/Button/Button';\nimport { LocationState } from 'history';\nimport { AddressSimpleSuggestItemPortalView } from 'pages/AddressSimple/SuggestItem/AddressSimpleSuggestItem@portal';\nimport { CartListItemPortalViewProps } from 'pages/Cart/ListItem/CartListItem@portal';\nimport { ThunkAction } from 'redux-thunk';\nimport { AppActionTypes } from 'types/app-actions';\nimport { DGSuggest } from 'tools/twoGis/api/suggest';\nimport { RouterState, RouterAction } from 'connected-react-router';\nimport { CatalogListItemViewProps } from 'pages/Catalog/ListItem/CatalogListItem';\nimport { CatalogListItemTouchViewProps } from 'pages/Catalog/ListItem/CatalogListItem@touch';\nimport { CatalogListItemPortalViewProps } from 'pages/Catalog/ListItem/CatalogListItem@portal';\nimport { CartListItemViewProps } from 'pages/Cart/ListItem/CartListItem';\nimport { CartListItemTouchViewProps } from 'pages/Cart/ListItem/CartListItem@touch';\nimport { AddressSimpleSuggestItemView } from 'pages/AddressSimple/SuggestItem/AddressSimpleSuggestItem';\n\nimport { StoreProductItem, StoreProductItemDiff } from './products';\nimport { StoreUser } from './user';\nimport { ROUTES } from './router';\nimport { ErrorPageProps } from './error';\n\nexport const initialState = {\n    delivery: {\n        minimalPrice: 0,\n        deliveryTime: 0,\n    },\n    cart: {\n        itemsMap: {} as Record<string, CartItem>,\n        order: [] as string[],\n        totalCount: 0,\n        // discount value?\n        totalPrice: 0, // в копейках\n        orderId: '',\n    },\n    productsData: {\n        itemsMap: {} as Record<string, StoreProductItem>,\n    },\n    twoGisSuggestsData: {\n        itemsMap: {} as Record<string, DGSuggest>,\n    },\n    productsDiffData: {\n        itemsMap: {} as Record<string, StoreProductItemDiff>,\n    },\n    // здесь важно поставить undefined, подробности смотри в редюсере роутера\n    router: (undefined as unknown) as RouterState<LocationState>,\n    userData: {\n        customerName: '',\n        phoneNumber: '',\n        addressLocationLatitude: '',\n        addressLocationLongitude: '',\n        // addressLocationLatitude: '55.737209', // Москва, Кутузовский проспект\n        // addressLocationLongitude: '37.538145', // Москва, Кутузовский проспект\n        // addressLocationLatitude: '59.84112819369227', // Питер, Дачный проспект\n        // addressLocationLongitude: '30.25827884674072', // Питер, Дачный проспект\n        // addressLocationLatitude: '59.940184', // Питер, Дворцовая набережная\n        // addressLocationLongitude: '30.315266', // Питер, Дворцовая набережная\n        deviceLocationLatitude: '',\n        deviceLocationLongitude: '',\n        address: '',\n        city: '',\n        street: '',\n        house: '',\n        building: '',\n        floor: '',\n        entrance: '',\n        apartment: '',\n        doorCode: '',\n    } as StoreUser,\n    userModel: {\n        customerName: '',\n        phoneNumber: '',\n        addressLocationLatitude: '',\n        addressLocationLongitude: '',\n        deviceLocationLatitude: '',\n        deviceLocationLongitude: '',\n        address: '',\n        city: '',\n        street: '',\n        house: '',\n        building: '',\n        floor: '',\n        entrance: '',\n        apartment: '',\n        doorCode: '',\n    } as StoreUser,\n    catalogPage: {\n        selectedItemId: '',\n        order: [] as string[],\n        itemsMap: {} as Record<string, CatalogListItemViewProps>,\n        itemsFocusHashMap: {} as Record<string, number>,\n        screenIndexMap: {} as Record<string, number>,\n        wrapperXShift: 0,\n        listIndexOffset: 0,\n    },\n    catalogPageTouch: {\n        order: [] as string[],\n        itemsMap: {} as Record<string, CatalogListItemTouchViewProps>,\n        screenIndexMap: {} as Record<string, number>,\n    },\n    catalogPagePortal: {\n        order: [] as string[],\n        listIndexOffset: 0,\n        itemsMap: {} as Record<string, CatalogListItemPortalViewProps>,\n        screenIndexMap: {} as Record<string, number>,\n    },\n    cartPage: {\n        wrapperYShift: 0,\n        selectedItemIndex: 0,\n        topGradientVisible: true,\n        bottomGradientVisible: true,\n        order: [] as string[],\n        itemsMap: {} as Record<string, CartListItemViewProps>,\n        totalPrice: '',\n        toMinimumPrice: 0,\n        hasRequiredData: false,\n        /**\n         * Здесь не объект пропсов для кнопки из-за того что иммер не может нормально прожевать React.refObject и,\n         * соответственно, тайпинги написаны так, чтобы такого не допустить\n         * */\n        makePurchaseButtonView: ButtonViews.primary,\n        isMakePurchaseButtonDisabled: false,\n        phoneNumber: '',\n        personalAddress: '',\n        deliveryTime: 0,\n    },\n    cartPageTouch: {\n        order: [] as string[],\n        itemsMap: {} as Record<string, CartListItemTouchViewProps>,\n        totalPrice: '',\n        toMinimumPrice: 0,\n        hasRequiredData: false,\n        phoneNumber: '',\n        personalAddress: '',\n        deliveryTime: 0,\n    },\n    cartPagePortal: {\n        listIndexOffset: 0,\n        topGradientVisible: true,\n        bottomGradientVisible: true,\n        order: [] as string[],\n        itemsMap: {} as Record<string, CartListItemPortalViewProps>,\n        totalPrice: '',\n        toMinimumPrice: 0,\n        hasRequiredData: false,\n        /**\n         * Здесь не объект пропсов для кнопки из-за того что иммер не может нормально прожевать React.refObject и,\n         * соответственно, тайпинги написаны так, чтобы такого не допустить\n         * */\n        makePurchaseButtonView: ButtonViews.primary,\n        isMakePurchaseButtonDisabled: false,\n        phoneNumber: '',\n        personalAddress: '',\n        deliveryTime: 0,\n    },\n    errorPage: {\n        title: '',\n        subtitle: '',\n    } as ErrorPageProps,\n    layout: {\n        header: {\n            title: '',\n            isVisible: false,\n            address: {\n                text: '',\n                isVisible: false,\n            },\n            cart: {\n                isVisible: false,\n                count: 0,\n                price: '0',\n            },\n            isBackButtonVisible: false,\n        },\n    },\n    addressSimplePage: {\n        inputValue: '',\n        suggests: [] as AddressSimpleSuggestItemView[],\n        selectedSuggestItemIndex: 0,\n        suggestListContainerYShift: 0,\n        isSubmitButtonDisabled: false,\n        submitButtonFocusHash: 0,\n        inputFocusHash: 0,\n    },\n    addressSimplePagePortal: {\n        inputValue: '',\n        suggests: [] as AddressSimpleSuggestItemPortalView[],\n        isSubmitButtonDisabled: false,\n    },\n    addressFullPage: {\n        addressInputValue: '',\n        phoneNumberInputValue: '',\n        apartmentInputValue: '',\n        entranceInputValue: '',\n        floorInputValue: '',\n        doorCodeInputValue: '',\n        isSubmitButtonDisabled: false,\n        nextFocus: ROUTES.ADDRESS_FULL_ALL as string,\n    },\n    waitPage: {\n        text: '',\n    },\n};\n\nexport type AppState = typeof initialState;\n\nexport type AppCommonAction = ReturnType<AppActionTypes[keyof AppActionTypes]>;\nexport type AppBaseAction = AppCommonAction | RouterAction<LocationState>;\nexport type AppThunkAction = ThunkAction<void, AppState, {}, AppBaseAction>;\nexport type AppAction = AppThunkAction | AppBaseAction;\nexport type AppDispatch = (action: AppAction) => AppBaseAction;\nexport type AppReducer = (state: AppState, action: AppBaseAction) => void;\nexport interface AppMiddleware {\n    (api: AppMiddlewareAPI): (next: AppDispatch) => (action: AppBaseAction) => AppBaseAction;\n}\n\nexport interface AppMiddlewareAPI {\n    dispatch: AppDispatch;\n    getState(): AppState;\n}\n\nexport interface CartItem {\n    itemId: string;\n    count: number;\n}\n","import { StoreUser } from 'store/constants/user';\nimport { selectSuggestItemById } from 'store/selectors';\nimport { isBuildingSuggest, isStreetSuggest } from 'tools/twoGis/api/suggest';\nimport {\n    SUGGEST_ITEM_HEIGHT,\n    SUGGEST_ITEM_MARGIN,\n    AddressSimpleSuggestItemView,\n} from 'pages/AddressSimple/SuggestItem/AddressSimpleSuggestItem';\n\nimport { AppReducer, AppState, initialState } from '../../constants';\n\nconst prepareSuggestItems = (state: AppState) => {\n    const {\n        twoGisSuggestsData: { itemsMap },\n        addressSimplePage: { inputValue },\n    } = state;\n\n    return Object.values(itemsMap).reduce<AddressSimpleSuggestItemView[]>((result, suggestItem) => {\n        if (isBuildingSuggest(suggestItem)) {\n            result.push({ name: suggestItem.address_name, id: suggestItem.id });\n        }\n\n        if (isStreetSuggest(suggestItem)) {\n            const { name, id } = suggestItem;\n\n            if (name !== inputValue) {\n                result.push({ id, name });\n            }\n        }\n\n        return result;\n    }, []);\n};\n\nexport const getHasValidAddress = (user: StoreUser) => {\n    const { street, house, city, address, addressLocationLatitude, addressLocationLongitude } = user;\n\n    return street && house && city && address && addressLocationLatitude && addressLocationLongitude;\n};\n\nconst prepareIsSubmitButtonDisabled = (state: AppState) => !getHasValidAddress(state.userModel);\n\nconst prepareSuggestListContainerYShift = ({ addressSimplePage: { selectedSuggestItemIndex, suggests } }: AppState) => {\n    return (\n        (SUGGEST_ITEM_HEIGHT + SUGGEST_ITEM_MARGIN) *\n        Math.min(suggests.length - 3, Math.max(0, selectedSuggestItemIndex - 1))\n    );\n};\n\nexport const addressSimplePageView: AppReducer = (state, action) => {\n    const { addressSimplePage, userModel } = state;\n\n    switch (action.type) {\n        case 'address/CHANGE_INPUT_VALUE': {\n            addressSimplePage.selectedSuggestItemIndex = initialState.addressSimplePage.selectedSuggestItemIndex;\n\n            break;\n        }\n\n        case 'address/SELECT_SUGGEST_ITEM': {\n            addressSimplePage.selectedSuggestItemIndex = action.payload;\n\n            break;\n        }\n\n        case 'address/CLICK_SUGGEST_ITEM': {\n            const suggestItem = selectSuggestItemById(state, action.payload);\n\n            addressSimplePage.selectedSuggestItemIndex = initialState.addressSimplePage.selectedSuggestItemIndex;\n\n            if (isBuildingSuggest(suggestItem)) {\n                addressSimplePage.submitButtonFocusHash = Math.random();\n            } else {\n                addressSimplePage.inputFocusHash = Math.random();\n            }\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT': {\n            addressSimplePage.inputFocusHash = Math.random();\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    addressSimplePage.inputValue = userModel.address;\n    addressSimplePage.suggests = prepareSuggestItems(state);\n    addressSimplePage.suggestListContainerYShift = prepareSuggestListContainerYShift(state);\n    addressSimplePage.isSubmitButtonDisabled = prepareIsSubmitButtonDisabled(state);\n};\n","import { createAction, createEmptyAction } from 'tools/create-action';\n\nimport {\n    ShowItemsCommandPayload,\n    AddItemCommandPayload,\n    RemoveItemCommandPayload,\n    GoToCatalogCommandPayload,\n    ValidationOkCommandPayload,\n    AddressInputPayload,\n    AddressInputAddPayload,\n    AddressFullInputAddPayload,\n    AddressFullInputCommandPayload,\n    OrderErrorPayload,\n    ItemsChangesCommandPayload,\n    AddressFullCommentCommandPayload,\n    GoToPromoCommandPayload,\n} from '../constants/native';\n\nexport const showItemsAction = (payload: ShowItemsCommandPayload) => createAction('SHOW_ITEMS', payload);\n\nexport const itemsChangesAction = (payload: ItemsChangesCommandPayload) => createAction('ITEMS_CHANGES', payload);\n\nexport const addItemAction = (payload: AddItemCommandPayload) => createAction('ADD_ITEM', payload);\n\ninterface RemoveItemCommandPayloadExtended extends RemoveItemCommandPayload {\n    shouldRemoveMention?: boolean;\n}\nexport const removeItemAction = (payload: RemoveItemCommandPayloadExtended) => createAction('REMOVE_ITEM', payload);\n\nexport const removeAllAction = () => createEmptyAction('REMOVE_ALL');\n\nexport const goToCatalogAction = (payload: GoToCatalogCommandPayload) => createAction('GO_TO_CATALOG', payload);\n\nexport const goToPromo = (payload: GoToPromoCommandPayload) => createAction('GO_TO_PROMO', payload);\n\nexport const goBackAction = () => createEmptyAction('GO_BACK');\n\nexport const goToWaitAction = () => createEmptyAction('GO_TO_WAIT');\n\nexport const validationOkAction = (payload: ValidationOkCommandPayload) => createAction('VALIDATION_OK', payload);\n\nexport const orderErrorAction = (payload: OrderErrorPayload) => createAction('ORDER_ERROR', payload);\n\nexport const addressInputAction = (payload: AddressInputPayload) => createAction('ADDRESS_INPUT', payload);\n\nexport const addressInputAddAction = (payload: AddressInputAddPayload) => createAction('ADDRESS_INPUT_ADD', payload);\n\nexport const addressInputClearAction = () => createEmptyAction('ADDRESS_INPUT_CLEAR');\n\nexport const addressFullInputAction = (payload: AddressFullInputCommandPayload) =>\n    createAction('ADDRESS_FULL_INPUT', payload);\n\nexport const addressFullInputAddAction = (payload: AddressFullInputAddPayload) =>\n    createAction('ADDRESS_FULL_INPUT_ADD', payload);\n\nexport const addressFullInputClearAction = () => createEmptyAction('ADDRESS_FULL_INPUT_CLEAR');\n\nexport const addressFullCommentAction = (payload: AddressFullCommentCommandPayload) =>\n    createAction('ADDRESS_FULL_COMMENT', payload);\n\nexport const addressFullValidationErrorAction = () => createEmptyAction('ADDRESS_FULL_VALIDATION_ERROR');\n\nexport const addressFullSuccessAction = () => createEmptyAction('ADDRESS_FULL_SUCCESS');\n\nexport const askAgainForOrderStatusAction = () => createEmptyAction('ASK_AGAIN_FOR_ORDER_STATUS');\n\nexport const askAgainForOrderStatusFinalAction = () => createEmptyAction('ASK_AGAIN_FOR_ORDER_STATUS_FINAL');\n","import { addressFullSuccessAction } from 'store/actions/native';\nimport { AppThunkAction } from 'store/constants';\nimport { goBack, replace } from 'connected-react-router';\nimport { ROUTES } from 'store/constants/router';\nimport { selectPathname } from 'store/selectors';\n\nexport const addressFullValidationOkThunk = (): AppThunkAction => (dispatch, getState) => {\n    const state = getState();\n    const {\n        addressFullPage: { nextFocus },\n    } = state;\n    const currentRoute = selectPathname(state);\n\n    if (nextFocus === ROUTES.ADDRESS_FULL_ALL || nextFocus === currentRoute) {\n        dispatch(goBack());\n    } else {\n        dispatch(replace(nextFocus));\n    }\n};\n\nexport const addressFullSuccessThunk = (): AppThunkAction => (dispatch) => {\n    dispatch(addressFullSuccessAction());\n\n    dispatch(goBack());\n};\n","import { go } from 'connected-react-router';\n\nexport const goBackToStart = () => go(-1 * window.history.length);\n","import { push, replace } from 'connected-react-router';\nimport { goToCatalogAction, goToPromo, validationOkAction } from 'store/actions/native';\nimport { goBackToStart } from 'store/actions/router';\nimport { AppThunkAction } from 'store/constants';\nimport { GoToCatalogCommandPayload, GoToPromoCommandPayload, ValidationOkCommandPayload } from 'store/constants/native';\nimport { ROUTES } from 'store/constants/router';\nimport { selectPathname } from 'store/selectors';\nimport { addressFullSuccessThunk } from 'store/thunks/addressFullPage';\n\nexport const goToCatalogThunk = (payload: GoToCatalogCommandPayload): AppThunkAction => (dispatch) => {\n    dispatch(goToCatalogAction(payload));\n\n    // чтобы при перезагрузке страницы постоянно не переходить в каталог\n    if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n        return;\n    }\n\n    dispatch(goBackToStart());\n    dispatch(replace(ROUTES.CATALOG));\n};\n\nexport const goToPromoThunk = (payload: GoToPromoCommandPayload): AppThunkAction => (dispatch) => {\n    dispatch(goToPromo(payload));\n    dispatch(replace(ROUTES.PROMO));\n};\n\nexport const validationOkThunk = (payload: ValidationOkCommandPayload): AppThunkAction => (dispatch) => {\n    dispatch(validationOkAction(payload));\n\n    dispatch(goBackToStart());\n    dispatch(replace(ROUTES.STATUS));\n};\n\nexport const goToValidationThunk = (): AppThunkAction => (dispatch, getState) => {\n    const state = getState();\n    const currentPathname = selectPathname(state);\n\n    switch (currentPathname) {\n        // это значит что ввод доп. адреса сохранился успешно\n        case ROUTES.ADDRESS_FULL_ALL: {\n            dispatch(addressFullSuccessThunk());\n            break;\n        }\n\n        default: {\n            dispatch(push(ROUTES.CART));\n            break;\n        }\n    }\n};\n","import { AppReducer, AppState } from 'store/constants';\nimport { StoreProductItem, ProductItem } from 'store/constants/products';\nimport { selectProductById, selectProductDiffById } from 'store/selectors';\n\nconst normalizeProductItem = (productItem: ProductItem): StoreProductItem => ({\n    name: productItem.name,\n    id: productItem.guid,\n    price: Number(productItem.price),\n    quantityLeft: Number(productItem.quantity_left),\n    imageUrl: productItem.images_urls[0] || '',\n});\n\nexport const normalizeProducts = (productsMaps: Record<string, ProductItem>): Record<string, StoreProductItem> =>\n    Object.keys(productsMaps).reduce<Record<string, StoreProductItem>>((acc, itemId) => {\n        acc[itemId] = normalizeProductItem(productsMaps[itemId]);\n\n        return acc;\n    }, {});\n\nexport const computeProductItemsMapBasedOnChanges = (state: AppState) => {\n    return Object.keys(state.productsData.itemsMap).reduce<AppState['productsData']['itemsMap']>((result, itemId) => {\n        const productItem = selectProductById(state, itemId);\n        const productItemDiff = selectProductDiffById(state, itemId);\n\n        result[itemId] = Object.assign(productItem, productItemDiff);\n\n        return result;\n    }, {});\n};\n\nexport const productsData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'SHOW_ITEMS': {\n            state.productsData.itemsMap = normalizeProducts(action.payload.stock);\n            break;\n        }\n\n        case 'APPLY_ITEMS_CHANGES': {\n            state.productsData.itemsMap = computeProductItemsMapBasedOnChanges(state);\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n","import { AppReducer } from 'store/constants';\nimport { ProductItemDiff, StoreProductItemDiff } from 'store/constants/products';\n\nconst normalizeProductItemsDiffMap = (productsDiffMap: Record<string, ProductItemDiff>) =>\n    Object.entries(productsDiffMap).reduce((result, [itemId, productItemDiff]) => {\n        const { quantity_left: quantityLeftString, price: priceString } = productItemDiff;\n\n        if (!quantityLeftString && !priceString) {\n            return result;\n        }\n\n        result[itemId] = {};\n\n        if (quantityLeftString) {\n            result[itemId].quantityLeft = Number(quantityLeftString);\n        }\n\n        if (priceString) {\n            result[itemId].price = Number(priceString);\n        }\n\n        return result;\n    }, {} as Record<string, StoreProductItemDiff>);\n\nexport const productsDiffData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'ITEMS_CHANGES': {\n            state.productsDiffData.itemsMap = normalizeProductItemsDiffMap(action.payload.changes);\n\n            break;\n        }\n\n        case 'APPLY_ITEMS_CHANGES': {\n            state.productsDiffData.itemsMap = {};\n\n            break;\n        }\n\n        default: {\n            break;\n        }\n    }\n};\n","import { AppReducer, AppState } from 'store/constants';\n\nexport const twoGisSuggestsData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'SET_TWO_GIS_SUGGESTS': {\n            type TwoGisSuggestsItemsMap = AppState['twoGisSuggestsData']['itemsMap'];\n\n            state.twoGisSuggestsData.itemsMap = action.payload.reduce<TwoGisSuggestsItemsMap>((result, item) => {\n                result[item.id] = item;\n\n                return result;\n            }, {});\n\n            break;\n        }\n\n        default: {\n            break;\n        }\n    }\n};\n","import { AppReducer } from 'store/constants';\nimport { GoToCatalogCommandPayload } from 'store/constants/native';\nimport { StoreUser } from 'store/constants/user';\n\nconst normalizeUserData = (payload: GoToCatalogCommandPayload): StoreUser => {\n    return {\n        customerName: payload.address.customer_name,\n        phoneNumber: payload.address.phone_num,\n        addressLocationLatitude: payload.address.address.location.latitude,\n        addressLocationLongitude: payload.address.address.location.longitude,\n        // TODO: Выпилить проверку device_location'a, он будет приходить всегда\n        // https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-178\n        deviceLocationLatitude: payload.device_location\n            ? payload.device_location.latitude\n            : payload.address.address.location.latitude,\n        deviceLocationLongitude: payload.device_location\n            ? payload.device_location.longitude\n            : payload.address.address.location.longitude,\n        address: payload.address.address.address_string,\n        city: payload.address.address.city,\n        street: payload.address.address.street,\n        house: payload.address.address.house,\n        building: payload.address.address.building,\n        floor: payload.address.address.floor,\n        entrance: payload.address.address.entrance,\n        apartment: payload.address.address.apartment,\n        doorCode: payload.address.address.door_code,\n    };\n};\n\nexport const userData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'GO_TO_PROMO': {\n            // TODO: выпилить этот ифа, device_location всегда будет здесь\n            // https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-178\n            if (action.payload.device_location) {\n                const { latitude, longitude } = action.payload.device_location;\n                state.userData.deviceLocationLatitude = latitude;\n                state.userData.deviceLocationLongitude = longitude;\n            }\n            break;\n        }\n\n        case 'GO_TO_CATALOG': {\n            state.userData = normalizeUserData(action.payload);\n            break;\n        }\n\n        case 'ADDRESS_INPUT': {\n            // TODO: выпилить этот кйес, device_location больше здесь не будет\n            // https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-178\n            if (action.payload.device_location) {\n                const { latitude, longitude } = action.payload.device_location;\n                state.userData.deviceLocationLatitude = latitude;\n                state.userData.deviceLocationLongitude = longitude;\n            }\n\n            break;\n        }\n\n        case 'ADDRESS_FULL_SUCCESS': {\n            state.userData.phoneNumber = state.userModel.phoneNumber;\n            state.userData.apartment = state.userModel.apartment;\n            state.userData.entrance = state.userModel.entrance;\n            state.userData.floor = state.userModel.floor;\n\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n","import { AppReducer } from '../../constants';\n\nexport const deliveryData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'GO_TO_CATALOG': {\n            state.delivery.deliveryTime = action.payload.time;\n            state.delivery.minimalPrice = action.payload.minimal_amount;\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n","import { getCountById, getPriceById, getQuantityLeftById } from 'store/reducers/helpers/catalogPage';\nimport { selectCartItemById, selectProductById } from 'store/selectors';\nimport { AppReducer, AppState, initialState } from 'store/constants';\n\nconst getTotalCount = (state: AppState) =>\n    Object.values(state.cart.itemsMap).reduce((acc, { itemId }) => {\n        acc += getCountById(state, itemId);\n\n        return acc;\n    }, 0);\n\nconst getTotalPrice = (state: AppState) =>\n    state.cart.order.reduce((acc, itemId) => {\n        const count = getCountById(state, itemId);\n        const price = getPriceById(state, itemId);\n\n        acc += count * price;\n\n        return acc;\n    }, 0);\n\nexport const cartModel: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'ADD_ITEM': {\n            const { count: countString, item: itemId } = action.payload;\n            const count = Number(countString);\n            const productItem = selectProductById(state, itemId);\n            const quantityLeft = getQuantityLeftById(state, itemId);\n\n            if (!productItem) {\n                return;\n            }\n\n            const cartItem = selectCartItemById(state, itemId);\n\n            if (cartItem) {\n                cartItem.count = Math.min(quantityLeft, cartItem.count + count);\n            } else if (count <= quantityLeft) {\n                state.cart.itemsMap[itemId] = {\n                    itemId,\n                    count,\n                };\n\n                state.cart.order.push(itemId);\n            }\n\n            break;\n        }\n\n        case 'REMOVE_ITEM': {\n            const { item: itemId, count: countString, shouldRemoveMention } = action.payload;\n            const count = Number(countString);\n\n            const cartItem = selectCartItemById(state, itemId);\n            const productItem = selectProductById(state, itemId);\n            const actualCount = getCountById(state, itemId);\n\n            if (!cartItem || !productItem) {\n                return;\n            }\n\n            cartItem.count = Math.max(0, actualCount - count);\n\n            if (!cartItem.count && shouldRemoveMention) {\n                delete state.cart.itemsMap[itemId];\n                state.cart.order = state.cart.order.filter((cartItemId) => cartItemId !== itemId);\n            }\n\n            break;\n        }\n\n        case 'REMOVE_ALL': {\n            state.cart = { ...initialState.cart };\n\n            break;\n        }\n\n        case 'GO_TO_CATALOG': {\n            if (action.payload.clear) {\n                state.cart = { ...initialState.cart };\n            }\n\n            break;\n        }\n\n        case 'VALIDATION_OK': {\n            state.cart = { ...initialState.cart };\n            state.cart.orderId = action.payload.order_id;\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    state.cart.totalCount = getTotalCount(state);\n    state.cart.totalPrice = getTotalPrice(state);\n};\n","import { AppState, initialState, AppReducer } from 'store/constants';\nimport { ROUTES } from 'store/constants/router';\nimport { selectPathname, selectSuggestItemById } from 'store/selectors';\nimport { isStreetSuggest, isBuildingSuggest, DGBuildingSuggest } from 'tools/twoGis/api/suggest';\n\nconst MAX_PHONE_NUMBER_SYMBOLS_COUNT = 12;\n\nconst updateUserAddressBasedOnBuilding = ({ userModel }: AppState, building: DGBuildingSuggest) => {\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    const { point, address, address_name, full_name } = building;\n    const [addressComponent] = address.components;\n    const { street, number } = addressComponent;\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    const [city] = full_name.split(', ');\n\n    userModel.city = city;\n    userModel.street = street;\n    userModel.house = number;\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    userModel.address = address_name;\n    userModel.addressLocationLatitude = String(point.lat);\n    userModel.addressLocationLongitude = String(point.lon);\n};\n\nconst normalizePhone = (phoneNumber: string) => {\n    let result = Array.from(phoneNumber).filter((symbol, index) => {\n        return /[0-9]/.test(symbol) || (index === 0 && symbol === '+');\n    });\n    const [firstSymbol, ...otherSymbols] = result;\n\n    if (firstSymbol === '8' || firstSymbol === '7') {\n        result = ['+', '7', ...otherSymbols];\n    }\n\n    return result.slice(0, MAX_PHONE_NUMBER_SYMBOLS_COUNT).join('');\n};\n\nexport const userModel: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'address/CHANGE_INPUT_VALUE': {\n            state.userModel = { ...initialState.userModel };\n            state.userModel.address = action.payload;\n\n            break;\n        }\n\n        case 'address/CLICK_SUGGEST_ITEM': {\n            const suggestItem = selectSuggestItemById(state, action.payload);\n\n            if (isStreetSuggest(suggestItem)) {\n                state.userModel = { ...initialState.userModel };\n                state.userModel.address = suggestItem.name;\n            } else if (isBuildingSuggest(suggestItem)) {\n                updateUserAddressBasedOnBuilding(state, suggestItem);\n            }\n\n            break;\n        }\n\n        case 'REVERT_USER_CHANGES': {\n            state.userModel = { ...state.userData };\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT': {\n            state.userModel = { ...initialState.userModel };\n            state.userModel.address = action.payload.input;\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT_ADD': {\n            state.userModel = { ...initialState.userModel };\n            state.userModel.address = action.payload.input;\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT_CLEAR': {\n            state.userModel = { ...initialState.userModel };\n\n            break;\n        }\n\n        case 'ADDRESS_FULL_INPUT': {\n            if (action.payload.input.apartment) {\n                state.userModel.apartment = action.payload.input.apartment;\n            }\n\n            if (action.payload.input.floor) {\n                state.userModel.floor = action.payload.input.floor;\n            }\n\n            if (action.payload.input.entrance) {\n                state.userModel.entrance = action.payload.input.entrance;\n            }\n\n            if (action.payload.input.phone_num) {\n                state.userModel.phoneNumber = normalizePhone(action.payload.input.phone_num);\n            }\n\n            if (action.payload.input.door_code) {\n                state.userModel.doorCode = action.payload.input.door_code;\n            }\n\n            break;\n        }\n\n        case 'ADDRESS_FULL_INPUT_ADD': {\n            const pathname = selectPathname(state);\n\n            switch (pathname) {\n                case ROUTES.ADDRESS_FULL_PHONE: {\n                    state.userModel.phoneNumber = normalizePhone(action.payload.input);\n\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_APARTMENT: {\n                    state.userModel.apartment = action.payload.input;\n\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_ENTRANCE: {\n                    state.userModel.entrance = action.payload.input;\n\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_FLOOR: {\n                    state.userModel.floor = action.payload.input;\n\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_DOORCODE: {\n                    state.userModel.doorCode = action.payload.input;\n\n                    break;\n                }\n\n                default:\n                    break;\n            }\n\n            break;\n        }\n\n        case 'ADDRESS_FULL_INPUT_CLEAR': {\n            const pathname = selectPathname(state);\n\n            switch (pathname) {\n                case ROUTES.ADDRESS_FULL_PHONE: {\n                    state.userModel.phoneNumber = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_APARTMENT: {\n                    state.userModel.apartment = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_ENTRANCE: {\n                    state.userModel.entrance = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_FLOOR: {\n                    state.userModel.floor = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_DOORCODE: {\n                    state.userModel.doorCode = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_ALL: {\n                    state.userModel.phoneNumber = '';\n                    state.userModel.apartment = '';\n                    state.userModel.entrance = '';\n                    state.userModel.floor = '';\n                    state.userModel.doorCode = '';\n                    break;\n                }\n\n                default:\n                    break;\n            }\n\n            break;\n        }\n\n        case 'ADDRESS_FULL_COMMENT': {\n            state.userModel.doorCode = action.payload.input;\n\n            break;\n        }\n\n        case 'addressFull/PHONE_NUMBER_INPUT_CHANGE': {\n            const { inputType, data } = action.payload;\n\n            if (inputType === 'insertText') {\n                state.userModel.phoneNumber = normalizePhone(state.userModel.phoneNumber + data);\n            } else {\n                state.userModel.phoneNumber = state.userModel.phoneNumber.slice(0, -1);\n            }\n\n            break;\n        }\n\n        case 'addressFull/APARTMENT_INPUT_CHANGE': {\n            state.userModel.apartment = action.payload;\n\n            break;\n        }\n\n        case 'addressFull/ENTRANCE_INPUT_CHANGE': {\n            state.userModel.entrance = action.payload;\n\n            break;\n        }\n\n        case 'addressFull/FLOOR_INPUT_CHANGE': {\n            state.userModel.floor = action.payload;\n\n            break;\n        }\n\n        case 'addressFull/DOORCODE_INPUT_CHANGE': {\n            state.userModel.doorCode = action.payload;\n\n            break;\n        }\n\n        case 'GO_TO_CATALOG': {\n            state.userModel = { ...state.userData };\n\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n","import { layoutContentHeight, layoutWidth } from 'style/const/layout';\n\nexport const catalogCardWidth = 392;\nexport const catalogCardHeight = 592;\nexport const catalogCardBorderRadius = 40;\n\nexport const catalogCardGap = 32;\n\nexport const fullCardsInViewPort = Math.floor((layoutWidth + catalogCardGap) / (catalogCardWidth + catalogCardGap));\n\nexport const catalogContentPaddingY = (layoutContentHeight - catalogCardHeight) / 2;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\ninterface Fn<R = any> {\n    (...args: any): R;\n}\n\nexport const memoize = <F extends Fn>(fn: F): F => {\n    const store = new Map<string, ReturnType<F>>();\n\n    return ((...args) => {\n        const id = JSON.stringify(args);\n\n        if (!store.has(id)) {\n            store.set(id, fn(...args));\n        }\n\n        return store.get(id);\n    }) as F;\n};\n\nexport const memoizeResolvedPromise = <F extends Fn<Promise<any>>>(fn: F): F => {\n    const store = new Map<string, ReturnType<F>>();\n\n    return (async (...args) => {\n        const id = JSON.stringify(args);\n\n        if (!store.has(id)) {\n            const result = await fn(...args);\n            store.set(id, result);\n        }\n\n        return store.get(id);\n    }) as F;\n};\n","import { catalogCardGap, catalogCardWidth } from 'pages/Catalog/Catalog.const/common';\nimport { CatalogListItemViewProps } from 'pages/Catalog/ListItem/CatalogListItem';\nimport { AppState, AppReducer, initialState } from 'store/constants';\nimport { ROUTES } from 'store/constants/router';\nimport {\n    canAddMore,\n    getCountById,\n    getDisabled,\n    getOldPriceById,\n    preparePriceById,\n    getQuantityLeftById,\n    formatSale,\n    wantMoreThanHave,\n} from 'store/reducers/helpers/catalogPage';\nimport { selectProductById, selectPathname, selectProductDiffById } from 'store/selectors';\nimport { layoutWidth } from 'style/const/layout';\nimport { isPortal } from 'tools/browser';\nimport { memoize } from 'tools/memoize';\n\nconst screenItemCount = Math.floor(layoutWidth / (catalogCardWidth + catalogCardGap));\n\nconst listOffset = (-1 * (layoutWidth % (catalogCardWidth + catalogCardGap))) / 2;\n\nconst itemWidth = catalogCardWidth + catalogCardGap;\n\nconst getListIndexOffset = ({ catalogPage: { selectedItemId, order, listIndexOffset } }: AppState) => {\n    if (isPortal) {\n        return listIndexOffset;\n    }\n\n    const selectedItemIndex = order.indexOf(selectedItemId);\n\n    if (selectedItemIndex === -1) {\n        return 0;\n    }\n\n    const scrollPageSize = 1;\n\n    if (selectedItemIndex <= listIndexOffset) {\n        return Math.max(0, listIndexOffset - scrollPageSize);\n    }\n\n    if (selectedItemIndex >= listIndexOffset + screenItemCount - 1) {\n        return Math.min(listIndexOffset + scrollPageSize, order.length - screenItemCount);\n    }\n\n    return listIndexOffset;\n};\n\nconst getWrapperXShift = ({ catalogPage: { listIndexOffset } }: AppState) =>\n    listOffset + listIndexOffset * itemWidth - catalogCardGap / 2;\n\nconst getScreenIndexMap = ({ catalogPage: { listIndexOffset, order } }: AppState): Record<string, number> =>\n    new Array(screenItemCount).fill(0).reduce(\n        (result, _, index) => ({\n            ...result,\n            [order[index + listIndexOffset]]: index + 1,\n        }),\n        {} as Record<string, number>,\n    );\n\nconst prepareBadgeType = (state: AppState, itemId: string): CatalogListItemViewProps['badgeType'] => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const count = getCountById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n\n    // раскупили\n    if (quantityLeft === 0) {\n        return 'sold-out';\n    }\n\n    // больше не осталось\n    if (count === quantityLeft) {\n        return 'few-left';\n    }\n\n    // изменение цены\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        // подорожание\n        if (productItemDiff.price > productItem.price) {\n            return 'price-changed';\n        }\n\n        // скидка\n        if (productItemDiff.price < productItem.price) {\n            return 'sale';\n        }\n    }\n\n    return undefined;\n};\n\nconst prepareBadgeContent = (state: AppState, itemId: string): CatalogListItemViewProps['badgeContent'] => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const count = getCountById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n\n    // раскупили\n    if (quantityLeft === 0) {\n        return undefined;\n    }\n\n    // больше не осталось\n    if (count === quantityLeft) {\n        return undefined;\n    }\n\n    // изменение цены\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        // подорожание\n        if (productItemDiff.price > productItem.price) {\n            return undefined;\n        }\n\n        // скидка\n        if (productItemDiff.price < productItem.price) {\n            return formatSale(productItem.price, productItemDiff.price);\n        }\n    }\n\n    return undefined;\n};\n\nconst prepareIndex = ({ catalogPage: { screenIndexMap } }: AppState, itemId: string) => screenIndexMap[itemId];\n\nconst prepareCatalogItemsMap = (state: AppState) => {\n    const { productsData } = state;\n\n    return Object.keys(productsData.itemsMap).reduce<AppState['catalogPage']['itemsMap']>((acc, itemId) => {\n        const { name, imageUrl } = selectProductById(state, itemId);\n\n        acc[itemId] = {\n            imageUrl,\n            name,\n            price: preparePriceById(state, itemId),\n            oldPrice: getOldPriceById(state, itemId),\n            isWantMoreThanHave: wantMoreThanHave(state, itemId),\n            count: getCountById(state, itemId),\n            index: prepareIndex(state, itemId),\n            badgeType: prepareBadgeType(state, itemId),\n            badgeContent: prepareBadgeContent(state, itemId),\n            isButtonDisabled: !canAddMore(state, itemId),\n            disabled: getDisabled(state, itemId),\n        };\n\n        return acc;\n    }, {});\n};\n\nconst prepareItemsFocusHashMap = (state: AppState) => {\n    const {\n        catalogPage: { itemsFocusHashMap, order },\n    } = state;\n\n    const isEmpty = Object.keys(itemsFocusHashMap).length === 0;\n    const [firstItem] = order;\n\n    return isEmpty && firstItem ? { [firstItem]: Math.random() } : itemsFocusHashMap;\n};\n\nconst memoizedPrepareOrder = memoize((itemsMap: AppState['productsData']['itemsMap']) => {\n    return Object.keys(itemsMap);\n});\n\n// здесь важно использовать мемоизацию, потому что если изменится ссылка на массив,\n// (даже если его содержимое останется прежним) случится ререндер\nconst prepareOrder = (state: AppState) => memoizedPrepareOrder(state.productsData.itemsMap);\n\nexport const catalogPageView: AppReducer = (state, action) => {\n    const { catalogPage } = state;\n\n    switch (action.type) {\n        case 'ADD_ITEM': {\n            if (selectPathname(state) === ROUTES.CATALOG) {\n                catalogPage.selectedItemId = action.payload.item;\n                catalogPage.itemsFocusHashMap[action.payload.item] = Math.random();\n            }\n\n            break;\n        }\n\n        case 'REMOVE_ITEM': {\n            if (selectPathname(state) === ROUTES.CATALOG) {\n                catalogPage.selectedItemId = action.payload.item;\n                catalogPage.itemsFocusHashMap[action.payload.item] = Math.random();\n            }\n\n            break;\n        }\n\n        case 'REMOVE_ALL': {\n            catalogPage.selectedItemId = initialState.catalogPage.selectedItemId;\n            catalogPage.itemsFocusHashMap = initialState.catalogPage.itemsFocusHashMap;\n\n            break;\n        }\n\n        case 'catalog/SELECT_ITEM': {\n            catalogPage.selectedItemId = action.payload;\n\n            break;\n        }\n\n        case 'catalog/SLIDE_LIST': {\n            catalogPage.listIndexOffset = action.payload;\n            catalogPage.selectedItemId = catalogPage.order[action.payload + 1];\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    catalogPage.order = prepareOrder(state);\n    catalogPage.listIndexOffset = getListIndexOffset(state);\n    catalogPage.wrapperXShift = getWrapperXShift(state);\n    catalogPage.screenIndexMap = getScreenIndexMap(state);\n    catalogPage.itemsMap = prepareCatalogItemsMap(state);\n    catalogPage.itemsFocusHashMap = prepareItemsFocusHashMap(state);\n};\n","// TODO: FRNTND-1 mv to npm package\n\nexport const layoutWidth = 1920;\nexport const layoutHeight = 1080;\nexport const layoutHeaderHeight = 128;\nexport const layoutHeaderPaddingTop = 32;\nexport const layoutHeaderPaddingHorizontal = 128;\nexport const layoutFooterHeight = 128;\nexport const layoutContentHeight = layoutHeight - (layoutHeaderHeight + layoutHeaderPaddingTop) - layoutFooterHeight;\n","import { CatalogListItemTouchViewProps } from 'pages/Catalog/ListItem/CatalogListItem@touch';\nimport { AppState, AppReducer } from 'store/constants';\nimport { selectCartItemById, selectProductById } from 'store/selectors';\nimport { calculateButtonDisabled, formatPrice, prepareCount } from 'store/reducers/helpers/catalogPage';\n\nconst prepareBadge = (state: AppState, itemId: string): CatalogListItemTouchViewProps['badge'] => {\n    const cartItem = selectCartItemById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n\n    if (productItem.quantityLeft === 0) {\n        return 'sold-out';\n    }\n\n    if (cartItem && cartItem.count === productItem.quantityLeft) {\n        return 'few-left';\n    }\n\n    return undefined;\n};\n\nconst prepareIndex = ({ catalogPageTouch: { order } }: AppState, itemId: string) => order.indexOf(itemId) + 1;\n\nconst prepareCatalogItemsMap = (state: AppState) => {\n    const { productsData } = state;\n\n    return Object.keys(productsData.itemsMap).reduce<AppState['catalogPageTouch']['itemsMap']>((acc, itemId) => {\n        const productItem = selectProductById(state, itemId);\n\n        acc[itemId] = {\n            imageUrl: productItem.imageUrl,\n            name: productItem.name,\n            price: formatPrice(productItem.price),\n            count: prepareCount(state, itemId),\n            index: prepareIndex(state, itemId),\n            badge: prepareBadge(state, itemId),\n            buttonDisabled: calculateButtonDisabled(state, itemId),\n            disabled: productItem.quantityLeft === 0,\n        };\n\n        return acc;\n    }, {});\n};\n\nexport const catalogPageTouchView: AppReducer = (state) => {\n    const { productsData, catalogPageTouch } = state;\n\n    catalogPageTouch.order = Object.keys(productsData.itemsMap);\n    catalogPageTouch.itemsMap = prepareCatalogItemsMap(state);\n};\n","import { layoutWidth } from 'style/const/layout@portal';\n\nexport const catalogCardWidth = 330;\nexport const catalogCardHeight = 470;\nexport const catalogCardBorderRadius = 40;\n\nexport const catalogCardGap = 32;\n\nexport const fullCardsInViewPort = Math.floor((layoutWidth + catalogCardGap) / (catalogCardWidth + catalogCardGap));\n\nexport const catalogContentPaddingY = 32;\n","import { fullCardsInViewPort } from 'pages/Catalog/Catalog.const/portal';\nimport { CatalogListItemViewProps } from 'pages/Catalog/ListItem/CatalogListItem';\nimport { AppState, AppReducer } from 'store/constants';\nimport {\n    canAddMore,\n    getCountById,\n    getDisabled,\n    getOldPriceById,\n    preparePriceById,\n    getQuantityLeftById,\n    formatSale,\n    wantMoreThanHave,\n} from 'store/reducers/helpers/catalogPage';\nimport { selectProductById, selectProductDiffById } from 'store/selectors';\nimport { memoize } from 'tools/memoize';\n\n/**\n * TODO: Вынести на общий уровень и переиспользовать\n * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-195\n */\nconst getScreenIndexMap = ({ catalogPagePortal: { listIndexOffset, order } }: AppState) => {\n    return new Array(fullCardsInViewPort).fill(0).reduce<Record<string, number>>((result, _, index) => {\n        const itemId = order[index + listIndexOffset];\n        result[itemId] = index + 1;\n\n        return result;\n    }, {});\n};\n\n/**\n * TODO: Вынести на общий уровень и переиспользовать\n * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-195\n */\nconst prepareBadgeType = (state: AppState, itemId: string): CatalogListItemViewProps['badgeType'] => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const count = getCountById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n\n    // раскупили\n    if (quantityLeft === 0) {\n        return 'sold-out';\n    }\n\n    // больше не осталось\n    if (count === quantityLeft) {\n        return 'few-left';\n    }\n\n    // изменение цены\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        // подорожание\n        if (productItemDiff.price > productItem.price) {\n            return 'price-changed';\n        }\n\n        // скидка\n        if (productItemDiff.price < productItem.price) {\n            return 'sale';\n        }\n    }\n\n    return undefined;\n};\n\n/**\n * TODO: Вынести на общий уровень и переиспользовать\n * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-195\n */\nconst prepareBadgeContent = (state: AppState, itemId: string): CatalogListItemViewProps['badgeContent'] => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const count = getCountById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n\n    // раскупили\n    if (quantityLeft === 0) {\n        return undefined;\n    }\n\n    // больше не осталось\n    if (count === quantityLeft) {\n        return undefined;\n    }\n\n    // изменение цены\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        // подорожание\n        if (productItemDiff.price > productItem.price) {\n            return undefined;\n        }\n\n        // скидка\n        if (productItemDiff.price < productItem.price) {\n            return formatSale(productItem.price, productItemDiff.price);\n        }\n    }\n\n    return undefined;\n};\n\n/**\n * TODO: Вынести на общий уровень и переиспользовать\n * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-195\n */\nconst prepareIndex = ({ catalogPagePortal: { screenIndexMap } }: AppState, itemId: string) => screenIndexMap[itemId];\n\n/**\n * TODO: Вынести на общий уровень и переиспользовать\n * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-195\n */\nconst prepareCatalogItemsMap = (state: AppState) => {\n    const { productsData } = state;\n\n    return Object.keys(productsData.itemsMap).reduce<AppState['catalogPagePortal']['itemsMap']>((acc, itemId) => {\n        const { name, imageUrl } = selectProductById(state, itemId);\n\n        acc[itemId] = {\n            imageUrl,\n            name,\n            price: preparePriceById(state, itemId),\n            oldPrice: getOldPriceById(state, itemId),\n            isWantMoreThanHave: wantMoreThanHave(state, itemId),\n            count: getCountById(state, itemId),\n            index: prepareIndex(state, itemId),\n            badgeType: prepareBadgeType(state, itemId),\n            badgeContent: prepareBadgeContent(state, itemId),\n            isButtonDisabled: !canAddMore(state, itemId),\n            disabled: getDisabled(state, itemId),\n        };\n\n        return acc;\n    }, {});\n};\n\n/**\n * TODO: Вынести на общий уровень и переиспользовать\n * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-195\n */\nconst memoizedPrepareOrder = memoize((itemsMap: AppState['productsData']['itemsMap']) => {\n    return Object.keys(itemsMap);\n});\n\n// здесь важно использовать мемоизацию, потому что если изменится ссылка на массив,\n// (даже если его содержимое останется прежним) случится ререндер\nconst prepareOrder = (state: AppState) => memoizedPrepareOrder(state.productsData.itemsMap);\n\nexport const catalogPagePortalView: AppReducer = (state, action) => {\n    const { catalogPagePortal } = state;\n\n    switch (action.type) {\n        case 'catalog/SLIDE_LIST': {\n            catalogPagePortal.listIndexOffset = action.payload;\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    catalogPagePortal.order = prepareOrder(state);\n    catalogPagePortal.screenIndexMap = getScreenIndexMap(state);\n    catalogPagePortal.itemsMap = prepareCatalogItemsMap(state);\n};\n","// 1. (?=(\\d{3})+$) - матчит подстроки нулевой длины, после которых идет три цифры подряд\n// 2. (?=...) - positive lookahead, конструкция, которая матчит позицию, после которой срабатывает указанный паттерн\n// 3. (?:\\d{3})+ - повторяющаяся незахватывающая группа, которая матчит подстроки из трех цифр\n// 4. $ - EOL - чтобы выровнять [3] по концу строки\nexport const splitByThousands = (n: number) => n.toString().replace(/(?=(?:\\d{3})+$)/g, ' ');\n","import { AppState } from 'store/constants';\nimport { splitByThousands } from 'tools/split-by-thousands';\n\nimport { formatPrice } from './catalogPage';\n\nexport const prepareTotalPrice = ({ cart: { totalPrice } }: AppState) => splitByThousands(formatPrice(totalPrice));\n\nexport const prepareToMinimumPrice = ({ cart: { totalPrice }, delivery: { minimalPrice } }: AppState) =>\n    Math.max(0, Math.ceil((minimalPrice - totalPrice) / 100));\n\nexport const getFormattedPersonalAddress = ({ userData: { apartment, entrance, floor } }: AppState) =>\n    [\n        apartment && `квартира ${apartment}`, //\n        entrance && `подъезд ${entrance}`,\n        floor && `этаж ${floor}`,\n    ]\n        .filter(Boolean)\n        .join(', ');\n\nexport const prepareHasRequiredData = ({ userData: { phoneNumber, address } }: AppState) =>\n    Boolean(address && phoneNumber);\n","const renderSpace = (index: number) => ([1, 4, 7, 9].includes(index) ? ' ' : '');\n\nexport const formatPhoneNumber = (phoneNumber: string) =>\n    phoneNumber\n        .split('')\n        .map((digit, index) => `${digit}${renderSpace(index)}`)\n        .join('');\n","import { ButtonViews } from 'components/Button/Button';\nimport { CartListItemViewProps } from 'pages/Cart/ListItem/CartListItem';\nimport {\n    canAddMore,\n    getCountById,\n    getDisabled,\n    getOldPriceById,\n    preparePriceById,\n    getQuantityLeftById,\n    formatSale,\n    wantMoreThanHave,\n} from 'store/reducers/helpers/catalogPage';\nimport {\n    getFormattedPersonalAddress,\n    prepareHasRequiredData,\n    prepareToMinimumPrice,\n    prepareTotalPrice,\n} from 'store/reducers/helpers/cartPage';\nimport { selectProductById, selectCartItemById, selectProductDiffById } from 'store/selectors';\nimport { AppReducer, AppState } from 'store/constants';\nimport { formatPhoneNumber } from 'tools/format-phone-number';\n\nconst prepareLabel = (state: AppState, itemId: string): CartListItemViewProps['label'] => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n    const cartItem = selectCartItemById(state, itemId);\n    const isWantMoreThanHave = wantMoreThanHave(state, itemId);\n\n    // раскупили\n    if (quantityLeft === 0) {\n        return { type: 'sold-out' };\n    }\n\n    // больше не осталось\n    if (cartItem && cartItem.count === quantityLeft) {\n        return { type: 'few-left' };\n    }\n\n    // есть меньше чем добавили\n    if (isWantMoreThanHave) {\n        return {\n            type: 'you-want',\n            content: String(cartItem.count),\n        };\n    }\n\n    // изменение цены\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        // подорожание\n        if (productItemDiff.price > productItem.price) {\n            return { type: 'price-changed' };\n        }\n\n        // скидка\n        if (productItemDiff.price < productItem.price) {\n            const content = formatSale(productItem.price, productItemDiff.price);\n            return { type: 'sale', content };\n        }\n    }\n\n    return undefined;\n};\n\nconst prepareItemsMap = (state: AppState) => {\n    const { cartPage } = state;\n\n    return cartPage.order.reduce<AppState['cartPage']['itemsMap']>((result, itemId) => {\n        const cartItem = selectCartItemById(state, itemId);\n        const { imageUrl, name } = selectProductById(state, itemId);\n\n        if (cartItem) {\n            result[itemId] = {\n                imageUrl,\n                name,\n                price: preparePriceById(state, itemId),\n                oldPrice: getOldPriceById(state, itemId),\n                count: getCountById(state, itemId),\n                isWantMoreThanHave: wantMoreThanHave(state, itemId),\n                disabled: getDisabled(state, itemId),\n                label: prepareLabel(state, itemId),\n                isMoreButtonDisabled: !canAddMore(state, itemId),\n            };\n        }\n\n        return result;\n    }, {});\n};\n\nconst itemHeight = 152;\n\nconst getWrapperYShift = ({ cartPage: { selectedItemIndex, order } }: AppState) => {\n    if (selectedItemIndex === -1) {\n        return 0;\n    }\n\n    // так как индекс начинается с 0, то расчеты бы имели смысл начиная\n    // со второго элемента (индекс = 1), но нам нужно начинать скролл с\n    // 3-го элемента, поэтому сдвигаем значение на 1\n    let relatedIndex = Math.max(0, selectedItemIndex - 1);\n\n    // ограничиваем максимальное значение индекса\n    relatedIndex = Math.min(Math.max(0, order.length - 4), relatedIndex);\n\n    // домножаем отступ на коэффициент высоты айтема\n    return relatedIndex * itemHeight;\n};\n\nconst calculateMakePurchaseDisabled = (state: AppState) => {\n    const {\n        cart: { totalPrice },\n        delivery: { minimalPrice },\n    } = state;\n\n    return totalPrice < minimalPrice;\n};\n\nconst calculateMakePurchaseButtonView = (state: AppState): AppState['cartPage']['makePurchaseButtonView'] => {\n    return state.cartPage.isMakePurchaseButtonDisabled ? ButtonViews.secondary : ButtonViews.primary;\n};\n\nconst prepareTopGradientVisible = ({ cartPage: { wrapperYShift } }: AppState) => wrapperYShift !== 0;\n\nconst prepareBottomGradientVisible = ({ cartPage: { wrapperYShift, order } }: AppState) =>\n    order.length > 4 && wrapperYShift !== (order.length - 4) * itemHeight;\n\nconst getFormattedPhoneNumber = ({ userData }: AppState) =>\n    userData.phoneNumber && formatPhoneNumber(userData.phoneNumber);\n\nexport const cartPageView: AppReducer = (state, action) => {\n    const { cart, delivery, cartPage } = state;\n\n    switch (action.type) {\n        case 'cart/SELECT_ITEM': {\n            cartPage.selectedItemIndex = cartPage.order.indexOf(action.payload);\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    cartPage.order = cart.order;\n    cartPage.deliveryTime = delivery.deliveryTime;\n    cartPage.itemsMap = prepareItemsMap(state);\n    cartPage.totalPrice = prepareTotalPrice(state);\n    cartPage.toMinimumPrice = prepareToMinimumPrice(state);\n    cartPage.wrapperYShift = getWrapperYShift(state);\n    cartPage.isMakePurchaseButtonDisabled = calculateMakePurchaseDisabled(state);\n\n    cartPage.makePurchaseButtonView = calculateMakePurchaseButtonView(state);\n    cartPage.topGradientVisible = prepareTopGradientVisible(state);\n    cartPage.bottomGradientVisible = prepareBottomGradientVisible(state);\n    cartPage.hasRequiredData = prepareHasRequiredData(state);\n    cartPage.phoneNumber = getFormattedPhoneNumber(state);\n    cartPage.personalAddress = getFormattedPersonalAddress(state);\n};\n","import { selectCartItemById, selectProductById } from 'store/selectors';\nimport { AppReducer, AppState } from 'store/constants';\nimport { canAddMore, getCountById, getDisabled, preparePriceById } from 'store/reducers/helpers/catalogPage';\nimport {\n    getFormattedPersonalAddress,\n    prepareHasRequiredData,\n    prepareToMinimumPrice,\n    prepareTotalPrice,\n} from 'store/reducers/helpers/cartPage';\n\nconst prepareItemsMap = (state: AppState) => {\n    const { cartPageTouch } = state;\n\n    return cartPageTouch.order.reduce<AppState['cartPageTouch']['itemsMap']>((result, itemId) => {\n        const cartItem = selectCartItemById(state, itemId);\n        const { imageUrl, name } = selectProductById(state, itemId);\n\n        if (cartItem) {\n            result[itemId] = {\n                imageUrl,\n                name,\n                price: preparePriceById(state, itemId),\n                count: getCountById(state, itemId),\n                disabled: getDisabled(state, itemId),\n                isMoreButtonDisabled: !canAddMore(state, itemId),\n            };\n        }\n\n        return result;\n    }, {});\n};\n\nexport const cartPageTouchView: AppReducer = (state) => {\n    const { cart, delivery, cartPageTouch } = state;\n\n    cartPageTouch.order = cart.order;\n    cartPageTouch.deliveryTime = delivery.deliveryTime;\n    cartPageTouch.itemsMap = prepareItemsMap(state);\n    cartPageTouch.totalPrice = prepareTotalPrice(state);\n    cartPageTouch.toMinimumPrice = prepareToMinimumPrice(state);\n    cartPageTouch.hasRequiredData = prepareHasRequiredData(state);\n    cartPageTouch.personalAddress = getFormattedPersonalAddress(state);\n};\n","import { ButtonViews } from 'components/Button/Button';\nimport { CartListItemViewProps } from 'pages/Cart/ListItem/CartListItem';\nimport {\n    canAddMore,\n    getCountById,\n    getDisabled,\n    getOldPriceById,\n    preparePriceById,\n    getQuantityLeftById,\n    formatSale,\n    wantMoreThanHave,\n} from 'store/reducers/helpers/catalogPage';\nimport {\n    getFormattedPersonalAddress,\n    prepareHasRequiredData,\n    prepareToMinimumPrice,\n    prepareTotalPrice,\n} from 'store/reducers/helpers/cartPage';\nimport { selectProductById, selectCartItemById, selectProductDiffById } from 'store/selectors';\nimport { AppReducer, AppState } from 'store/constants';\nimport { formatPhoneNumber } from 'tools/format-phone-number';\n\nconst prepareLabel = (state: AppState, itemId: string): CartListItemViewProps['label'] => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n    const cartItem = selectCartItemById(state, itemId);\n    const isWantMoreThanHave = wantMoreThanHave(state, itemId);\n\n    // раскупили\n    if (quantityLeft === 0) {\n        return { type: 'sold-out' };\n    }\n\n    // больше не осталось\n    if (cartItem && cartItem.count === quantityLeft) {\n        return { type: 'few-left' };\n    }\n\n    // есть меньше чем добавили\n    if (isWantMoreThanHave) {\n        return {\n            type: 'you-want',\n            content: String(cartItem.count),\n        };\n    }\n\n    // изменение цены\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        // подорожание\n        if (productItemDiff.price > productItem.price) {\n            return { type: 'price-changed' };\n        }\n\n        // скидка\n        if (productItemDiff.price < productItem.price) {\n            const content = formatSale(productItem.price, productItemDiff.price);\n            return { type: 'sale', content };\n        }\n    }\n\n    return undefined;\n};\n\nconst prepareItemsMap = (state: AppState) => {\n    const { cartPagePortal } = state;\n\n    return cartPagePortal.order.reduce<AppState['cartPagePortal']['itemsMap']>((result, itemId) => {\n        const cartItem = selectCartItemById(state, itemId);\n        const { imageUrl, name } = selectProductById(state, itemId);\n\n        if (cartItem) {\n            result[itemId] = {\n                imageUrl,\n                name,\n                price: preparePriceById(state, itemId),\n                oldPrice: getOldPriceById(state, itemId),\n                count: getCountById(state, itemId),\n                isWantMoreThanHave: wantMoreThanHave(state, itemId),\n                disabled: getDisabled(state, itemId),\n                label: prepareLabel(state, itemId),\n                isMoreButtonDisabled: !canAddMore(state, itemId),\n            };\n        }\n\n        return result;\n    }, {});\n};\n\nconst calculateMakePurchaseDisabled = (state: AppState) => {\n    const {\n        cart: { totalPrice },\n        delivery: { minimalPrice },\n    } = state;\n\n    return totalPrice < minimalPrice;\n};\n\nconst calculateMakePurchaseButtonView = (state: AppState): AppState['cartPagePortal']['makePurchaseButtonView'] => {\n    return state.cartPagePortal.isMakePurchaseButtonDisabled ? ButtonViews.secondary : ButtonViews.primary;\n};\n\nconst prepareTopGradientVisible = ({ cartPagePortal: { listIndexOffset } }: AppState) => listIndexOffset > 0;\n\nconst prepareBottomGradientVisible = ({ cartPagePortal: { listIndexOffset, order } }: AppState) => {\n    return (\n        // prettier-ignore\n        (listIndexOffset === 0 && order.length > 1) ||\n        listIndexOffset < order.length - 1\n    );\n};\n\nconst prepareListIndexOffset = ({ cartPagePortal: { listIndexOffset, order } }: AppState) => {\n    const maxValue = order.length - 1;\n    const minValue = 0;\n\n    // ограничиваем значение снизу и сверху\n    return Math.max(minValue, Math.min(listIndexOffset, maxValue));\n};\n\nconst getFormattedPhoneNumber = ({ userData }: AppState) =>\n    userData.phoneNumber && formatPhoneNumber(userData.phoneNumber);\n\nexport const cartPagePortalView: AppReducer = (state, action) => {\n    const { cart, delivery, cartPagePortal } = state;\n\n    switch (action.type) {\n        case 'cart/SLIDE_LIST': {\n            cartPagePortal.listIndexOffset = action.payload;\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    cartPagePortal.order = cart.order;\n    cartPagePortal.deliveryTime = delivery.deliveryTime;\n    cartPagePortal.itemsMap = prepareItemsMap(state);\n    cartPagePortal.totalPrice = prepareTotalPrice(state);\n    cartPagePortal.toMinimumPrice = prepareToMinimumPrice(state);\n    cartPagePortal.isMakePurchaseButtonDisabled = calculateMakePurchaseDisabled(state);\n    cartPagePortal.listIndexOffset = prepareListIndexOffset(state);\n\n    cartPagePortal.makePurchaseButtonView = calculateMakePurchaseButtonView(state);\n    cartPagePortal.topGradientVisible = prepareTopGradientVisible(state);\n    cartPagePortal.bottomGradientVisible = prepareBottomGradientVisible(state);\n    cartPagePortal.hasRequiredData = prepareHasRequiredData(state);\n    cartPagePortal.phoneNumber = getFormattedPhoneNumber(state);\n    cartPagePortal.personalAddress = getFormattedPersonalAddress(state);\n};\n","import { StoreUser } from 'store/constants/user';\nimport { isBuildingSuggest, isStreetSuggest } from 'tools/twoGis/api/suggest';\nimport { AddressSimpleSuggestItemView } from 'pages/AddressSimple/SuggestItem/AddressSimpleSuggestItem';\n\nimport { AppReducer, AppState } from '../../constants';\n\nconst prepareSuggestItems = (state: AppState) => {\n    const {\n        twoGisSuggestsData: { itemsMap },\n        addressSimplePagePortal: { inputValue },\n    } = state;\n\n    return Object.values(itemsMap).reduce<AddressSimpleSuggestItemView[]>((result, suggestItem) => {\n        if (isBuildingSuggest(suggestItem)) {\n            result.push({ name: suggestItem.address_name, id: suggestItem.id });\n        }\n\n        if (isStreetSuggest(suggestItem)) {\n            const { name, id } = suggestItem;\n\n            if (name !== inputValue) {\n                result.push({ id, name });\n            }\n        }\n\n        return result;\n    }, []);\n};\n\nexport const getHasValidAddress = (user: StoreUser) => {\n    const { street, house, city, address, addressLocationLatitude, addressLocationLongitude } = user;\n\n    return street && house && city && address && addressLocationLatitude && addressLocationLongitude;\n};\n\nconst prepareIsSubmitButtonDisabled = (state: AppState) => !getHasValidAddress(state.userModel);\n\nexport const addressSimplePagePortalView: AppReducer = (state) => {\n    state.addressSimplePagePortal.inputValue = state.userModel.address;\n    state.addressSimplePagePortal.suggests = prepareSuggestItems(state);\n    state.addressSimplePagePortal.isSubmitButtonDisabled = prepareIsSubmitButtonDisabled(state);\n};\n","import { AppState, AppReducer } from 'store/constants';\nimport { ROUTES } from 'store/constants/router';\nimport { formatPhoneNumber } from 'tools/format-phone-number';\n\nconst computeNextFocus = (state: AppState) => {\n    const { phoneNumber, apartment, entrance, floor, doorCode } = state.userModel;\n\n    const options = {\n        [ROUTES.ADDRESS_FULL_PHONE]: phoneNumber,\n        [ROUTES.ADDRESS_FULL_APARTMENT]: apartment,\n        [ROUTES.ADDRESS_FULL_ENTRANCE]: entrance,\n        [ROUTES.ADDRESS_FULL_FLOOR]: floor,\n        [ROUTES.ADDRESS_FULL_DOORCODE]: doorCode,\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const result = Object.entries(options).find(([_, value]) => !value);\n\n    return result ? result[0] : ROUTES.ADDRESS_FULL_ALL;\n};\n\nexport const addressFullPageView: AppReducer = (state) => {\n    state.addressFullPage.nextFocus = computeNextFocus(state);\n    state.addressFullPage.addressInputValue = state.userModel.address;\n    state.addressFullPage.phoneNumberInputValue = formatPhoneNumber(state.userModel.phoneNumber);\n    state.addressFullPage.apartmentInputValue = state.userModel.apartment;\n    state.addressFullPage.entranceInputValue = state.userModel.entrance;\n    state.addressFullPage.floorInputValue = state.userModel.floor;\n    state.addressFullPage.doorCodeInputValue = state.userModel.doorCode;\n    state.addressFullPage.isSubmitButtonDisabled =\n        !state.userModel.phoneNumber || state.userModel.phoneNumber.length !== 12;\n};\n","import { AppState, AppReducer } from 'store/constants';\nimport { ROUTES } from 'store/constants/router';\nimport { formatPhoneNumber } from 'tools/format-phone-number';\n\nconst computeNextFocus = (state: AppState) => {\n    const { phoneNumber, apartment, entrance, floor, doorCode } = state.userModel;\n\n    const options = {\n        [ROUTES.ADDRESS_FULL_PHONE]: phoneNumber,\n        [ROUTES.ADDRESS_FULL_APARTMENT]: apartment,\n        [ROUTES.ADDRESS_FULL_ENTRANCE]: entrance,\n        [ROUTES.ADDRESS_FULL_FLOOR]: floor,\n        [ROUTES.ADDRESS_FULL_DOORCODE]: doorCode,\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const result = Object.entries(options).find(([_, value]) => !value);\n\n    return result ? result[0] : ROUTES.ADDRESS_FULL_ALL;\n};\n\nexport const addressFullPagePortalView: AppReducer = (state) => {\n    state.addressFullPage.nextFocus = computeNextFocus(state);\n    state.addressFullPage.addressInputValue = state.userModel.address;\n    state.addressFullPage.phoneNumberInputValue = formatPhoneNumber(state.userModel.phoneNumber);\n    state.addressFullPage.apartmentInputValue = state.userModel.apartment;\n    state.addressFullPage.entranceInputValue = state.userModel.entrance;\n    state.addressFullPage.floorInputValue = state.userModel.floor;\n    state.addressFullPage.doorCodeInputValue = state.userModel.doorCode;\n    state.addressFullPage.isSubmitButtonDisabled =\n        !state.userModel.phoneNumber || state.userModel.phoneNumber.length !== 12;\n};\n","import { splitByThousands } from 'tools/split-by-thousands';\nimport { AppState, AppReducer } from 'store/constants';\nimport { ROUTES } from 'store/constants/router';\nimport { selectPathname } from 'store/selectors';\n\nconst routeToTitleMap: Record<string, string> = {\n    [ROUTES.CATALOG]: 'Самокат',\n    [ROUTES.CART]: 'Корзина',\n    [ROUTES.STATUS]: 'Самокат',\n    [ROUTES.ERROR]: 'Самокат',\n    [ROUTES.NO_AREA]: 'Адрес доставки',\n    [ROUTES.ADDRESS_SIMPLE]: 'Адрес доставки',\n    [ROUTES.ADDRESS_FULL_ALL]: 'Адрес доставки и телефон',\n    [ROUTES.ADDRESS_FULL_PHONE]: 'Номер телефона',\n    [ROUTES.ADDRESS_FULL_APARTMENT]: 'Квартира',\n    [ROUTES.ADDRESS_FULL_ENTRANCE]: 'Подъезд',\n    [ROUTES.ADDRESS_FULL_FLOOR]: 'Этаж',\n    [ROUTES.ADDRESS_FULL_DOORCODE]: 'Комментарий',\n};\n\nconst getTitle = (state: AppState) => routeToTitleMap[selectPathname(state)] || '';\n\nconst getAddress = (state: AppState) => ({\n    text: state.userData.address,\n    isVisible: selectPathname(state) === ROUTES.CATALOG,\n});\n\nconst getCart = (state: AppState) => ({\n    isVisible: state.cart.totalCount > 0 && selectPathname(state) === ROUTES.CATALOG,\n    count: state.cart.totalCount,\n    price: splitByThousands(Math.ceil(state.cart.totalPrice / 100)),\n});\n\nconst routeToVisibilityMap: Record<string, boolean> = {\n    [ROUTES.CATALOG]: true,\n    [ROUTES.CART]: true,\n    [ROUTES.STATUS]: true,\n    [ROUTES.ERROR]: true,\n    [ROUTES.NO_AREA]: true,\n    [ROUTES.ADDRESS_SIMPLE]: true,\n    [ROUTES.ADDRESS_FULL_ALL]: true,\n    [ROUTES.ADDRESS_FULL_PHONE]: true,\n    [ROUTES.ADDRESS_FULL_APARTMENT]: true,\n    [ROUTES.ADDRESS_FULL_ENTRANCE]: true,\n    [ROUTES.ADDRESS_FULL_FLOOR]: true,\n    [ROUTES.ADDRESS_FULL_DOORCODE]: true,\n};\n\nconst isVisible = ({ router }: AppState) => routeToVisibilityMap[router.location.pathname] || false;\n\nexport const headerView: AppReducer = (state) => {\n    const { header } = state.layout;\n\n    header.title = getTitle(state);\n    header.address = getAddress(state);\n    header.cart = getCart(state);\n    header.isVisible = isVisible(state);\n    header.isBackButtonVisible = Boolean(window.history.length);\n};\n","import { AppReducer, AppState } from 'store/constants';\nimport { OrderErrorPayload } from 'store/constants/native';\n\nconst mapOrderErrorTypeToProps: Record<OrderErrorPayload['type'], AppState['errorPage']> = {\n    partner: {\n        title: 'Не получилось оформить заказ',\n        subtitle: 'Пожалуйста, попробуйте ещё раз',\n        retryButtonText: 'Повторить',\n        closeButtonText: 'Очень жаль',\n    },\n    payment: {\n        title: 'Не получилось оформить заказ',\n        subtitle: 'Пожалуйста, попробуйте ещё раз',\n        retryButtonText: 'Повторить',\n        closeButtonText: 'Очень жаль',\n    },\n    timing: {\n        title: 'Закрыто',\n        subtitle: 'Часы работы с 8:00 до 23:00, \\nбез обеда и выходных',\n        retryButtonText: 'Повторить',\n        closeButtonText: 'Зайду позже',\n    },\n};\n\nexport const errorPageView: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'ORDER_ERROR': {\n            state.errorPage = mapOrderErrorTypeToProps[action.payload.type];\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n};\n","import { AppReducer } from 'store/constants';\n\nexport const waitPageView: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'MAKE_PURCHASE': {\n            state.waitPage.text = 'Оформляем заказ...';\n            break;\n        }\n        case 'VALIDATION_OK': {\n            state.waitPage.text = '';\n            break;\n        }\n        case 'ORDER_ERROR': {\n            state.waitPage.text = '';\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n};\n","import { createEmptyAction } from 'tools/create-action';\n\nexport const askForStockAction = () => createEmptyAction('ASK_FOR_STOCK');\n\nexport const askForItemsChangesAction = () => createEmptyAction('ASK_FOR_ITEMS_CHANGES');\n\nexport const makePurchaseAction = () => createEmptyAction('MAKE_PURCHASE');\n\nexport const pageChangeAction = () => createEmptyAction('PAGE_CHANGE');\n\nexport const askForOrderStatusAction = () => createEmptyAction('ASK_FOR_ORDER_STATUS');\n\nexport const askForOrderStatusFinalAction = () => createEmptyAction('ASK_FOR_ORDER_STATUS_FINAL');\n\nexport const addressSubmitAction = () => createEmptyAction('ADDRESS_SUBMIT');\n\nexport const addressFullSubmitAction = () => createEmptyAction('ADDRESS_FULL_SUBMIT');\n","/* eslint-disable no-underscore-dangle */\n/* eslint-disable @typescript-eslint/camelcase */\nimport { GO_TO_CATALOG } from 'mocks/goToCatalog';\nimport { ITEMS_CHANGES_MOCK } from 'mocks/itemsChanges';\nimport { SHOW_ITEMS_MOCK } from 'mocks/showItems';\nimport { createStore as createReduxStore, Middleware, applyMiddleware, compose, StoreEnhancer } from 'redux';\nimport { routerMiddleware, push, replace, goBack, LOCATION_CHANGE } from 'connected-react-router';\nimport thunk from 'redux-thunk';\nimport { createHashHistory } from 'history';\nimport { applyItemsChanges, revertUserChanges } from 'store/actions/app';\nimport { getCountById } from 'store/reducers/helpers/catalogPage';\nimport { getHasValidAddress } from 'store/reducers/view/addressSimplePage';\nimport { addressFullSuccessThunk, addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport { goToCatalogThunk, goToPromoThunk, goToValidationThunk, validationOkThunk } from 'store/thunks/native';\nimport { isPortal } from 'tools/browser';\nimport { AppStateInterface } from 'types/app-state';\n\nimport { AssistantSdkCommand } from './constants/native';\nimport { AssistantSdkServerAction } from './constants/server';\nimport { ROUTES } from './constants/router';\nimport { AppState, AppBaseAction, AppMiddleware, AppDispatch } from './constants';\nimport { getRootReducer } from './reducers';\nimport {\n    showItemsAction,\n    addItemAction,\n    removeAllAction,\n    removeItemAction,\n    addressInputAction,\n    addressInputAddAction,\n    addressInputClearAction,\n    addressFullInputAddAction,\n    addressFullInputClearAction,\n    addressFullValidationErrorAction,\n    askAgainForOrderStatusFinalAction,\n    goBackAction,\n    askAgainForOrderStatusAction,\n    addressFullInputAction,\n    orderErrorAction,\n    itemsChangesAction,\n    goToWaitAction,\n    addressFullCommentAction,\n} from './actions/native';\nimport {\n    askForOrderStatusFinalAction,\n    askForOrderStatusAction,\n    askForStockAction,\n    askForItemsChangesAction,\n    pageChangeAction,\n} from './actions/server';\nimport { selectPathname } from './selectors';\nimport { ScenarioUser, ScenarioUserAddress, StoreUser } from './constants/user';\n\nconst serverActionMiddleware: AppMiddleware = ({ dispatch, getState }) => (next) => (action) => {\n    switch (action.type) {\n        case 'CLOSE_APP': {\n            window.AssistantClient.close();\n            break;\n        }\n        case 'ASK_FOR_STOCK': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: SHOW_ITEMS_MOCK,\n                    });\n                }, 500);\n\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'ADD_ITEM',\n                            item: '76c9db12-7fb3-11ea-82f9-0050560306e1',\n                            count: '5',\n                        },\n                    });\n                }, 1000);\n\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'ADD_ITEM',\n                            item: '5274f7a2-0a86-11e9-80c5-0cc47a817925',\n                            count: '2',\n                        },\n                    });\n                }, 1500);\n\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'ADD_ITEM',\n                            item: 'e872ac23-0548-11e9-80c5-0cc47a817925',\n                            count: '2',\n                        },\n                    });\n                }, 2000);\n\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'ADD_ITEM',\n                            item: '87d5409f-6abb-11ea-9786-0050560307be',\n                            count: '2',\n                        },\n                    });\n                }, 2250);\n\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'ADD_ITEM',\n                            item: '19c85d26-c4c9-11e9-bb93-ac1f6b6e023e',\n                            count: '2',\n                        },\n                    });\n                }, 2500);\n            }\n\n            break;\n        }\n        case 'ASK_FOR_ITEMS_CHANGES': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line\n                        smart_app_data: ITEMS_CHANGES_MOCK,\n                    });\n                }, 500);\n            }\n\n            break;\n        }\n        case 'ADDRESS_SUBMIT': {\n            window.AssistantClient.sendData({ action_id: action.type });\n            break;\n        }\n        case 'ADDRESS_FULL_SUBMIT': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                window.AssistantClient.onData({\n                    type: 'smart_app_data',\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    smart_app_data: {\n                        command: 'GO_TO_VALIDATION',\n                    },\n                });\n            }\n\n            break;\n        }\n        case 'ASK_FOR_ORDER_STATUS': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                window.AssistantClient.onData({\n                    type: 'smart_app_data',\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    smart_app_data: {\n                        command: 'ASK_AGAIN_FOR_ORDER_STATUS_FINAL',\n                    },\n                });\n            }\n\n            break;\n        }\n        case 'ASK_FOR_ORDER_STATUS_FINAL': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                window.AssistantClient.onData({\n                    type: 'smart_app_data',\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    smart_app_data: {\n                        command: 'VALIDATION_OK',\n                        status: true,\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        order_id: '364528',\n                    },\n                });\n            }\n\n            break;\n        }\n        case 'MAKE_PURCHASE': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'GO_TO_WAIT',\n                        },\n                    });\n                }, 500);\n            }\n\n            break;\n        }\n        case 'PAGE_CHANGE': {\n            window.AssistantClient.sendData({ action_id: action.type });\n            break;\n        }\n        /**\n         * tldr; В кейсе LOCATION_CHANGE все dispatch'и нужно ОБЯЗАТЕЛЬНО оборачивать в setTimeout.\n         * Нельзя влазить и диспатчить action'ы перед LOCATION_CHANGE, от этого ломается\n         * взаимодействие connected-react-router и history.\n         *\n         * Внимание! Перед прочтением этого коммента лучше пойти взять бутылку чего нибудь покрепче,\n         * потому что без нее не разобраться.\n         *\n         * Так вот, для понимания того, почему это нужно делать. Сперва, нужно понять то,\n         * как работает навигация в кишках connected-react-router и history.\n         * Предположим, мы хотим перейти на другую страницу. Для этого\n         * dispatch'им push action react-connected-router'a с типом @@router/CALL_HISTORY_METHOD\n         * который подхватывает router middleware и вызывает\n         * соответствующий метод (push) у библиотеки history.\n         * В результате чего history меняет урл через History API браузера\n         * и обновляет свой стейт. После оповещает слушателей, подписанных на это.\n         * Внутри connected-react-router'а вызывается обработчик, который подписан\n         * на изменение стейта (локального, внутри библиотеки) history.\n         * Он dispatch'ит action, с типом @@router/LOCATION_CHANGE, который должен долететь\n         * до редюсера connected-react-router’а и актуализировать (синкнуть со стейтом в history) стейт router'a.\n         * После чего на изменение стейта срабатывает обработчик который обычно триггерит рендер react'а,\n         * но у connected-react-router’a есть свой такой, который нужен для того,\n         * чтобы синкать стейт router'a в сторе и стейт пакета history.\n         * То есть в обратную сторону. Вот в этом то месте и происходит рассинхрон.\n         *\n         * Из-за того что этот обработчик в connected-react-router'е не смотрит на action,\n         * который к нему прилетает (redux его не прокидывает), он пытается синкать\n         * состояния на каждый чих. Валидно убеждается в том, что состояния разные из-за того что history\n         * уже внесла в свой стейт изменения, а редюсер router'a еще не отработал, потому что\n         * до него влез другой action.\n         * После чего вызывает соответствующий метод у history, который снова меняет ее состояние\n         * и снова триггерит об этом экшен и все это еще больше запутывается.\n         **/\n        case LOCATION_CHANGE: {\n            const state = getState();\n\n            const currentPathname = selectPathname(state);\n            const nextPathname = action.payload.location.pathname;\n\n            switch (currentPathname) {\n                case ROUTES.CATALOG:\n                case ROUTES.CART: {\n                    setTimeout(() => {\n                        dispatch(applyItemsChanges());\n                    });\n\n                    break;\n                }\n                case ROUTES.ADDRESS_SIMPLE: {\n                    /**\n                     * Если мы возвращаемся обратно на страницу ввода\n                     * полного адреса со страницы ввода базового адреса,\n                     * без сохранения, то нужно вернуть все поля в исходное\n                     * положение, но есть нюанс ;)\n                     */\n                    if (nextPathname === ROUTES.ADDRESS_FULL_ALL) {\n                        /**\n                         *  Если удалить один символ в инпуте, а потом ввести его,\n                         *  то адрес не поменяется (строковое значение), но все остальные поля\n                         *  (дом, улица, город) будут сброшены (потому что они сбрасываются при\n                         *  изменении значения инпуте).\n                         *  Поэтому здесь так же есть проверка на заполненность.\n                         */\n                        const isAddressChanged = state.userData.address !== state.userModel.address;\n                        const hasValidAddress = getHasValidAddress(state.userModel);\n                        if (!hasValidAddress || isAddressChanged) {\n                            dispatch(revertUserChanges());\n                        }\n                    }\n\n                    break;\n                }\n\n                default:\n                    break;\n            }\n\n            switch (nextPathname) {\n                case ROUTES.CATALOG: {\n                    if (Object.keys(state.productsData.itemsMap).length) {\n                        setTimeout(() => {\n                            dispatch(askForItemsChangesAction());\n                        });\n                    } else {\n                        setTimeout(() => {\n                            dispatch(askForStockAction());\n                        });\n                    }\n\n                    break;\n                }\n                case ROUTES.CART: {\n                    if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                        if (!Object.keys(state.productsData.itemsMap).length) {\n                            setTimeout(() => {\n                                dispatch(askForStockAction());\n                            });\n                        }\n                    }\n\n                    setTimeout(() => {\n                        dispatch(askForItemsChangesAction());\n                    });\n\n                    break;\n                }\n\n                default:\n                    break;\n            }\n\n            // при ините приложения прилетает LOCATION_CHANGE,\n            // это проверка нужна чтобы не слать лишний сервер экшен\n            if (currentPathname !== nextPathname) {\n                setTimeout(() => {\n                    dispatch(pageChangeAction());\n                });\n            }\n\n            break;\n        }\n        default:\n            break;\n    }\n\n    return next(action);\n};\n\nexport const history = createHashHistory();\nconst enhancers: StoreEnhancer[] = [];\nconst middlewares: Middleware[] = [thunk, routerMiddleware(history), serverActionMiddleware as Middleware];\n\nif (process.env.NODE_ENV !== 'production') {\n    if (typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION__) {\n        enhancers.push(window.__REDUX_DEVTOOLS_EXTENSION__());\n    }\n}\n\nexport const store = createReduxStore<AppState, AppBaseAction, {}, {}>(\n    /**\n     * TODO: прикрутить валидацию recoveryStat'a\n     * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-200\n     */\n    getRootReducer(history, window.appRecoveryState as AppState),\n    compose(applyMiddleware(...middlewares), ...enhancers),\n);\nconst dispatch = store.dispatch as AppDispatch;\n\nif (process.env.NODE_ENV !== 'production') {\n    window.__store = store;\n}\n\nexport const dispatchToReduxStore = ({ smart_app_data, type }: AssistantSdkCommand) => {\n    if (type !== 'smart_app_data') {\n        return;\n    }\n\n    switch (smart_app_data.command) {\n        case 'SHOW_ITEMS':\n            dispatch(showItemsAction(smart_app_data));\n            break;\n        case 'ITEMS_CHANGES': {\n            dispatch(itemsChangesAction(smart_app_data));\n            break;\n        }\n        case 'ADD_ITEM': {\n            dispatch(addItemAction(smart_app_data));\n            break;\n        }\n        case 'REMOVE_ALL': {\n            dispatch(removeAllAction());\n            break;\n        }\n        case 'REMOVE_ITEM': {\n            dispatch(removeItemAction({ ...smart_app_data, shouldRemoveMention: true }));\n            break;\n        }\n        case 'GO_TO_CATALOG': {\n            dispatch(goToCatalogThunk(smart_app_data));\n            break;\n        }\n        case 'GO_TO_NO_AREA': {\n            dispatch(push(ROUTES.NO_AREA));\n            break;\n        }\n        case 'GO_TO_VALIDATION': {\n            dispatch(goToValidationThunk());\n            break;\n        }\n        case 'GO_TO_PROMO': {\n            dispatch(goToPromoThunk(smart_app_data));\n            break;\n        }\n        case 'GO_TO_ADDRESS_SIMPLE': {\n            dispatch(push(ROUTES.ADDRESS_SIMPLE));\n            break;\n        }\n        case 'GO_TO_ADDRESS_FULL': {\n            dispatch(push(ROUTES.ADDRESS_FULL_ALL));\n            break;\n        }\n        case 'VALIDATION_OK': {\n            dispatch(validationOkThunk(smart_app_data));\n            break;\n        }\n        case 'ORDER_ERROR': {\n            dispatch(orderErrorAction(smart_app_data));\n            dispatch(replace(ROUTES.ERROR));\n            break;\n        }\n        case 'ADDRESS_INPUT': {\n            dispatch(addressInputAction(smart_app_data));\n            dispatch(push(ROUTES.ADDRESS_SIMPLE));\n            break;\n        }\n        case 'ADDRESS_INPUT_ADD': {\n            dispatch(addressInputAddAction(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_INPUT_CLEAR': {\n            dispatch(addressInputClearAction());\n            break;\n        }\n        case 'ADDRESS_FULL_SUCCESS': {\n            dispatch(addressFullSuccessThunk());\n            break;\n        }\n        case 'ADDRESS_FULL_INPUT': {\n            dispatch(addressFullInputAction(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_FULL_INPUT_ADD': {\n            dispatch(addressFullInputAddAction(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_FULL_INPUT_CLEAR': {\n            dispatch(addressFullInputClearAction());\n            break;\n        }\n        case 'ADDRESS_FULL_COMMENT': {\n            dispatch(addressFullCommentAction(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_FULL_VALIDATION_OK': {\n            dispatch(addressFullValidationOkThunk());\n            break;\n        }\n        case 'ADDRESS_FULL_VALIDATION_ERROR': {\n            dispatch(addressFullValidationErrorAction());\n            break;\n        }\n        case 'ASK_AGAIN_FOR_ORDER_STATUS_FINAL': {\n            dispatch(askAgainForOrderStatusFinalAction());\n            setTimeout(() => dispatch(askForOrderStatusFinalAction()), 500);\n            break;\n        }\n        case 'GO_TO_WAIT': {\n            dispatch(push(ROUTES.WAIT));\n            dispatch(goToWaitAction());\n            dispatch(askForOrderStatusAction());\n            break;\n        }\n        case 'GO_BACK': {\n            dispatch(goBackAction());\n            dispatch(goBack());\n            break;\n        }\n        case 'ASK_AGAIN_FOR_ORDER_STATUS': {\n            dispatch(askAgainForOrderStatusAction());\n            setTimeout(() => dispatch(askForOrderStatusAction()), 500);\n            break;\n        }\n        default:\n            break;\n    }\n};\n\nif (process.env.REACT_APP_ENVIRONMENT !== 'production' && module.hot) {\n    module.hot.accept('./reducers', () => {\n        // eslint-disable-next-line\n        const { getRootReducer } = require('./reducers');\n        const rootReducer = getRootReducer(history);\n\n        store.replaceReducer(rootReducer);\n    });\n}\n\nconst castCatalogItemSelectorFromStore = (state: AppState): AppStateInterface['item_selector'] => {\n    const {\n        catalogPage,\n        catalogPagePortal,\n        productsData: { itemsMap },\n    } = state;\n\n    const screenIndexMap = isPortal ? catalogPagePortal.screenIndexMap : catalogPage.screenIndexMap;\n\n    return {\n        ignored_words: ['добавь', 'удали'],\n        items: Object.values(itemsMap)\n            .filter(({ id }) => screenIndexMap[id])\n            .map(({ id, name: title }) => {\n                const number = screenIndexMap[id];\n\n                return {\n                    id,\n                    title,\n                    visible: true,\n                    number,\n                };\n            }),\n    };\n};\n\nconst castItemSelectorFromStore = (state: AppState): AppStateInterface['item_selector'] => {\n    const pathname = selectPathname(state);\n\n    switch (pathname) {\n        case ROUTES.CATALOG:\n            return castCatalogItemSelectorFromStore(state);\n\n        default:\n            return {\n                ignored_words: [],\n                items: [],\n            };\n    }\n};\n\nconst serializeAddress = (storeUser: StoreUser): ScenarioUserAddress => {\n    const {\n        address,\n        city,\n        street,\n        house,\n        building,\n        floor,\n        entrance,\n        apartment,\n        doorCode,\n        addressLocationLatitude,\n        addressLocationLongitude,\n    } = storeUser;\n\n    return {\n        location: {\n            latitude: addressLocationLatitude,\n            longitude: addressLocationLongitude,\n        },\n        address_string: address,\n        city,\n        street,\n        house,\n        building,\n        floor,\n        entrance,\n        apartment,\n        door_code: doorCode,\n        confirmed: 'true',\n    };\n};\n\nconst prepareAddress = (state: AppState): ScenarioUser => {\n    let source;\n\n    switch (selectPathname(state)) {\n        case ROUTES.ADDRESS_SIMPLE:\n        case ROUTES.ADDRESS_FULL_ALL: {\n            source = state.userModel;\n\n            break;\n        }\n\n        default: {\n            source = state.userData;\n\n            break;\n        }\n    }\n\n    return {\n        phone_num: source.phoneNumber,\n        customer_name: source.customerName,\n        address: serializeAddress(source),\n    };\n};\n\nconst castFromStore = (): AppStateInterface => {\n    const state = store.getState();\n    const { cart } = state;\n    const pathname = selectPathname(state);\n\n    return {\n        item_selector: castItemSelectorFromStore(state),\n        foodtech: {\n            currentScreen: pathname.substring(1),\n            products: Object.keys(cart.itemsMap)\n                .map((id) => {\n                    const quantity = getCountById(state, id);\n\n                    return { id, quantity };\n                })\n                .filter(({ quantity }) => Boolean(quantity)),\n            totalPrice: {\n                value: cart.totalPrice,\n                discountValue: cart.totalPrice,\n            },\n            ...prepareAddress(state),\n        },\n    };\n};\n\nif (window.appInitialData) {\n    if (Array.isArray(window.appInitialData)) {\n        window.appInitialData.forEach(dispatchToReduxStore);\n    } else {\n        dispatchToReduxStore(window.appInitialData);\n    }\n}\n\n/* eslint-disable no-console */\nwindow.AssistantClient = window.AssistantClient || {};\n\nif (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n    // eslint-disable-next-line no-underscore-dangle\n    window.__inbox = window.__inbox || [];\n    // eslint-disable-next-line no-underscore-dangle\n    window.__outbox = window.__outbox || [];\n}\n\n/**\n * Assistand SDK API implementation:\n */\nwindow.AssistantClient.onStart = () => {\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('invoke onStart callback');\n    }\n};\n\nwindow.AssistantClient.onData = (command: AssistantSdkCommand) => {\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        // eslint-disable-next-line no-underscore-dangle\n        window.__inbox.push(command);\n    }\n\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log(`server command: ${JSON.stringify(command)}`);\n    }\n\n    dispatchToReduxStore(command);\n};\n\nwindow.AssistantClient.sendData = (message: AssistantSdkServerAction) => {\n    if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n        window.AssistantClient.onRequestState();\n    }\n\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log(`sendData: ${JSON.stringify(message)}`);\n    }\n\n    if (window.AssistantHost && typeof window.AssistantHost.sendData === 'function') {\n        window.AssistantHost.sendData(JSON.stringify(message), null);\n    }\n};\n\nwindow.AssistantClient.onRequestState = () => {\n    const state = castFromStore();\n    const stateString = JSON.stringify(state);\n\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('invoke request state callback', stateString);\n    }\n\n    if (window.AssistantHost && typeof window.AssistantHost.updateState === 'function') {\n        window.AssistantHost.updateState(stateString);\n    }\n\n    return state;\n};\n\nwindow.AssistantClient.onRequestRecoveryState = () => {\n    const state = store.getState();\n\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('invoke request recovery state callback', JSON.stringify(state, null, 2));\n    }\n\n    return state;\n};\n\nwindow.AssistantClient.close = () => {\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('call close native method');\n    }\n\n    if (window.AssistantHost && typeof window.AssistantHost.close === 'function') {\n        window.AssistantHost.close();\n    }\n};\n\nif (window.AssistantHost && typeof window.AssistantHost.ready === 'function') {\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('call ready native method');\n    }\n\n    window.AssistantHost.ready();\n}\n\n// эмуляция первой команды от бэка\nif (process.env.REACT_APP_ENVIRONMENT === 'development') {\n    setTimeout(() => {\n        window.AssistantClient.onData({\n            type: 'smart_app_data',\n            // eslint-disable-next-line @typescript-eslint/camelcase\n            smart_app_data: GO_TO_CATALOG,\n        });\n    }, 100);\n}\n","import { produce } from 'immer';\nimport { History } from 'history';\nimport { isMobile, isPortal } from 'tools/browser';\nimport { initialState, AppBaseAction, AppState } from 'store/constants';\nimport { productsData } from 'store/reducers/data/products';\nimport { productsDiffData } from 'store/reducers/data/productsDiff';\nimport { twoGisSuggestsData } from 'store/reducers/data/twoGisSuggests';\nimport { userData } from 'store/reducers/data/user';\nimport { deliveryData } from 'store/reducers/data/delivery';\nimport { getRouterModel } from 'store/reducers/model/router';\nimport { cartModel } from 'store/reducers/model/cart';\nimport { userModel } from 'store/reducers/model/user';\nimport { catalogPageView } from 'store/reducers/view/catalogPage';\nimport { catalogPageTouchView } from 'store/reducers/view/catalogPage@touch';\nimport { catalogPagePortalView } from 'store/reducers/view/catalogPage@portal';\nimport { cartPageView } from 'store/reducers/view/cartPage';\nimport { cartPageTouchView } from 'store/reducers/view/cartPage@touch';\nimport { cartPagePortalView } from 'store/reducers/view/cartPage@portal';\nimport { addressSimplePageView } from 'store/reducers/view/addressSimplePage';\nimport { addressSimplePagePortalView } from 'store/reducers/view/addressSimplePage@portal';\nimport { addressFullPageView } from 'store/reducers/view/addressFullPage';\nimport { addressFullPagePortalView } from 'store/reducers/view/addressFullPage@portal';\nimport { headerView } from 'store/reducers/view/header';\nimport { errorPageView } from 'store/reducers/view/errorPage';\nimport { waitPageView } from 'store/reducers/view/waitPage';\n\nexport const getRootReducer = (history: History, recoveryState?: AppState) => {\n    const routerModel = getRouterModel(history);\n\n    const reducers = [\n        // уровень данных\n        productsData,\n        productsDiffData,\n        twoGisSuggestsData,\n        userData,\n        deliveryData,\n\n        // уровень бизнес логики\n        routerModel,\n        cartModel,\n        userModel,\n    ];\n\n    // уровень пропсов для для отрисовки компонентов\n    if (isMobile) {\n        // версия для мобилок\n        reducers.push(\n            // prettier-ignore\n            cartPageTouchView,\n            catalogPageTouchView,\n            headerView,\n        );\n    } else if (isPortal) {\n        // версия для старгейта\n        reducers.push(\n            // prettier-ignore\n            catalogPagePortalView,\n            cartPagePortalView,\n            addressSimplePagePortalView,\n            addressFullPagePortalView,\n            waitPageView,\n            errorPageView,\n            headerView,\n        );\n    } else {\n        // версия для десктопа (сбербокс)\n        reducers.push(\n            catalogPageView,\n            cartPageView,\n            addressSimplePageView,\n            addressFullPageView,\n            waitPageView,\n            errorPageView,\n            headerView,\n        );\n    }\n\n    return (state = recoveryState || initialState, action: AppBaseAction) =>\n        produce(state, (draft) => {\n            reducers.forEach((reducer) => reducer(draft, action));\n        });\n};\n","import { History, LocationState } from 'history';\nimport { connectRouter, LocationChangeAction } from 'connected-react-router';\n\nimport { AppReducer } from '../../constants';\n\nexport const getRouterModel = (history: History): AppReducer => {\n    const changeRouter = connectRouter<LocationState>(history);\n\n    return (state, action) => {\n        /**\n         * @see https://github.com/supasate/connected-react-router/blob/master/src/reducer.js#L58\n         * Здесь костылим тип экшена, потому что в библиотеке\n         * криво написаны тайпинги. На самом деле, метод принимает любые экшены,\n         * но работает только LocationChangeAction (там стоит ифак на него).\n         *\n         * Проблема в том, что если не вызывать этот метод с другими экшенами,\n         * то по экшену @@INIT этот метод не вернет изначальное состояние router.\n         */\n        state.router = changeRouter(state.router, action as LocationChangeAction);\n    };\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const HeadlineText1 = styled.div`\n    font-weight: ${font.weight.bold};\n    font-size: 64px;\n    line-height: 72px;\n    letter-spacing: -0.011em;\n`;\n\nexport const HeadlineText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 48px;\n    line-height: 56px;\n    letter-spacing: -0.022em;\n`;\n\nexport const HeadlineText3 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 40px;\n    line-height: 48px;\n    letter-spacing: -0.025em;\n`;\n\nexport const HeadlineText4 = styled.div`\n    font-weight: ${font.weight.bold};\n    font-size: 40px;\n    line-height: 48px;\n    letter-spacing: -0.025em;\n`;\n","import { useThrottledFn as _useThrottledFn, ThrottleOrDebounceOpts } from 'beautiful-react-hooks';\n\nconst defaultOptions: ThrottleOrDebounceOpts = {\n    leading: false,\n    trailing: true,\n};\n\nexport const useThrottledFn: typeof _useThrottledFn = (fn, timeout, options = defaultOptions, dependencies) =>\n    _useThrottledFn(fn, timeout, options, dependencies);\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const ButtonText1 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 32px;\n    line-height: 40px;\n`;\n\nexport const ButtonText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 28px;\n    line-height: 32px;\n`;\n","// TODO: FRNTND-1 mv to npm package\n\nexport const icon = {\n    xs: {\n        sizePx: 24,\n    },\n    m: {\n        sizePx: 48,\n    },\n    s: {\n        sizePx: 32,\n    },\n};\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { transition } from 'style/const/transition';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport { ButtonText1 } from 'components/Text/Button';\nimport { color } from 'style/const/color';\nimport { icon } from 'style/const/icon';\n\nconst containerBorderRadiusPx = 24;\n\ninterface StyledHeaderButtonProps {\n    isVisible?: boolean;\n}\n\nconst StyledHeaderButton = styled.div<StyledHeaderButtonProps>`\n    position: relative;\n\n    display: flex;\n    align-items: center;\n\n    margin-left: 24px;\n\n    box-sizing: border-box;\n    height: 80px;\n    padding: 16px 36px;\n    border-radius: ${containerBorderRadiusPx}px;\n\n    transition: background-color ${transition.default};\n    will-change: background-color;\n\n    ${focusBorderMixin({ borderRadius: containerBorderRadiusPx })}\n\n    &:focus {\n        background: ${color.button.secondary1};\n    }\n\n    &:first-of-type {\n        margin-left: 0;\n    }\n\n    ${({ isVisible }) =>\n        !isVisible &&\n        css`\n            display: none;\n        `}\n`;\n\nconst textHeightPx = icon.m.sizePx;\n\nconst StyledText = styled(ButtonText1)`\n    margin-left: 8px;\n\n    height: ${textHeightPx}px;\n    padding: 0 4px;\n\n    line-height: ${textHeightPx}px;\n\n    color: ${color.text.white};\n\n    opacity: 0.88;\n`;\n\ninterface HeaderButtonProps {\n    text: string;\n    isVisible?: boolean;\n    onClick?: () => void;\n}\n\nexport const HeaderButton: React.FC<HeaderButtonProps> = ({ text, isVisible, onClick: handleClick, children }) => {\n    return (\n        <StyledHeaderButton tabIndex={0} onClick={handleClick} isVisible={isVisible}>\n            {children}\n            <StyledText>{text}</StyledText>\n        </StyledHeaderButton>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { useThrottledFn } from 'hooks/useThrottledFn';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButton } from 'components/HeaderButton/HeaderButton';\nimport { icon } from 'style/const/icon';\n\nimport addressIcon from './address.svg';\n\nconst addressIconSizePx = icon.m.sizePx;\n\nconst StyledIcon = styled.div`\n    width: ${addressIconSizePx}px;\n    height: ${addressIconSizePx}px;\n\n    background-image: url('${addressIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst throttleTimeoutMs = 200;\n\nexport const HeaderAddress: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const text = useSelector((state) => selectHeader(state).address.text);\n    const isVisible = useSelector((state) => selectHeader(state).address.isVisible);\n\n    const handleClick = useThrottledFn(() => dispatch(push(ROUTES.ADDRESS_SIMPLE)), throttleTimeoutMs, undefined, [\n        dispatch,\n    ]);\n\n    return (\n        <HeaderButton isVisible={isVisible} onClick={handleClick} text={text}>\n            <StyledIcon />\n        </HeaderButton>\n    );\n};\n","import React from 'react';\nimport { push } from 'connected-react-router';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { useThrottledFn } from 'hooks/useThrottledFn';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButton } from 'components/HeaderButton/HeaderButton';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\n\nimport cartIcon from './HeaderCart.assets/cart.svg';\n\nconst cartIconSizePx = icon.m.sizePx;\n\nconst StyledIcon = styled.div`\n    position: relative;\n\n    width: ${cartIconSizePx}px;\n    height: ${cartIconSizePx}px;\n\n    background-image: url('${cartIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst badgeSizePx = 32;\nconst badgeOffsetPx = cartIconSizePx / 2;\n\nconst StyledBadge = styled.span`\n    position: absolute;\n    left: ${badgeOffsetPx}px;\n    bottom: ${badgeOffsetPx}px;\n\n    width: ${badgeSizePx}px;\n    height: ${badgeSizePx}px;\n    border-radius: 50%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    line-height: 24px;\n    font-size: 20px;\n    letter-spacing: -0.019em;\n\n    box-sizing: border-box;\n\n    color: ${color.text.primary};\n    background: ${color.button.primary};\n`;\n\nconst throttleTimeoutMs = 200;\n\nexport const HeaderCart: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const count = useSelector((state) => selectHeader(state).cart.count);\n    const price = useSelector((state) => selectHeader(state).cart.price);\n    const isVisible = useSelector((state) => selectHeader(state).cart.isVisible);\n\n    const handleClick = useThrottledFn(\n        () => {\n            dispatch(push(ROUTES.CART));\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch],\n    );\n\n    const text = `${price} ₽`;\n\n    return (\n        <HeaderButton isVisible={isVisible} onClick={handleClick} text={text}>\n            <StyledIcon>\n                <StyledBadge>{count}</StyledBadge>\n            </StyledIcon>\n        </HeaderButton>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { layoutHeaderHeight, layoutHeaderPaddingHorizontal } from 'style/const/layout';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport { HeadlineText4 } from 'components/Text/Headline';\nimport { HeaderAddress } from 'components/HeaderAddress/HeaderAddress';\nimport { HeaderCart } from 'components/HeaderCart/HeaderCart';\n\nimport logoIcon from './Header.assets/logo.svg';\n\ninterface StyledHeaderProps {\n    isVisible: boolean;\n}\n\nconst StyledHeader = styled.div<StyledHeaderProps>`\n    position: relative;\n\n    height: ${layoutHeaderHeight}px;\n\n    box-sizing: border-box;\n    padding: 0 88px 0 ${layoutHeaderPaddingHorizontal}px;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    --spatial-navigation-contain: contain;\n\n    opacity: ${({ isVisible }) => Number(isVisible)};\n\n    transition: opacity ${transition.default};\n`;\n\nconst StyledSection = styled.div`\n    display: flex;\n    align-items: center;\n`;\n\nconst logoSizePx = 72;\n\nconst StyledLogo = styled.div`\n    width: ${logoSizePx}px;\n    height: ${logoSizePx}px;\n    border-radius: 16px;\n\n    background-image: url(${logoIcon});\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst StyledTitle = styled(HeadlineText4)`\n    margin-left: 24px;\n\n    display: inline-block;\n\n    color: ${color.text.white};\n`;\n\ninterface HeaderProps {\n    className?: string;\n}\nexport const Header: React.FC<HeaderProps> = ({ className }) => {\n    // нельзя возвращать объект с пропсами целиком, потому что из-за\n    // реализации архитектуры, он пересчитывается на каждый экшен и ссылка разная\n    // от чего, соответственно перерендеривается все дерево компонентов\n    const isVisible = useSelector(({ layout: { header } }) => header.isVisible);\n    const title = useSelector(({ layout: { header } }) => header.title);\n\n    return (\n        <StyledHeader className={className} isVisible={isVisible}>\n            <StyledSection>\n                <StyledLogo />\n                <StyledTitle>{title}</StyledTitle>\n            </StyledSection>\n            <StyledSection>\n                <HeaderAddress />\n                <HeaderCart />\n            </StyledSection>\n        </StyledHeader>\n    );\n};\n","import React from 'react';\n\nexport const preventAllScroll = (event: React.SyntheticEvent<HTMLDivElement>) => {\n    event.currentTarget.scrollTop = 0;\n    event.currentTarget.scrollLeft = 0;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Header } from 'components/Header/Header';\nimport { color } from 'style/const/color';\nimport { layoutContentHeight, layoutHeaderPaddingTop } from 'style/const/layout';\nimport gradientBackground from 'assets/images/background-tv-sber.jpg';\nimport { preventAllScroll } from 'tools/preventAllScroll';\n\nconst StyledContainer = styled.div`\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n\n    padding-top: ${layoutHeaderPaddingTop}px;\n    box-sizing: border-box;\n\n    overflow: hidden;\n\n    background-color: ${color.background.default};\n    background-image: url('${gradientBackground}');\n    background-position: center;\n    background-size: cover;\n`;\n\nconst AppContent = styled.div`\n    position: relative;\n    z-index: 2;\n\n    height: ${layoutContentHeight}px;\n`;\n\nconst StyledHeader = styled(Header)`\n    z-index: 3;\n`;\n\nexport const AppLayout: React.FC = ({ children }) => {\n    return (\n        <StyledContainer onScroll={preventAllScroll}>\n            <StyledHeader />\n            <AppContent>{children}</AppContent>\n        </StyledContainer>\n    );\n};\n","import React from 'react';\n\nexport const useFocusOnChange = <T = HTMLElement>(forwardRef: React.RefObject<T> | undefined, hash: unknown) => {\n    const ref = React.useRef<T>(null);\n\n    const onChangeFocusRef = forwardRef || ref;\n\n    React.useEffect(() => {\n        if (hash && onChangeFocusRef.current instanceof HTMLElement) {\n            onChangeFocusRef.current.focus();\n        }\n    }, [onChangeFocusRef, hash]);\n\n    return onChangeFocusRef;\n};\n","import { createAction } from 'tools/create-action';\n\nexport const catalogSelectItemAction = (payload: string) => createAction('catalog/SELECT_ITEM', payload);\n\nexport const catalogSlideListAction = (payload: number) => createAction('catalog/SLIDE_LIST', payload);\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const captionLineHeightPx = 32;\n\ntype CaptionTextProps = {\n    size?: number;\n    lineHeight?: number;\n};\n\nexport const CaptionText = styled.div<CaptionTextProps>`\n    font-weight: ${font.weight.medium};\n    font-size: ${({ size }) => size || 24}px;\n    line-height: ${({ lineHeight }) => lineHeight || captionLineHeightPx}px;\n    letter-spacing: -0.022em;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/const/color';\nimport { CaptionText, captionLineHeightPx } from 'components/Text/Caption';\n\nexport type BadgeType = 'sold-out' | 'few-left' | 'sale' | 'price-changed';\n\nconst contentMap: Record<BadgeType, (s?: string) => string> = {\n    'sold-out': () => 'Раскупили',\n    'few-left': () => 'Осталось мало',\n    'price-changed': () => 'Изменилась цена',\n    sale: (value) => `Скидка ${value}%`,\n};\n\nconst backgroundColorMap: Record<BadgeType, string> = {\n    'sold-out': color.background.default,\n    'few-left': color.button.warning,\n    'price-changed': color.button.warning,\n    sale: color.button.primary,\n};\n\nconst badgePaddingYPx = 8;\nconst badgeHeightPx = captionLineHeightPx + badgePaddingYPx * 2;\nconst badgeBorderRadiusPx = badgeHeightPx / 2;\n\ninterface StyledBadgeProps {\n    type: BadgeType;\n}\nconst StyledBadge = styled(CaptionText)<StyledBadgeProps>`\n    padding: ${badgePaddingYPx}px 16px;\n    border-radius: ${badgeBorderRadiusPx}px;\n\n    color: ${color.text.primary};\n    background-color: ${({ type }) => backgroundColorMap[type]};\n`;\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement> {\n    className?: string;\n    type: BadgeType;\n    content?: string;\n}\nexport const Badge: React.FC<BadgeProps> = ({ type, content, className }) => {\n    const contentProvider = contentMap[type];\n\n    return (\n        <StyledBadge className={className} type={type}>\n            {contentProvider(content)}\n        </StyledBadge>\n    );\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const FootnoteText1 = styled.div`\n    font-size: 28px;\n    line-height: 36px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.medium};\n`;\n\nexport const FootnoteText2 = styled.div`\n    font-size: 28px;\n    line-height: 36px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.semibold};\n`;\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const BodyText1 = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 32px;\n    line-height: 40px;\n    letter-spacing: -0.019em;\n`;\n\nexport const BodyText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 32px;\n    line-height: 40px;\n    letter-spacing: -0.019em;\n`;\n\nexport const BodyText3 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 48px;\n    line-height: 60px;\n    letter-spacing: -0.025em;\n`;\n\nexport const BodyTextDev = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 48px;\n    line-height: 60px;\n    letter-spacing: -0.025em;\n`;\n","import React from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useFocusOnChange } from 'hooks/useFocusOnChange';\nimport { useSelector } from 'hooks/useSelector';\nimport { useThrottledFn } from 'hooks/useThrottledFn';\nimport { catalogSelectItemAction } from 'store/actions/catalogPage';\nimport { addItemAction } from 'store/actions/native';\nimport { catalogCardBorderRadius, catalogCardHeight, catalogCardWidth } from 'pages/Catalog/Catalog.const/common';\nimport { Badge, BadgeProps } from 'components/Badge/Badge';\nimport { FootnoteText2 } from 'components/Text/Footnote';\nimport { BodyText1, BodyText2 } from 'components/Text/Body';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport plusIcon from 'assets/icons/plus.svg';\nimport doneIcon from 'assets/icons/done.svg';\n\nconst thumbSizePx = catalogCardWidth;\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\nconst StyledThumb = styled.div<StyledThumbProps>`\n    display: block;\n    height: ${thumbSizePx}px;\n    width: ${thumbSizePx}px;\n\n    background: rgba(255, 255, 255, .04);\n    background-image: url('${(props) => props.imageUrl}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n\n    border-top-left-radius: ${catalogCardBorderRadius}px;\n    border-top-right-radius: ${catalogCardBorderRadius}px;\n`;\n\nconst descriptionHeightPx = catalogCardHeight - thumbSizePx;\nconst descriptionPaddingPx = 32;\n\nconst StyledDescription = styled.div`\n    position: relative;\n\n    height: ${descriptionHeightPx}px;\n\n    box-sizing: border-box;\n    padding: ${descriptionPaddingPx}px;\n\n    border-bottom-left-radius: ${catalogCardBorderRadius}px;\n    border-bottom-right-radius: ${catalogCardBorderRadius}px;\n`;\n\nconst StyledName = styled(BodyText1)`\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPriceContainer = styled.div`\n    position: absolute;\n    bottom: 36px;\n\n    display: flex;\n`;\n\nconst StyledPrice = styled(BodyText2)`\n    color: ${color.text.primary};\n`;\n\nconst StyledOldPrice = styled(BodyText2)`\n    position: relative;\n    opacity: 0.24;\n    color: ${color.text.primary};\n    margin-left: 8px;\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: calc(50% - 2px);\n        border-top: 4px solid ${color.text.primary};\n        left: 2px;\n        right: 2px;\n    }\n`;\n\ninterface StyledCountProps {\n    isWarning?: boolean;\n}\nconst StyledCount = styled(BodyText2)<StyledCountProps>`\n    margin-left: 8px;\n\n    color: ${({ isWarning }) => (isWarning ? color.text.warning : color.text.active)};\n`;\n\nconst buttonIconSizePx = icon.m.sizePx;\nconst buttonSizePx = 72;\nconst buttonOffsetXPx = 12;\nconst buttonOffsetYPx = -52;\n\ninterface StyledButtonProps {\n    isActive: boolean;\n    isDisabled?: boolean;\n}\nconst StyledButton = styled.div<StyledButtonProps>`\n    position: absolute;\n    top: ${buttonOffsetYPx}px;\n    right: ${buttonOffsetXPx}px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    width: ${buttonSizePx}px;\n    height: ${buttonSizePx}px;\n\n    border-radius: 50%;\n\n    background-color: ${({ isDisabled }) => (isDisabled ? '#3b3f44' : color.text.active)};\n\n    opacity: 0;\n\n    transition: opacity ${transition.default}, background-color ${transition.default};\n\n    &::before {\n        content: '';\n\n        display: block;\n\n        height: ${buttonIconSizePx}px;\n        width: ${buttonIconSizePx}px;\n\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-position: center;\n\n        transition: opacity ${transition.default};\n\n        opacity: ${({ isDisabled }) => (isDisabled ? '0.56' : '1')};\n\n        background-image: url('${({ isActive }) => (isActive ? doneIcon : plusIcon)}');\n    }\n`;\n\nconst badgePositionPx = 16;\n\nconst CatalogListItemBadge = styled(Badge)`\n    position: absolute;\n    top: ${badgePositionPx}px;\n    left: ${badgePositionPx}px;\n    z-index: 1;\n`;\n\n// Можно было заиспользовать компонент IndexBadge, но пересчет дерева компонентов\n// это слишком дорого в момент такой операции, как скролл карусели, поэтому их здесь минимум.\n// Этот хак позволяет выиграть ~20мс задержки перед началом анимации скроллинга.\ninterface StyledIndexBadgeProps {\n    visible?: boolean;\n}\nconst StyledIndexBadge = styled(FootnoteText2)<StyledIndexBadgeProps>`\n    top: 8px;\n    right: 8px;\n\n    position: absolute;\n\n    border-radius: 50%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    width: 64px;\n    height: 64px;\n\n    color: ${color.text.secondary};\n\n    transition: transform ${transition.default}, opacity ${transition.default};\n\n    background: ${color.button.secondary2};\n\n    ${({ visible }) => css`\n        transform: scale(${Number(visible)});\n        opacity: ${Number(visible)};\n    `}\n`;\n\nconst cardScaleFactor = 1 / 1.04;\nconst addActiveDurationMs = 200;\n\nconst AddAnimation = css`\n    animation-name: ${keyframes`\n        0% {\n            transform: scale(1);\n        }\n        100% {\n            transform: scale(${cardScaleFactor});\n        }\n    `};\n    animation-duration: ${addActiveDurationMs / 2}ms;\n    animation-iteration-count: 2;\n    animation-timing-function: ease-in-out;\n    animation-fill-mode: forwards;\n    animation-direction: alternate;\n`;\n\nconst shakeDurationMs = 200;\nconst shakeAmplitudePx = 10;\n\nconst ShakeAnimation = css`\n    animation-name: ${keyframes`\n        0% {\n            transform: translateX(0);\n        }\n        25% {\n            transform: translateX(${-1 * shakeAmplitudePx}px);\n        }\n        75% {\n            transform: translateX(${shakeAmplitudePx}px);\n        }\n        100% {\n            transform: translateX(0);\n        }\n    `};\n    animation-duration: ${shakeDurationMs}ms;\n    animation-iteration-count: 1;\n    animation-timing-function: ease-in-out;\n    animation-fill-mode: forwards;\n`;\n\ninterface StyledCatalogListItemProps {\n    disabled?: boolean;\n    isActive: boolean;\n    isShaking: boolean;\n}\nconst StyledCatalogListItem = styled.div<StyledCatalogListItemProps>`\n    position: relative;\n    width: ${catalogCardWidth}px;\n    height: ${catalogCardHeight}px;\n\n    display: flex;\n    flex-direction: column;\n    grid-row: 1;\n\n    border-radius: ${catalogCardBorderRadius}px;\n    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.1);\n    background: ${color.surface.liquid1};\n\n    transition: ${addActiveDurationMs / 2}ms ${transition.timingFn.default};\n    will-change: transform;\n    will-change: background-color;\n\n    ${focusBorderMixin({ borderRadius: catalogCardBorderRadius })}\n\n    ${({ disabled }) =>\n        !disabled &&\n        css`\n            &:focus {\n                ${StyledButton} {\n                    opacity: 1;\n                }\n            }\n        `}\n\n    ${({ disabled }) =>\n        disabled &&\n        css`\n            ${StyledDescription},\n            ${StyledThumb} {\n                opacity: 0.5;\n            }\n        `}\n\n    ${({ isActive }) =>\n        isActive &&\n        css`\n            ${AddAnimation}\n        `}\n\n    ${({ isShaking }) =>\n        isShaking &&\n        css`\n            ${ShakeAnimation}\n        `}\n`;\n\nconst throttleTimeoutMs = 200;\n\nconst useActive = (count: number) => {\n    const [isCardActive, setCardActive] = React.useState(false);\n    const [isButtonActive, setButtonActive] = React.useState(false);\n    const [displayCount, setDisplayCount] = React.useState(count);\n    const prevCountRef = React.useRef(0);\n\n    // проставление стейта нужно делать обязательно в эффекте,\n    // иначе происходит слишком много перерисовок из-за того что,\n    // мы во время рендера вызываем проставление стейта и так по кругу\n    // реакту такое не нравится\n    React.useEffect(() => {\n        if (count > prevCountRef.current) {\n            const nextCount = count;\n\n            setCardActive(true);\n\n            setTimeout(() => {\n                setButtonActive(true);\n                setDisplayCount(nextCount);\n            }, addActiveDurationMs * 0.5);\n\n            setTimeout(() => {\n                setCardActive(false);\n            }, addActiveDurationMs);\n\n            setTimeout(() => {\n                setButtonActive(false);\n            }, addActiveDurationMs * 1.5);\n        } else {\n            setDisplayCount(count);\n        }\n\n        prevCountRef.current = count;\n    }, [count]);\n\n    return {\n        isCardActive,\n        isButtonActive,\n        displayCount,\n    };\n};\n\nconst useShake = () => {\n    const [isShaking, setShaking] = React.useState(false);\n\n    const doShake = React.useCallback(() => {\n        if (!isShaking) {\n            setShaking(true);\n        }\n\n        setTimeout(() => setShaking(false), shakeDurationMs);\n    }, [isShaking, setShaking]);\n\n    return { isShaking, doShake };\n};\n\nexport interface CatalogListItemIndexBadgeProps {\n    id: string;\n}\n// Вынес индекс в отдельный компонент, потому что из всей карточки он перерендеривается\n// чаще всего (при скролле). Если бы индекс прокидывался сверху, то он бы триггерил пересчет\n// всей компоненты карточки, а не только индекса.\nconst CatalogListItemIndexBadge: React.FC<CatalogListItemIndexBadgeProps> = ({ id }) => {\n    const index = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].index);\n\n    return <StyledIndexBadge visible={index > 0}>{index}</StyledIndexBadge>;\n};\n\nexport interface CatalogListItemViewProps {\n    imageUrl: string;\n    count: number;\n    isWantMoreThanHave?: boolean;\n    name: string;\n    index: number;\n    price: number;\n    oldPrice?: number;\n    badgeType?: BadgeProps['type'];\n    badgeContent?: BadgeProps['content'];\n    disabled?: boolean;\n    isButtonDisabled?: boolean;\n}\n\nexport interface CatalogListItemProps {\n    id: string;\n}\nexport const CatalogListItem: React.FC<CatalogListItemProps> = ({ id }) => {\n    const dispatch = useDispatch();\n    const itemFocusHash = useSelector(({ catalogPage }) => catalogPage.itemsFocusHashMap[id] || 0);\n    const imageUrl = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].imageUrl);\n    const count = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].count);\n    const isWantMoreThanHave = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].isWantMoreThanHave);\n    const name = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].name);\n    const price = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].price);\n    const oldPrice = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].oldPrice);\n    const badgeType = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].badgeType);\n    const badgeContent = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].badgeContent);\n    const disabled = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].disabled);\n    const isButtonDisabled = useSelector(({ catalogPage }) => catalogPage.itemsMap[id].isButtonDisabled);\n    const { isCardActive, isButtonActive, displayCount } = useActive(count);\n    const { isShaking, doShake } = useShake();\n    const handleFocus = React.useCallback(() => dispatch(catalogSelectItemAction(id)), [dispatch, id]);\n\n    const handleClick = useThrottledFn(\n        () => {\n            if (!disabled) {\n                if (isButtonDisabled) {\n                    doShake();\n                } else {\n                    dispatch(addItemAction({ item: id, count: '1' }));\n                }\n            }\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch, id, disabled, isButtonDisabled],\n    );\n\n    const ref = useFocusOnChange<HTMLDivElement>(undefined, itemFocusHash);\n\n    return (\n        <StyledCatalogListItem\n            ref={ref}\n            tabIndex={0}\n            disabled={disabled}\n            isActive={isCardActive}\n            isShaking={isShaking}\n            onFocus={handleFocus}\n            onClick={handleClick}\n        >\n            {badgeType ? <CatalogListItemBadge type={badgeType} content={badgeContent} /> : null}\n            <CatalogListItemIndexBadge id={id} />\n            <StyledThumb imageUrl={imageUrl} />\n            <StyledDescription>\n                <StyledButton isActive={isButtonActive} isDisabled={isButtonDisabled} />\n                <StyledName>{name}</StyledName>\n                <StyledPriceContainer>\n                    <StyledPrice>{price} ₽</StyledPrice>\n                    {oldPrice ? <StyledOldPrice>{oldPrice} ₽</StyledOldPrice> : null}\n                    {displayCount ? <StyledCount isWarning={isWantMoreThanHave}>×{displayCount}</StyledCount> : null}\n                </StyledPriceContainer>\n            </StyledDescription>\n        </StyledCatalogListItem>\n    );\n};\n","import React from 'react';\nimport { layoutContentHeight } from 'style/const/layout';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { preventAllScroll } from 'tools/preventAllScroll';\nimport { catalogCardGap, catalogCardHeight, catalogContentPaddingY } from 'pages/Catalog/Catalog.const/common';\n\nimport { CatalogListItem } from '../ListItem/CatalogListItem';\n\nconst StyledRoot = styled.div`\n    position: relative;\n\n    height: ${layoutContentHeight}px;\n    padding-top: ${catalogContentPaddingY}px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: start;\n\n    overflow: hidden;\n    --spatial-navigation-contain: contain;\n`;\n\nconst StyledWrapper = styled.div`\n    box-sizing: border-box;\n    width: max-content;\n    height: ${catalogCardHeight}px;\n    min-width: 100%;\n\n    display: grid;\n    grid-template-columns: repeat(auto-fill, 392px);\n    grid-auto-flow: row;\n    grid-gap: ${catalogCardGap}px;\n\n    will-change: transform;\n\n    transition: transform 0.4s ease-in-out;\n`;\n\nexport const CatalogList: React.FC = () => {\n    const order = useSelector(({ catalogPage }) => catalogPage.order);\n    const wrapperXShift = useSelector(({ catalogPage }) => catalogPage.wrapperXShift);\n\n    const wrapperStyle = React.useMemo(\n        () => ({\n            transform: `translateX(${-1 * wrapperXShift}px)`,\n        }),\n        [wrapperXShift],\n    );\n\n    const items = React.useMemo(() => {\n        return order.map((itemId) => <CatalogListItem key={itemId} id={itemId} />);\n    }, [order]);\n\n    return (\n        <StyledRoot onScroll={preventAllScroll}>\n            <StyledWrapper style={wrapperStyle}>{items}</StyledWrapper>\n        </StyledRoot>\n    );\n};\n","import React from 'react';\nimport ContentLoader, { IContentLoaderProps } from 'react-content-loader';\n\ninterface SkeletonProps extends IContentLoaderProps {\n    itemWidth: number;\n    itemHeight: number;\n    borderRadius: number;\n    rowCount: number;\n    columnCount: number;\n    paddingBetweenColumns: number;\n    paddingBetweenRows: number;\n}\n\nexport const Skeleton: React.FC<SkeletonProps> = ({\n    itemWidth,\n    itemHeight,\n    borderRadius,\n    rowCount,\n    columnCount,\n    paddingBetweenColumns,\n    paddingBetweenRows,\n    ...props\n}) => {\n    const list = Array.from(Array(columnCount)).map((_, columnIndex) =>\n        // eslint-disable-next-line no-shadow\n        Array.from(Array(rowCount)).map((_, rowIndex) => (\n            <rect\n                key={`${columnIndex} ${rowIndex}`}\n                x={columnIndex * (itemWidth + paddingBetweenColumns)}\n                y={rowIndex * (itemHeight + paddingBetweenRows)}\n                width={itemWidth}\n                height={itemHeight}\n                rx={borderRadius}\n                ry={borderRadius}\n            />\n        )),\n    );\n\n    return <ContentLoader {...props}>{list}</ContentLoader>;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Skeleton } from 'components/Skeleton/Skeleton';\nimport { color } from 'style/const/color';\nimport { layoutContentHeight, layoutHeaderPaddingHorizontal } from 'style/const/layout';\nimport {\n    catalogCardBorderRadius,\n    fullCardsInViewPort,\n    catalogCardGap,\n    catalogCardHeight,\n    catalogCardWidth,\n    catalogContentPaddingY,\n} from 'pages/Catalog/Catalog.const/common';\n\nconst columnCount = fullCardsInViewPort + 1;\n\nconst skeletonWidthPx = catalogCardWidth * columnCount + catalogCardGap * fullCardsInViewPort;\n\nconst backgroundColor = color.surface.liquid1;\nconst foregroundColor = color.surface.liquid2;\n\nconst StyledRoot = styled.div`\n    box-sizing: border-box;\n    height: ${layoutContentHeight}px;\n    padding-left: ${layoutHeaderPaddingHorizontal}px;\n    padding-top: ${catalogContentPaddingY}px;\n`;\n\nexport const CatalogSkeleton: React.FC = () => (\n    <StyledRoot>\n        <Skeleton\n            width={skeletonWidthPx}\n            height={catalogCardHeight}\n            backgroundColor={backgroundColor}\n            foregroundColor={foregroundColor}\n            itemWidth={catalogCardWidth}\n            itemHeight={catalogCardHeight}\n            borderRadius={catalogCardBorderRadius}\n            rowCount={1}\n            columnCount={columnCount}\n            paddingBetweenRows={catalogCardGap}\n            paddingBetweenColumns={catalogCardGap}\n            speed={2}\n        />\n    </StyledRoot>\n);\n","import React from 'react';\nimport { useSelector } from 'hooks/useSelector';\n\nimport { CatalogList } from './List/CatalogList';\nimport { CatalogSkeleton } from './Skeleton/CatalogSkeleton';\n\nexport const Catalog: React.FC = () => {\n    const itemsCount = useSelector(({ catalogPage }) => catalogPage.order.length);\n\n    return itemsCount ? <CatalogList /> : <CatalogSkeleton />;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/const/color';\n\nimport shadowImage from './shadow.svg';\n\nconst StyledPin = styled.div`\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    height: 124px;\n`;\n\nconst badgeHeightPx = 84;\n\ninterface StyledBodyProps {\n    backgroundColor: string;\n}\nconst StyledBody = styled.div<StyledBodyProps>`\n    position: relative;\n\n    height: ${badgeHeightPx}px;\n    min-width: ${badgeHeightPx}px;\n    padding: 10px 20px;\n    border-radius: ${badgeHeightPx / 2}px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    text-align: center;\n\n    background: ${({ backgroundColor }) => backgroundColor};\n`;\n\nconst kernelWidthPx = 4;\nconst kernelBorderRadiusPx = kernelWidthPx / 2;\n\ninterface StyledKernelProps {\n    backgroundColor: string;\n}\nconst StyledKernel = styled.div<StyledKernelProps>`\n    height: 36px;\n    width: ${kernelWidthPx}px;\n\n    z-index: 1;\n\n    border-bottom-left-radius: ${kernelBorderRadiusPx}px;\n    border-bottom-right-radius: ${kernelBorderRadiusPx}px;\n\n    background: ${({ backgroundColor }) => backgroundColor};\n`;\n\nconst StyledShadow = styled.div`\n    position: absolute;\n    bottom: -6px;\n\n    width: 86px;\n    height: 18px;\n\n    background-image: url('${shadowImage}');\n`;\n\ninterface PinProps {\n    backgroundColor?: string;\n}\nexport const Pin: React.FC<PinProps> = ({ backgroundColor = color.button.critical, children }) => {\n    return (\n        <StyledPin>\n            <StyledBody backgroundColor={backgroundColor}>{children}</StyledBody>\n            <StyledKernel backgroundColor={backgroundColor} />\n            <StyledShadow />\n        </StyledPin>\n    );\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const ParagraphText1 = styled.div`\n    font-size: 32px;\n    line-height: 44px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.regular};\n`;\n\nexport const ParagraphText2 = styled.div`\n    font-size: 32px;\n    line-height: 44px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.semibold};\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { useThrottledFn } from 'hooks/useThrottledFn';\nimport { ROUTES } from 'store/constants/router';\nimport { makePurchaseAction } from 'store/actions/server';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { Pin } from 'components/Pin/Pin';\nimport { ParagraphText2, ParagraphText1 } from 'components/Text/Paragraph';\nimport { CaptionText } from 'components/Text/Caption';\nimport { HeadlineText2 } from 'components/Text/Headline';\nimport { BodyText1 } from 'components/Text/Body';\nimport { color } from 'style/const/color';\n\nconst StyledCartInfo = styled.div`\n    position: relative;\n\n    width: 744px;\n    padding-top: 48px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nconst StyledTime = styled(ParagraphText2)`\n    color: ${color.text.primary};\n`;\n\nconst StyledUnit = styled(CaptionText)`\n    margin-top: -10px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledAddress = styled(HeadlineText2)`\n    margin-top: 48px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n\n    -webkit-line-clamp: 2;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPersonal = styled.div`\n    margin-top: 8px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nconst StyledPersonalLocation = styled(BodyText1)`\n    -webkit-line-clamp: 2;\n    text-align: center;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPersonalPhoneNumber = styled(HeadlineText2)`\n    margin-top: 60px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPersonalName = styled(BodyText1)`\n    margin-top: 8px;\n\n    -webkit-line-clamp: 2;\n    text-align: center;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledAskPersonal = styled(ParagraphText1)`\n    margin-top: 14px;\n\n    text-align: center;\n\n    color: ${color.text.secondary};\n`;\n\nconst CartInfoButton = styled(Button)`\n    margin-top: 60px;\n    padding: 20px 32px;\n\n    &[disabled] {\n        opacity: 0.3;\n    }\n`;\n\nconst throttleTimeoutMs = 200;\n\nexport const CartInfo: React.FC = () => {\n    const dispatch = useDispatch();\n    const { address, customerName } = useSelector(({ userData }) => userData);\n    const {\n        deliveryTime,\n        isMakePurchaseButtonDisabled,\n        makePurchaseButtonView,\n        hasRequiredData,\n        phoneNumber,\n        personalAddress,\n    } = useSelector(({ cartPage }) => cartPage);\n    const handlePurchaseClick = useThrottledFn(() => dispatch(makePurchaseAction()), throttleTimeoutMs, undefined, [\n        dispatch,\n    ]);\n\n    const handleSetAddressClick = useThrottledFn(\n        () => dispatch(push(ROUTES.ADDRESS_FULL_ALL)),\n        throttleTimeoutMs,\n        undefined,\n        [dispatch],\n    );\n\n    return (\n        <StyledCartInfo>\n            <Pin backgroundColor={color.button.critical}>\n                <StyledTime>{deliveryTime}</StyledTime>\n                <StyledUnit>мин</StyledUnit>\n            </Pin>\n            <StyledAddress>{address}</StyledAddress>\n            {hasRequiredData ? (\n                <>\n                    <StyledPersonal>\n                        <StyledPersonalLocation>{personalAddress}</StyledPersonalLocation>\n                        <StyledPersonalPhoneNumber>{phoneNumber}</StyledPersonalPhoneNumber>\n                        <StyledPersonalName>{customerName}</StyledPersonalName>\n                    </StyledPersonal>\n                    <CartInfoButton\n                        view={makePurchaseButtonView}\n                        disabled={isMakePurchaseButtonDisabled}\n                        shouldFocusOnMount\n                        shouldLockAfterClick\n                        onClick={handlePurchaseClick}\n                    >\n                        Перейти к оплате\n                    </CartInfoButton>\n                </>\n            ) : (\n                <>\n                    <StyledAskPersonal>\n                        Чтобы сделать заказ, укажите квартиру, подъезд и другую дополнительную информацию\n                    </StyledAskPersonal>\n                    <CartInfoButton view={ButtonViews.primary} shouldFocusOnMount onClick={handleSetAddressClick}>\n                        Дополнить адрес\n                    </CartInfoButton>\n                </>\n            )}\n        </StyledCartInfo>\n    );\n};\n","import styled, { css } from 'styled-components';\nimport { transition } from 'style/const/transition';\n\ninterface GradientFadeProps {\n    sizePx: number;\n    kind: 'top' | 'bottom' | 'left' | 'right';\n    yOffset?: number;\n    isVisible: boolean;\n}\n\nexport const GradientFade = styled.div<GradientFadeProps>`\n    ${({ kind, sizePx }) => css`\n        mask-image: linear-gradient(to ${kind}, #000 calc(100% - ${sizePx}px), transparent 100%);\n        mask-size: calc(100% + ${sizePx}px) calc(100% + ${sizePx}px);\n    `}\n\n    mask-position: ${({ kind, isVisible, sizePx, yOffset = 0 }) => {\n        switch (kind) {\n            case 'top':\n                return `0 ${-1 * Number(!isVisible) * (sizePx + yOffset)}px`;\n            case 'bottom':\n                return `0 ${-1 * Number(isVisible) * (sizePx + yOffset)}px`;\n            case 'left':\n                return `${-1 * Number(!isVisible) * (sizePx + yOffset)}px 0`;\n            case 'right':\n                return `${-1 * Number(isVisible) * (sizePx + yOffset)}px 0`;\n            default:\n                return '0 0';\n        }\n    }};\n\n    mask-repeat: no-repeat;\n    transition: mask-position ${transition.default}, -webkit-mask-position ${transition.default};\n`;\n","import { createAction } from 'tools/create-action';\n\nexport const cartSelectItemAction = (payload: string) => createAction('cart/SELECT_ITEM', payload);\n\nexport const cartSlideListAction = (payload: number) => createAction('cart/SLIDE_LIST', payload);\n","import React from 'react';\nimport styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport { CaptionText } from 'components/Text/Caption';\nimport { FootnoteText2 } from 'components/Text/Footnote';\n\ntype IndexBadgeSize = 'xxs' | 'xs' | 's' | 'm';\n\ninterface StyledIndexBadgeProps {\n    visible: boolean;\n    size: IndexBadgeSize;\n}\n\nconst mapSizeToPx: Record<IndexBadgeSize, number> = {\n    xxs: 22,\n    xs: 32,\n    s: 44,\n    m: 64,\n};\n\nconst mapSizeToParams: Record<IndexBadgeSize, FlattenSimpleInterpolation> = {\n    xxs: css`\n        width: ${mapSizeToPx.xxs}px;\n        height: ${mapSizeToPx.xxs}px;\n    `,\n    xs: css`\n        width: ${mapSizeToPx.xs}px;\n        height: ${mapSizeToPx.xs}px;\n    `,\n    s: css`\n        width: ${mapSizeToPx.s}px;\n        height: ${mapSizeToPx.s}px;\n    `,\n    m: css`\n        width: ${mapSizeToPx.m}px;\n        height: ${mapSizeToPx.m}px;\n    `,\n};\n\nconst StyledIndexBadge = styled.div<StyledIndexBadgeProps>`\n    position: absolute;\n\n    border-radius: 50%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    ${({ size }) => mapSizeToParams[size]};\n\n    color: ${color.text.secondary};\n\n    transition: transform ${transition.default}, opacity ${transition.default};\n\n    background: ${color.button.secondary2};\n\n    ${({ visible }) => css`\n        transform: scale(${Number(visible)});\n        opacity: ${Number(visible)};\n    `}\n`;\n\ninterface IndexBadgeProps {\n    size: IndexBadgeSize;\n    index?: number;\n}\n\nexport const IndexBadge: React.FC<IndexBadgeProps> = ({ index, size, ...props }) => {\n    return (\n        <StyledIndexBadge visible={index !== undefined && index > 0} size={size} {...props}>\n            {size === 'xxs' && (\n                <CaptionText size={10} lineHeight={12}>\n                    {index}\n                </CaptionText>\n            )}\n            {size === 'xs' && (\n                <CaptionText size={14} lineHeight={18}>\n                    {index}\n                </CaptionText>\n            )}\n            {size === 's' && <CaptionText>{index}</CaptionText>}\n            {size === 'm' && <FootnoteText2>{index}</FootnoteText2>}\n        </StyledIndexBadge>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/const/color';\nimport { FootnoteText1 } from 'components/Text/Footnote';\n\nexport type LabelType = 'sold-out' | 'few-left' | 'sale' | 'price-changed' | 'you-want';\n\nconst contentMap: Record<LabelType, (s?: string) => string> = {\n    'sold-out': () => 'Раскупили',\n    'few-left': () => 'Осталось мало',\n    'price-changed': () => 'Изменилась цена',\n    sale: (value) => `Скидка ${value}%`,\n    'you-want': (value) => `Вы хотели ${value} товара`,\n};\n\nconst textColorMap: Record<LabelType, string> = {\n    'sold-out': color.text.warning,\n    'few-left': color.text.warning,\n    'price-changed': color.text.warning,\n    sale: color.text.active,\n    'you-want': color.text.warning,\n};\n\ninterface StyledLabelProps {\n    type: LabelType;\n}\nconst StyledLabel = styled(FootnoteText1)<StyledLabelProps>`\n    color: ${({ type }) => textColorMap[type]};\n`;\n\nexport interface LabelProps extends React.HTMLAttributes<HTMLDivElement> {\n    className?: string;\n    type: LabelType;\n    content?: string;\n}\nexport const Label: React.FC<LabelProps> = ({ type, content, className }) => {\n    const contentProvider = contentMap[type];\n\n    return (\n        <StyledLabel className={className} type={type}>\n            {contentProvider(content)}\n        </StyledLabel>\n    );\n};\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useThrottledFn } from 'hooks/useThrottledFn';\nimport { removeItemAction, addItemAction } from 'store/actions/native';\nimport { cartSelectItemAction } from 'store/actions/cartPage';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { IndexBadge } from 'components/IndexBadge/IndexBadge';\nimport { Label, LabelProps } from 'components/Label/Label';\nimport { BodyText1, BodyText2 } from 'components/Text/Body';\nimport { FootnoteText1 } from 'components/Text/Footnote';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport addIcon from 'assets/icons/add.svg';\nimport removeIcon from 'assets/icons/remove.svg';\n\nconst thumbSizePx = 120;\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\n\nconst StyledThumb = styled.div<StyledThumbProps>`\n    position: relative;\n\n    margin-right: 32px;\n\n    height: ${thumbSizePx}px;\n    width: ${thumbSizePx}px;\n\n    border-radius: 24px;\n\n    background-image: url('${({ imageUrl }) => imageUrl}');\n    background-color: rgba(255, 255, 255, .1);\n    background-size: contain;\n    background-position: center;\n    background-repeat: no-repeat;\n`;\n\nconst StyledInfo = styled.div`\n    margin-right: 48px;\n\n    width: 384px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n`;\n\ninterface StyledNameProps {\n    isOneLine?: boolean;\n}\nconst StyledName = styled(BodyText1)<StyledNameProps>`\n    overflow: hidden;\n\n    ${({ isOneLine }) =>\n        isOneLine\n            ? css`\n                  white-space: nowrap;\n                  text-overflow: ellipsis;\n              `\n            : css`\n                  display: -webkit-box;\n                  -webkit-box-orient: vertical;\n                  -webkit-line-clamp: 2;\n              `}\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPriceContainer = styled.div`\n    display: flex;\n`;\n\nconst StyledPrice = styled(FootnoteText1)`\n    margin-top: 4px;\n\n    color: ${color.text.secondary};\n`;\n\nconst StyledOldPrice = styled(FootnoteText1)`\n    position: relative;\n    opacity: 0.24;\n    color: ${color.text.primary};\n    margin-top: 4px;\n    margin-left: 8px;\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: calc(50% - 2px);\n        border-top: 4px solid ${color.text.primary};\n        left: 2px;\n        right: 2px;\n    }\n`;\n\nconst StyledLabel = styled(Label)`\n    margin-top: 4px;\n`;\n\nconst StyledSelector = styled.div`\n    box-sizing: border-box;\n    padding: 8px;\n    width: 216px;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n`;\n\ninterface StyledSelectorValue {\n    isWarning?: boolean;\n}\nconst StyledSelectorValue = styled(BodyText2)<StyledSelectorValue>`\n    color: ${({ isWarning }) => (isWarning ? color.text.warning : color.text.primary)};\n`;\n\ntype SelectorButtonIconType = 'less' | 'more' | 'remove';\n\nconst iconTypeIconMap: Record<SelectorButtonIconType, string> = {\n    less: removeIcon,\n    more: addIcon,\n    remove: addIcon,\n};\n\nconst selectorButtonSizePx = 64;\nconst selectorBorderRadiusPx = selectorButtonSizePx / 2;\nconst selectorIconSizePx = icon.s.sizePx;\n\ninterface StyledSelectorButtonProps {\n    iconType: SelectorButtonIconType;\n}\nconst StyledSelectorButton = styled.button<StyledSelectorButtonProps>`\n    position: relative;\n\n    height: ${selectorButtonSizePx}px;\n    width: ${selectorButtonSizePx}px;\n    border: none;\n    border-radius: ${selectorBorderRadiusPx}px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background: ${color.button.secondary1};\n\n    will-change: background-color, transform, opacity;\n    transition: ${transition.default};\n\n    &::before {\n        content: '';\n\n        height: ${selectorIconSizePx}px;\n        width: ${selectorIconSizePx}px;\n\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-position: center;\n    }\n\n    &[disabled] {\n        opacity: 0.3;\n    }\n\n    ${focusBorderMixin({ borderRadius: selectorBorderRadiusPx })}\n\n    &::before {\n        background-image: url('${({ iconType }) => iconTypeIconMap[iconType]}');\n    }\n\n    ${({ iconType }) =>\n        iconType === 'remove' &&\n        css`\n            transform: rotate(45deg);\n            background: ${color.button.critical};\n        `}\n`;\n\ninterface StyledCartListItemProps {\n    disabled?: boolean;\n}\n\nconst StyledCartListItem = styled.div<StyledCartListItemProps>`\n    position: relative;\n\n    box-sizing: border-box;\n    height: 152px;\n    width: 832px;\n    padding: 16px;\n\n    display: flex;\n    align-items: center;\n\n    ${({ disabled }) =>\n        disabled &&\n        css`\n            ${StyledThumb},\n            ${StyledName},\n            ${StyledPrice} {\n                opacity: .24;\n            }\n\n            ${StyledPrice} {\n                color: ${color.text.primary};\n            }\n        `}\n`;\n\nconst StyledIndexBadge = styled(IndexBadge)`\n    top: 4px;\n    right: 4px;\n`;\n\nconst StyledDeleteButton = styled(Button)`\n    padding: 20px 32px;\n`;\n\nexport interface CartListItemProps {\n    id: string;\n    index: number;\n}\n\nexport interface CartListItemViewProps {\n    imageUrl: string;\n    name: string;\n    price: number;\n    oldPrice?: number;\n    count: number;\n    isWantMoreThanHave?: boolean;\n    disabled?: boolean;\n    label?: LabelProps;\n    isMoreButtonDisabled?: boolean;\n}\n\nconst throttleTimeoutMs = 100;\n\nexport const CartListItem: React.FC<CartListItemProps> = ({ index, id }) => {\n    const {\n        imageUrl,\n        name,\n        price,\n        oldPrice,\n        label,\n        count,\n        isWantMoreThanHave,\n        disabled,\n        isMoreButtonDisabled,\n    } = useSelector(({ cartPage: { itemsMap } }) => itemsMap[id]);\n    const dispatch = useDispatch();\n\n    const handleLessClick = useThrottledFn(\n        () => {\n            dispatch(\n                removeItemAction({\n                    item: id,\n                    count: '1',\n                    shouldRemoveMention: !count,\n                }),\n            );\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch, id, count],\n    );\n\n    const handleMoreClick = useThrottledFn(\n        () => {\n            dispatch(\n                addItemAction({\n                    item: id,\n                    count: '1',\n                }),\n            );\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch, id],\n    );\n\n    const handleRemoveClick = useThrottledFn(\n        () => {\n            dispatch(\n                removeItemAction({\n                    item: id,\n                    count: String(Infinity),\n                    shouldRemoveMention: true,\n                }),\n            );\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch, id, count],\n    );\n\n    const handleFocus = React.useCallback(() => dispatch(cartSelectItemAction(id)), [dispatch, id]);\n\n    return (\n        <StyledCartListItem disabled={disabled}>\n            <StyledThumb imageUrl={imageUrl}>\n                <StyledIndexBadge size=\"s\" index={index} />\n            </StyledThumb>\n            <StyledInfo>\n                <StyledName isOneLine={disabled || Boolean(label)}>{name}</StyledName>\n                <StyledPriceContainer>\n                    <StyledPrice>{price} ₽</StyledPrice>\n                    {oldPrice ? <StyledOldPrice>{oldPrice} ₽</StyledOldPrice> : null}\n                </StyledPriceContainer>\n                {label ? <StyledLabel {...label} /> : null}\n            </StyledInfo>\n            {disabled ? (\n                <StyledDeleteButton view={ButtonViews.secondary} onFocus={handleFocus} onClick={handleRemoveClick}>\n                    Удалить\n                </StyledDeleteButton>\n            ) : (\n                <StyledSelector>\n                    <StyledSelectorButton\n                        type=\"button\"\n                        aria-label=\"less\"\n                        iconType={count ? 'less' : 'remove'}\n                        onFocus={handleFocus}\n                        onClick={handleLessClick}\n                    />\n                    <StyledSelectorValue isWarning={isWantMoreThanHave}>{count}</StyledSelectorValue>\n                    <StyledSelectorButton\n                        type=\"button\"\n                        aria-label=\"more\"\n                        iconType=\"more\"\n                        disabled={isMoreButtonDisabled}\n                        onFocus={handleFocus}\n                        onClick={handleMoreClick}\n                    />\n                </StyledSelector>\n            )}\n        </StyledCartListItem>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { HeadlineText2 } from 'components/Text/Headline';\nimport { BodyText1 } from 'components/Text/Body';\nimport { GradientFade } from 'components/GradientFade/GradientFade';\nimport { color } from 'style/const/color';\n\nimport { CartListItem } from '../ListItem/CartListItem';\n\nconst preventScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    e.currentTarget.scrollTop = 0;\n};\n\nconst StyledCartList = styled.div`\n    position: relative;\n\n    height: 792px;\n    width: 832px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n`;\n\ninterface StyledContainerProps {\n    topGradientVisible?: boolean;\n    bottomGradientVisible?: boolean;\n}\nconst StyledContainer = styled.div<StyledContainerProps>`\n    position: relative;\n\n    margin-bottom: 56px;\n\n    max-height: 600px;\n    overflow: hidden;\n\n    --spatial-navigation-contain: contain;\n`;\n\nconst StyledWrapper = styled.div`\n    overflow-x: hidden;\n\n    will-change: transform;\n    transition: transform 0.5s ease-in-out;\n`;\n\nconst StyledTotalPrice = styled(HeadlineText2)`\n    padding-left: 16px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledMinimalPrice = styled(BodyText1)`\n    margin-top: 8px;\n\n    padding-left: 16px;\n\n    color: ${color.text.warning};\n`;\n\n// const gradientSizePx = 160;\n\nexport const CartList: React.FC = () => {\n    const { order, totalPrice, toMinimumPrice, wrapperYShift, topGradientVisible, bottomGradientVisible } = useSelector(\n        ({ cartPage }) => cartPage,\n    );\n\n    const wrapperStyle = React.useMemo(\n        () => ({\n            transform: `translateY(${-1 * wrapperYShift}px)`,\n        }),\n        [wrapperYShift],\n    );\n\n    return (\n        <StyledCartList>\n            {order.length > 0 && (\n                <GradientFade sizePx={160} kind=\"top\" isVisible={topGradientVisible}>\n                    <GradientFade sizePx={160} kind=\"bottom\" isVisible={bottomGradientVisible}>\n                        <StyledContainer onScroll={preventScroll}>\n                            <StyledWrapper style={wrapperStyle}>\n                                {order.map((itemId, index) => (\n                                    <CartListItem key={itemId} index={index + 1} id={itemId} />\n                                ))}\n                            </StyledWrapper>\n                        </StyledContainer>\n                    </GradientFade>\n                </GradientFade>\n            )}\n            <StyledTotalPrice>Сумма заказа {totalPrice} ₽</StyledTotalPrice>\n            {Boolean(toMinimumPrice) && (\n                <StyledMinimalPrice>До минимального заказа еще {toMinimumPrice} ₽</StyledMinimalPrice>\n            )}\n        </StyledCartList>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { CartInfo } from './Info/CartInfo';\nimport { CartList } from './List/CartList';\nimport bgImage from './Cart.assets/bg.jpg';\n\nconst StyledContainer = styled.div`\n    position: relative;\n    z-index: 2;\n\n    padding-left: 112px;\n    padding-right: 128px;\n\n    display: flex;\n    justify-content: space-between;\n`;\n\nconst StyledBackground = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1;\n\n    background-image: url('${bgImage}');\n`;\n\nexport const Cart: React.FC = () => (\n    <>\n        <StyledContainer>\n            <CartList />\n            <CartInfo />\n        </StyledContainer>\n        <StyledBackground />\n    </>\n);\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { closeAppAction } from 'store/actions/app';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { BodyText2 } from 'components/Text/Body';\nimport { HeadlineText1 } from 'components/Text/Headline';\nimport { color } from 'style/const/color';\nimport { layoutContentHeight } from 'style/const/layout';\n\nimport figureIcon1 from './Status.assets/figure-1.svg';\nimport figureIcon2 from './Status.assets/figure-2.svg';\nimport figureIcon3 from './Status.assets/figure-3.svg';\nimport figureIcon4 from './Status.assets/figure-4.svg';\nimport figureIcon5 from './Status.assets/figure-5.svg';\nimport figureIcon6 from './Status.assets/figure-6.svg';\nimport figureIcon7 from './Status.assets/figure-7.svg';\nimport figureIcon8 from './Status.assets/figure-8.svg';\nimport figureIcon9 from './Status.assets/figure-9.svg';\n\nconst StatusButton = styled(Button)`\n    margin-top: 64px;\n`;\n\nconst StatusContainer = styled.div`\n    position: relative;\n\n    height: ${layoutContentHeight}px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n`;\n\nconst StatusOrderNumber = styled(BodyText2)`\n    color: ${color.text.secondary};\n`;\n\nconst StatusOrderTime = styled(HeadlineText1)`\n    margin-top: 16px;\n\n    text-align: center;\n\n    color: ${color.text.primary};\n`;\n\ninterface FigureProps {\n    params: [string, number, number, number];\n}\n\nconst StatusFigure = styled.div<FigureProps>`\n    position: absolute;\n\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: contain;\n\n    ${({ params: [bgUrl, topPx, leftPx, sizePx] }) => css`\n        top: ${topPx}px;\n        left: ${leftPx}px;\n\n        height: ${sizePx}px;\n        width: ${sizePx}px;\n\n        background-image: url('${bgUrl}');\n    `}\n`;\n\nconst figureList: FigureProps['params'][] = [\n    [figureIcon1, 92, 834, 61],\n    [figureIcon2, 0, 482, 61],\n    [figureIcon3, 280, 236, 46],\n    [figureIcon4, 158, 1487, 53],\n    [figureIcon5, 594, 340, 53],\n    [figureIcon6, 500, 652, 60],\n    [figureIcon7, 705, 1044, 40],\n    [figureIcon8, 492, 1268, 40],\n    [figureIcon9, 590, 1604, 90],\n];\n\nexport const Status: React.FC = () => {\n    const dispatch = useDispatch();\n    const { deliveryTime } = useSelector(({ delivery }) => delivery);\n    const { orderId } = useSelector(({ cart }) => cart);\n    const handleButtonClick = React.useCallback(() => {\n        dispatch(closeAppAction());\n    }, [dispatch]);\n\n    return (\n        <StatusContainer>\n            <StatusOrderNumber>Заказ #{orderId} оформлен</StatusOrderNumber>\n            <StatusOrderTime>\n                Спасибо за заказ!\n                <br />\n                Будем у вас через {deliveryTime} минут.\n            </StatusOrderTime>\n            <StatusButton view={ButtonViews.primary} shouldFocusOnMount onClick={handleButtonClick}>\n                Очень жду\n            </StatusButton>\n            {figureList.map((params, index) => (\n                <StatusFigure key={index} params={params} />\n            ))}\n        </StatusContainer>\n    );\n};\n","import React from 'react';\nimport { push } from 'connected-react-router';\nimport styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\n// import { useInterval } from 'hooks/useInterval';\nimport { closeAppAction } from 'store/actions/app';\nimport { ROUTES } from 'store/constants/router';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { HeadlineText3 } from 'components/Text/Headline';\nimport { font } from 'style/const/font';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\n\nimport popcornBites from './Promo.assets/popcorn-bites.png';\nimport popcorn1 from './Promo.assets/popcorn-box_1.png';\nimport popcorn2 from './Promo.assets/popcorn-box_2.png';\nimport popcorn3 from './Promo.assets/popcorn-box_3.png';\nimport popcorn4 from './Promo.assets/popcorn-box_4.png';\n\nconst TextContainer = styled.div`\n    position: absolute;\n    top: 80px;\n    left: 128px;\n    z-index: 2;\n\n    width: 958px;\n`;\n\nconst Title = styled.div`\n    font-weight: ${font.weight.extrabold};\n    font-size: 80px;\n    line-height: 88px;\n    letter-spacing: -0.0375em;\n\n    color: ${color.text.primary};\n`;\n\nconst Subtitle = styled(HeadlineText3)`\n    margin-top: 32px;\n\n    color: ${color.text.secondary};\n`;\n\nconst buttonsMarginTopPx = 64;\n\nconst ButtonContainer = styled.div`\n    margin-top: ${buttonsMarginTopPx}px;\n    display: flex;\n`;\n\nconst buttonMarginRightPx = 32;\n\nconst StyledButton = styled(Button)`\n    margin-right: ${buttonMarginRightPx}px;\n`;\n\nconst popcornBitesTopPx = 612;\nconst popcornBitesRightPx = 144;\nconst popcornBitesWidthPx = 614;\nconst popcornBitesHeightPx = 280;\n\nconst PopcornContainer = styled.div`\n    position: fixed;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    z-index: 1;\n\n    &::before {\n        content: '';\n\n        position: absolute;\n        top: ${popcornBitesTopPx}px;\n        right: ${popcornBitesRightPx}px;\n        z-index: 2;\n\n        display: block;\n        width: ${popcornBitesWidthPx}px;\n        height: ${popcornBitesHeightPx}px;\n\n        background-image: url('${popcornBites}');\n        background-position: center;\n        background-repeat: no-repeat;\n    }\n`;\n\nconst popcornList: FlattenSimpleInterpolation[] = [\n    css`\n        top: 162px;\n        right: 248px;\n        width: 440px;\n        height: 783px;\n        background-image: url('${popcorn1}');\n    `,\n    css`\n        top: 110px;\n        right: 66px;\n        width: 788px;\n        height: 816px;\n        background-image: url('${popcorn2}');\n    `,\n    css`\n        top: 215px;\n        right: 229px;\n        width: 469px;\n        height: 686px;\n        background-image: url('${popcorn3}');\n    `,\n    css`\n        top: 110px;\n        right: 66px;\n        width: 788px;\n        height: 816px;\n        background-image: url('${popcorn4}');\n    `,\n];\n\ninterface PopcornProps {\n    popcornStyle: FlattenSimpleInterpolation;\n    isVisible: boolean;\n}\n\nconst Popcorn = styled.div<PopcornProps>`\n    position: absolute;\n\n    background-position: center;\n    background-size: contain;\n    background-repeat: no-repeat;\n\n    transition: opacity 1s ${transition.timingFn.default};\n\n    opacity: ${({ isVisible }) => Number(isVisible)};\n\n    ${({ popcornStyle }) => popcornStyle}\n`;\n\n// const timeoutMs = 4000;\n\n// const useIndex = (count: number) => {\n//     const [index, setIndex] = React.useState(0);\n//\n//     useInterval(() => setIndex((index + 1) % count), timeoutMs);\n//\n//     return index;\n// };\n\nexport const Promo: React.FC = () => {\n    const dispatch = useDispatch();\n    // const currentIndex = useIndex(popcornList.length);\n\n    const handleClickSubmitButton = React.useCallback(() => {\n        dispatch(push(ROUTES.ADDRESS_SIMPLE));\n    }, [dispatch]);\n    const handleCloseButtonClick = React.useCallback(() => {\n        dispatch(closeAppAction());\n    }, [dispatch]);\n\n    return (\n        <>\n            <TextContainer>\n                <Title>Доставляем попкорн к просмотру фильмов и сериалов</Title>\n                <Subtitle>Бесплатно в течении 15-30 минут для Москвы и Санкт-Петербурга</Subtitle>\n                <ButtonContainer>\n                    <StyledButton view={ButtonViews.primary} shouldFocusOnMount onClick={handleClickSubmitButton}>\n                        Указать адрес\n                    </StyledButton>\n                    <StyledButton onClick={handleCloseButtonClick} view={ButtonViews.secondary}>\n                        Не сейчас\n                    </StyledButton>\n                </ButtonContainer>\n            </TextContainer>\n            <PopcornContainer>\n                <Popcorn isVisible popcornStyle={popcornList[0]} />\n                {/* {popcornList.map((style, index) => (\n                    <Popcorn key={index} isVisible={index === 0} popcornStyle={style} />\n                ))} */}\n            </PopcornContainer>\n        </>\n    );\n};\n","import React from 'react';\nimport { layoutContentHeight } from 'style/const/layout';\nimport styled from 'styled-components';\nimport { replace } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { ROUTES } from 'store/constants/router';\nimport { closeAppAction } from 'store/actions/app';\nimport { Pin } from 'components/Pin/Pin';\nimport { HeadlineText1 } from 'components/Text/Headline';\nimport { BodyText1 } from 'components/Text/Body';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { color } from 'style/const/color';\n\nimport faceIcon from './NoArea.assets/face.svg';\nimport bgImage from './NoArea.assets/bg.jpg';\n\nconst containerMarginBottomPx = 100;\n\nconst StyledContainer = styled.div`\n    position: relative;\n    z-index: 1;\n\n    height: ${layoutContentHeight - containerMarginBottomPx}px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    z-index: 3;\n`;\n\nconst faceIconSizePx = 36;\n\nconst StyledFaceIcon = styled.div`\n    height: ${faceIconSizePx}px;\n    width: ${faceIconSizePx}px;\n\n    background-image: url(${faceIcon});\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: contain;\n`;\n\nconst StyledTitle = styled(HeadlineText1)`\n    margin-top: 52px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledSubtitle = styled(BodyText1)`\n    margin-top: 12px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledButtonContainer = styled.div`\n    display: flex;\n    justify-content: center;\n`;\n\nconst StyledButton = styled(Button)`\n    margin-top: 64px;\n    margin-left: 40px;\n`;\n\nconst StyledBackground = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1;\n\n    background-image: url('${bgImage}');\n`;\n\nexport const NoArea: React.FC = () => {\n    const dispatch = useDispatch();\n    const address = useSelector(({ userModel }) => userModel.address);\n    const handleChangeButtonClick = React.useCallback(() => {\n        dispatch(replace(ROUTES.ADDRESS_SIMPLE));\n    }, [dispatch]);\n    const handleCloseButtonClick = React.useCallback(() => {\n        dispatch(closeAppAction());\n    }, [dispatch]);\n\n    return (\n        <>\n            <StyledContainer>\n                <Pin backgroundColor={color.background.secondary}>\n                    <StyledFaceIcon />\n                </Pin>\n                <StyledTitle>{address}</StyledTitle>\n                <StyledSubtitle>К сожалению, пока не доставляем по этому адресу</StyledSubtitle>\n                <StyledButtonContainer>\n                    <StyledButton view={ButtonViews.primary} shouldFocusOnMount onClick={handleChangeButtonClick}>\n                        Ввести другой\n                    </StyledButton>\n                    <StyledButton onClick={handleCloseButtonClick} view={ButtonViews.secondary}>\n                        Не сейчас\n                    </StyledButton>\n                </StyledButtonContainer>\n            </StyledContainer>\n            <StyledBackground />\n        </>\n    );\n};\n","import { DGSuggest } from 'tools/twoGis/api/suggest';\nimport { createAction } from 'tools/create-action';\n\nexport const setTwoGisSuggests = (payload: DGSuggest[]) => createAction('SET_TWO_GIS_SUGGESTS', payload);\n","export type DGLocale =\n    | 'ru_RU' // русский (Россия),\n    | 'ru_UA' // русский(Украина),\n    | 'ru_KG' // русский(Казахстан),\n    | 'ru_KZ' // русский(Киргизия),\n    | 'ru_UZ' // русский(Узбекистан),\n    | 'uk_RU' // украинский(Россия),\n    | 'uk_UA' // украинский(Украина),\n    | 'en_RU' // английский(Россия),\n    | 'en_AE' // английский(ОАЭ),\n    | 'en_CY' // английский(Кипр),\n    | 'it_RU' // итальянский(Россия),\n    | 'it_IT' // итальянский(Россия),\n    | 'es_RU' // испанский(Россия),\n    | 'es_CL' // испанский(Кипр),\n    | 'ar_AE' // арабский(ОАЭ),\n    | 'ar_RU' // арабский(Россия),\n    | 'cs_CZ' // чешский(Чехия),\n    | 'cs_RU' // чешский(Россия),\n    | 'az_AZ'; // азербайджанский (Азербайджан).\n\ninterface DGBaseResponse {\n    meta: {\n        code: number;\n        api_version: string;\n        issue_date: string;\n    };\n}\n\nexport interface DGErrorResponse extends DGBaseResponse {\n    meta: {\n        code: number;\n        api_version: string;\n        issue_date: string;\n        error: {\n            type: string;\n            message: string;\n        };\n    };\n}\n\nexport interface DGSuccessResponse<ResponseType> extends DGBaseResponse {\n    meta: {\n        code: number;\n        api_version: string;\n        issue_date: string;\n    };\n    result: ResponseType;\n}\n\nexport type DGApiResponse<ResponseType> = DGSuccessResponse<ResponseType> | DGErrorResponse;\n\nexport const isErrorResponse = (response: DGApiResponse<unknown>): response is DGErrorResponse =>\n    'error' in response.meta;\n\nexport interface DGListResult<Item> {\n    total: number;\n    items: Item[];\n}\n\nexport interface DGLatLng {\n    lat: number;\n    lon: number;\n}\n","import * as Sentry from '@sentry/react';\nimport { memoize, memoizeResolvedPromise } from 'tools/memoize';\n\nimport searchRegionData from '../../generated/geometry/search-region-data.wkt.json';\n\nimport { getSuggests, DGSuggest } from './api/suggest';\nimport { DGLocale, isErrorResponse } from './api/common';\n\nconst regionData = searchRegionData.data as Record<string, string>;\nconst regionList = searchRegionData.regions;\n\nconst memoizedGetSuggests = memoizeResolvedPromise(getSuggests);\n\nconst isPointInBBox = (point: [number, number], bbox: number[]): boolean => {\n    // prettier-ignore\n    return (\n        point[0] >= bbox[0] &&\n        point[1] >= bbox[1] &&\n        point[0] <= bbox[2] &&\n        point[1] <= bbox[3]\n    );\n};\n\nconst getPolygonList = memoize((lon: number, lat: number) => {\n    const point: [number, number] = [lon, lat];\n\n    return [...regionList]\n        .sort((a, b) => Number(isPointInBBox(point, a.bbox)) - Number(isPointInBBox(point, b.bbox)))\n        .map((item) => item.name);\n});\n\ninterface GetSuggestsListParams {\n    q: string;\n    locale: DGLocale;\n    longitude: string;\n    latitude: string;\n}\n\nexport const getSuggestsList = async ({\n    q,\n    locale,\n    longitude,\n    latitude,\n}: GetSuggestsListParams): Promise<DGSuggest[]> => {\n    if (q.length === 0) {\n        return [];\n    }\n\n    const polygonList = getPolygonList(parseFloat(longitude), parseFloat(latitude));\n\n    const suggestList = await Promise.all(\n        polygonList.map((polygonName) =>\n            memoizedGetSuggests({\n                q,\n                locale,\n                polygon: regionData[polygonName] || '',\n                fields: ['items.address', 'items.point'],\n                suggestType: 'address',\n                type: ['building', 'street'],\n            })\n                .then((response) => {\n                    if (isErrorResponse(response)) {\n                        throw new Error(`Error: 2GIS Suggests List: ${response.meta.error.message}`);\n                    }\n\n                    return response.result.items;\n                })\n                .catch((error) => {\n                    if (process.env.REACT_APP_ENVIRONMENT === 'production') {\n                        Sentry.captureException(error);\n                    }\n\n                    return [];\n                }),\n        ),\n    ).then((responseList) => {\n        return responseList.reduce<(DGSuggest | never)[]>((acc, item) => {\n            if (item) {\n                acc.push(...item);\n            }\n\n            return acc;\n        }, []);\n    });\n\n    const suggestMap = suggestList.reduce((map, suggest) => {\n        map.set(suggest.id, suggest);\n\n        return map;\n    }, new Map<string, DGSuggest>());\n\n    return [...suggestMap.values()];\n};\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useFocusOnMount } from 'hooks/useFocusOnMount';\nimport { font } from 'style/const/font';\nimport { transition } from 'style/const/transition';\nimport { color } from 'style/const/color';\n\ninterface StyledTitleProps {\n    isMinified?: boolean;\n    isFocused?: boolean;\n}\nconst StyledTitle = styled.div<StyledTitleProps>`\n    position: absolute;\n    left: 32px;\n    top: 36px;\n\n    font-weight: 500;\n    font-size: 32px;\n    line-height: 40px;\n\n    color: ${({ isFocused }) => (isFocused ? color.text.active : color.text.tertiary)};\n    transition: font-size 0.2s ease-in-out, top 0.2s ease-in-out, color 0.2s ease-in-out;\n\n    ${({ isMinified }) =>\n        isMinified &&\n        css`\n            top: 12px;\n            font-size: 24px;\n        `};\n`;\n\ninterface StyledInputProps {\n    disabled?: boolean;\n}\nconst StyledInput = styled.input<StyledInputProps>`\n    margin-top: 50px;\n    height: 40px;\n    width: 100%;\n    font-family: inherit;\n    font-weight: ${font.weight.medium};\n    font-size: 32px;\n    color: ${({ disabled }) => (disabled ? 'rgba(255, 255, 255, 0.28)' : '#fff')};\n    caret-color: ${color.text.active};\n    line-height: 40px;\n    padding: 0;\n    border: none;\n    background: transparent;\n`;\n\nconst StyledWrapper = styled.div`\n    position: relative;\n    box-sizing: border-box;\n    height: 112px;\n    padding: 4px 36px;\n    background-color: ${color.surface.liquid1};\n\n    &::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n\n        display: block;\n        height: 4px;\n\n        background-color: ${color.surface.liquid2};\n\n        pointer-events: none;\n\n        transition: bottom ${transition.default};\n    }\n`;\n\ninterface StyledRootProps {\n    isFocused?: boolean;\n}\nconst StyledRoot = styled.div<StyledRootProps>`\n    margin: -4px;\n    height: 120px;\n    box-sizing: border-box;\n    border: 4px solid transparent;\n    border-radius: 28px;\n\n    overflow: hidden;\n\n    transition: border ${transition.default};\n\n    ${({ isFocused }) =>\n        isFocused &&\n        css`\n            border-color: ${color.text.active};\n\n            ${StyledTitle} {\n                color: ${color.text.active};\n\n                transition: color ${transition.default};\n            }\n\n            ${StyledWrapper}::after {\n                bottom: -4px;\n            }\n        `}\n`;\n\ninterface InputProps {\n    title: string;\n    value: string;\n    className?: string;\n    type?: string;\n    disabled?: boolean;\n    onSubmit?: (event: React.SyntheticEvent<HTMLInputElement>) => void;\n    onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n    onRootKeyPress?: (event: React.KeyboardEvent<HTMLInputElement>) => void;\n    forwardRef?: React.RefObject<HTMLDivElement>;\n    shouldFocusOnMount?: boolean;\n    shouldFocusInputOnMount?: boolean;\n}\n\nexport const Input: React.FC<InputProps> = ({\n    title,\n    value,\n    className,\n    type = 'text',\n    disabled,\n    onSubmit,\n    onChange,\n    onRootKeyPress,\n    forwardRef,\n    shouldFocusOnMount,\n    shouldFocusInputOnMount,\n}) => {\n    const [isFocused, setFocus] = React.useState(false);\n    const [isUsing, setUsing] = React.useState(false);\n    const inputRef = React.useRef<HTMLInputElement>(null);\n    const onMountRootRef = useFocusOnMount<HTMLDivElement>(forwardRef);\n    const rootRef = shouldFocusOnMount ? onMountRootRef : forwardRef;\n    const handleRootFocus = React.useCallback(() => setFocus(true), [setFocus]);\n    const handleRootBlur = React.useCallback(() => {\n        setFocus(false);\n        setUsing(false);\n    }, [setFocus, setUsing]);\n    const handleRootKeyPress = React.useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            if (inputRef && inputRef.current) {\n                if (onRootKeyPress) {\n                    onRootKeyPress(e);\n                }\n\n                if (!e.defaultPrevented) {\n                    inputRef.current.focus();\n                    setUsing(true);\n                }\n            }\n        },\n        [onRootKeyPress, setUsing],\n    );\n    const handleInputKeyPress = React.useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            if (onSubmit && event && event.key === 'Enter') {\n                event.stopPropagation();\n                onSubmit(event);\n            }\n        },\n        [onSubmit],\n    );\n\n    React.useEffect(() => {\n        if (shouldFocusInputOnMount && inputRef && inputRef.current) {\n            inputRef.current.focus();\n            setUsing(true);\n        }\n    }, [shouldFocusInputOnMount, inputRef, setUsing]);\n\n    const isTitleMinified = isUsing || Boolean(value);\n\n    return (\n        <StyledRoot\n            tabIndex={disabled ? -1 : 0}\n            className={className}\n            ref={rootRef}\n            isFocused={isFocused}\n            onFocus={handleRootFocus}\n            onBlur={handleRootBlur}\n            onKeyPress={handleRootKeyPress}\n        >\n            <StyledWrapper>\n                <StyledTitle isMinified={isTitleMinified} isFocused={isFocused}>\n                    {title}\n                </StyledTitle>\n                <StyledInput\n                    tabIndex={-1}\n                    ref={inputRef}\n                    type={type}\n                    disabled={disabled}\n                    onKeyPress={handleInputKeyPress}\n                    onChange={onChange}\n                    value={value}\n                />\n            </StyledWrapper>\n        </StyledRoot>\n    );\n};\n","import { useFocusOnChange } from 'hooks/useFocusOnChange';\nimport React from 'react';\nimport { setTwoGisSuggests } from 'store/actions/twoGisSuggests';\nimport styled from 'styled-components';\nimport { useMediaQuery } from 'beautiful-react-hooks';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { getSuggestsList } from 'tools/twoGis/getSuggestsList';\nimport { addressChangeInputValueAction } from 'store/actions/addressSimplePage';\nimport { addressSubmitAction } from 'store/actions/server';\nimport { Input } from 'components/Input/Input';\nimport { Button, ButtonViews } from 'components/Button/Button';\n\nimport {\n    AddressSimpleSuggestListItem,\n    SUGGEST_ITEM_HEIGHT,\n    SUGGEST_ITEM_MARGIN,\n} from './SuggestItem/AddressSimpleSuggestItem';\n\nconst StyledContainer = styled.div`\n    display: flex;\n    align-items: start;\n    height: 100%;\n    padding: 160px 360px 0;\n`;\n\nconst StyledInputContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    flex: 1 0;\n    max-width: 900px;\n`;\n\nconst StyledButton = styled(Button)`\n    position: relative;\n\n    margin-left: 32px;\n    padding: 36px 44px;\n`;\n\ninterface StyledSuggestListProps {\n    hidden?: boolean;\n}\nconst StyledSuggestList = styled.div<StyledSuggestListProps>`\n    height: ${({ hidden }) => (hidden ? 0 : (SUGGEST_ITEM_HEIGHT + SUGGEST_ITEM_MARGIN) * 3)}px;\n    overflow: hidden;\n    transition: height 0.5s ease-in-out;\n`;\n\ninterface StyledSuggestListContainerProps {\n    yShift: number;\n}\nconst StyledSuggestListContainer = styled.div<StyledSuggestListContainerProps>`\n    display: flex;\n    flex-direction: column;\n\n    transition: transform 0.5s ease-in-out;\n    transform: translateY(-${({ yShift }) => yShift}px);\n`;\n\nconst preventScroll = (event: React.SyntheticEvent<HTMLDivElement>) => {\n    event.currentTarget.scrollTop = 0;\n};\n\nconst viewportHeightWithOpenedKeyboardPx = 659;\n\nexport const AddressSimple: React.FC = () => {\n    const dispatch = useDispatch();\n    const isKeyboardExpanded = useMediaQuery(`(max-height: ${viewportHeightWithOpenedKeyboardPx}px)`);\n    const {\n        inputValue,\n        suggests,\n        suggestListContainerYShift,\n        isSubmitButtonDisabled,\n        submitButtonFocusHash,\n        inputFocusHash,\n    } = useSelector(({ addressSimplePage }) => addressSimplePage);\n    const submitButtonRef = useFocusOnChange<HTMLButtonElement>(undefined, submitButtonFocusHash);\n    const inputRootRef = useFocusOnChange<HTMLDivElement>(undefined, inputFocusHash);\n    const latitude = useSelector(({ userData }) => userData.deviceLocationLatitude);\n    const longitude = useSelector(({ userData }) => userData.deviceLocationLongitude);\n\n    const memoizedOnInputChange = React.useCallback<(e: React.ChangeEvent<HTMLInputElement>) => void>(\n        (event) => {\n            dispatch(addressChangeInputValueAction(event.currentTarget.value));\n        },\n        [dispatch],\n    );\n    const memoizedOnClickButton = React.useCallback(() => {\n        dispatch(addressSubmitAction());\n    }, [dispatch]);\n\n    React.useEffect(() => {\n        getSuggestsList({ q: inputValue, locale: 'ru_RU', latitude, longitude })\n            .then((items) => {\n                dispatch(setTwoGisSuggests(items));\n            })\n            .catch(() => {\n                dispatch(setTwoGisSuggests([]));\n            });\n    }, [dispatch, inputValue, latitude, longitude]);\n\n    return (\n        <StyledContainer>\n            <StyledInputContainer>\n                <Input\n                    forwardRef={inputRootRef}\n                    shouldFocusOnMount\n                    value={inputValue}\n                    title=\"Улица и дом\"\n                    onChange={memoizedOnInputChange}\n                />\n                <StyledSuggestList hidden={isKeyboardExpanded} onScroll={preventScroll}>\n                    <StyledSuggestListContainer yShift={suggestListContainerYShift}>\n                        {suggests.map((item, index) => (\n                            <AddressSimpleSuggestListItem key={item.id} index={index} />\n                        ))}\n                    </StyledSuggestListContainer>\n                </StyledSuggestList>\n            </StyledInputContainer>\n            <StyledButton\n                shouldLockAfterClick\n                view={ButtonViews.secondary}\n                forwardRef={submitButtonRef}\n                disabled={isSubmitButtonDisabled}\n                onClick={memoizedOnClickButton}\n            >\n                Сохранить\n            </StyledButton>\n        </StyledContainer>\n    );\n};\n","// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop() {}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { ROUTES } from 'store/constants/router';\nimport { addressFullSubmitAction } from 'store/actions/server';\nimport { noop } from 'tools/noop';\nimport { Input } from 'components/Input/Input';\nimport { Button, ButtonViews } from 'components/Button/Button';\n\nconst StyledContainer = styled.div`\n    height: 100%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n`;\n\nconst StyledFirstRow = styled.div`\n    grid-area: first-row;\n    display: grid;\n    grid-column-gap: 32px;\n    grid-template-columns: 1.4fr 1fr;\n    color: #fff;\n`;\n\nconst StyledSecondRow = styled.div`\n    grid-area: second-row;\n    display: grid;\n    grid-column-gap: 32px;\n    grid-template-columns: 1fr 1fr 1fr;\n    color: #fff;\n`;\n\nconst StyledThirdRow = styled.div`\n    grid-area: third-row;\n    display: grid;\n    grid-column-gap: 32px;\n    grid-template-columns: 1.4fr 1fr;\n    color: #fff;\n`;\n\nconst StyledFourthRow = styled.div`\n    grid-area: fourth-row;\n`;\n\nconst SubmitButton = styled(Button)`\n    flex-grow: 0;\n    padding: 32px 40px;\n`;\n\nconst StyledRoot = styled.div`\n    display: grid;\n    padding: 0 130px;\n    box-sizing: border-box;\n    grid-row-gap: 80px;\n    grid-column-gap: 32px;\n    grid-template-areas: 'first-row' 'second-row' 'third-row' 'fourth-row';\n\n    will-change: transform;\n`;\n\nexport const AddressFullAll: React.FC = () => {\n    const dispatch = useDispatch();\n    const {\n        addressInputValue,\n        phoneNumberInputValue,\n        apartmentInputValue,\n        entranceInputValue,\n        floorInputValue,\n        doorCodeInputValue,\n        isSubmitButtonDisabled,\n        nextFocus,\n    } = useSelector(({ addressFullPage }) => addressFullPage);\n    const handleSubmitClick = React.useCallback(() => {\n        dispatch(addressFullSubmitAction());\n    }, [dispatch]);\n\n    return (\n        <StyledContainer>\n            <StyledRoot>\n                <StyledFirstRow>\n                    <Input\n                        title=\"Улица и дом\"\n                        onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                        onRootKeyPress={() => dispatch(push(ROUTES.ADDRESS_SIMPLE))}\n                        value={addressInputValue}\n                    />\n                    <Input\n                        title=\"Номер телефона\"\n                        shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_PHONE}\n                        onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                        onRootKeyPress={() => dispatch(push(ROUTES.ADDRESS_FULL_PHONE))}\n                        value={phoneNumberInputValue}\n                    />\n                </StyledFirstRow>\n                <StyledSecondRow>\n                    <Input\n                        title=\"Квартира\"\n                        shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_APARTMENT}\n                        onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                        onRootKeyPress={() => dispatch(push(ROUTES.ADDRESS_FULL_APARTMENT))}\n                        value={apartmentInputValue}\n                    />\n                    <Input\n                        title=\"Подъезд\"\n                        shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_ENTRANCE}\n                        onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                        onRootKeyPress={() => dispatch(push(ROUTES.ADDRESS_FULL_ENTRANCE))}\n                        value={entranceInputValue}\n                    />\n                    <Input\n                        title=\"Этаж\"\n                        shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_FLOOR}\n                        onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                        onRootKeyPress={() => dispatch(push(ROUTES.ADDRESS_FULL_FLOOR))}\n                        value={floorInputValue}\n                    />\n                </StyledSecondRow>\n                <StyledThirdRow>\n                    <Input\n                        title=\"Комментарий\"\n                        shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_DOORCODE}\n                        onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                        onRootKeyPress={() => dispatch(push(ROUTES.ADDRESS_FULL_DOORCODE))}\n                        value={doorCodeInputValue}\n                    />\n                </StyledThirdRow>\n                <StyledFourthRow>\n                    <SubmitButton\n                        view={ButtonViews.secondary}\n                        shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_ALL}\n                        disabled={isSubmitButtonDisabled}\n                        shouldLockAfterClick\n                        onClick={handleSubmitClick}\n                    >\n                        Сохранить\n                    </SubmitButton>\n                </StyledFourthRow>\n            </StyledRoot>\n        </StyledContainer>\n    );\n};\n","import { createAction } from 'tools/create-action';\n\ninterface AddressFullPhoneNumberInputChangePayload {\n    inputType: InputEvent['inputType'];\n    data: InputEvent['data'];\n}\nexport const addressFullPhoneNumberInputChangeAction = (payload: AddressFullPhoneNumberInputChangePayload) =>\n    createAction('addressFull/PHONE_NUMBER_INPUT_CHANGE', payload);\n\nexport const addressFullApartmentInputChangeAction = (payload: string) =>\n    createAction('addressFull/APARTMENT_INPUT_CHANGE', payload);\n\nexport const addressFullEntranceInputChangeAction = (payload: string) =>\n    createAction('addressFull/ENTRANCE_INPUT_CHANGE', payload);\n\nexport const addressFullFloorInputChangeAction = (payload: string) =>\n    createAction('addressFull/FLOOR_INPUT_CHANGE', payload);\n\nexport const addressFullDoorCodeInputChangeAction = (payload: string) =>\n    createAction('addressFull/DOORCODE_INPUT_CHANGE', payload);\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullApartmentInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\n\nconst StyledInput = styled(Input)`\n    margin: 80px auto 0;\n    width: 900px;\n`;\n\nexport const AddressFullApartment = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.apartmentInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullApartmentInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Квартира\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullDoorCodeInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\n\nconst StyledInput = styled(Input)`\n    margin: 80px auto 0;\n    width: 900px;\n`;\n\nexport const AddressFullDoorCode = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.doorCodeInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullDoorCodeInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Комментарий\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullEntranceInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\n\nconst StyledInput = styled(Input)`\n    margin: 80px auto 0;\n    width: 900px;\n`;\n\nexport const AddressFullEntrance = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.entranceInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullEntranceInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Подъезд\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullFloorInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\n\nconst StyledInput = styled(Input)`\n    margin: 80px auto 0;\n    width: 900px;\n`;\n\nexport const AddressFullFloor = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.floorInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullFloorInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Этаж\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullPhoneNumberInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\n\nconst StyledInput = styled(Input)`\n    margin: 80px auto 0;\n    width: 900px;\n`;\n\nexport const AddressFullPhone = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.phoneNumberInputValue);\n    const handleInputChange = React.useCallback(\n        ({ nativeEvent }: React.ChangeEvent<HTMLInputElement>) => {\n            // без этого тайпгварда TS не хочет показывать правильные поля\n            if (nativeEvent instanceof InputEvent) {\n                const { inputType, data } = nativeEvent;\n\n                dispatch(addressFullPhoneNumberInputChangeAction({ inputType, data }));\n            }\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Номер телефона\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport { layoutContentHeight, layoutHeaderHeight } from 'style/const/layout';\nimport styled from 'styled-components';\nimport { goBack } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { closeAppAction } from 'store/actions/app';\nimport { Button, ButtonViews, ButtonSize } from 'components/Button/Button';\nimport { HeadlineText1 } from 'components/Text/Headline';\nimport { BodyText1 } from 'components/Text/Body';\nimport { color } from 'style/const/color';\n\nimport circlesImage from './Error.assets/circles.svg';\nimport warningIcon from './Error.assets/warning.svg';\n\nconst ErrorPage = styled.div`\n    position: relative;\n\n    height: ${layoutContentHeight}px;\n    padding-left: 128px;\n`;\n\nconst TextContainer = styled.div`\n    width: 816px;\n    height: ${layoutContentHeight}px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    align-content: left;\n`;\n\nconst Title = styled(HeadlineText1)`\n    margin-bottom: 12px;\n\n    color: ${color.text.primary};\n`;\n\nconst Subtitle = styled(BodyText1)`\n    margin-bottom: 48px;\n\n    white-space: pre-wrap;\n\n    color: ${color.text.secondary};\n`;\n\nconst ButtonContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    margin: 0 -24px;\n`;\n\nconst StyledButton = styled(Button)`\n    margin: 0 24px;\n`;\n\nconst circlesPositionXPx = -266;\nconst circlesPositionYPx = -1 * (layoutHeaderHeight + 280);\n\nconst Circles = styled.div`\n    position: absolute;\n    top: ${circlesPositionYPx}px;\n    right: ${circlesPositionXPx}px;\n\n    box-sizing: border-box;\n    width: 1596px;\n    height: 1596px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    background-image: url('${circlesImage}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n`;\n\nconst WarningIcon = styled.div`\n    width: 384px;\n    height: 384px;\n\n    background-image: url('${warningIcon}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n`;\n\nexport const Error: React.FC = () => {\n    const { title, subtitle, retryButtonText, closeButtonText } = useSelector(({ errorPage }) => errorPage);\n\n    const dispatch = useDispatch();\n\n    const handleRetryButtonClick = React.useCallback(() => {\n        dispatch(goBack());\n    }, [dispatch]);\n\n    const handleCloseButtonClick = React.useCallback(() => {\n        dispatch(closeAppAction());\n    }, [dispatch]);\n\n    return (\n        <ErrorPage>\n            <TextContainer>\n                <Title>{title}</Title>\n                <Subtitle>{subtitle}</Subtitle>\n                <ButtonContainer>\n                    <StyledButton\n                        shouldFocusOnMount\n                        size={ButtonSize.s}\n                        view={ButtonViews.secondary}\n                        onClick={handleRetryButtonClick}\n                    >\n                        {retryButtonText}\n                    </StyledButton>\n                    {closeButtonText ? (\n                        <StyledButton size={ButtonSize.s} view={ButtonViews.secondary} onClick={handleCloseButtonClick}>\n                            {closeButtonText}\n                        </StyledButton>\n                    ) : null}\n                </ButtonContainer>\n            </TextContainer>\n            <Circles>\n                <WarningIcon />\n            </Circles>\n        </ErrorPage>\n    );\n};\n","import styled, { keyframes } from 'styled-components';\n\nimport spinnerImage from './spinner.svg';\n\nconst spinnerSizePx = 112;\n\nconst spinnerAnimationDurationMs = 1000;\n\nexport const Spinner = styled.div`\n    width: ${spinnerSizePx}px;\n    height: ${spinnerSizePx}px;\n\n    background: url('${spinnerImage}');\n    background-size: cover;\n\n    animation-name: ${keyframes`\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    `};\n    animation-duration: ${spinnerAnimationDurationMs}ms;\n    animation-timing-function: linear;\n    animation-iteration-count: infinite;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { Spinner } from 'components/Spinner/Spinner';\nimport { BodyText1 } from 'components/Text/Body';\nimport { color } from 'style/const/color';\n\nconst StyledContainer = styled.div`\n    height: 100%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n`;\n\nconst Text = styled(BodyText1)`\n    margin-top: 32px;\n\n    color: ${color.text.primary};\n`;\n\nexport const Wait: React.FC = () => {\n    const text = useSelector(({ waitPage }) => waitPage.text);\n\n    return (\n        <StyledContainer>\n            <Spinner />\n            <Text>{text}</Text>\n        </StyledContainer>\n    );\n};\n","/* eslint-disable */\n\n/* Spatial Navigation Polyfill\n *\n * It follows W3C official specification\n * https://drafts.csswg.org/css-nav-1/\n *\n * Copyright (c) 2018-2019 LG Electronics Inc.\n * https://github.com/WICG/spatial-navigation/polyfill\n *\n * Licensed under the MIT license (MIT)\n */\n\nexport const spatialNavigationInit = () => {\n    // The polyfill must not be executed, if it's already enabled via browser engine or browser extensions.\n    if ('navigate' in window) {\n        return;\n    }\n\n    const ARROW_KEY_CODE = { 37: 'left', 38: 'up', 39: 'right', 40: 'down' };\n    const TAB_KEY_CODE = 9;\n    let mapOfBoundRect = null;\n    let startingPoint = null; // Saves spatial navigation starting point\n    let savedSearchOrigin = { element: null, rect: null }; // Saves previous search origin\n    let searchOriginRect = null; // Rect of current search origin\n\n    window.__getSpatNavState = () => {\n        return {\n            mapOfBoundRect,\n            startingPoint,\n            savedSearchOrigin,\n            searchOriginRect,\n        };\n    };\n\n    /**\n     * Initiate the spatial navigation features of the polyfill.\n     * @function initiateSpatialNavigation\n     */\n    function initiateSpatialNavigation() {\n        /*\n         * Bind the standards APIs to be exposed to the window object for authors\n         */\n        window.navigate = navigate;\n        window.Element.prototype.spatialNavigationSearch = spatialNavigationSearch;\n        window.Element.prototype.focusableAreas = focusableAreas;\n        window.Element.prototype.getSpatialNavigationContainer = getSpatialNavigationContainer;\n\n        /*\n         * CSS.registerProperty() from the Properties and Values API\n         * Reference: https://drafts.css-houdini.org/css-properties-values-api/#the-registerproperty-function\n         */\n        if (window.CSS && CSS.registerProperty) {\n            if (\n                window.getComputedStyle(document.documentElement).getPropertyValue('--spatial-navigation-contain') ===\n                ''\n            ) {\n                CSS.registerProperty({\n                    name: '--spatial-navigation-contain',\n                    syntax: 'auto | contain',\n                    inherits: false,\n                    initialValue: 'auto',\n                });\n            }\n\n            if (\n                window.getComputedStyle(document.documentElement).getPropertyValue('--spatial-navigation-action') === ''\n            ) {\n                CSS.registerProperty({\n                    name: '--spatial-navigation-action',\n                    syntax: 'auto | focus | scroll',\n                    inherits: false,\n                    initialValue: 'auto',\n                });\n            }\n\n            if (\n                window.getComputedStyle(document.documentElement).getPropertyValue('--spatial-navigation-function') ===\n                ''\n            ) {\n                CSS.registerProperty({\n                    name: '--spatial-navigation-function',\n                    syntax: 'normal | grid',\n                    inherits: false,\n                    initialValue: 'normal',\n                });\n            }\n        }\n    }\n\n    /**\n     * Add event handlers for the spatial navigation behavior.\n     * This function defines which input methods trigger the spatial navigation behavior.\n     * @function spatialNavigationHandler\n     */\n    function spatialNavigationHandler() {\n        /*\n         * keydown EventListener :\n         * If arrow key pressed, get the next focusing element and send it to focusing controller\n         */\n        window.addEventListener('keydown', (e) => {\n            const currentKeyMode =\n                (parent && parent.__spatialNavigation__.keyMode) || window.__spatialNavigation__.keyMode;\n            const eventTarget = document.activeElement;\n            const dir = ARROW_KEY_CODE[e.keyCode];\n\n            if (e.keyCode === TAB_KEY_CODE) {\n                startingPoint = null;\n            }\n\n            if (\n                !currentKeyMode ||\n                currentKeyMode === 'NONE' ||\n                (currentKeyMode === 'SHIFTARROW' && !e.shiftKey) ||\n                (currentKeyMode === 'ARROW' && e.shiftKey) ||\n                e.ctrlKey ||\n                e.metaKey ||\n                e.altKey\n            )\n                return;\n\n            if (!e.defaultPrevented) {\n                let focusNavigableArrowKey = {\n                    left: true,\n                    up: true,\n                    right: true,\n                    down: true,\n                };\n\n                // Edge case (text input, area) : Don't move focus, just navigate cursor in text area\n                if (eventTarget.nodeName === 'INPUT' || eventTarget.nodeName === 'TEXTAREA') {\n                    focusNavigableArrowKey = handlingEditableElement(e);\n                }\n\n                if (focusNavigableArrowKey[dir]) {\n                    e.preventDefault();\n                    mapOfBoundRect = new Map();\n\n                    navigate(dir);\n\n                    mapOfBoundRect = null;\n                    startingPoint = null;\n                }\n            }\n        });\n\n        /*\n         * mouseup EventListener :\n         * If the mouse click a point in the page, the point will be the starting point.\n         * NOTE: Let UA set the spatial navigation starting point based on click\n         */\n        document.addEventListener('mouseup', (e) => {\n            startingPoint = { x: e.clientX, y: e.clientY };\n        });\n\n        /*\n         * focusin EventListener :\n         * When the element get the focus, save it and its DOMRect for resetting the search origin\n         * if it disappears.\n         */\n        window.addEventListener('focusin', (e) => {\n            if (e.target !== window) {\n                savedSearchOrigin.element = e.target;\n                savedSearchOrigin.rect = e.target.getBoundingClientRect();\n            }\n        });\n    }\n\n    /**\n     * Enable the author to trigger spatial navigation programmatically, as if the user had done so manually.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-window-navigate}\n     * @function navigate\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     */\n    function navigate(dir) {\n        // spatial navigation steps\n\n        // 1\n        const searchOrigin = findSearchOrigin();\n        console.log(searchOrigin);\n        let eventTarget = searchOrigin;\n        let elementFromPosition = null;\n\n        // 2 Optional step, UA defined starting point\n        if (startingPoint) {\n            // if there is a starting point, set eventTarget as the element from position for getting the spatnav container\n            elementFromPosition = document.elementFromPoint(startingPoint.x, startingPoint.y);\n\n            // Use starting point if the starting point isn't inside the focusable element (but not container)\n            // * Starting point is meaningfull when:\n            // 1) starting point is inside the spatnav container\n            // 2) starting point is inside the non-focusable element\n            if (elementFromPosition === null) {\n                elementFromPosition = document.body;\n            }\n            if (isFocusable(elementFromPosition) && !isContainer(elementFromPosition)) {\n                startingPoint = null;\n            } else if (isContainer(elementFromPosition)) {\n                eventTarget = elementFromPosition;\n            } else {\n                eventTarget = elementFromPosition.getSpatialNavigationContainer();\n            }\n        }\n\n        // 4\n        if (eventTarget === window || eventTarget === document || eventTarget === document.documentElement) {\n            eventTarget = document.body || document.documentElement;\n        }\n\n        // 5\n        // At this point, spatialNavigationSearch can be applied.\n        // If startingPoint is either a scroll container or the document,\n        // find the best candidate within startingPoint\n        let container = null;\n        if ((isContainer(eventTarget) || eventTarget.nodeName === 'BODY') && !(eventTarget.nodeName === 'INPUT')) {\n            if (eventTarget.nodeName === 'IFRAME') {\n                eventTarget = eventTarget.contentDocument.documentElement;\n            }\n\n            container = container === window ? document.body : eventTarget;\n            let bestInsideCandidate = null;\n\n            // 5-2\n            if (\n                document.activeElement === searchOrigin ||\n                (document.activeElement === document.body && searchOrigin === document.documentElement)\n            ) {\n                if (getCSSSpatNavAction(eventTarget) === 'scroll') {\n                    if (scrollingController(eventTarget, dir)) return;\n                } else if (getCSSSpatNavAction(eventTarget) === 'focus') {\n                    bestInsideCandidate = eventTarget.spatialNavigationSearch(dir, {\n                        container: eventTarget,\n                        candidates: getSpatialNavigationCandidates(eventTarget, {\n                            mode: 'all',\n                        }),\n                    });\n                    if (focusingController(bestInsideCandidate, dir)) return;\n                } else if (getCSSSpatNavAction(eventTarget) === 'auto') {\n                    bestInsideCandidate = eventTarget.spatialNavigationSearch(dir, {\n                        container: eventTarget,\n                    });\n                    if (focusingController(bestInsideCandidate, dir) || scrollingController(eventTarget, dir)) return;\n                }\n            } else {\n                // when the previous search origin became offscreen\n                container = container.getSpatialNavigationContainer();\n            }\n        }\n\n        // 6\n        // Let container be the nearest ancestor of eventTarget\n        container = eventTarget.getSpatialNavigationContainer();\n        let parentContainer = container.parentElement ? container.getSpatialNavigationContainer() : null;\n\n        // When the container is the viewport of a browsing context\n        if (!parentContainer && window.location !== window.parent.location) {\n            parentContainer = window.parent.document.documentElement;\n        }\n\n        if (getCSSSpatNavAction(container) === 'scroll') {\n            if (scrollingController(container, dir)) return;\n        } else if (getCSSSpatNavAction(container) === 'focus') {\n            navigateChain(eventTarget, container, parentContainer, dir, 'all');\n        } else if (getCSSSpatNavAction(container) === 'auto') {\n            navigateChain(eventTarget, container, parentContainer, dir, 'visible');\n        }\n    }\n\n    /**\n     * Move the focus to the best candidate or do nothing.\n     * @function focusingController\n     * @param bestCandidate {Node} - The best candidate of the spatial navigation\n     * @param dir {SpatialNavigationDirection}- The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function focusingController(bestCandidate, dir) {\n        // 10 & 11\n        // When bestCandidate is found\n        if (bestCandidate) {\n            // When bestCandidate is a focusable element and not a container : move focus\n            /*\n             * [event] navbeforefocus : Fired before spatial or sequential navigation changes the focus.\n             */\n            if (!createSpatNavEvents('beforefocus', bestCandidate, null, dir)) return true;\n\n            const container = bestCandidate.getSpatialNavigationContainer();\n\n            if (container !== window && getCSSSpatNavAction(container) === 'focus') {\n                bestCandidate.focus();\n            } else {\n                bestCandidate.focus({ preventScroll: true });\n            }\n\n            startingPoint = null;\n            return true;\n        }\n\n        // When bestCandidate is not found within the scrollport of a container: Nothing\n        return false;\n    }\n\n    /**\n     * Directionally scroll the scrollable spatial navigation container if it can be manually scrolled more.\n     * @function scrollingController\n     * @param container {Node} - The spatial navigation container which can scroll\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function scrollingController(container, dir) {\n        // If there is any scrollable area among parent elements and it can be manually scrolled, scroll the document\n        if (isScrollable(container, dir) && !isScrollBoundary(container, dir)) {\n            moveScroll(container, dir);\n            return true;\n        }\n\n        // If the spatnav container is document and it can be scrolled, scroll the document\n        if (!container.parentElement && !isHTMLScrollBoundary(container, dir)) {\n            moveScroll(container.ownerDocument.documentElement, dir);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Find the candidates within a spatial navigation container include delegable container.\n     * This function does not search inside delegable container or focusable container.\n     * In other words, this return candidates set is not included focusable elements inside delegable container or focusable container.\n     *\n     * @function getSpatialNavigationCandidates\n     * @param container {Node} - The spatial navigation container\n     * @param option {FocusableAreasOptions} - 'mode' attribute takes 'visible' or 'all' for searching the boundary of focusable elements.\n     *                                          Default value is 'visible'.\n     * @returns {sequence<Node>} candidate elements within the container\n     */\n    function getSpatialNavigationCandidates(container, option = { mode: 'visible' }) {\n        let candidates = [];\n\n        if (container.childElementCount > 0) {\n            if (!container.parentElement) {\n                container = container.getElementsByTagName('body')[0] || document.body;\n            }\n            const children = container.children;\n            for (const elem of children) {\n                if (isDelegableContainer(elem)) {\n                    candidates.push(elem);\n                } else if (isFocusable(elem)) {\n                    candidates.push(elem);\n\n                    if (!isContainer(elem) && elem.childElementCount) {\n                        candidates = candidates.concat(getSpatialNavigationCandidates(elem, { mode: 'all' }));\n                    }\n                } else if (elem.childElementCount) {\n                    candidates = candidates.concat(getSpatialNavigationCandidates(elem, { mode: 'all' }));\n                }\n            }\n        }\n\n        //   console.log(candidates)\n        return option.mode === 'all' ? candidates : candidates.filter(isVisible);\n    }\n\n    /**\n     * Find the candidates among focusable elements within a spatial navigation container from the search origin (currently focused element)\n     * depending on the directional information.\n     * @function getFilteredSpatialNavigationCandidates\n     * @param element {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation without the directional information\n     * @param container {Node} - The spatial navigation container\n     * @returns {Node} The candidates for spatial navigation considering the directional information\n     */\n    function getFilteredSpatialNavigationCandidates(element, dir, candidates, container) {\n        const targetElement = element;\n        // Removed below line due to a bug. (iframe body rect is sometime weird.)\n        // const targetElement = (element.nodeName === 'IFRAME') ? element.contentDocument.body : element;\n        // If the container is unknown, get the closest container from the element\n        container = container || targetElement.getSpatialNavigationContainer();\n\n        // If the candidates is unknown, find candidates\n        // 5-1\n        candidates = !candidates || candidates.length <= 0 ? getSpatialNavigationCandidates(container) : candidates;\n        return filteredCandidates(targetElement, candidates, dir, container);\n    }\n\n    /**\n     * Find the best candidate among the candidates within the container from the search origin (currently focused element)\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-element-spatialnavigationsearch}\n     * @function spatialNavigationSearch\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param container {Node} - The spatial navigation container\n     * @returns {Node} The best candidate which will gain the focus\n     */\n    function spatialNavigationSearch(dir, args) {\n        const targetElement = this;\n        let internalCandidates = [];\n        let externalCandidates = [];\n        let insideOverlappedCandidates = getOverlappedCandidates(targetElement);\n        let bestTarget;\n\n        // Set default parameter value\n        if (!args) args = {};\n\n        const defaultContainer = targetElement.getSpatialNavigationContainer();\n        let defaultCandidates = getSpatialNavigationCandidates(defaultContainer);\n        const container = args.container || defaultContainer;\n        if (args.container && defaultContainer.contains(args.container)) {\n            defaultCandidates = defaultCandidates.concat(getSpatialNavigationCandidates(container));\n        }\n        const candidates =\n            args.candidates && args.candidates.length > 0\n                ? args.candidates.filter((candidate) => container.contains(candidate))\n                : defaultCandidates.filter((candidate) => container.contains(candidate) && container !== candidate);\n\n        // Find the best candidate\n        // 5\n        // If startingPoint is either a scroll container or the document,\n        // find the best candidate within startingPoint\n        if (candidates && candidates.length > 0) {\n            // Divide internal or external candidates\n            candidates.forEach((candidate) => {\n                if (candidate !== targetElement) {\n                    (targetElement.contains(candidate) && targetElement !== candidate\n                            ? internalCandidates\n                            : externalCandidates\n                    ).push(candidate);\n                }\n            });\n\n            // include overlapped element to the internalCandidates\n            let fullyOverlapped = insideOverlappedCandidates.filter(\n                (candidate) => !internalCandidates.includes(candidate),\n            );\n            let overlappedContainer = candidates.filter(\n                (candidate) => isContainer(candidate) && isEntirelyVisible(targetElement, candidate),\n            );\n            let overlappedByParent = overlappedContainer\n                .map((elm) => elm.focusableAreas())\n                .flat()\n                .filter((candidate) => candidate !== targetElement);\n\n            internalCandidates = internalCandidates\n                .concat(fullyOverlapped)\n                .filter((candidate) => container.contains(candidate));\n            externalCandidates = externalCandidates\n                .concat(overlappedByParent)\n                .filter((candidate) => container.contains(candidate));\n\n            // Filter external Candidates\n            if (externalCandidates.length > 0) {\n                externalCandidates = getFilteredSpatialNavigationCandidates(\n                    targetElement,\n                    dir,\n                    externalCandidates,\n                    container,\n                );\n            }\n\n            // If there isn't search origin element but search orgin rect exist  (search origin isn't in the layout case)\n            if (searchOriginRect) {\n                bestTarget = selectBestCandidate(\n                    targetElement,\n                    getFilteredSpatialNavigationCandidates(targetElement, dir, internalCandidates, container),\n                    dir,\n                );\n            }\n\n            if (internalCandidates && internalCandidates.length > 0 && !(targetElement.nodeName === 'INPUT')) {\n                bestTarget = selectBestCandidateFromEdge(targetElement, internalCandidates, dir);\n            }\n\n            bestTarget = bestTarget || selectBestCandidate(targetElement, externalCandidates, dir);\n\n            if (bestTarget && isDelegableContainer(bestTarget)) {\n                // if best target is delegable container, then find descendants candidate inside delegable container.\n                const innerTarget = getSpatialNavigationCandidates(bestTarget, {\n                    mode: 'all',\n                });\n                const descendantsBest =\n                    innerTarget.length > 0\n                        ? targetElement.spatialNavigationSearch(dir, {\n                            candidates: innerTarget,\n                            container: bestTarget,\n                        })\n                        : null;\n                if (descendantsBest) {\n                    bestTarget = descendantsBest;\n                } else if (!isFocusable(bestTarget)) {\n                    // if there is no target inside bestTarget and delegable container is not focusable,\n                    // then try to find another best target without curren best target.\n                    candidates.splice(candidates.indexOf(bestTarget), 1);\n                    bestTarget = candidates.length\n                        ? targetElement.spatialNavigationSearch(dir, {\n                            candidates: candidates,\n                            container: container,\n                        })\n                        : null;\n                }\n            }\n            return bestTarget;\n        }\n\n        return null;\n    }\n\n    /**\n     * Get the filtered candidate among candidates.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#select-the-best-candidate}\n     * @function filteredCandidates\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param container {Node} - The spatial navigation container\n     * @returns {sequence<Node>} The filtered candidates which are not the search origin and not in the given spatial navigation direction from the search origin\n     */\n    // TODO: Need to fix filtering the candidates with more clean code\n    function filteredCandidates(currentElm, candidates, dir, container) {\n        const originalContainer = currentElm.getSpatialNavigationContainer();\n        let eventTargetRect;\n\n        // If D(dir) is null, let candidates be the same as visibles\n        if (dir === undefined) return candidates;\n\n        // Offscreen handling when originalContainer is not <HTML>\n        if (originalContainer.parentElement && container !== originalContainer && !isVisible(currentElm)) {\n            eventTargetRect = getBoundingClientRect(originalContainer);\n        } else {\n            eventTargetRect = searchOriginRect || getBoundingClientRect(currentElm);\n        }\n\n        /*\n         * Else, let candidates be the subset of the elements in visibles\n         * whose principal box’s geometric center is within the closed half plane\n         * whose boundary goes through the geometric center of starting point and is perpendicular to D.\n         */\n        if ((isContainer(currentElm) || currentElm.nodeName === 'BODY') && !(currentElm.nodeName === 'INPUT')) {\n            return candidates.filter((candidate) => {\n                const candidateRect = getBoundingClientRect(candidate);\n                return (\n                    container.contains(candidate) &&\n                    ((currentElm.contains(candidate) &&\n                        isInside(eventTargetRect, candidateRect) &&\n                        candidate !== currentElm) ||\n                        isOutside(candidateRect, eventTargetRect, dir))\n                );\n            });\n        } else {\n            return candidates.filter((candidate) => {\n                const candidateRect = getBoundingClientRect(candidate);\n                const candidateBody = candidate.nodeName === 'IFRAME' ? candidate.contentDocument.body : null;\n                return (\n                    container.contains(candidate) &&\n                    candidate !== currentElm &&\n                    candidateBody !== currentElm &&\n                    isOutside(candidateRect, eventTargetRect, dir) &&\n                    !isInside(eventTargetRect, candidateRect)\n                );\n            });\n        }\n    }\n\n    /**\n     * Select the best candidate among given candidates.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#select-the-best-candidate}\n     * @function selectBestCandidate\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Node} The best candidate which will gain the focus\n     */\n    function selectBestCandidate(currentElm, candidates, dir) {\n        const container = currentElm.getSpatialNavigationContainer();\n        const spatialNavigationFunction = getComputedStyle(container).getPropertyValue('--spatial-navigation-function');\n        const currentTargetRect = searchOriginRect || getBoundingClientRect(currentElm);\n        let distanceFunction;\n        let alignedCandidates;\n\n        switch (spatialNavigationFunction) {\n            case 'grid':\n                alignedCandidates = candidates.filter((elm) =>\n                    isAligned(currentTargetRect, getBoundingClientRect(elm), dir),\n                );\n                if (alignedCandidates.length > 0) {\n                    candidates = alignedCandidates;\n                }\n                distanceFunction = getAbsoluteDistance;\n                break;\n            default:\n                distanceFunction = getDistance;\n                break;\n        }\n        return getClosestElement(currentElm, candidates, dir, distanceFunction);\n    }\n\n    /**\n     * Select the best candidate among candidates by finding the closet candidate from the edge of the currently focused element (search origin).\n     * @see {@link https://drafts.csswg.org/css-nav-1/#select-the-best-candidate (Step 5)}\n     * @function selectBestCandidateFromEdge\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Node} The best candidate which will gain the focus\n     */\n    function selectBestCandidateFromEdge(currentElm, candidates, dir) {\n        if (startingPoint) return getClosestElement(currentElm, candidates, dir, getDistanceFromPoint);\n        else return getClosestElement(currentElm, candidates, dir, getInnerDistance);\n    }\n\n    /**\n     * Select the closest candidate from the currently focused element (search origin) among candidates by using the distance function.\n     * @function getClosestElement\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param distanceFunction {function} - The distance function which measures the distance from the search origin to each candidate\n     * @returns {Node} The candidate which is the closest one from the search origin\n     */\n    function getClosestElement(currentElm, candidates, dir, distanceFunction) {\n        let eventTargetRect = null;\n        if (\n            window.location !== window.parent.location &&\n            (currentElm.nodeName === 'BODY' || currentElm.nodeName === 'HTML')\n        ) {\n            // If the eventTarget is iframe, then get rect of it based on its containing document\n            // Set the iframe's position as (0,0) because the rects of elements inside the iframe don't know the real iframe's position.\n            eventTargetRect = window.frameElement.getBoundingClientRect();\n            eventTargetRect.x = 0;\n            eventTargetRect.y = 0;\n        } else {\n            eventTargetRect = searchOriginRect || currentElm.getBoundingClientRect();\n        }\n\n        let minDistance = Number.POSITIVE_INFINITY;\n        let minDistanceElements = [];\n\n        if (candidates) {\n            for (let i = 0; i < candidates.length; i++) {\n                const distance = distanceFunction(eventTargetRect, getBoundingClientRect(candidates[i]), dir);\n\n                // If the same distance, the candidate will be selected in the DOM order\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    minDistanceElements = [candidates[i]];\n                } else if (distance === minDistance) {\n                    minDistanceElements.push(candidates[i]);\n                }\n            }\n        }\n        if (minDistanceElements.length === 0) return null;\n\n        return minDistanceElements.length > 1 && distanceFunction === getAbsoluteDistance\n            ? getClosestElement(currentElm, minDistanceElements, dir, getEuclideanDistance)\n            : minDistanceElements[0];\n    }\n\n    /**\n     * Get container of an element.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-element-getspatialnavigationcontainer}\n     * @module Element\n     * @function getSpatialNavigationContainer\n     * @returns {Node} The spatial navigation container\n     */\n    function getSpatialNavigationContainer() {\n        let container = this;\n\n        do {\n            if (!container.parentElement) {\n                if (window.location !== window.parent.location) {\n                    container = window.parent.document.documentElement;\n                } else {\n                    container = window.document.documentElement;\n                }\n                break;\n            } else {\n                container = container.parentElement;\n            }\n\n            // console.log(container, isContainer(container));\n        } while (!isContainer(container));\n        return container;\n    }\n\n    /**\n     * Get nearest scroll container of an element.\n     * @function getScrollContainer\n     * @param Element\n     * @returns {Node} The spatial navigation container\n     */\n    function getScrollContainer(element) {\n        let scrollContainer = element;\n\n        do {\n            if (!scrollContainer.parentElement) {\n                if (window.location !== window.parent.location) {\n                    scrollContainer = window.parent.document.documentElement;\n                } else {\n                    scrollContainer = window.document.documentElement;\n                }\n                break;\n            } else {\n                scrollContainer = scrollContainer.parentElement;\n            }\n        } while (!isScrollContainer(scrollContainer) || !isVisible(scrollContainer));\n\n        if (scrollContainer === document || scrollContainer === document.documentElement) {\n            scrollContainer = window;\n        }\n\n        return scrollContainer;\n    }\n\n    /**\n     * Find focusable elements within the spatial navigation container.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-element-focusableareas}\n     * @function focusableAreas\n     * @param option {FocusableAreasOptions} - 'mode' attribute takes 'visible' or 'all' for searching the boundary of focusable elements.\n     *                                          Default value is 'visible'.\n     * @returns {sequence<Node>} All focusable elements or only visible focusable elements within the container\n     */\n    function focusableAreas(option = { mode: 'visible' }) {\n        const container = this.parentElement ? this : document.body;\n        const focusables = Array.prototype.filter.call(container.getElementsByTagName('*'), isFocusable);\n        return option.mode === 'all' ? focusables : focusables.filter(isVisible);\n    }\n\n    /**\n     * Create the NavigationEvent: navbeforefocus, navnotarget\n     * @see {@link https://drafts.csswg.org/css-nav-1/#events-navigationevent}\n     * @function createSpatNavEvents\n     * @param option {string} - Type of the navigation event (beforefocus, notarget)\n     * @param element {Node} - The target element of the event\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     */\n    function createSpatNavEvents(eventType, containerElement, currentElement, direction) {\n        if (['beforefocus', 'notarget'].includes(eventType)) {\n            const data = {\n                causedTarget: currentElement,\n                dir: direction,\n            };\n            const triggeredEvent = new CustomEvent('nav' + eventType, {\n                bubbles: true,\n                cancelable: true,\n                detail: data,\n            });\n            return containerElement.dispatchEvent(triggeredEvent);\n        }\n    }\n\n    /**\n     * Get the value of the CSS custom property of the element\n     * @function readCssVar\n     * @param element {Node}\n     * @param varName {string} - The name of the css custom property without '--'\n     * @returns {string} The value of the css custom property\n     */\n    function readCssVar(element, varName) {\n        return getComputedStyle(element).getPropertyValue(`--${varName}`).trim();\n    }\n\n    /**\n     * Decide whether or not the 'contain' value is given to 'spatial-navigation-contain' css property of an element\n     * @function isCSSSpatNavContain\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isCSSSpatNavContain(element) {\n        return readCssVar(element, 'spatial-navigation-contain') === 'contain';\n    }\n\n    /**\n     * Return the value of 'spatial-navigation-action' css property of an element\n     * @function getCSSSpatNavAction\n     * @param element {Node} - would be the spatial navigation container\n     * @returns {string} auto | focus | scroll\n     */\n    function getCSSSpatNavAction(element) {\n        return 'focus';\n        //   return readCssVar(element, 'spatial-navigation-action') || 'auto';\n    }\n\n    /**\n     * Only move the focus with spatial navigation. Manually scrolling isn't available.\n     * @function navigateChain\n     * @param eventTarget {Node} - currently focused element\n     * @param container {SpatialNavigationContainer} - container\n     * @param parentContainer {SpatialNavigationContainer} - parent container\n     * @param option - visible || all\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     */\n    function navigateChain(eventTarget, container, parentContainer, dir, option) {\n        let currentOption = {\n            candidates: getSpatialNavigationCandidates(container, { mode: option }),\n            container,\n        };\n        //   console.log(currentOption)\n\n        while (parentContainer) {\n            if (focusingController(eventTarget.spatialNavigationSearch(dir, currentOption), dir)) {\n                return;\n            } else {\n                if (option === 'visible' && scrollingController(container, dir)) return;\n                else {\n                    if (!createSpatNavEvents('notarget', container, eventTarget, dir)) return;\n\n                    // find the container\n                    if (container === document || container === document.documentElement) {\n                        if (window.location !== window.parent.location) {\n                            // The page is in an iframe. eventTarget needs to be reset because the position of the element in the iframe\n                            eventTarget = window.frameElement;\n                            container = eventTarget.ownerDocument.documentElement;\n                        }\n                    } else {\n                        container = parentContainer;\n                    }\n                    currentOption = {\n                        candidates: getSpatialNavigationCandidates(container, {\n                            mode: option,\n                        }),\n                        container,\n                    };\n                    let nextContainer = container.getSpatialNavigationContainer();\n\n                    if (nextContainer !== container) {\n                        parentContainer = nextContainer;\n                    } else {\n                        parentContainer = null;\n                    }\n                }\n            }\n        }\n\n        currentOption = {\n            candidates: getSpatialNavigationCandidates(container, { mode: option }),\n            container,\n        };\n\n        // Behavior after 'navnotarget' - Getting out from the current spatnav container\n        if (\n            !parentContainer &&\n            container &&\n            focusingController(eventTarget.spatialNavigationSearch(dir, currentOption), dir)\n        )\n            return;\n\n        if (!createSpatNavEvents('notarget', currentOption.container, eventTarget, dir)) return;\n\n        if (getCSSSpatNavAction(container) === 'auto' && option === 'visible') {\n            if (scrollingController(container, dir)) return;\n        }\n    }\n\n    /**\n     * Find search origin\n     * @see {@link https://drafts.csswg.org/css-nav-1/#nav}\n     * @function findSearchOrigin\n     * @returns {Node} The search origin for the spatial navigation\n     */\n    function findSearchOrigin() {\n        let searchOrigin = document.activeElement;\n\n        if (!searchOrigin || (searchOrigin === document.body && !document.querySelector(':focus'))) {\n            // When the previous search origin lost its focus by blur: (1) disable attribute (2) visibility: hidden\n            if (savedSearchOrigin.element && searchOrigin !== savedSearchOrigin.element) {\n                const elementStyle = window.getComputedStyle(savedSearchOrigin.element, null);\n                const invisibleStyle = ['hidden', 'collapse'];\n\n                if (\n                    savedSearchOrigin.element.disabled ||\n                    invisibleStyle.includes(elementStyle.getPropertyValue('visibility'))\n                ) {\n                    searchOrigin = savedSearchOrigin.element;\n                    return searchOrigin;\n                }\n            }\n            searchOrigin = document.documentElement;\n        }\n        // When the previous search origin lost its focus by blur: (1) display:none () element size turned into zero\n        if (\n            savedSearchOrigin.element &&\n            (getBoundingClientRect(savedSearchOrigin.element).height === 0 ||\n                getBoundingClientRect(savedSearchOrigin.element).width === 0)\n        ) {\n            (startingPoint = (savedSearchOrigin.left + savedSearchOrigin.right) / 2),\n            (savedSearchOrigin.top + savedSearchOrigin.bottom) / 2;\n            // searchOriginRect = savedSearchOrigin.rect;\n        }\n\n        if (!isVisibleInScroller(searchOrigin)) {\n            const scroller = getScrollContainer(searchOrigin);\n            if (scroller && (scroller === window || getCSSSpatNavAction(scroller) === 'auto')) return scroller;\n        }\n        return searchOrigin;\n    }\n\n    /**\n     * Move the scroll of an element depending on the given spatial navigation directrion\n     * (Assume that User Agent defined distance is '40px')\n     * @see {@link https://drafts.csswg.org/css-nav-1/#directionally-scroll-an-element}\n     * @function moveScroll\n     * @param element {Node} - The scrollable element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param offset {Number} - The explicit amount of offset for scrolling. Default value is 0.\n     */\n    function moveScroll(element, dir, offset = 0) {\n        if (element) {\n            switch (dir) {\n                case 'left':\n                    element.scrollLeft -= 40 + offset;\n                    break;\n                case 'right':\n                    element.scrollLeft += 40 + offset;\n                    break;\n                case 'up':\n                    element.scrollTop -= 40 + offset;\n                    break;\n                case 'down':\n                    element.scrollTop += 40 + offset;\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Decide whether an element is container or not.\n     * @function isContainer\n     * @param element {Node} element\n     * @returns {boolean}\n     */\n    function isContainer(element) {\n        return (\n            !element.parentElement ||\n            element.nodeName === 'IFRAME' ||\n            isScrollContainer(element) ||\n            isCSSSpatNavContain(element)\n        );\n    }\n\n    /**\n     * Decide whether an element is delegable container or not.\n     * NOTE: THIS IS NON-NORMATIVE API.\n     * @function isDelegableContainer\n     * @param element {Node} element\n     * @returns {boolean}\n     */\n    function isDelegableContainer(element) {\n        return readCssVar(element, 'spatial-navigation-contain') === 'delegable';\n    }\n\n    /**\n     * Decide whether an element is a scrollable container or not.\n     * @see {@link https://drafts.csswg.org/css-overflow-3/#scroll-container}\n     * @function isScrollContainer\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isScrollContainer(element) {\n        const elementStyle = window.getComputedStyle(element, null);\n        const overflowX = elementStyle.getPropertyValue('overflow-x');\n        const overflowY = elementStyle.getPropertyValue('overflow-y');\n\n        return (overflowX !== 'visible' && overflowX !== 'clip' && isOverflow(element, 'left')) ||\n        (overflowY !== 'visible' && overflowY !== 'clip' && isOverflow(element, 'down'))\n            ? true\n            : false;\n    }\n\n    /**\n     * Decide whether this element is scrollable or not.\n     * NOTE: If the value of 'overflow' is given to either 'visible', 'clip', or 'hidden', the element isn't scrollable.\n     *       If the value is 'hidden', the element can be only programmically scrollable. (https://drafts.csswg.org/css-overflow-3/#valdef-overflow-hidden)\n     * @function isScrollable\n     * @param element {Node}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isScrollable(element, dir) {\n        // element, dir\n        if (element && typeof element === 'object') {\n            if (dir && typeof dir === 'string') {\n                // parameter: dir, element\n                if (isOverflow(element, dir)) {\n                    // style property\n                    const elementStyle = window.getComputedStyle(element, null);\n                    const overflowX = elementStyle.getPropertyValue('overflow-x');\n                    const overflowY = elementStyle.getPropertyValue('overflow-y');\n\n                    switch (dir) {\n                        case 'left':\n                        /* falls through */\n                        case 'right':\n                            return overflowX !== 'visible' && overflowX !== 'clip' && overflowX !== 'hidden';\n                        case 'up':\n                        /* falls through */\n                        case 'down':\n                            return overflowY !== 'visible' && overflowY !== 'clip' && overflowY !== 'hidden';\n                    }\n                }\n                return false;\n            } else {\n                // parameter: element\n                return (\n                    element.nodeName === 'HTML' ||\n                    element.nodeName === 'BODY' ||\n                    (isScrollContainer(element) && isOverflow(element))\n                );\n            }\n        }\n    }\n\n    /**\n     * Decide whether an element is overflow or not.\n     * @function isOverflow\n     * @param element {Node}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isOverflow(element, dir) {\n        if (element && typeof element === 'object') {\n            if (dir && typeof dir === 'string') {\n                // parameter: element, dir\n                switch (dir) {\n                    case 'left':\n                    /* falls through */\n                    case 'right':\n                        return element.scrollWidth > element.clientWidth;\n                    case 'up':\n                    /* falls through */\n                    case 'down':\n                        return element.scrollHeight > element.clientHeight;\n                }\n            } else {\n                // parameter: element\n                return element.scrollWidth > element.clientWidth || element.scrollHeight > element.clientHeight;\n            }\n            return false;\n        }\n    }\n\n    /**\n     * Decide whether the scrollbar of the browsing context reaches to the end or not.\n     * @function isHTMLScrollBoundary\n     * @param element {Node} - The top browsing context\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isHTMLScrollBoundary(element, dir) {\n        let result = false;\n        switch (dir) {\n            case 'left':\n                result = element.scrollLeft === 0;\n                break;\n            case 'right':\n                result = element.scrollWidth - element.scrollLeft - element.clientWidth === 0;\n                break;\n            case 'up':\n                result = element.scrollTop === 0;\n                break;\n            case 'down':\n                result = element.scrollHeight - element.scrollTop - element.clientHeight === 0;\n                break;\n        }\n        return result;\n    }\n\n    /**\n     * Decide whether the scrollbar of an element reaches to the end or not.\n     * @function isScrollBoundary\n     * @param element {Node}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isScrollBoundary(element, dir) {\n        if (isScrollable(element, dir)) {\n            const winScrollY = element.scrollTop;\n            const winScrollX = element.scrollLeft;\n\n            const height = element.scrollHeight - element.clientHeight;\n            const width = element.scrollWidth - element.clientWidth;\n\n            switch (dir) {\n                case 'left':\n                    return winScrollX === 0;\n                case 'right':\n                    return Math.abs(winScrollX - width) <= 1;\n                case 'up':\n                    return winScrollY === 0;\n                case 'down':\n                    return Math.abs(winScrollY - height) <= 1;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Decide whether an element is inside the scorller viewport or not\n     *\n     * @function isVisibleInScroller\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isVisibleInScroller(element) {\n        const elementRect = element.getBoundingClientRect();\n        let nearestScroller = getScrollContainer(element);\n\n        let scrollerRect = null;\n        if (nearestScroller !== window) {\n            scrollerRect = getBoundingClientRect(nearestScroller);\n        } else {\n            scrollerRect = new DOMRect(0, 0, window.innerWidth, window.innerHeight);\n        }\n\n        if (isInside(scrollerRect, elementRect, 'left') && isInside(scrollerRect, elementRect, 'down')) return true;\n        else return false;\n    }\n\n    /**\n     * Decide whether an element is focusable for spatial navigation.\n     * 1. If element is the browsing context (document, iframe), then it's focusable,\n     * 2. If the element is scrollable container (regardless of scrollable axis), then it's focusable,\n     * 3. The value of tabIndex >= 0, then it's focusable,\n     * 4. If the element is disabled, it isn't focusable,\n     * 5. If the element is expressly inert, it isn't focusable,\n     * 6. Whether the element is being rendered or not.\n     *\n     * @function isFocusable\n     * @param element {Node}\n     * @returns {boolean}\n     *\n     * @see {@link https://html.spec.whatwg.org/multipage/interaction.html#focusable-area}\n     */\n    function isFocusable(element) {\n        if (\n            element.tabIndex < 0 ||\n            isAtagWithoutHref(element) ||\n            isActuallyDisabled(element) ||\n            isExpresslyInert(element) ||\n            !isBeingRendered(element)\n        )\n            return false;\n        else if (!element.parentElement || (isScrollable(element) && isOverflow(element)) || element.tabIndex >= 0)\n            return true;\n    }\n\n    /**\n     * Decide whether an element is a tag without href attribute or not.\n     *\n     * @function isAtagWithoutHref\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isAtagWithoutHref(element) {\n        return (\n            element.tagName === 'A' &&\n            element.getAttribute('href') === null &&\n            element.getAttribute('tabIndex') === null\n        );\n    }\n\n    /**\n     * Decide whether an element is actually disabled or not.\n     *\n     * @function isActuallyDisabled\n     * @param element {Node}\n     * @returns {boolean}\n     *\n     * @see {@link https://html.spec.whatwg.org/multipage/semantics-other.html#concept-element-disabled}\n     */\n    function isActuallyDisabled(element) {\n        if (['BUTTON', 'INPUT', 'SELECT', 'TEXTAREA', 'OPTGROUP', 'OPTION', 'FIELDSET'].includes(element.tagName))\n            return element.disabled;\n        else return false;\n    }\n\n    /**\n     * Decide whether the element is expressly inert or not.\n     * @see {@link https://html.spec.whatwg.org/multipage/interaction.html#expressly-inert}\n     * @function isExpresslyInert\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isExpresslyInert(element) {\n        return element.inert && !element.ownerDocument.documentElement.inert;\n    }\n\n    /**\n     * Decide whether the element is being rendered or not.\n     * 1. If an element has the style as \"visibility: hidden | collapse\" or \"display: none\", it is not being rendered.\n     * 2. If an element has the style as \"opacity: 0\", it is not being rendered.(that is, invisible).\n     * 3. If width and height of an element are explicitly set to 0, it is not being rendered.\n     * 4. If a parent element is hidden, an element itself is not being rendered.\n     * (CSS visibility property and display property are inherited.)\n     * @see {@link https://html.spec.whatwg.org/multipage/rendering.html#being-rendered}\n     * @function isBeingRendered\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isBeingRendered(element) {\n        if (!isVisibleStyleProperty(element.parentElement)) return false;\n        if (\n            !isVisibleStyleProperty(element) ||\n            element.style.opacity === '0' ||\n            window.getComputedStyle(element).height === '0px' ||\n            window.getComputedStyle(element).width === '0px'\n        )\n            return false;\n        return true;\n    }\n\n    /**\n     * Decide whether this element is partially or completely visible to user agent.\n     * @function isVisible\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isVisible(element) {\n        return !element.parentElement || (isVisibleStyleProperty(element) && hitTest(element));\n    }\n\n    /**\n     * Decide whether this element is completely visible in this viewport for the arrow direction.\n     * @function isEntirelyVisible\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isEntirelyVisible(element, container) {\n        const rect = getBoundingClientRect(element);\n        const containerElm = container || element.getSpatialNavigationContainer();\n        const containerRect = getBoundingClientRect(containerElm);\n\n        // FIXME: when element is bigger than container?\n        const entirelyVisible = !(\n            rect.left < containerRect.left ||\n            rect.right > containerRect.right ||\n            rect.top < containerRect.top ||\n            rect.bottom > containerRect.bottom\n        );\n\n        return entirelyVisible;\n    }\n\n    /**\n     * Decide the style property of this element is specified whether it's visible or not.\n     * @function isVisibleStyleProperty\n     * @param element {CSSStyleDeclaration}\n     * @returns {boolean}\n     */\n    function isVisibleStyleProperty(element) {\n        const elementStyle = window.getComputedStyle(element, null);\n        const thisVisibility = elementStyle.getPropertyValue('visibility');\n        const thisDisplay = elementStyle.getPropertyValue('display');\n        const invisibleStyle = ['hidden', 'collapse'];\n\n        return thisDisplay !== 'none' && !invisibleStyle.includes(thisVisibility);\n    }\n\n    /**\n     * Decide whether this element is entirely or partially visible within the viewport.\n     * @function hitTest\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function hitTest(element) {\n        const elementRect = getBoundingClientRect(element);\n        if (\n            element.nodeName !== 'IFRAME' &&\n            (elementRect.top < 0 ||\n                elementRect.left < 0 ||\n                elementRect.top > element.ownerDocument.documentElement.clientHeight ||\n                elementRect.left > element.ownerDocument.documentElement.clientWidth)\n        )\n            return false;\n\n        let offsetX = parseInt(element.offsetWidth) / 10;\n        let offsetY = parseInt(element.offsetHeight) / 10;\n\n        offsetX = isNaN(offsetX) ? 1 : offsetX;\n        offsetY = isNaN(offsetY) ? 1 : offsetY;\n\n        const hitTestPoint = {\n            // For performance, just using the three point(middle, leftTop, rightBottom) of the element for hit testing\n            middle: [(elementRect.left + elementRect.right) / 2, (elementRect.top + elementRect.bottom) / 2],\n            leftTop: [elementRect.left + offsetX, elementRect.top + offsetY],\n            rightBottom: [elementRect.right - offsetX, elementRect.bottom - offsetY],\n        };\n\n        for (const point in hitTestPoint) {\n            const elemFromPoint = element.ownerDocument.elementFromPoint(...hitTestPoint[point]);\n            if (element === elemFromPoint || element.contains(elemFromPoint)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Decide whether a child element is entirely or partially Included within container visually.\n     * @function isInside\n     * @param containerRect {DOMRect}\n     * @param childRect {DOMRect}\n     * @returns {boolean}\n     */\n    function isInside(containerRect, childRect) {\n        const rightEdgeCheck = containerRect.left < childRect.right && containerRect.right >= childRect.right;\n        const leftEdgeCheck = containerRect.left <= childRect.left && containerRect.right > childRect.left;\n        const topEdgeCheck = containerRect.top <= childRect.top && containerRect.bottom > childRect.top;\n        const bottomEdgeCheck = containerRect.top < childRect.bottom && containerRect.bottom >= childRect.bottom;\n        return (rightEdgeCheck || leftEdgeCheck) && (topEdgeCheck || bottomEdgeCheck);\n    }\n\n    /**\n     * Decide whether this element is entirely or partially visible within the viewport.\n     * Note: rect1 is outside of rect2 for the dir\n     * @function isOutside\n     * @param rect1 {DOMRect}\n     * @param rect2 {DOMRect}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isOutside(rect1, rect2, dir) {\n        switch (dir) {\n            case 'left':\n                return isRightSide(rect2, rect1);\n            case 'right':\n                return isRightSide(rect1, rect2);\n            case 'up':\n                return isBelow(rect2, rect1);\n            case 'down':\n                return isBelow(rect1, rect2);\n            default:\n                return false;\n        }\n    }\n\n    /* rect1 is right of rect2 */\n    function isRightSide(rect1, rect2) {\n        return (\n            rect1.left >= rect2.right ||\n            (rect1.left >= rect2.left &&\n                rect1.right > rect2.right &&\n                rect1.bottom > rect2.top &&\n                rect1.top < rect2.bottom)\n        );\n    }\n\n    /* rect1 is below of rect2 */\n    function isBelow(rect1, rect2) {\n        return (\n            rect1.top >= rect2.bottom ||\n            (rect1.top >= rect2.top &&\n                rect1.bottom > rect2.bottom &&\n                rect1.left < rect2.right &&\n                rect1.right > rect2.left)\n        );\n    }\n\n    /* rect1 is completely aligned or partially aligned for the direction */\n    function isAligned(rect1, rect2, dir) {\n        switch (dir) {\n            case 'left':\n            /* falls through */\n            case 'right':\n                return rect1.bottom > rect2.top && rect1.top < rect2.bottom;\n            case 'up':\n            /* falls through */\n            case 'down':\n                return rect1.right > rect2.left && rect1.left < rect2.right;\n            default:\n                return false;\n        }\n    }\n\n    /**\n     * Get distance between the search origin and a candidate element along the direction when candidate element is inside the search origin.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#find-the-shortest-distance}\n     * @function getDistanceFromPoint\n     * @param point {Point} - The search origin\n     * @param element {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The euclidian distance between the spatial navigation container and an element inside it\n     */\n    function getDistanceFromPoint(point, element, dir) {\n        point = startingPoint;\n        // Get exit point, entry point -> {x: '', y: ''};\n        const points = getEntryAndExitPoints(dir, point, element);\n\n        // Find the points P1 inside the border box of starting point and P2 inside the border box of candidate\n        // that minimize the distance between these two points\n        const P1 = Math.abs(points.entryPoint.x - points.exitPoint.x);\n        const P2 = Math.abs(points.entryPoint.y - points.exitPoint.y);\n\n        // The result is euclidian distance between P1 and P2.\n        return Math.sqrt(Math.pow(P1, 2) + Math.pow(P2, 2));\n    }\n\n    /**\n     * Get distance between the search origin and a candidate element along the direction when candidate element is inside the search origin.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#find-the-shortest-distance}\n     * @function getInnerDistance\n     * @param rect1 {DOMRect} - The search origin\n     * @param rect2 {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The euclidean distance between the spatial navigation container and an element inside it\n     */\n    function getInnerDistance(rect1, rect2, dir) {\n        const baseEdgeForEachDirection = {\n            left: 'right',\n            right: 'left',\n            up: 'bottom',\n            down: 'top',\n        };\n        const baseEdge = baseEdgeForEachDirection[dir];\n\n        return Math.abs(rect1[baseEdge] - rect2[baseEdge]);\n    }\n\n    /**\n     * Get the distance between the search origin and a candidate element considering the direction.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#calculating-the-distance}\n     * @function getDistance\n     * @param searchOrigin {DOMRect | Point} - The search origin\n     * @param candidateRect {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The distance scoring between two elements\n     */\n    function getDistance(searchOrigin, candidateRect, dir) {\n        const kOrthogonalWeightForLeftRight = 30;\n        const kOrthogonalWeightForUpDown = 2;\n\n        let orthogonalBias = 0;\n        let alignBias = 0;\n        const alignWeight = 5.0;\n\n        // Get exit point, entry point -> {x: '', y: ''};\n        const points = getEntryAndExitPoints(dir, searchOrigin, candidateRect);\n\n        // Find the points P1 inside the border box of starting point and P2 inside the border box of candidate\n        // that minimize the distance between these two points\n        const P1 = Math.abs(points.entryPoint.x - points.exitPoint.x);\n        const P2 = Math.abs(points.entryPoint.y - points.exitPoint.y);\n\n        // A: The euclidean distance between P1 and P2.\n        const A = Math.sqrt(Math.pow(P1, 2) + Math.pow(P2, 2));\n        let B, C;\n\n        // B: The absolute distance in the direction which is orthogonal to dir between P1 and P2, or 0 if dir is null.\n        // C: The intersection edges between a candidate and the starting point.\n\n        // D: The square root of the area of intersection between the border boxes of candidate and starting point\n        const intersectionRect = getIntersectionRect(searchOrigin, candidateRect);\n        const D = intersectionRect.area;\n\n        switch (dir) {\n            case 'left':\n            /* falls through */\n            case 'right':\n                // If two elements are aligned, add align bias\n                // else, add orthogonal bias\n                if (isAligned(searchOrigin, candidateRect, dir))\n                    alignBias = Math.min(intersectionRect.height / searchOrigin.height, 1);\n                else orthogonalBias = searchOrigin.height / 2;\n\n                B = (P2 + orthogonalBias) * kOrthogonalWeightForLeftRight;\n                C = alignWeight * alignBias;\n                break;\n\n            case 'up':\n            /* falls through */\n            case 'down':\n                // If two elements are aligned, add align bias\n                // else, add orthogonal bias\n                if (isAligned(searchOrigin, candidateRect, dir))\n                    alignBias = Math.min(intersectionRect.width / searchOrigin.width, 1);\n                else orthogonalBias = searchOrigin.width / 2;\n\n                B = (P1 + orthogonalBias) * kOrthogonalWeightForUpDown;\n                C = alignWeight * alignBias;\n                break;\n\n            default:\n                B = 0;\n                C = 0;\n                break;\n        }\n\n        return A + B - C - D;\n    }\n\n    /**\n     * Get the euclidean distance between the search origin and a candidate element considering the direction.\n     * @function getEuclideanDistance\n     * @param rect1 {DOMRect} - The search origin\n     * @param rect2 {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The distance scoring between two elements\n     */\n    function getEuclideanDistance(rect1, rect2, dir) {\n        // Get exit point, entry point\n        const points = getEntryAndExitPoints(dir, rect1, rect2);\n\n        // Find the points P1 inside the border box of starting point and P2 inside the border box of candidate\n        // that minimize the distance between these two points\n        const P1 = Math.abs(points.entryPoint.x - points.exitPoint.x);\n        const P2 = Math.abs(points.entryPoint.y - points.exitPoint.y);\n\n        // Return the euclidean distance between P1 and P2.\n        return Math.sqrt(Math.pow(P1, 2) + Math.pow(P2, 2));\n    }\n\n    /**\n     * Get the absolute distance between the search origin and a candidate element considering the direction.\n     * @function getAbsoluteDistance\n     * @param rect1 {DOMRect} - The search origin\n     * @param rect2 {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The distance scoring between two elements\n     */\n    function getAbsoluteDistance(rect1, rect2, dir) {\n        // Get exit point, entry point\n        const points = getEntryAndExitPoints(dir, rect1, rect2);\n\n        // Return the absolute distance in the dir direction between P1 and P.\n        return dir === 'left' || dir === 'right'\n            ? Math.abs(points.entryPoint.x - points.exitPoint.x)\n            : Math.abs(points.entryPoint.y - points.exitPoint.y);\n    }\n\n    /**\n     * Get entry point and exit point of two elements considering the direction.\n     * @function getEntryAndExitPoints\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD). Default value for dir is 'down'.\n     * @param searchOrigin {DOMRect | Point} - The search origin which contains the exit point\n     * @param candidateRect {DOMRect} - One of candidates which contains the entry point\n     * @returns {Points} The exit point from the search origin and the entry point from a candidate\n     */\n    function getEntryAndExitPoints(dir = 'down', searchOrigin, candidateRect) {\n        /**\n         * User type definition for Point\n         * @typeof {Object} Points\n         * @property {Point} Points.entryPoint\n         * @property {Point} Points.exitPoint\n         */\n        const points = { entryPoint: { x: 0, y: 0 }, exitPoint: { x: 0, y: 0 } };\n\n        if (startingPoint) {\n            points.exitPoint = searchOrigin;\n\n            switch (dir) {\n                case 'left':\n                    points.entryPoint.x = candidateRect.right;\n                    break;\n                case 'up':\n                    points.entryPoint.y = candidateRect.bottom;\n                    break;\n                case 'right':\n                    points.entryPoint.x = candidateRect.left;\n                    break;\n                case 'down':\n                    points.entryPoint.y = candidateRect.top;\n                    break;\n            }\n\n            // Set orthogonal direction\n            switch (dir) {\n                case 'left':\n                case 'right':\n                    if (startingPoint.y <= candidateRect.top) {\n                        points.entryPoint.y = candidateRect.top;\n                    } else if (startingPoint.y < candidateRect.bottom) {\n                        points.entryPoint.y = startingPoint.y;\n                    } else {\n                        points.entryPoint.y = candidateRect.bottom;\n                    }\n                    break;\n\n                case 'up':\n                case 'down':\n                    if (startingPoint.x <= candidateRect.left) {\n                        points.entryPoint.x = candidateRect.left;\n                    } else if (startingPoint.x < candidateRect.right) {\n                        points.entryPoint.x = startingPoint.x;\n                    } else {\n                        points.entryPoint.x = candidateRect.right;\n                    }\n                    break;\n            }\n        } else {\n            // Set direction\n            switch (dir) {\n                case 'left':\n                    points.exitPoint.x = searchOrigin.left;\n                    points.entryPoint.x =\n                        candidateRect.right < searchOrigin.left ? candidateRect.right : searchOrigin.left;\n                    break;\n                case 'up':\n                    points.exitPoint.y = searchOrigin.top;\n                    points.entryPoint.y =\n                        candidateRect.bottom < searchOrigin.top ? candidateRect.bottom : searchOrigin.top;\n                    break;\n                case 'right':\n                    points.exitPoint.x = searchOrigin.right;\n                    points.entryPoint.x =\n                        candidateRect.left > searchOrigin.right ? candidateRect.left : searchOrigin.right;\n                    break;\n                case 'down':\n                    points.exitPoint.y = searchOrigin.bottom;\n                    points.entryPoint.y =\n                        candidateRect.top > searchOrigin.bottom ? candidateRect.top : searchOrigin.bottom;\n                    break;\n            }\n\n            // Set orthogonal direction\n            switch (dir) {\n                case 'left':\n                case 'right':\n                    if (isBelow(searchOrigin, candidateRect)) {\n                        points.exitPoint.y = searchOrigin.top;\n                        points.entryPoint.y =\n                            candidateRect.bottom < searchOrigin.top ? candidateRect.bottom : searchOrigin.top;\n                    } else if (isBelow(candidateRect, searchOrigin)) {\n                        points.exitPoint.y = searchOrigin.bottom;\n                        points.entryPoint.y =\n                            candidateRect.top > searchOrigin.bottom ? candidateRect.top : searchOrigin.bottom;\n                    } else {\n                        points.exitPoint.y = Math.max(searchOrigin.top, candidateRect.top);\n                        points.entryPoint.y = points.exitPoint.y;\n                    }\n                    break;\n\n                case 'up':\n                case 'down':\n                    if (isRightSide(searchOrigin, candidateRect)) {\n                        points.exitPoint.x = searchOrigin.left;\n                        points.entryPoint.x =\n                            candidateRect.right < searchOrigin.left ? candidateRect.right : searchOrigin.left;\n                    } else if (isRightSide(candidateRect, searchOrigin)) {\n                        points.exitPoint.x = searchOrigin.right;\n                        points.entryPoint.x =\n                            candidateRect.left > searchOrigin.right ? candidateRect.left : searchOrigin.right;\n                    } else {\n                        points.exitPoint.x = Math.max(searchOrigin.left, candidateRect.left);\n                        points.entryPoint.x = points.exitPoint.x;\n                    }\n                    break;\n            }\n        }\n\n        return points;\n    }\n\n    /**\n     * Find focusable elements within the container\n     * @see {@link https://drafts.csswg.org/css-nav-1/#find-the-shortest-distance}\n     * @function getIntersectionRect\n     * @param rect1 {DOMRect} - The search origin which contains the exit point\n     * @param rect2 {DOMRect} - One of candidates which contains the entry point\n     * @returns {IntersectionArea} The intersection area between two elements.\n     *\n     * @typeof {Object} IntersectionArea\n     * @property {Number} IntersectionArea.width\n     * @property {Number} IntersectionArea.height\n     */\n    function getIntersectionRect(rect1, rect2) {\n        const intersection_rect = { width: 0, height: 0, area: 0 };\n\n        const new_location = [Math.max(rect1.left, rect2.left), Math.max(rect1.top, rect2.top)];\n        const new_max_point = [Math.min(rect1.right, rect2.right), Math.min(rect1.bottom, rect2.bottom)];\n\n        intersection_rect.width = Math.abs(new_location[0] - new_max_point[0]);\n        intersection_rect.height = Math.abs(new_location[1] - new_max_point[1]);\n\n        if (!(new_location[0] >= new_max_point[0] || new_location[1] >= new_max_point[1])) {\n            // intersecting-cases\n            intersection_rect.area = Math.sqrt(intersection_rect.width * intersection_rect.height);\n        }\n\n        return intersection_rect;\n    }\n\n    /**\n     * Handle the spatial navigation behavior for HTMLInputElement, HTMLTextAreaElement\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input|HTMLInputElement (MDN)}\n     * @function handlingEditableElement\n     * @param e {Event} - keydownEvent\n     * @returns {boolean}\n     */\n    function handlingEditableElement(e) {\n        const SPINNABLE_INPUT_TYPES = ['email', 'date', 'month', 'number', 'time', 'week'],\n            TEXT_INPUT_TYPES = ['password', 'text', 'search', 'tel', 'url', null];\n        const eventTarget = document.activeElement;\n        const startPosition = eventTarget.selectionStart;\n        const endPosition = eventTarget.selectionEnd;\n        const focusNavigableArrowKey = {\n            left: false,\n            up: false,\n            right: false,\n            down: false,\n        };\n\n        const dir = ARROW_KEY_CODE[e.keyCode];\n        if (dir === undefined) {\n            return focusNavigableArrowKey;\n        }\n\n        if (SPINNABLE_INPUT_TYPES.includes(eventTarget.getAttribute('type')) && (dir === 'up' || dir === 'down')) {\n            focusNavigableArrowKey[dir] = true;\n        } else if (TEXT_INPUT_TYPES.includes(eventTarget.getAttribute('type')) || eventTarget.nodeName === 'TEXTAREA') {\n            if (startPosition === endPosition) {\n                // if there isn't any selected text\n                if (startPosition === 0) {\n                    focusNavigableArrowKey.left = true;\n                    focusNavigableArrowKey.up = true;\n                }\n                if (endPosition === eventTarget.value.length) {\n                    focusNavigableArrowKey.right = true;\n                    focusNavigableArrowKey.down = true;\n                }\n            }\n        } else {\n            // HTMLDataListElement, HTMLSelectElement, HTMLOptGroup\n            focusNavigableArrowKey[dir] = true;\n        }\n\n        return focusNavigableArrowKey;\n    }\n\n    /**\n     * Get the DOMRect of an element\n     * @function getBoundingClientRect\n     * @param {Node} element\n     * @returns {DOMRect}\n     */\n    function getBoundingClientRect(element) {\n        // memoization\n        let rect = mapOfBoundRect && mapOfBoundRect.get(element);\n        if (!rect) {\n            const boundingClientRect = element.getBoundingClientRect();\n            rect = {\n                top: Number(boundingClientRect.top.toFixed(2)),\n                right: Number(boundingClientRect.right.toFixed(2)),\n                bottom: Number(boundingClientRect.bottom.toFixed(2)),\n                left: Number(boundingClientRect.left.toFixed(2)),\n                width: Number(boundingClientRect.width.toFixed(2)),\n                height: Number(boundingClientRect.height.toFixed(2)),\n            };\n            mapOfBoundRect && mapOfBoundRect.set(element, rect);\n        }\n        return rect;\n    }\n\n    /**\n     * Get the candidates which is fully inside the target element in visual\n     * @param {Node} targetElement\n     * @returns {sequence<Node>}  overlappedCandidates\n     */\n    function getOverlappedCandidates(targetElement) {\n        const container = targetElement.getSpatialNavigationContainer();\n        const candidates = container.focusableAreas();\n        const overlappedCandidates = [];\n\n        candidates.forEach((element) => {\n            if (targetElement !== element && isEntirelyVisible(element, targetElement)) {\n                overlappedCandidates.push(element);\n            }\n        });\n\n        return overlappedCandidates;\n    }\n\n    /**\n     * Get the list of the experimental APIs\n     * @function getExperimentalAPI\n     */\n    function getExperimentalAPI() {\n        function canScroll(container, dir) {\n            return (\n                (isScrollable(container, dir) && !isScrollBoundary(container, dir)) ||\n                (!container.parentElement && !isHTMLScrollBoundary(container, dir))\n            );\n        }\n\n        function findTarget(findCandidate, element, dir, option) {\n            let eventTarget = element;\n            let bestNextTarget = null;\n\n            // 4\n            if (eventTarget === document || eventTarget === document.documentElement) {\n                eventTarget = document.body || document.documentElement;\n            }\n\n            // 5\n            // At this point, spatialNavigationSearch can be applied.\n            // If startingPoint is either a scroll container or the document,\n            // find the best candidate within startingPoint\n            if ((isContainer(eventTarget) || eventTarget.nodeName === 'BODY') && !(eventTarget.nodeName === 'INPUT')) {\n                if (eventTarget.nodeName === 'IFRAME') eventTarget = eventTarget.contentDocument.body;\n\n                const candidates = getSpatialNavigationCandidates(eventTarget, option);\n\n                // 5-2\n                if (Array.isArray(candidates) && candidates.length > 0) {\n                    return findCandidate\n                        ? getFilteredSpatialNavigationCandidates(eventTarget, dir, candidates)\n                        : eventTarget.spatialNavigationSearch(dir, { candidates });\n                }\n                if (canScroll(eventTarget, dir)) {\n                    return findCandidate ? [] : eventTarget;\n                }\n            }\n\n            // 6\n            // Let container be the nearest ancestor of eventTarget\n            let container = eventTarget.getSpatialNavigationContainer();\n            let parentContainer = container.parentElement ? container.getSpatialNavigationContainer() : null;\n\n            // When the container is the viewport of a browsing context\n            if (!parentContainer && window.location !== window.parent.location) {\n                parentContainer = window.parent.document.documentElement;\n            }\n\n            // 7\n            while (parentContainer) {\n                const candidates = filteredCandidates(\n                    eventTarget,\n                    getSpatialNavigationCandidates(container, option),\n                    dir,\n                    container,\n                );\n\n                if (Array.isArray(candidates) && candidates.length > 0) {\n                    bestNextTarget = eventTarget.spatialNavigationSearch(dir, {\n                        candidates,\n                        container,\n                    });\n                    if (bestNextTarget) {\n                        return findCandidate ? candidates : bestNextTarget;\n                    }\n                }\n\n                    // If there isn't any candidate and the best candidate among candidate:\n                    // 1) Scroll or 2) Find candidates of the ancestor container\n                // 8 - if\n                else if (canScroll(container, dir)) {\n                    return findCandidate ? [] : eventTarget;\n                } else if (container === document || container === document.documentElement) {\n                    container = window.document.documentElement;\n\n                    // The page is in an iframe\n                    if (window.location !== window.parent.location) {\n                        // eventTarget needs to be reset because the position of the element in the IFRAME\n                        // is unuseful when the focus moves out of the iframe\n                        eventTarget = window.frameElement;\n                        container = window.parent.document.documentElement;\n                        if (container.parentElement) parentContainer = container.getSpatialNavigationContainer();\n                        else {\n                            parentContainer = null;\n                            break;\n                        }\n                    }\n                } else {\n                    // avoiding when spatnav container with tabindex=-1\n                    if (isFocusable(container)) {\n                        eventTarget = container;\n                    }\n\n                    container = parentContainer;\n                    if (container.parentElement) parentContainer = container.getSpatialNavigationContainer();\n                    else {\n                        parentContainer = null;\n                        break;\n                    }\n                }\n            }\n\n            if (!parentContainer && container) {\n                // Getting out from the current spatnav container\n                const candidates = filteredCandidates(\n                    eventTarget,\n                    getSpatialNavigationCandidates(container, option),\n                    dir,\n                    container,\n                );\n\n                // 9\n                if (Array.isArray(candidates) && candidates.length > 0) {\n                    bestNextTarget = eventTarget.spatialNavigationSearch(dir, {\n                        candidates,\n                        container,\n                    });\n                    if (bestNextTarget) {\n                        return findCandidate ? candidates : bestNextTarget;\n                    }\n                }\n            }\n\n            if (canScroll(container, dir)) {\n                bestNextTarget = eventTarget;\n                return bestNextTarget;\n            }\n        }\n\n        return {\n            isContainer,\n            isScrollContainer,\n            isVisibleInScroller,\n            findCandidates: findTarget.bind(null, true),\n            findNextTarget: findTarget.bind(null, false),\n            getDistanceFromTarget: (element, candidateElement, dir) => {\n                if ((isContainer(element) || element.nodeName === 'BODY') && !(element.nodeName === 'INPUT')) {\n                    if (getSpatialNavigationCandidates(element).includes(candidateElement)) {\n                        return getInnerDistance(\n                            getBoundingClientRect(element),\n                            getBoundingClientRect(candidateElement),\n                            dir,\n                        );\n                    }\n                }\n                return getDistance(getBoundingClientRect(element), getBoundingClientRect(candidateElement), dir);\n            },\n        };\n    }\n\n    /**\n     * Makes to use the experimental APIs.\n     * @function enableExperimentalAPIs\n     * @param option {boolean} - If it is true, the experimental APIs can be used or it cannot.\n     */\n    function enableExperimentalAPIs(option) {\n        const currentKeyMode = window.__spatialNavigation__ && window.__spatialNavigation__.keyMode;\n        window.__spatialNavigation__ =\n            option === false ? getInitialAPIs() : Object.assign(getInitialAPIs(), getExperimentalAPI());\n        window.__spatialNavigation__.keyMode = currentKeyMode;\n        Object.seal(window.__spatialNavigation__);\n    }\n\n    /**\n     * Set the environment for using the spatial navigation polyfill.\n     * @function getInitialAPIs\n     */\n    function getInitialAPIs() {\n        return {\n            enableExperimentalAPIs,\n            get keyMode() {\n                return this._keymode ? this._keymode : 'ARROW';\n            },\n            set keyMode(mode) {\n                this._keymode = ['SHIFTARROW', 'ARROW', 'NONE'].includes(mode) ? mode : 'ARROW';\n            },\n            setStartingPoint: function (x, y) {\n                startingPoint = x && y ? { x, y } : null;\n            },\n        };\n    }\n\n    initiateSpatialNavigation();\n    enableExperimentalAPIs(true);\n    spatialNavigationHandler();\n\n    let currentSpatialNavigationContainer = null;\n\n    document.addEventListener('navbeforefocus', (e) => {\n        if (e.target instanceof HTMLElement) {\n            e.preventDefault();\n\n            let { target } = e;\n\n            // focus on the first element when changing spatnav container\n            // const nextSpatialNavigationContainer = target.getSpatialNavigationContainer();\n            //\n            // if (currentSpatialNavigationContainer && currentSpatialNavigationContainer !== nextSpatialNavigationContainer) {\n            //     if (nextSpatialNavigationContainer.__lastElementFocused) {\n            //         target = nextSpatialNavigationContainer.__lastElementFocused;\n            //     } else {\n            //         [target] = nextSpatialNavigationContainer.focusableAreas({ mode: 'all' });\n            //     }\n            //     // target.focus();\n            // }\n            //\n            // currentSpatialNavigationContainer = nextSpatialNavigationContainer;\n            // currentSpatialNavigationContainer.__lastElementFocused = target;\n\n            requestAnimationFrame(async () => {\n                target.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'nearest' });\n                // if (isElementInViewport(target)) {\n                //     target.focus();\n                // }\n\n                await new Promise((resolve) => {\n                    const intersectionObserver = new IntersectionObserver(\n                        ([entry]) => {\n                            if (entry.isIntersecting) {\n                                resolve();\n                            }\n                        },\n                        {\n                            threshold: 1,\n                        },\n                    );\n                    intersectionObserver.observe(target);\n                });\n\n                target.focus();\n            });\n        }\n    });\n\n    document.addEventListener('keyup', (event) => {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n            if (document.activeElement && !(document.activeElement instanceof HTMLButtonElement)) {\n                document.activeElement.click();\n            }\n        }\n    });\n\n// console.log('1');\n\n// let isIntersecting = false;\n// const intersectionObserver = new IntersectionObserver(([entry]) => {\n// console.log('2');\n//   isIntersecting = entry.isIntersecting;\n// }, {\n//   threshold: 1\n// });\n// intersectionObserver.observe($0)\n// console.log('3');\n\n// start observing\n// intersectionObserver.observe());\n\n    function isElementInViewport(el) {\n        const rect = el.getBoundingClientRect();\n        return (\n            rect.top >= 0 &&\n            rect.left >= 0 &&\n            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n            rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n        );\n    }\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport { Switch, Route } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { store, history } from 'store';\nimport { ROUTES } from 'store/constants/router';\nimport { AppLayout } from 'components/AppLayout/AppLayout';\nimport { Catalog } from 'pages/Catalog/Catalog';\nimport { Cart } from 'pages/Cart/Cart';\nimport { Status } from 'pages/Status/Status';\nimport { Promo } from 'pages/Promo/Promo';\nimport { NoArea } from 'pages/NoArea/NoArea';\nimport { AddressSimple } from 'pages/AddressSimple/AddressSimple';\nimport { AddressFullAll } from 'pages/AddressFullAll/AddressFullAll';\nimport { AddressFullApartment } from 'pages/AddressFullApartment/AddressFullApartment';\nimport { AddressFullDoorCode } from 'pages/AddressFullDoorCode/AddressFullDoorCode';\nimport { AddressFullEntrance } from 'pages/AddressFullEntrance/AddressFullEntrance';\nimport { AddressFullFloor } from 'pages/AddressFullFloor/AddressFullFloor';\nimport { AddressFullPhone } from 'pages/AddressFullPhone/AddressFullPhone';\nimport { Error } from 'pages/Error/Error';\nimport { Wait } from 'pages/Wait/Wait';\nimport { isSberBox } from 'tools/browser';\nimport { spatialNavigationInit } from 'tools/new-spatial-navigation';\n\nimport 'style/global.scss';\n\nif (isSberBox) {\n    spatialNavigationInit();\n}\n\nconst StyledContainer = styled.div`\n    overflow: hidden;\n    width: 100%;\n    height: 100vh;\n    outline: none;\n    font-family: 'SB Sans Text', Helvetica, Arial, sans-serif;\n    background: #000;\n`;\n\nconst preventScroll = (event: React.SyntheticEvent<HTMLDivElement>) => {\n    event.currentTarget.scrollTop = 0;\n};\n\nexport const RootSberBox: React.FC = () => (\n    <ReduxProvider store={store}>\n        <ConnectedRouter history={history}>\n            <StyledContainer onScroll={preventScroll}>\n                <AppLayout>\n                    <Switch>\n                        <Route path={ROUTES.CATALOG}>\n                            <Catalog />\n                        </Route>\n                        <Route path={ROUTES.CART}>\n                            <Cart />\n                        </Route>\n                        <Route path={ROUTES.STATUS}>\n                            <Status />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_SIMPLE}>\n                            <AddressSimple />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_ALL}>\n                            <AddressFullAll />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_PHONE}>\n                            <AddressFullPhone />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_APARTMENT}>\n                            <AddressFullApartment />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_ENTRANCE}>\n                            <AddressFullEntrance />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_FLOOR}>\n                            <AddressFullFloor />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_DOORCODE}>\n                            <AddressFullDoorCode />\n                        </Route>\n                        <Route path={ROUTES.PROMO}>\n                            <Promo />\n                        </Route>\n                        <Route path={ROUTES.NO_AREA}>\n                            <NoArea />\n                        </Route>\n                        <Route path={ROUTES.ERROR}>\n                            <Error />\n                        </Route>\n                        <Route path={ROUTES.WAIT}>\n                            <Wait />\n                        </Route>\n                    </Switch>\n                </AppLayout>\n            </StyledContainer>\n        </ConnectedRouter>\n    </ReduxProvider>\n);\n","/**\n * TODO: Унести в plasma-styles\n * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-138\n */\n\nconst headerHeightPx = 65;\n\nexport const layout = {\n    headerHeightPx,\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const BodyText1 = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 16px;\n    line-height: 20px;\n    letter-spacing: -0.019em;\n`;\n\nexport const BodyText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 16px;\n    line-height: 20px;\n    letter-spacing: -0.019em;\n`;\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const ButtonText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 14px;\n    line-height: 16px;\n`;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { transition } from 'style/const/transition';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport { ButtonText2 } from 'components/Text/Button@touch';\nimport { color } from 'style/const/color';\nimport { icon } from 'style/const/icon';\n\nconst containerBorderRadiusPx = 24;\n\ninterface StyledHeaderButtonProps {\n    isVisible?: boolean;\n}\n\nconst StyledHeaderButton = styled.div<StyledHeaderButtonProps>`\n    position: relative;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    margin-left: 15px;\n\n    box-sizing: border-box;\n    height: 32px;\n    min-width: 32px;\n    border-radius: ${containerBorderRadiusPx}px;\n\n    transition: background-color ${transition.default};\n    will-change: background-color;\n\n    ${focusBorderMixin({ borderRadius: containerBorderRadiusPx })}\n\n    &:focus {\n        background: ${color.button.secondary1};\n    }\n\n    &:first-of-type {\n        margin-left: 0;\n    }\n\n    ${({ isVisible }) =>\n        !isVisible &&\n        css`\n            display: none;\n        `}\n`;\n\nconst textHeightPx = icon.xs.sizePx;\n\nconst StyledText = styled(ButtonText2)`\n    margin-left: 8px;\n\n    height: ${textHeightPx}px;\n    padding: 0 7px 0 1px;\n\n    line-height: ${textHeightPx}px;\n\n    color: ${color.text.white};\n\n    opacity: 0.88;\n`;\n\ninterface HeaderButtonProps {\n    text?: string;\n    isVisible?: boolean;\n    onClick?: () => void;\n}\n\nexport const HeaderButtonTouch: React.FC<HeaderButtonProps> = ({ text, isVisible, onClick: handleClick, children }) => (\n    <StyledHeaderButton tabIndex={0} onClick={handleClick} isVisible={isVisible}>\n        {children}\n        {text ? <StyledText>{text}</StyledText> : null}\n    </StyledHeaderButton>\n);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { useThrottledFn } from 'hooks/useThrottledFn';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButtonTouch } from 'components/HeaderButton/HeaderButton@touch';\nimport { icon } from 'style/const/icon';\n\nimport addressIcon from './address.svg';\n\nconst addressIconSizePx = icon.xs.sizePx;\n\nconst StyledIcon = styled.div`\n    width: ${addressIconSizePx}px;\n    height: ${addressIconSizePx}px;\n\n    background-image: url('${addressIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst throttleTimeoutMs = 200;\n\nexport const HeaderAddressTouch: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const { isVisible } = useSelector((state) => selectHeader(state).address);\n\n    const handleClick = useThrottledFn(() => dispatch(push(ROUTES.ADDRESS_SIMPLE)), throttleTimeoutMs, undefined, [\n        dispatch,\n    ]);\n\n    return (\n        <HeaderButtonTouch isVisible={isVisible} onClick={handleClick}>\n            <StyledIcon />\n        </HeaderButtonTouch>\n    );\n};\n","import React from 'react';\nimport { push } from 'connected-react-router';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { useThrottledFn } from 'hooks/useThrottledFn';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButtonTouch } from 'components/HeaderButton/HeaderButton@touch';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\n\nimport cartIcon from './HeaderCart.assets/cart.svg';\n\nconst cartIconSizePx = icon.xs.sizePx;\n\nconst StyledIcon = styled.div`\n    position: relative;\n\n    width: ${cartIconSizePx}px;\n    height: ${cartIconSizePx}px;\n\n    background-image: url('${cartIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst badgeSizePx = 16;\nconst badgeOffsetPx = cartIconSizePx / 2;\n\nconst StyledBadge = styled.span`\n    position: absolute;\n    left: ${badgeOffsetPx}px;\n    bottom: ${badgeOffsetPx}px;\n\n    width: ${badgeSizePx}px;\n    height: ${badgeSizePx}px;\n    border-radius: 50%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    line-height: 12px;\n    font-size: 10px;\n    letter-spacing: -0.019em;\n\n    box-sizing: border-box;\n\n    color: ${color.text.primary};\n    background: ${color.button.primary};\n`;\n\nconst throttleTimeoutMs = 200;\n\nexport const HeaderCartTouch: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const { count, price, isVisible } = useSelector((state) => selectHeader(state).cart);\n\n    const handleClick = useThrottledFn(\n        () => {\n            dispatch(push(ROUTES.CART));\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch],\n    );\n\n    const text = `${price} ₽`;\n\n    return (\n        <HeaderButtonTouch isVisible={isVisible} onClick={handleClick} text={text}>\n            <StyledIcon>\n                <StyledBadge>{count}</StyledBadge>\n            </StyledIcon>\n        </HeaderButtonTouch>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { selectHeader } from 'store/selectors';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout@touch';\nimport { transition } from 'style/const/transition';\nimport { BodyText2 } from 'components/Text/Body@touch';\nimport backButtonIcon from 'components/HeaderBack/HeaderBack.assets/chevron-left.svg';\n\nimport { HeaderAddressTouch } from '../HeaderAddress/HeaderAddress@touch';\nimport { HeaderCartTouch } from '../HeaderCart/HeaderCart@touch';\n\nimport logoIcon from './Header.assets/logo.svg';\n\ninterface StyledHeaderProps {\n    isVisible: boolean;\n}\n\nconst StyledHeader = styled.div<StyledHeaderProps>`\n    position: relative;\n\n    height: ${layout.headerHeightPx}px;\n\n    box-sizing: border-box;\n    padding: 14px 13px 9px;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    --spatial-navigation-contain: contain;\n\n    opacity: ${({ isVisible }) => Number(isVisible)};\n\n    transition: opacity ${transition.default};\n\n    z-index: 2;\n`;\n\nconst backButtonIconSizePx = icon.xs.sizePx;\n\nconst StyledBackButton = styled.span`\n    width: 32px;\n    height: 32px;\n    margin-right: 9px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &::before {\n        content: '';\n\n        display: block;\n        width: ${backButtonIconSizePx}px;\n        height: ${backButtonIconSizePx}px;\n\n        background-image: url(${backButtonIcon});\n        background-repeat: no-repeat;\n        background-size: contain;\n    }\n`;\n\nconst StyledSection = styled.div`\n    display: flex;\n    align-items: center;\n`;\n\nconst StyledLogo = styled.div`\n    margin-left: 3px;\n\n    width: 28px;\n    height: 28px;\n    border-radius: 8px;\n\n    background-image: url(${logoIcon});\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst StyledTitle = styled(BodyText2)`\n    margin-left: 10px;\n\n    display: inline-block;\n\n    color: ${color.text.white};\n`;\n\n// eslint-disable-next-line  @typescript-eslint/no-unused-vars\nexport const HeaderTouch: React.FC = ({ children, ...props }) => {\n    const { title, isBackButtonVisible, isVisible } = useSelector(selectHeader);\n\n    return (\n        <StyledHeader isVisible={isVisible} {...props}>\n            <StyledSection>\n                {isBackButtonVisible && <StyledBackButton />}\n                <StyledLogo />\n                <StyledTitle>{title}</StyledTitle>\n            </StyledSection>\n            <StyledSection>\n                <HeaderAddressTouch />\n                <HeaderCartTouch />\n            </StyledSection>\n        </StyledHeader>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { HeaderTouch } from 'components/Header/Header@touch';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout@touch';\n\nconst Container = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: stretch;\n    align-content: stretch;\n\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n\n    background-color: ${color.background.default};\n`;\n\nconst AppContent = styled.div`\n    position: absolute;\n    top: ${layout.headerHeightPx}px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n`;\n\nexport const AppLayoutTouch: React.FC = ({ children }) => {\n    return (\n        <Container>\n            <HeaderTouch />\n            <AppContent>{children}</AppContent>\n        </Container>\n    );\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const FootnoteText1 = styled.div`\n    font-size: 14px;\n    line-height: 18px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.medium};\n`;\n\nexport const FootnoteText2 = styled.div`\n    font-size: 14px;\n    line-height: 18px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.semibold};\n`;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useThrottledFn } from 'hooks/useThrottledFn';\nimport { addItemAction, removeItemAction } from 'store/actions/native';\nimport { IndexBadge } from 'components/IndexBadge/IndexBadge';\nimport { FootnoteText1, FootnoteText2 } from 'components/Text/Footnote@touch';\nimport { color } from 'style/const/color';\nimport MoreIcon from 'assets/icons/add.svg';\nimport LessIcon from 'assets/icons/remove.svg';\n\nconst StyledCartListItemTouch = styled.div`\n    position: relative;\n    padding: 10px 16px;\n    margin-bottom: 4px;\n\n    display: flex;\n`;\n\nconst thumbSizePx = 40;\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\n\nconst StyledThumb = styled.div<StyledThumbProps>`\n    position: relative;\n\n    margin-right: 10px;\n\n    height: ${thumbSizePx}px;\n    width: ${thumbSizePx}px;\n\n    background-image: url('${({ imageUrl }) => imageUrl}');\n    background-size: contain;\n    background-position: center;\n    background-repeat: no-repeat;\n`;\n\nconst StyledInfo = styled.div`\n    display: flex;\n    flex-grow: 1;\n    flex-direction: column;\n    justify-content: center;\n`;\n\nconst StyledName = styled(FootnoteText1)`\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPrice = styled(FootnoteText1)`\n    margin-top: 2px;\n\n    color: ${color.text.secondary};\n`;\n\nconst StyledIndexBadge = styled(IndexBadge)`\n    top: -4px;\n    right: -4px;\n`;\n\nconst StyledSelector = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    margin-left: 16px;\n\n    width: 100px;\n`;\n\ninterface StyledCountTouchButtonProps {\n    isDanger?: boolean;\n}\n\nconst StyledCountTouchButton = styled.div<StyledCountTouchButtonProps>`\n    cursor: pointer;\n    background-color: rgba(255, 255, 255, 0.06);\n    border-radius: 8px;\n    display: flex;\n    width: 32px;\n    height: 32px;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    font-size: 14px;\n\n    ${({ isDanger }) =>\n        isDanger &&\n        css`\n            background-color: ${color.button.critical};\n        `}\n`;\n\ntype StyledIconProps = {\n    icon: string;\n};\n\nconst StyledIcon = styled.div<StyledIconProps>`\n    height: 12px;\n    width: 12px;\n\n    background-image: url(${({ icon }) => icon});\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst StyledRemoveIcon = styled(StyledIcon)`\n    transform: rotate(45deg);\n    height: 15px;\n    width: 15px;\n`;\n\nconst StyledCount = styled(FootnoteText2)`\n    color: ${color.text.primary};\n`;\n\nexport interface CartListItemTouchProps {\n    id: string;\n    index: number;\n}\n\nexport interface CartListItemTouchViewProps {\n    imageUrl: string;\n    name: string;\n    price: number;\n    count: number;\n    disabled?: boolean;\n    isMoreButtonDisabled?: boolean;\n}\n\nconst throttleTimeoutMs = 100;\n\nexport const CartListItemTouch: React.FC<CartListItemTouchProps> = ({ index, id }) => {\n    const { imageUrl, name, price, count, disabled } = useSelector(({ cartPageTouch: { itemsMap } }) => itemsMap[id]);\n\n    const dispatch = useDispatch();\n\n    const handleLessClick = useThrottledFn(\n        () => {\n            dispatch(\n                removeItemAction({\n                    item: id,\n                    count: '1',\n                    shouldRemoveMention: !count,\n                }),\n            );\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch, id, count],\n    );\n\n    const handleMoreClick = useThrottledFn(\n        () => {\n            dispatch(\n                addItemAction({\n                    item: id,\n                    count: '1',\n                }),\n            );\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch, id],\n    );\n\n    return (\n        <StyledCartListItemTouch>\n            <StyledThumb imageUrl={imageUrl}>\n                <StyledIndexBadge size=\"xxs\" index={index + 1} />\n            </StyledThumb>\n            <StyledInfo>\n                <StyledName>{name}</StyledName>\n                <StyledPrice>{price} ₽</StyledPrice>\n            </StyledInfo>\n            {disabled ? null : (\n                <StyledSelector>\n                    <StyledCountTouchButton isDanger={!count} onClick={handleLessClick}>\n                        {count ? <StyledIcon icon={LessIcon} /> : <StyledRemoveIcon icon={MoreIcon} />}\n                    </StyledCountTouchButton>\n                    <StyledCount>{count}</StyledCount>\n                    <StyledCountTouchButton onClick={handleMoreClick}>\n                        <StyledIcon icon={MoreIcon} />\n                    </StyledCountTouchButton>\n                </StyledSelector>\n            )}\n        </StyledCartListItemTouch>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { BodyText1, BodyText2 } from 'components/Text/Body@touch';\nimport { color } from 'style/const/color';\n\nimport { CartListItemTouch } from '../ListItem/CartListItem@touch';\n\nconst StyledCartListTouch = styled.div`\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    margin-top: 17px;\n`;\n\nconst StyledContainer = styled.div`\n    height: 190px;\n    margin-bottom: 24px;\n`;\n\nconst StyledTotalPrice = styled(BodyText2)`\n    padding-left: 16px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPrice = styled.span`\n    color: ${color.text.active};\n`;\n\nconst StyledMinimalPrice = styled(BodyText1)`\n    margin-top: 8px;\n\n    padding-left: 16px;\n\n    color: ${color.text.warning};\n`;\n\nexport const CartListTouch: React.FC = () => {\n    const { order, totalPrice, toMinimumPrice } = useSelector(({ cartPageTouch }) => cartPageTouch);\n\n    return (\n        <StyledCartListTouch>\n            {order.length > 0 && (\n                <StyledContainer>\n                    {order.map((itemId, index) => (\n                        <CartListItemTouch key={itemId} id={itemId} index={index} />\n                    ))}\n                </StyledContainer>\n            )}\n            <StyledTotalPrice>\n                Сумма к оплате\n                <StyledPrice> {totalPrice} ₽</StyledPrice>\n            </StyledTotalPrice>\n            {Boolean(toMinimumPrice) && (\n                <StyledMinimalPrice>До минимального заказа еще {toMinimumPrice} ₽</StyledMinimalPrice>\n            )}\n        </StyledCartListTouch>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/const/color';\n\nimport shadowImage from './shadow.svg';\n\nconst StyledPin = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nconst badgeHeightPx = 43;\n\nconst StyledBody = styled.div`\n    position: relative;\n\n    height: ${badgeHeightPx}px;\n    min-width: ${badgeHeightPx}px;\n    padding: 10px 11px;\n    border-radius: ${badgeHeightPx / 2}px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    text-align: center;\n\n    background: ${color.button.critical};\n`;\n\nconst kernelWidthPx = 2;\nconst kernelBorderRadiusPx = kernelWidthPx / 2;\n\nconst StyledKernel = styled.div`\n    height: 16px;\n    width: ${kernelWidthPx}px;\n\n    border-bottom-left-radius: ${kernelBorderRadiusPx}px;\n    border-bottom-right-radius: ${kernelBorderRadiusPx}px;\n\n    background: ${color.button.critical};\n`;\n\nconst StyledShadow = styled.div`\n    margin-top: -3px;\n\n    width: 37px;\n    height: 8px;\n\n    background: transparent no-repeat center/contain;\n    background-image: url('${shadowImage}');\n`;\n\nexport const Pin: React.FC = ({ children }) => {\n    return (\n        <StyledPin>\n            <StyledBody>{children}</StyledBody>\n            <StyledKernel />\n            <StyledShadow />\n        </StyledPin>\n    );\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const ParagraphText2 = styled.div`\n    font-size: 16px;\n    line-height: 22px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.medium};\n`;\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const HeadlineText2 = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 24px;\n    line-height: 28px;\n    letter-spacing: -0.022em;\n`;\n\nexport const HeadlineText4 = styled.div`\n    font-weight: ${font.weight.bold};\n    font-size: 20px;\n    line-height: 24px;\n    letter-spacing: -0.022em;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { Pin } from 'components/Pin/Pin@touch';\nimport { ParagraphText2 } from 'components/Text/Paragraph@touch';\nimport { CaptionText } from 'components/Text/Caption';\nimport { HeadlineText4 } from 'components/Text/Headline@touch';\nimport { BodyText1 } from 'components/Text/Body@touch';\nimport { color } from 'style/const/color';\nimport { font } from 'style/const/font';\n\nimport bgImage from '../Cart.assets/bg@touch.jpg';\n\nconst StyledBackground = styled.div`\n    position: absolute;\n    top: -65px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    background-image: url('${bgImage}');\n\n    opacity: 0.6;\n`;\n\nconst StyledCartInfoTouch = styled.div`\n    position: relative;\n\n    height: 236px;\n\n    padding: 15px 16px 0;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    &::before {\n        content: '';\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        height: 96px;\n        background: linear-gradient(360deg, #080808 0%, rgba(8, 8, 8, 0) 100%);\n\n        z-index: 1;\n\n        pointer-events: none;\n    }\n`;\n\nconst StyledPlaceInfo = styled.div`\n    position: relative;\n    z-index: 1;\n`;\n\nconst StyledTime = styled(ParagraphText2)`\n    font-weight: ${font.weight.semibold};\n    color: ${color.text.primary};\n`;\n\nconst StyledUnit = styled(CaptionText)`\n    margin-top: -4px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledAddress = styled(HeadlineText4)`\n    margin-top: 14px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    -webkit-line-clamp: 2;\n\n    color: ${color.text.primary};\n    text-align: center;\n`;\n\nconst StyledPersonal = styled(BodyText1)`\n    margin-top: 6px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n`;\n\nconst StyledPersonalLocation = styled(BodyText1)`\n    -webkit-line-clamp: 2;\n\n    color: ${color.text.secondary};\n`;\n\nexport const CartInfoTouch: React.FC = () => {\n    const { address } = useSelector(({ userData }) => userData);\n    const { deliveryTime, hasRequiredData, personalAddress } = useSelector(({ cartPageTouch }) => cartPageTouch);\n\n    return (\n        <StyledCartInfoTouch>\n            <StyledPlaceInfo>\n                <Pin>\n                    <StyledTime>{deliveryTime}</StyledTime>\n                    <StyledUnit size={12} lineHeight={16}>\n                        мин\n                    </StyledUnit>\n                </Pin>\n                <StyledAddress>{address}</StyledAddress>\n                {hasRequiredData ? (\n                    <StyledPersonal>\n                        <StyledPersonalLocation>{personalAddress}</StyledPersonalLocation>\n                    </StyledPersonal>\n                ) : null}\n            </StyledPlaceInfo>\n            <StyledBackground />\n        </StyledCartInfoTouch>\n    );\n};\n","import React from 'react';\n\nimport { CartListTouch } from './List/CartList@touch';\nimport { CartInfoTouch } from './Info/CartInfo@touch';\n\nexport const CartTouch: React.FC = () => {\n    return (\n        <>\n            <CartInfoTouch />\n            <CartListTouch />\n        </>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport AddIcon from 'assets/icons/add.svg';\nimport RemoveIcon from 'assets/icons/remove.svg';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { useThrottledFn } from 'hooks/useThrottledFn';\nimport { addItemAction, removeItemAction } from 'store/actions/native';\nimport { IndexBadge } from 'components/IndexBadge/IndexBadge';\nimport { BadgeType } from 'components/Badge/Badge';\n\nconst throttleTimeoutMs = 150;\nconst cardBorderRadiusPx = 20;\n\nconst StyledListItem = styled.div`\n    position: relative;\n    border-radius: ${cardBorderRadiusPx}px;\n    background-color: rgba(255, 255, 255, 0.06);\n    color: #fff;\n`;\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\n\nconst StyledThumb = styled.div<StyledThumbProps>`\n    display: block;\n    width: 100%;\n    height: 168px;\n\n    background-image: url('${({ imageUrl }) => imageUrl}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n\n    border-top-left-radius: ${cardBorderRadiusPx}px;\n    border-top-right-radius: ${cardBorderRadiusPx}px;\n`;\n\nconst StyledIndexBadge = styled(IndexBadge)`\n    top: 8px;\n    right: 8px;\n    color: #fff;\n`;\n\ntype StyledIconProps = {\n    icon: string;\n};\n\nconst StyledIcon = styled.div<StyledIconProps>`\n    height: 12px;\n    width: 12px;\n\n    background-image: url(${({ icon }) => icon});\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst StyledDescription = styled.div`\n    padding: 8px 16px 0;\n`;\n\nconst StyledButtonsContainer = styled.div`\n    padding: 12px;\n    margin-top: 6px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n`;\n\nconst StyledName = styled.div`\n    color: #fff;\n    font-size: 14px;\n    height: 36px;\n\n    display: block;\n    display: -webkit-box;\n\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n`;\n\ntype StyledTouchButtonProps = {\n    disabled?: boolean;\n};\n\nconst StyledTouchButton = styled.div<StyledTouchButtonProps>`\n    cursor: pointer;\n    padding: 11px 20px;\n    text-align: center;\n    font-size: 14px;\n    background-color: rgba(255, 255, 255, 0.06);\n    border-radius: 12px;\n    width: 100%;\n    opacity: ${({ disabled }) => (disabled ? 0.2 : 1)};\n`;\n\nconst StyledCountTouchButton = styled.div`\n    cursor: pointer;\n    background-color: rgba(255, 255, 255, 0.06);\n    border-radius: 12px;\n    display: flex;\n    width: 40px;\n    height: 40px;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    font-size: 14px;\n`;\n\nconst StyledCount = styled.div`\n    font-size: 16px;\n`;\n\ninterface CatalogListItemTouchProps {\n    id: string;\n}\n\nexport interface CatalogListItemTouchViewProps {\n    imageUrl: string;\n    count: number;\n    name: string;\n    index: number;\n    price: number;\n    badge?: BadgeType;\n    disabled?: boolean;\n    buttonDisabled?: boolean;\n}\n\nexport const CatalogListItemTouch: React.FC<CatalogListItemTouchProps> = ({ id }) => {\n    const dispatch = useDispatch();\n    const { imageUrl, count, index, name, price, disabled } = useSelector(\n        ({ catalogPageTouch }) => catalogPageTouch.itemsMap[id],\n    );\n    const isPossibleChangeCountActive = count > 0;\n\n    const handleClickAdd = useThrottledFn(\n        () => {\n            if (!disabled) {\n                dispatch(addItemAction({ item: id, count: '1' }));\n            }\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch, id, disabled],\n    );\n\n    const handleClickRemove = useThrottledFn(\n        () => {\n            if (!disabled) {\n                dispatch(removeItemAction({ item: id, count: '1' }));\n            }\n        },\n        throttleTimeoutMs,\n        undefined,\n        [dispatch, id, disabled],\n    );\n\n    return (\n        <StyledListItem tabIndex={0}>\n            <StyledThumb imageUrl={imageUrl} />\n            <StyledIndexBadge size=\"xs\" index={index} />\n            <StyledDescription>\n                <StyledName>{name}</StyledName>\n            </StyledDescription>\n            <StyledButtonsContainer>\n                {isPossibleChangeCountActive ? (\n                    <>\n                        <StyledCountTouchButton onClick={handleClickRemove}>\n                            <StyledIcon icon={RemoveIcon} />\n                        </StyledCountTouchButton>\n                        <StyledCount>{count}</StyledCount>\n                        <StyledCountTouchButton onClick={handleClickAdd}>\n                            <StyledIcon icon={AddIcon} />\n                        </StyledCountTouchButton>\n                    </>\n                ) : (\n                    <StyledTouchButton onClick={handleClickAdd} disabled={disabled}>\n                        {price} ₽\n                    </StyledTouchButton>\n                )}\n            </StyledButtonsContainer>\n        </StyledListItem>\n    );\n};\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\n\nimport { CatalogListItemTouch } from '../ListItem/CatalogListItem@touch';\n\nconst StyledCatalogList = styled.div`\n    width: 100%;\n    height: 100%;\n    overflow-y: auto;\n    padding: 6px 14px;\n    box-sizing: border-box;\n`;\n\nconst StyledScrollableCatalogContainer = styled.div`\n    display: grid;\n    grid-gap: 9px;\n    grid-template-columns: 1fr 1fr;\n`;\n\nexport const CatalogListTouch: React.FC = () => {\n    const itemIds = useSelector(({ catalogPageTouch }) => catalogPageTouch.order);\n    const itemsList = React.useMemo(() => itemIds.map((itemId) => <CatalogListItemTouch key={itemId} id={itemId} />), [\n        itemIds,\n    ]);\n\n    return (\n        <StyledCatalogList>\n            <StyledScrollableCatalogContainer>{itemsList}</StyledScrollableCatalogContainer>\n        </StyledCatalogList>\n    );\n};\n","import React from 'react';\n\nimport { CatalogListTouch } from './List/CatalogList@touch';\n\nexport const CatalogTouch: React.FC = () => {\n    return <CatalogListTouch />;\n};\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { useSprings, animated } from 'react-spring/web';\nimport { useGesture } from 'react-use-gesture';\n\nconst StyledSliderContainer = styled.div`\n    width: 100%;\n    height: 100%;\n`;\n\nconst StyledSlider = styled.div`\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n`;\n\nconst StyledSlide = styled.div`\n    width: 100%;\n    height: 100%;\n    will-change: transform;\n    user-select: none;\n    pointer-events: none;\n`;\n\nconst clamp = (input: number, lower: number, upper: number) => Math.min(Math.max(input, lower), upper);\n\ninterface SliderProps {\n    auto?: number;\n    className?: string;\n    children?: React.ReactNode[];\n    onSlideChange?: (slide: number) => void;\n    width: number;\n}\n\nexport const Slider: React.FC<SliderProps> = ({ auto = 0, className, children = [], onSlideChange, width }) => {\n    const [slide, setSlide] = useState(0);\n    const [isDragging, setDragging] = useState(false);\n\n    const [springProps, setSpringProps] = useSprings(children.length, (index) => ({\n        offset: index,\n    }));\n\n    const gestureBinds = useGesture(\n        {\n            onDrag: ({ down, movement: [xDelta], direction: [xDir], distance, cancel, first }) => {\n                if (first) {\n                    setDragging(true);\n                }\n\n                if (down && distance > width / 2) {\n                    if (cancel) cancel();\n\n                    setSlide(clamp(slide + (xDir > 0 ? -1 : 1), 0, children?.length - 1));\n                }\n\n                setSpringProps((index: number) => ({\n                    offset: (down ? xDelta : 0) / width + (index - slide),\n                }));\n            },\n            onClick: () => {\n                if (isDragging) {\n                    setDragging(false);\n                }\n\n                return false;\n            },\n        },\n        {\n            drag: {\n                delay: 200,\n            },\n        },\n    );\n\n    useEffect(() => {\n        setSpringProps((index: number) => ({ offset: index - slide }));\n\n        onSlideChange && onSlideChange(slide);\n    }, [slide, setSpringProps, onSlideChange]);\n\n    useEffect(() => {\n        let intervalId: number;\n\n        if (auto > 0) {\n            intervalId = setInterval(() => {\n                const targetIndex = (slide + 1) % children.length;\n\n                setSlide(targetIndex);\n            }, auto);\n        }\n\n        return () => {\n            if (intervalId) {\n                clearInterval(intervalId);\n            }\n        };\n    }, [auto, children.length, slide]);\n\n    return (\n        <StyledSliderContainer className={className}>\n            <StyledSlider>\n                {springProps.map(({ offset }, index) => (\n                    <animated.div\n                        {...gestureBinds()}\n                        key={index}\n                        style={{\n                            transform: offset.to((offsetX) => `translateX(${offsetX * 100}%)`),\n                            position: 'absolute',\n                            width: '100%',\n                            height: '100%',\n                            willChange: 'transform',\n                        }}\n                    >\n                        <StyledSlide>{children[index]}</StyledSlide>\n                    </animated.div>\n                ))}\n            </StyledSlider>\n        </StyledSliderContainer>\n    );\n};\n","import React, { useState, useMemo, useRef, useEffect } from 'react';\nimport styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { Slider } from 'components/Slider/Slider';\nimport { font } from 'style/const/font';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\n\nimport popcornBox2 from './Promo.assets/popcorn-box_1.png';\nimport popcornBox1 from './Promo.assets/popcorn-box_2.png';\nimport popcornBox3 from './Promo.assets/popcorn-box_3.png';\nimport popcornBox4 from './Promo.assets/popcorn-box_4.png';\nimport popcorn1 from './Promo.assets/popcorn-1.png';\nimport popcorn2 from './Promo.assets/popcorn-2.png';\nimport popcorn3 from './Promo.assets/popcorn-3.png';\n\nconst popcornBoxList: FlattenSimpleInterpolation[] = [\n    css`\n        width: 250px;\n        height: 385px;\n        background-image: url('${popcornBox1}');\n    `,\n    css`\n        width: 250px;\n        height: 280px;\n        margin-top: 84px;\n        background-image: url('${popcornBox2}');\n    `,\n    css`\n        width: 250px;\n        height: 280px;\n        margin-top: 84px;\n        background-image: url('${popcornBox3}');\n    `,\n    css`\n        width: 250px;\n        height: 380px;\n        margin-top: 31px;\n        background-image: url('${popcornBox4}');\n    `,\n];\n\nconst popcornList: FlattenSimpleInterpolation[] = [\n    css`\n        width: 54px;\n        height: 54px;\n        top: 41px;\n        left: 260px;\n        background-image: url(${popcorn2});\n    `,\n    css`\n        width: 71px;\n        height: 71px;\n        top: 226px;\n        left: 75px;\n        background-image: url(${popcorn1});\n    `,\n    css`\n        width: 76px;\n        height: 76px;\n        top: 271px;\n        left: 287px;\n        background-image: url(${popcorn1});\n    `,\n    css`\n        width: 64px;\n        height: 64px;\n        top: 311px;\n        left: 7px;\n        background-image: url(${popcorn3});\n    `,\n    css`\n        width: 74px;\n        height: 74px;\n        top: 530px;\n        left: 274px;\n        background-image: url(${popcorn3});\n    `,\n];\n\n/* Slider */\nconst StyledSlider = styled(Slider)`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n`;\n\ninterface PopcornBoxProps {\n    popcornStyle: FlattenSimpleInterpolation;\n}\n\nconst PopcornBox = styled.div<PopcornBoxProps>`\n    margin: 26px auto 0;\n\n    background-position: center;\n    background-size: contain;\n    background-repeat: no-repeat;\n\n    transition: opacity 1s ${transition.timingFn.default};\n\n    ${({ popcornStyle }) => popcornStyle}\n`;\n\n/* Text container */\nconst TextContainer = styled.div`\n    position: relative;\n    text-align: center;\n    padding: 253px 24px 0;\n    user-select: none;\n    pointer-events: none;\n`;\n\nconst Title = styled.div`\n    font-weight: ${font.weight.bold};\n    font-size: 32px;\n    line-height: 36px;\n    letter-spacing: -0.0011em;\n\n    color: ${color.text.primary};\n`;\n\nconst Subtitle = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 16px;\n    line-height: 22px;\n    letter-spacing: -0.019em;\n\n    color: ${color.text.secondary};\n\n    margin-top: 10px;\n`;\n\n/* Pins container */\nconst SliderPinsContainer = styled.div`\n    position: absolute;\n    display: grid;\n    grid-auto-flow: column;\n    grid-gap: 6px;\n    top: 483px;\n    left: 50%;\n    transform: translateX(-50%);\n    pointer-events: none;\n`;\n\n/* Corns container */\nconst CornsContainer = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n    z-index: 1;\n`;\n\ninterface CornProps {\n    popcornStyle: FlattenSimpleInterpolation;\n}\n\nconst Corn = styled.div<CornProps>`\n    position: absolute;\n\n    background-position: center;\n    background-size: contain;\n    background-repeat: no-repeat;\n\n    ${({ popcornStyle }) => popcornStyle}\n`;\n\ninterface PinProps {\n    isActive: boolean;\n}\n\nconst Pin = styled.div<PinProps>`\n    background-color: #fff;\n    border-radius: 1.5px;\n    width: 12px;\n    height: 3px;\n\n    opacity: ${({ isActive }) => (isActive ? 1 : 0.16)};\n    transition: opacity 0.5s ease-in-out;\n`;\n\nexport const PromoTouch: React.FC = () => {\n    const promoRef = useRef<HTMLDivElement>(null);\n    const [promoWidth, setPromoWidth] = useState(0);\n    const [currentSlideIndex, setCurrentSlideIndex] = useState(0);\n    const cornsList = useMemo(() => popcornList.map((style, index) => <Corn key={index} popcornStyle={style} />), []);\n\n    useEffect(() => {\n        if (promoRef.current) {\n            const { width } = promoRef.current.getBoundingClientRect();\n\n            setPromoWidth(width);\n        }\n    }, []);\n\n    return (\n        <div ref={promoRef}>\n            <CornsContainer>{cornsList}</CornsContainer>\n            <TextContainer>\n                <Title>Доставляем попкорн к просмотру фильмов</Title>\n                <Subtitle>Бесплатно в течении 15-30 минут для Москвы и Санкт-Петербурга</Subtitle>\n            </TextContainer>\n            <SliderPinsContainer>\n                {popcornBoxList.map((_, index) => (\n                    <Pin key={index} isActive={index === currentSlideIndex} />\n                ))}\n            </SliderPinsContainer>\n            <StyledSlider auto={5000} onSlideChange={(slide: number) => setCurrentSlideIndex(slide)} width={promoWidth}>\n                {popcornBoxList.map((style, index) => (\n                    <PopcornBox key={index} popcornStyle={style} />\n                ))}\n            </StyledSlider>\n        </div>\n    );\n};\n","import React, { useMemo } from 'react';\nimport styled, { css } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { ParagraphText2 } from 'components/Text/Paragraph@touch';\nimport { HeadlineText2 } from 'components/Text/Headline@touch';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout@touch';\n\nimport figureIcon1 from './Status.assets/figure-1.svg';\nimport figureIcon2 from './Status.assets/figure-2.svg';\nimport figureIcon3 from './Status.assets/figure-3.svg';\nimport figureIcon4 from './Status.assets/figure-4.svg';\nimport figureIcon5 from './Status.assets/figure-5.svg';\nimport figureIcon6 from './Status.assets/figure-6.svg';\nimport figureIcon7 from './Status.assets/figure-7.svg';\nimport figureIcon8 from './Status.assets/figure-8.svg';\nimport figureIcon9 from './Status.assets/figure-9.svg';\n\nconst StatusTouchContainer = styled.div`\n    position: relative;\n\n    height: 100vh;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n`;\n\nconst StatusTouchOrderInfo = styled.div`\n    text-align: center;\n    padding: 0 30px;\n\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    margin-top: -${layout.headerHeightPx}px;\n`;\n\nconst StatusTouchOrderNumber = styled(ParagraphText2)`\n    color: ${color.text.secondary};\n`;\n\nconst StatusTouchOrderTime = styled(HeadlineText2)`\n    margin-top: 10px;\n\n    color: ${color.text.primary};\n`;\n\ninterface FigureTouchProps {\n    params: [string, number, number, number];\n}\n\nconst StatusTouchFigure = styled.div<FigureTouchProps>`\n    position: absolute;\n\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: contain;\n\n    ${({ params: [bgUrl, topPx, leftPx, sizePx] }) => css`\n        top: ${topPx}%;\n        left: ${leftPx}%;\n\n        height: ${sizePx}px;\n        width: ${sizePx}px;\n\n        background-image: url('${bgUrl}');\n    `}\n`;\n\nconst figureList: FigureTouchProps['params'][] = [\n    [figureIcon1, 6.1, 13.9, 30],\n    [figureIcon2, 27.3, 83.7, 36],\n    [figureIcon3, 0.6, 78, 24],\n    [figureIcon4, 70.6, 74, 32],\n    [figureIcon5, 51.4, 62.2, 31],\n    [figureIcon6, 20.6, 51.3, 28],\n    [figureIcon7, 15.6, 39.7, 18],\n    [figureIcon8, 53.8, 46.5, 20],\n    [figureIcon9, 63.8, 18, 36],\n    [figureIcon4, 44.3, 11.3, 17],\n];\n\nexport const StatusTouch: React.FC = () => {\n    const deliveryTime = useSelector(({ delivery }) => delivery.deliveryTime);\n    const { orderId } = useSelector(({ cart }) => cart);\n    const touchFigureList = useMemo(\n        () => figureList.map((params, index) => <StatusTouchFigure key={index} params={params} />),\n        [],\n    );\n\n    return (\n        <StatusTouchContainer>\n            <StatusTouchOrderInfo>\n                <StatusTouchOrderNumber>Заказ #{orderId} оформлен</StatusTouchOrderNumber>\n                <StatusTouchOrderTime>\n                    Спасибо за заказ!\n                    <br />\n                    Будем у вас через {deliveryTime} минут.\n                </StatusTouchOrderTime>\n            </StatusTouchOrderInfo>\n            {touchFigureList}\n        </StatusTouchContainer>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport { Switch, Route } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { store, history } from 'store';\nimport { ROUTES } from 'store/constants/router';\nimport { AppLayoutTouch } from 'components/AppLayout/AppLayout@touch';\nimport { CartTouch } from 'pages/Cart/Cart@touch';\nimport { CatalogTouch } from 'pages/Catalog/Catalog@touch';\nimport { PromoTouch } from 'pages/Promo/Promo@touch';\nimport { StatusTouch } from 'pages/Status/Status@touch';\n\nconst StyledContainer = styled.div`\n    overflow: hidden;\n    width: 100%;\n    height: 100vh;\n    outline: none;\n    font-family: 'SB Sans Text', Helvetica, Arial, sans-serif;\n    background: #000;\n`;\n\nconst preventScroll = (event: React.SyntheticEvent<HTMLDivElement>) => {\n    event.currentTarget.scrollTop = 0;\n};\n\nexport const RootTouch: React.FC = () => (\n    <ReduxProvider store={store}>\n        <ConnectedRouter history={history}>\n            <StyledContainer onScroll={preventScroll}>\n                <AppLayoutTouch>\n                    <Switch>\n                        <Route path={ROUTES.CATALOG}>\n                            <CatalogTouch />\n                        </Route>\n                        <Route path={ROUTES.CART}>\n                            <CartTouch />\n                        </Route>\n                        <Route path={ROUTES.STATUS}>\n                            <StatusTouch />\n                        </Route>\n                        <Route path={ROUTES.PROMO}>\n                            <PromoTouch />\n                        </Route>\n                    </Switch>\n                </AppLayoutTouch>\n            </StyledContainer>\n        </ConnectedRouter>\n    </ReduxProvider>\n);\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { transition } from 'style/const/transition';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport { ButtonText1 } from 'components/Text/Button';\nimport { color } from 'style/const/color';\nimport { icon } from 'style/const/icon';\n\nconst containerBorderRadiusPx = 24;\n\ninterface StyledHeaderButtonProps {\n    isVisible?: boolean;\n}\n\nconst StyledHeaderButton = styled.div<StyledHeaderButtonProps>`\n    position: relative;\n\n    display: flex;\n    align-items: center;\n\n    margin-left: 24px;\n\n    box-sizing: border-box;\n    height: 80px;\n    padding: 16px 36px;\n    border-radius: ${containerBorderRadiusPx}px;\n\n    transition: background-color ${transition.default};\n    will-change: background-color;\n\n    ${focusBorderMixin({ borderRadius: containerBorderRadiusPx })}\n\n    &:focus {\n        background: ${color.button.secondary1};\n    }\n\n    &:first-of-type {\n        margin-left: 0;\n    }\n\n    ${({ isVisible }) =>\n        !isVisible &&\n        css`\n            display: none;\n        `}\n`;\n\nconst textHeightPx = icon.m.sizePx;\n\nconst StyledText = styled(ButtonText1)`\n    margin-left: 8px;\n\n    height: ${textHeightPx}px;\n    padding: 0 4px;\n\n    line-height: ${textHeightPx}px;\n\n    color: ${color.text.white};\n\n    opacity: 0.88;\n`;\n\ninterface HeaderButtonPortalProps {\n    text: string;\n    isVisible?: boolean;\n    onClick?: () => void;\n}\n\nexport const HeaderButtonPortal: React.FC<HeaderButtonPortalProps> = ({\n    text,\n    isVisible,\n    onClick: handleClick,\n    children,\n}) => {\n    return (\n        <StyledHeaderButton onClick={handleClick} isVisible={isVisible}>\n            {children}\n            {text ? <StyledText>{text}</StyledText> : null}\n        </StyledHeaderButton>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButtonPortal } from 'components/HeaderButton/HeaderButton@portal';\nimport { icon } from 'style/const/icon';\n\nimport addressIcon from './address.svg';\n\nconst addressIconSizePx = icon.m.sizePx;\n\nconst StyledIcon = styled.div`\n    width: ${addressIconSizePx}px;\n    height: ${addressIconSizePx}px;\n\n    background-image: url('${addressIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nexport const HeaderAddressPortal: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const isCartEmpty = !useSelector(({ cart }) => cart.totalCount);\n    const text = useSelector((state) => selectHeader(state).address.text);\n    const isVisible = useSelector((state) => selectHeader(state).address.isVisible);\n\n    const handleClick = React.useCallback(() => {\n        dispatch(push(ROUTES.ADDRESS_SIMPLE));\n    }, [dispatch]);\n\n    const buttonText = isCartEmpty ? text : '';\n\n    return (\n        <HeaderButtonPortal isVisible={isVisible} onClick={handleClick} text={buttonText}>\n            <StyledIcon />\n        </HeaderButtonPortal>\n    );\n};\n","import React from 'react';\nimport { push } from 'connected-react-router';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButtonPortal } from 'components/HeaderButton/HeaderButton@portal';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\n\nimport cartIcon from './HeaderCart.assets/cart.svg';\n\nconst cartIconSizePx = icon.m.sizePx;\n\nconst StyledIcon = styled.div`\n    position: relative;\n\n    width: ${cartIconSizePx}px;\n    height: ${cartIconSizePx}px;\n\n    background-image: url('${cartIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst badgeSizePx = 32;\nconst badgeOffsetPx = cartIconSizePx / 2;\n\nconst StyledBadge = styled.span`\n    position: absolute;\n    left: ${badgeOffsetPx}px;\n    bottom: ${badgeOffsetPx}px;\n\n    width: ${badgeSizePx}px;\n    height: ${badgeSizePx}px;\n    border-radius: 50%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    line-height: 24px;\n    font-size: 20px;\n    letter-spacing: -0.019em;\n\n    box-sizing: border-box;\n\n    color: ${color.text.primary};\n    background: ${color.button.primary};\n`;\n\nexport const HeaderCartPortal: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const count = useSelector((state) => selectHeader(state).cart.count);\n    const price = useSelector((state) => selectHeader(state).cart.price);\n    const isVisible = useSelector((state) => selectHeader(state).cart.isVisible);\n\n    const handleClick = React.useCallback(() => {\n        dispatch(push(ROUTES.CART));\n    }, [dispatch]);\n\n    const text = `${price} ₽`;\n\n    return (\n        <HeaderButtonPortal isVisible={isVisible} onClick={handleClick} text={text}>\n            <StyledIcon>\n                <StyledBadge>{count}</StyledBadge>\n            </StyledIcon>\n        </HeaderButtonPortal>\n    );\n};\n","import { goBack } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport React from 'react';\nimport { icon } from 'style/const/icon';\nimport styled from 'styled-components';\n\nimport backButtonIcon from './HeaderBack.assets/chevron-left.svg';\n\nconst backButtonIconSizePx = icon.m.sizePx;\n\ninterface StyledRootProps {\n    isVisible?: boolean;\n}\nconst StyledRoot = styled.span<StyledRootProps>`\n    width: 80px;\n    height: 80px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    opacity: ${({ isVisible }) => (isVisible ? 1 : 0)};\n\n    &::before {\n        content: '';\n\n        display: block;\n        width: ${backButtonIconSizePx}px;\n        height: ${backButtonIconSizePx}px;\n\n        background-image: url(${backButtonIcon});\n        background-repeat: no-repeat;\n        background-size: contain;\n    }\n`;\n\ninterface HeaderBackPortalProps {\n    className?: string;\n}\nexport const HeaderBackPortal: React.FC<HeaderBackPortalProps> = ({ className }) => {\n    const isVisible = useSelector(({ layout: { header } }) => header.isBackButtonVisible);\n    const dispatch = useDispatch();\n\n    const handleClick = React.useCallback(() => {\n        if (isVisible) {\n            dispatch(goBack());\n        }\n    }, [dispatch, isVisible]);\n\n    return <StyledRoot className={className} tabIndex={-1} isVisible={isVisible} onClick={handleClick} />;\n};\n","import React from 'react';\nimport { layoutHeaderHeight, layoutHeaderPaddingHorizontal } from 'style/const/layout@portal';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport { HeadlineText4 } from 'components/Text/Headline';\nimport { HeaderAddressPortal } from 'components/HeaderAddress/HeaderAddress@portal';\nimport { HeaderCartPortal } from 'components/HeaderCart/HeaderCart@portal';\nimport { HeaderBackPortal } from 'components/HeaderBack/HeaderBack@portal';\n\nimport logoIcon from './Header.assets/logo.svg';\n\ninterface StyledHeaderProps {\n    isVisible: boolean;\n}\n\nconst StyledHeader = styled.div<StyledHeaderProps>`\n    position: relative;\n\n    height: ${layoutHeaderHeight}px;\n\n    box-sizing: border-box;\n    padding: 0 80px 0 ${layoutHeaderPaddingHorizontal}px;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    --spatial-navigation-contain: contain;\n\n    opacity: ${({ isVisible }) => Number(isVisible)};\n\n    transition: opacity ${transition.default};\n`;\n\nconst StyledSection = styled.div`\n    display: flex;\n    align-items: center;\n`;\n\nconst logoSizePx = 72;\n\nconst StyledLogo = styled.div`\n    width: ${logoSizePx}px;\n    height: ${logoSizePx}px;\n    border-radius: 16px;\n\n    background-image: url(${logoIcon});\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst StyledTitle = styled(HeadlineText4)`\n    margin-left: 24px;\n\n    display: inline-block;\n\n    color: ${color.text.white};\n`;\n\nconst StyledHeaderBack = styled(HeaderBackPortal)`\n    position: absolute;\n    top: 16px;\n    left: 16px;\n`;\n\ninterface HeaderPortalProps {\n    className?: string;\n}\nexport const HeaderPortal: React.FC<HeaderPortalProps> = ({ className }) => {\n    // нельзя возвращать объект с пропсами целиком, потому что из-за\n    // реализации архитектуры, он пересчитывается на каждый экшен и ссылка разная\n    // от чего, соответственно перерендеривается все дерево компонентов\n    const isVisible = useSelector(({ layout: { header } }) => header.isVisible);\n    const title = useSelector(({ layout: { header } }) => header.title);\n\n    return (\n        <StyledHeader className={className} isVisible={isVisible}>\n            <StyledHeaderBack />\n            <StyledSection>\n                <StyledLogo />\n                <StyledTitle>{title}</StyledTitle>\n            </StyledSection>\n            <StyledSection>\n                <HeaderAddressPortal />\n                <HeaderCartPortal />\n            </StyledSection>\n        </StyledHeader>\n    );\n};\n","// TODO: FRNTND-1 mv to npm package\n\nexport const layoutWidth = 1280;\nexport const layoutHeight = 800;\nexport const layoutHeaderHeight = 112;\nexport const layoutHeaderPaddingTop = 32;\nexport const layoutHeaderPaddingHorizontal = 112;\nexport const layoutFooterHeight = 144;\nexport const layoutContentHeight = layoutHeight - (layoutHeaderHeight + layoutHeaderPaddingTop) - layoutFooterHeight;\n","import { HeaderPortal } from 'components/Header/Header@portal';\nimport React from 'react';\nimport { layoutContentHeight, layoutHeaderPaddingTop } from 'style/const/layout@portal';\nimport styled from 'styled-components';\nimport { color } from 'style/const/color';\nimport gradientBackground from 'assets/images/background-tv-sber.jpg';\nimport { preventAllScroll } from 'tools/preventAllScroll';\n\nconst StyledContainer = styled.div`\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n\n    padding-top: ${layoutHeaderPaddingTop}px;\n    box-sizing: border-box;\n\n    overflow: hidden;\n\n    background-color: ${color.background.default};\n    background-image: url('${gradientBackground}');\n    background-position: center;\n    background-size: cover;\n`;\n\nconst AppContent = styled.div`\n    position: relative;\n    z-index: 2;\n\n    height: ${layoutContentHeight}px;\n`;\n\nconst StyledHeader = styled(HeaderPortal)`\n    z-index: 3;\n`;\n\nexport const AppLayoutPortal: React.FC = ({ children }) => {\n    return (\n        <StyledContainer onScroll={preventAllScroll}>\n            <StyledHeader />\n            <AppContent>{children}</AppContent>\n        </StyledContainer>\n    );\n};\n","import React from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addItemAction } from 'store/actions/native';\nimport { Badge, BadgeProps } from 'components/Badge/Badge';\nimport { FootnoteText2 } from 'components/Text/Footnote';\nimport { BodyText1, BodyText2 } from 'components/Text/Body';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport plusIcon from 'assets/icons/plus.svg';\nimport doneIcon from 'assets/icons/done.svg';\n\nimport { catalogCardBorderRadius, catalogCardHeight, catalogCardWidth } from '../Catalog.const/portal';\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\nconst StyledThumb = styled.div<StyledThumbProps>`\n    display: block;\n    height: ${catalogCardWidth}px;\n    width: ${catalogCardWidth}px;\n\n    background: rgba(255, 255, 255, .04);\n    background-image: url('${(props) => props.imageUrl}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n\n    border-top-left-radius: ${catalogCardBorderRadius}px;\n    border-top-right-radius: ${catalogCardBorderRadius}px;\n`;\n\nconst StyledDescription = styled.div`\n    position: relative;\n\n    box-sizing: border-box;\n    padding: 20px 32px;\n\n    border-bottom-left-radius: ${catalogCardBorderRadius}px;\n    border-bottom-right-radius: ${catalogCardBorderRadius}px;\n`;\n\nconst StyledName = styled(BodyText1)`\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 1;\n    overflow: hidden;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPriceContainer = styled.div`\n    margin-top: 8px;\n\n    display: flex;\n`;\n\nconst StyledPrice = styled(BodyText2)`\n    color: ${color.text.primary};\n`;\n\nconst StyledOldPrice = styled(BodyText2)`\n    position: relative;\n    opacity: 0.24;\n    color: ${color.text.primary};\n    margin-left: 8px;\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: calc(50% - 2px);\n        border-top: 4px solid ${color.text.primary};\n        left: 2px;\n        right: 2px;\n    }\n`;\n\ninterface StyledCountProps {\n    isWarning?: boolean;\n}\nconst StyledCount = styled(BodyText2)<StyledCountProps>`\n    margin-left: 8px;\n\n    color: ${({ isWarning }) => (isWarning ? color.text.warning : color.text.active)};\n`;\n\nconst buttonIconSizePx = icon.m.sizePx;\nconst buttonIconPaddingPx = 8;\nconst buttonSizePx = buttonIconSizePx * 1.5;\nconst buttonOffsetXPx = buttonIconSizePx / 2;\nconst buttonOffsetYPx = (-1 * (buttonSizePx + buttonIconSizePx - buttonIconPaddingPx)) / 2;\n\ninterface StyledButtonProps {\n    isActive: boolean;\n    isDisabled?: boolean;\n}\nconst StyledButton = styled.div<StyledButtonProps>`\n    position: absolute;\n    top: ${buttonOffsetYPx}px;\n    right: ${buttonOffsetXPx}px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    width: ${buttonSizePx}px;\n    height: ${buttonSizePx}px;\n\n    border-radius: 50%;\n\n    background-color: ${({ isDisabled }) => (isDisabled ? '#3b3f44' : color.text.active)};\n\n    transition: opacity ${transition.default}, background-color ${transition.default};\n\n    &::before {\n        content: '';\n\n        display: block;\n\n        height: ${buttonIconSizePx}px;\n        width: ${buttonIconSizePx}px;\n\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-position: center;\n\n        transition: opacity ${transition.default};\n\n        opacity: ${({ isDisabled }) => (isDisabled ? '0.56' : '1')};\n\n        background-image: url('${({ isActive }) => (isActive ? doneIcon : plusIcon)}');\n    }\n`;\n\nconst badgePositionPx = 16;\n\nconst CatalogListItemBadge = styled(Badge)`\n    position: absolute;\n    top: ${badgePositionPx}px;\n    left: ${badgePositionPx}px;\n    z-index: 1;\n`;\n\n// Можно было заиспользовать компонент IndexBadge, но пересчет дерева компонентов\n// это слишком дорого в момент такой операции, как скролл карусели, поэтому их здесь минимум.\n// Этот хак позволяет выиграть ~20мс задержки перед началом анимации скроллинга.\ninterface StyledIndexBadgeProps {\n    visible?: boolean;\n}\nconst StyledIndexBadge = styled(FootnoteText2)<StyledIndexBadgeProps>`\n    top: 8px;\n    right: 8px;\n\n    position: absolute;\n\n    border-radius: 50%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    width: 64px;\n    height: 64px;\n\n    color: ${color.text.secondary};\n\n    transition: transform ${transition.default}, opacity ${transition.default};\n\n    background: ${color.button.secondary2};\n\n    ${({ visible }) => css`\n        transform: scale(${Number(visible)});\n        opacity: ${Number(visible)};\n    `}\n`;\n\nconst cardScaleFactor = 1 / 1.04;\nconst addActiveDurationMs = 200;\n\nconst AddAnimation = css`\n    animation-name: ${keyframes`\n        0% {\n            transform: scale(1);\n        }\n        100% {\n            transform: scale(${cardScaleFactor});\n        }\n    `};\n    animation-duration: ${addActiveDurationMs / 2}ms;\n    animation-iteration-count: 2;\n    animation-timing-function: ease-in-out;\n    animation-fill-mode: forwards;\n    animation-direction: alternate;\n`;\n\nconst shakeDurationMs = 200;\nconst shakeAmplitudePx = 10;\n\nconst ShakeAnimation = css`\n    animation-name: ${keyframes`\n        0% {\n            transform: translateX(0);\n        }\n        25% {\n            transform: translateX(${-1 * shakeAmplitudePx}px);\n        }\n        75% {\n            transform: translateX(${shakeAmplitudePx}px);\n        }\n        100% {\n            transform: translateX(0);\n        }\n    `};\n    animation-duration: ${shakeDurationMs}ms;\n    animation-iteration-count: 1;\n    animation-timing-function: ease-in-out;\n    animation-fill-mode: forwards;\n`;\n\ninterface StyledCatalogListItemProps {\n    disabled?: boolean;\n    isActive: boolean;\n    isShaking: boolean;\n}\nconst StyledCatalogListItem = styled.div<StyledCatalogListItemProps>`\n    position: relative;\n    width: ${catalogCardWidth}px;\n    height: ${catalogCardHeight}px;\n\n    display: flex;\n    flex-direction: column;\n    grid-row: 1;\n\n    border-radius: ${catalogCardBorderRadius}px;\n    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.1);\n    background: ${color.surface.liquid1};\n\n    transition: ${addActiveDurationMs / 2}ms ${transition.timingFn.default};\n    will-change: transform;\n\n    ${({ disabled }) =>\n        disabled &&\n        css`\n            ${StyledDescription},\n            ${StyledThumb} {\n                opacity: 0.5;\n            }\n        `}\n\n    ${({ isActive }) =>\n        isActive &&\n        css`\n            ${AddAnimation}\n        `}\n\n    ${({ isShaking }) =>\n        isShaking &&\n        css`\n            ${ShakeAnimation}\n        `}\n`;\n\nconst useActive = (count: number) => {\n    const [isCardActive, setCardActive] = React.useState(false);\n    const [isButtonActive, setButtonActive] = React.useState(false);\n    const [displayCount, setDisplayCount] = React.useState(count);\n    const prevCountRef = React.useRef(0);\n\n    // проставление стейта нужно делать обязательно в эффекте,\n    // иначе происходит слишком много перерисовок из-за того что,\n    // мы во время рендера вызываем проставление стейта и так по кругу\n    // реакту такое не нравится\n    React.useEffect(() => {\n        if (count > prevCountRef.current) {\n            const nextCount = count;\n\n            setCardActive(true);\n\n            setTimeout(() => {\n                setButtonActive(true);\n                setDisplayCount(nextCount);\n            }, addActiveDurationMs * 0.5);\n\n            setTimeout(() => {\n                setCardActive(false);\n            }, addActiveDurationMs);\n\n            setTimeout(() => {\n                setButtonActive(false);\n            }, addActiveDurationMs * 1.5);\n        } else {\n            setDisplayCount(count);\n        }\n\n        prevCountRef.current = count;\n    }, [count]);\n\n    return {\n        isCardActive,\n        isButtonActive,\n        displayCount,\n    };\n};\n\nconst useShake = () => {\n    const [isShaking, setShaking] = React.useState(false);\n\n    const doShake = React.useCallback(() => {\n        if (!isShaking) {\n            setShaking(true);\n        }\n\n        setTimeout(() => setShaking(false), shakeDurationMs);\n    }, [isShaking, setShaking]);\n\n    return { isShaking, doShake };\n};\n\nexport interface CatalogListItemIndexBadgeProps {\n    id: string;\n}\n// Вынес индекс в отдельный компонент, потому что из всей карточки он перерендеривается\n// чаще всего (при скролле). Если бы индекс прокидывался сверху, то он бы триггерил пересчет\n// всей компоненты карточки, а не только индекса.\nconst CatalogListItemIndexBadge: React.FC<CatalogListItemIndexBadgeProps> = ({ id }) => {\n    const index = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].index);\n\n    return <StyledIndexBadge visible={index > 0}>{index}</StyledIndexBadge>;\n};\n\nexport interface CatalogListItemPortalViewProps {\n    imageUrl: string;\n    count: number;\n    isWantMoreThanHave?: boolean;\n    name: string;\n    index: number;\n    price: number;\n    oldPrice?: number;\n    badgeType?: BadgeProps['type'];\n    badgeContent?: BadgeProps['content'];\n    disabled?: boolean;\n    isButtonDisabled?: boolean;\n}\n\nexport interface CatalogListItemPortalProps {\n    id: string;\n}\nexport const CatalogListItemPortal: React.FC<CatalogListItemPortalProps> = ({ id }) => {\n    const dispatch = useDispatch();\n    const imageUrl = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].imageUrl);\n    const count = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].count);\n    const isWantMoreThanHave = useSelector(\n        ({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].isWantMoreThanHave,\n    );\n    const name = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].name);\n    const price = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].price);\n    const oldPrice = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].oldPrice);\n    const badgeType = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].badgeType);\n    const badgeContent = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].badgeContent);\n    const disabled = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].disabled);\n    const isButtonDisabled = useSelector(({ catalogPagePortal }) => catalogPagePortal.itemsMap[id].isButtonDisabled);\n    const { isCardActive, isButtonActive, displayCount } = useActive(count);\n    const { isShaking, doShake } = useShake();\n\n    const handleClick = React.useCallback(() => {\n        if (!disabled) {\n            if (isButtonDisabled) {\n                doShake();\n            } else {\n                dispatch(addItemAction({ item: id, count: '1' }));\n            }\n        }\n    }, [dispatch, id, disabled, doShake, isButtonDisabled]);\n\n    return (\n        <StyledCatalogListItem\n            tabIndex={0}\n            disabled={disabled}\n            isActive={isCardActive}\n            isShaking={isShaking}\n            onClick={handleClick}\n        >\n            {badgeType ? <CatalogListItemBadge type={badgeType} content={badgeContent} /> : null}\n            <CatalogListItemIndexBadge id={id} />\n            <StyledThumb imageUrl={imageUrl} />\n            <StyledDescription>\n                <StyledButton isActive={isButtonActive} isDisabled={isButtonDisabled} />\n                <StyledName>{name}</StyledName>\n                <StyledPriceContainer>\n                    <StyledPrice>{price} ₽</StyledPrice>\n                    {oldPrice ? <StyledOldPrice>{oldPrice} ₽</StyledOldPrice> : null}\n                    {displayCount ? <StyledCount isWarning={isWantMoreThanHave}>×{displayCount}</StyledCount> : null}\n                </StyledPriceContainer>\n            </StyledDescription>\n        </StyledCatalogListItem>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport Swiper from 'swiper';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { preventAllScroll } from 'tools/preventAllScroll';\nimport { catalogSlideListAction } from 'store/actions/catalogPage';\nimport { layoutContentHeight, layoutHeaderPaddingHorizontal } from 'style/const/layout@portal';\nimport 'swiper/swiper-bundle.css';\n\nimport {\n    fullCardsInViewPort,\n    catalogCardHeight,\n    catalogCardWidth,\n    catalogContentPaddingY,\n    catalogCardGap,\n} from '../Catalog.const/portal';\nimport { CatalogListItemPortal } from '../ListItem/CatalogListItem@portal';\n\nconst StyledRoot = styled.div`\n    position: relative;\n\n    height: ${layoutContentHeight}px;\n    padding-top: ${catalogContentPaddingY}px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: start;\n\n    overflow: hidden;\n    --spatial-navigation-contain: contain;\n`;\n\nconst StyledWrapper = styled.div`\n    height: ${catalogCardHeight}px;\n    // рястягиваем элемент по кол-ву айтемов для того, чтобы все айтемы попадали\n    // на его слой и браузеру было проще это обсчитывать\n    width: max-content;\n`;\n\nconst StyledSwiperSlide = styled.div`\n    width: ${catalogCardWidth}px;\n\n    // swiper почему-то по умолчанию выносит все айтемы на отдельный слой\n    // даже если они не двигаются независимо. Нужно побороть это, для лучшей производительности.\n    transform: none !important;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nexport const CatalogListPortal: React.FC = () => {\n    const dispatch = useDispatch();\n    const swiperRef = React.useRef<Swiper | null>(null);\n    const order = useSelector(({ catalogPagePortal }) => catalogPagePortal.order);\n    const listIndexOffset = useSelector(({ catalogPagePortal }) => catalogPagePortal.listIndexOffset);\n    const ref = React.useRef<HTMLDivElement>(null);\n\n    /**\n     * Важно использовать здесь хук useLayoutEffect из-за того, что\n     * при первом рендере карусель может находить не на нулевой позиции.\n     * Соответственно, нужно отрендерить ее за один раз, чтобы и браузер\n     * не нагружать бесполезными пересчетами лаяута и карусель не дергалась.\n     */\n    React.useLayoutEffect(() => {\n        if (ref.current instanceof HTMLDivElement) {\n            swiperRef.current =\n                swiperRef.current ||\n                new Swiper('.swiper-container', {\n                    slidesPerView: 'auto',\n                    speed: 400,\n                    spaceBetween: catalogCardGap,\n                    initialSlide: listIndexOffset,\n                    roundLengths: true,\n                    /**\n                     * Если не выключить этот параметр то не вызывается\n                     * событие переключения на последний слайд.\n                     */\n                    normalizeSlideIndex: false,\n                    slidesOffsetBefore: layoutHeaderPaddingHorizontal,\n                    slidesOffsetAfter: layoutHeaderPaddingHorizontal,\n                    on: {\n                        slideChange: () => {\n                            if (swiperRef.current) {\n                                // синхронизируем стор со swiper'ом\n                                dispatch(catalogSlideListAction(swiperRef.current.activeIndex));\n                            }\n                        },\n                    },\n                });\n        }\n    }, [dispatch, listIndexOffset]);\n\n    /**\n     * Синхронизируем swiper со стором. Важно это делать именно в хуке\n     * useLayoutEffect. Это нужно для того чтобы синхронно внести\n     * все изменения в DOM (помимо скролла карусели так же\n     * пересчитываются бейджики индекса в карточках),\n     * и браузер пересчитывал лаяут один раз.\n     */\n    React.useLayoutEffect(() => {\n        if (swiperRef.current) {\n            swiperRef.current.slideTo(listIndexOffset, 400);\n        }\n    }, [listIndexOffset]);\n\n    /**\n     * Отслеживаем нажатия на клавиатуре и скроллим карусель.\n     * Здесь нельзя вызывать карусель напрямую, так как вместе со скроллом\n     * перерисовываются индексы на карточках. Поэтому все делаем через стор.\n     */\n    React.useEffect(() => {\n        const onKeyDown = (event: KeyboardEvent) => {\n            if (event.key === 'ArrowLeft') {\n                if (swiperRef.current) {\n                    const nextIndex = Math.max(0, swiperRef.current.activeIndex - fullCardsInViewPort);\n\n                    dispatch(catalogSlideListAction(nextIndex));\n                }\n            }\n\n            if (event.key === 'ArrowRight') {\n                if (swiperRef.current) {\n                    const nextIndex = Math.min(\n                        order.length - fullCardsInViewPort,\n                        swiperRef.current.activeIndex + fullCardsInViewPort,\n                    );\n\n                    dispatch(catalogSlideListAction(nextIndex));\n                }\n            }\n        };\n\n        window.addEventListener('keydown', onKeyDown);\n\n        return () => {\n            window.removeEventListener('keydown', onKeyDown);\n        };\n    }, [dispatch, order.length]);\n\n    const items = React.useMemo(() => {\n        return order.map((itemId) => (\n            <StyledSwiperSlide key={itemId} className=\"swiper-slide\">\n                <CatalogListItemPortal id={itemId} />\n            </StyledSwiperSlide>\n        ));\n    }, [order]);\n\n    return (\n        <StyledRoot onScroll={preventAllScroll} ref={ref} className=\"swiper-container\">\n            <StyledWrapper className=\"swiper-wrapper\">{items}</StyledWrapper>\n        </StyledRoot>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Skeleton } from 'components/Skeleton/Skeleton';\nimport { color } from 'style/const/color';\nimport { layoutContentHeight, layoutHeaderPaddingHorizontal } from 'style/const/layout@portal';\n\nimport {\n    catalogCardBorderRadius,\n    catalogCardGap,\n    catalogCardHeight,\n    catalogCardWidth,\n    catalogContentPaddingY,\n    fullCardsInViewPort,\n} from '../Catalog.const/portal';\n\nconst columnCount = fullCardsInViewPort + 1;\n\nconst skeletonWidthPx = catalogCardWidth * columnCount + catalogCardGap * fullCardsInViewPort;\n\nconst backgroundColor = color.surface.liquid1;\nconst foregroundColor = color.button.secondary1;\n\nconst StyledRoot = styled.div`\n    box-sizing: border-box;\n    height: ${layoutContentHeight}px;\n    padding-left: ${layoutHeaderPaddingHorizontal}px;\n    padding-top: ${catalogContentPaddingY}px;\n`;\n\nexport const CatalogSkeletonPortal: React.FC = () => (\n    <StyledRoot>\n        <Skeleton\n            width={skeletonWidthPx}\n            height={catalogCardHeight}\n            backgroundColor={backgroundColor}\n            foregroundColor={foregroundColor}\n            itemWidth={catalogCardWidth}\n            itemHeight={catalogCardHeight}\n            borderRadius={catalogCardBorderRadius}\n            rowCount={1}\n            columnCount={columnCount}\n            paddingBetweenRows={catalogCardGap}\n            paddingBetweenColumns={catalogCardGap}\n            speed={2}\n        />\n    </StyledRoot>\n);\n","import React from 'react';\nimport { useSelector } from 'hooks/useSelector';\nimport { CatalogListPortal } from 'pages/Catalog/List/CatalogList@portal';\nimport { CatalogSkeletonPortal } from 'pages/Catalog/Skeleton/CatalogSkeleton@portal';\n\nexport const CatalogPortal: React.FC = () => {\n    const itemsCount = useSelector(({ catalogPagePortal }) => catalogPagePortal.order.length);\n\n    return itemsCount ? <CatalogListPortal /> : <CatalogSkeletonPortal />;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/const/color';\nimport { BodyText2 } from 'components/Text/Body';\n\nexport enum ButtonViews {\n    primary = 'primary',\n    secondary = 'secondary',\n}\n\nconst buttonViewBackgroundMap: Record<ButtonViews, string> = {\n    primary: color.button.primary,\n    secondary: color.button.secondary1,\n};\n\nconst buttonBorderRadiusPx = 24;\n\ninterface StyledButtonProps {\n    view: ButtonViews;\n}\nconst StyledButton = styled(BodyText2)<StyledButtonProps>`\n    position: relative;\n\n    padding: 20px 40px;\n    border-radius: ${buttonBorderRadiusPx}px;\n    border: none;\n    white-space: nowrap;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    transition: background-color 0.3s ease-in-out;\n\n    background-color: ${({ view }) => buttonViewBackgroundMap[view]};\n    color: ${color.text.primary};\n\n    &[disabled] {\n        opacity: 0.5;\n    }\n`;\n\nexport interface ButtonProps {\n    className?: string;\n    forwardRef?: React.RefObject<HTMLButtonElement>;\n    view: ButtonViews;\n    disabled?: boolean;\n    onClick?: (event: React.SyntheticEvent<HTMLButtonElement>) => void;\n}\n\n/**\n * TODO: переиспользовать кроссплатформенный код\n * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-195\n */\nexport const ButtonPortal: React.FC<ButtonProps> = ({ forwardRef, ...props }) => {\n    return <StyledButton as=\"button\" type=\"button\" ref={forwardRef} {...props} />;\n};\n","import { FootnoteText1 } from 'components/Text/Footnote';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { ROUTES } from 'store/constants/router';\nimport { makePurchaseAction } from 'store/actions/server';\nimport { ButtonPortal, ButtonViews } from 'components/Button/Button@portal';\nimport { Pin } from 'components/Pin/Pin';\nimport { ParagraphText2, ParagraphText1 } from 'components/Text/Paragraph';\nimport { CaptionText } from 'components/Text/Caption';\nimport { BodyText2 } from 'components/Text/Body';\nimport { color } from 'style/const/color';\n\nconst StyledCartInfo = styled.div`\n    position: relative;\n\n    height: 100%;\n    width: 100%;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nconst StyledTime = styled(ParagraphText2)`\n    color: ${color.text.primary};\n`;\n\nconst StyledUnit = styled(CaptionText)`\n    margin-top: -10px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledAddress = styled(BodyText2)`\n    margin-top: 32px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n\n    -webkit-line-clamp: 2;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPersonal = styled.div`\n    margin-top: 8px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nconst StyledPersonalLocation = styled(FootnoteText1)`\n    -webkit-line-clamp: 2;\n    text-align: center;\n\n    color: ${color.text.secondary};\n`;\n\nconst StyledPersonalPhoneNumber = styled(BodyText2)`\n    margin-top: 32px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPersonalName = styled(FootnoteText1)`\n    margin-top: 8px;\n\n    -webkit-line-clamp: 2;\n    text-align: center;\n\n    color: ${color.text.secondary};\n`;\n\nconst StyledAskPersonal = styled(ParagraphText1)`\n    margin-top: 8px;\n\n    text-align: center;\n\n    color: ${color.text.secondary};\n`;\n\nconst CartInfoButton = styled(ButtonPortal)`\n    margin-top: 48px;\n\n    &[disabled] {\n        opacity: 0.3;\n    }\n`;\n\nexport const CartInfoPortal: React.FC = () => {\n    const dispatch = useDispatch();\n    const { address, customerName } = useSelector(({ userData }) => userData);\n    const {\n        deliveryTime,\n        isMakePurchaseButtonDisabled,\n        makePurchaseButtonView,\n        hasRequiredData,\n        phoneNumber,\n        personalAddress,\n    } = useSelector(({ cartPagePortal }) => cartPagePortal);\n    const handlePurchaseClick = React.useCallback(() => {\n        dispatch(makePurchaseAction());\n    }, [dispatch]);\n\n    const handleSetAddressClick = React.useCallback(() => {\n        dispatch(push(ROUTES.ADDRESS_FULL_ALL));\n    }, [dispatch]);\n\n    return (\n        <StyledCartInfo>\n            <Pin>\n                <StyledTime>{deliveryTime}</StyledTime>\n                <StyledUnit>мин</StyledUnit>\n            </Pin>\n            <StyledAddress>{address}</StyledAddress>\n            {hasRequiredData ? (\n                <>\n                    <StyledPersonal>\n                        <StyledPersonalLocation>{personalAddress}</StyledPersonalLocation>\n                        <StyledPersonalPhoneNumber>{phoneNumber}</StyledPersonalPhoneNumber>\n                        <StyledPersonalName>{customerName}</StyledPersonalName>\n                    </StyledPersonal>\n                    <CartInfoButton\n                        view={makePurchaseButtonView}\n                        disabled={isMakePurchaseButtonDisabled}\n                        onClick={handlePurchaseClick}\n                    >\n                        Перейти к оплате\n                    </CartInfoButton>\n                </>\n            ) : (\n                <>\n                    <StyledAskPersonal>\n                        Чтобы сделать заказ, укажите квартиру, подъезд и другую дополнительную информацию\n                    </StyledAskPersonal>\n                    <CartInfoButton view={ButtonViews.primary} onClick={handleSetAddressClick}>\n                        Дополнить адрес\n                    </CartInfoButton>\n                </>\n            )}\n        </StyledCartInfo>\n    );\n};\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { removeItemAction, addItemAction } from 'store/actions/native';\nimport { ButtonPortal, ButtonViews } from 'components/Button/Button@portal';\nimport { IndexBadge } from 'components/IndexBadge/IndexBadge';\nimport { Label, LabelProps } from 'components/Label/Label';\nimport { BodyText1, BodyText2 } from 'components/Text/Body';\nimport { FootnoteText1 } from 'components/Text/Footnote';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport addIcon from 'assets/icons/add.svg';\nimport removeIcon from 'assets/icons/remove.svg';\n\nconst thumbSizePx = 120;\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\n\nconst StyledThumb = styled.div<StyledThumbProps>`\n    position: relative;\n\n    margin-right: 32px;\n    flex-shrink: 0;\n\n    height: ${thumbSizePx}px;\n    width: ${thumbSizePx}px;\n\n    border-radius: 24px;\n\n    background-image: url('${({ imageUrl }) => imageUrl}');\n    background-color: rgba(255, 255, 255, .1);\n    background-size: contain;\n    background-position: center;\n    background-repeat: no-repeat;\n`;\n\nconst StyledInfoContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n`;\n\nconst StyledInfo = styled.div`\n    height: 120px;\n    max-width: 360px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n`;\n\ninterface StyledNameProps {\n    isOneLine?: boolean;\n}\nconst StyledName = styled(BodyText1)<StyledNameProps>`\n    overflow: hidden;\n\n    ${({ isOneLine }) =>\n        isOneLine\n            ? css`\n                  white-space: nowrap;\n                  text-overflow: ellipsis;\n              `\n            : css`\n                  display: -webkit-box;\n                  -webkit-box-orient: vertical;\n                  -webkit-line-clamp: 2;\n              `}\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPriceContainer = styled.div`\n    margin-top: 4px;\n    display: flex;\n`;\n\nconst StyledPrice = styled(FootnoteText1)`\n    color: ${color.text.secondary};\n`;\n\nconst StyledOldPrice = styled(FootnoteText1)`\n    position: relative;\n    opacity: 0.24;\n    color: ${color.text.primary};\n    margin-left: 8px;\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: calc(50% - 2px);\n        border-top: 4px solid ${color.text.primary};\n        left: 2px;\n        right: 2px;\n    }\n`;\n\nconst StyledLabel = styled(Label)`\n    margin-top: 4px;\n`;\n\nconst StyledSelector = styled.div`\n    margin-top: 12px;\n\n    width: 200px;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n`;\n\ninterface StyledSelectorValue {\n    isWarning?: boolean;\n}\nconst StyledSelectorValue = styled(BodyText2)<StyledSelectorValue>`\n    color: ${({ isWarning }) => (isWarning ? color.text.warning : color.text.primary)};\n`;\n\ntype SelectorButtonIconType = 'less' | 'more' | 'remove';\n\nconst iconTypeIconMap: Record<SelectorButtonIconType, string> = {\n    less: removeIcon,\n    more: addIcon,\n    remove: addIcon,\n};\n\nconst selectorButtonSizePx = 64;\nconst selectorBorderRadiusPx = selectorButtonSizePx / 2;\nconst selectorIconSizePx = icon.s.sizePx;\n\ninterface StyledSelectorButtonProps {\n    iconType: SelectorButtonIconType;\n}\nconst StyledSelectorButton = styled.button<StyledSelectorButtonProps>`\n    position: relative;\n\n    height: ${selectorButtonSizePx}px;\n    width: ${selectorButtonSizePx}px;\n    border: none;\n    border-radius: ${selectorBorderRadiusPx}px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background: ${color.button.secondary1};\n\n    will-change: background-color, transform, opacity;\n    transition: ${transition.default};\n\n    &::before {\n        content: '';\n\n        height: ${selectorIconSizePx}px;\n        width: ${selectorIconSizePx}px;\n\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-position: center;\n    }\n\n    &[disabled] {\n        opacity: 0.3;\n    }\n\n    &::before {\n        background-image: url('${({ iconType }) => iconTypeIconMap[iconType]}');\n    }\n\n    ${({ iconType }) =>\n        iconType === 'remove' &&\n        css`\n            transform: rotate(45deg);\n            background: ${color.button.critical};\n        `}\n`;\n\ninterface StyledCartListItemProps {\n    disabled?: boolean;\n}\n\nconst StyledCartListItem = styled.div<StyledCartListItemProps>`\n    position: relative;\n\n    height: 100%;\n    width: 100%;\n\n    box-sizing: border-box;\n\n    display: flex;\n    align-items: start;\n\n    ${({ disabled }) =>\n        disabled &&\n        css`\n            ${StyledThumb},\n            ${StyledName},\n            ${StyledPrice} {\n                opacity: .24;\n            }\n\n            ${StyledPrice} {\n                color: ${color.text.primary};\n            }\n        `}\n`;\n\nconst StyledIndexBadge = styled(IndexBadge)`\n    top: 4px;\n    right: 4px;\n`;\n\nconst StyledRemoveButton = styled(ButtonPortal)`\n    margin-top: 12px;\n`;\n\nexport interface CartListItemPortalProps {\n    id: string;\n    index: number;\n}\n\nexport interface CartListItemPortalViewProps {\n    imageUrl: string;\n    name: string;\n    price: number;\n    oldPrice?: number;\n    count: number;\n    isWantMoreThanHave?: boolean;\n    disabled?: boolean;\n    label?: LabelProps;\n    isMoreButtonDisabled?: boolean;\n}\n\nexport const CartListItemPortal: React.FC<CartListItemPortalProps> = ({ index, id }) => {\n    const {\n        imageUrl,\n        name,\n        price,\n        oldPrice,\n        label,\n        count,\n        isWantMoreThanHave,\n        disabled,\n        isMoreButtonDisabled,\n    } = useSelector(({ cartPagePortal: { itemsMap } }) => itemsMap[id]);\n    const dispatch = useDispatch();\n\n    const handleLessClick = React.useCallback(() => {\n        dispatch(\n            removeItemAction({\n                item: id,\n                count: '1',\n                shouldRemoveMention: !count,\n            }),\n        );\n    }, [dispatch, id, count]);\n\n    const handleMoreClick = React.useCallback(() => {\n        dispatch(\n            addItemAction({\n                item: id,\n                count: '1',\n            }),\n        );\n    }, [dispatch, id]);\n\n    const handleRemoveClick = React.useCallback(() => {\n        dispatch(\n            removeItemAction({\n                item: id,\n                count: String(Infinity),\n                shouldRemoveMention: true,\n            }),\n        );\n    }, [dispatch, id]);\n\n    return (\n        <StyledCartListItem disabled={disabled}>\n            <StyledThumb imageUrl={imageUrl}>\n                <StyledIndexBadge size=\"s\" index={index} />\n            </StyledThumb>\n            <StyledInfoContainer>\n                <StyledInfo>\n                    <StyledName isOneLine={disabled || Boolean(label)}>{name}</StyledName>\n                    <StyledPriceContainer>\n                        <StyledPrice>{price} ₽</StyledPrice>\n                        {oldPrice ? <StyledOldPrice>{oldPrice} ₽</StyledOldPrice> : null}\n                    </StyledPriceContainer>\n                    {label ? <StyledLabel {...label} /> : null}\n                </StyledInfo>\n                {disabled ? (\n                    <StyledRemoveButton view={ButtonViews.secondary} onClick={handleRemoveClick}>\n                        Удалить\n                    </StyledRemoveButton>\n                ) : (\n                    <StyledSelector>\n                        <StyledSelectorButton\n                            type=\"button\"\n                            aria-label=\"less\"\n                            iconType={count ? 'less' : 'remove'}\n                            onClick={handleLessClick}\n                        />\n                        <StyledSelectorValue isWarning={isWantMoreThanHave}>{count}</StyledSelectorValue>\n                        <StyledSelectorButton\n                            type=\"button\"\n                            aria-label=\"more\"\n                            iconType=\"more\"\n                            disabled={isMoreButtonDisabled}\n                            onClick={handleMoreClick}\n                        />\n                    </StyledSelector>\n                )}\n            </StyledInfoContainer>\n        </StyledCartListItem>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport Swiper from 'swiper';\nimport { cartSlideListAction } from 'store/actions/cartPage';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { FootnoteText1 } from 'components/Text/Footnote';\nimport { HeadlineText3 } from 'components/Text/Headline';\nimport { GradientFade } from 'components/GradientFade/GradientFade';\nimport { color } from 'style/const/color';\nimport { preventAllScroll } from 'tools/preventAllScroll';\nimport 'swiper/swiper-bundle.css';\n\nimport { CartListItemPortal } from '../ListItem/CartListItem@portal';\nimport {\n    cartContentHeight,\n    cartListGradientHeight,\n    cartListItemHeight,\n    cartListItemsInViewPort,\n    cartListItemsPaddingBetween,\n    cartListPaddingAfter,\n    cartListPaddingBefore,\n} from '../Cart.const/portal';\n\nconst StyledCartList = styled.div`\n    position: relative;\n\n    height: ${cartContentHeight}px;\n    width: 100%;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n`;\n\ninterface StyledContainerProps {\n    topGradientVisible?: boolean;\n    bottomGradientVisible?: boolean;\n}\nconst StyledContainer = styled.div<StyledContainerProps>`\n    position: relative;\n\n    max-height: ${cartContentHeight}px;\n    overflow: hidden;\n`;\n\nconst StyledWrapper = styled.div``;\n\nconst StyledTotalPrice = styled(HeadlineText3)`\n    padding-left: 16px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledMinimalPrice = styled(FootnoteText1)`\n    margin-top: 8px;\n\n    padding-left: 16px;\n\n    color: ${color.text.warning};\n`;\n\nconst StyledSwiperSlide = styled.div`\n    height: ${cartListItemHeight}px;\n\n    // swiper почему-то по умолчанию выносит все айтемы на отдельный слой\n    // даже если они не двигаются независимо. Нужно побороть это, для лучшей производительности.\n    transform: none !important;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst StyledPriceContainer = styled.div`\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n`;\n\nexport const CartListPortal: React.FC = () => {\n    const dispatch = useDispatch();\n    const ref = React.useRef<HTMLDivElement>(null);\n    const swiperRef = React.useRef<Swiper | null>(null);\n    const order = useSelector(({ cartPagePortal }) => cartPagePortal.order);\n    const listIndexOffset = useSelector(({ cartPagePortal }) => cartPagePortal.listIndexOffset);\n    const totalPrice = useSelector(({ cartPagePortal }) => cartPagePortal.totalPrice);\n    const toMinimumPrice = useSelector(({ cartPagePortal }) => cartPagePortal.toMinimumPrice);\n    const topGradientVisible = useSelector(({ cartPagePortal }) => cartPagePortal.topGradientVisible);\n    const bottomGradientVisible = useSelector(({ cartPagePortal }) => cartPagePortal.bottomGradientVisible);\n\n    /**\n     * Важно использовать здесь хук useLayoutEffect из-за того, что\n     * при первом рендере карусель может находить не на нулевой позиции.\n     * Соответственно, нужно отрендерить ее за один раз, чтобы и браузер\n     * не нагружать бесполезными пересчетами лаяута и карусель не дергалась.\n     */\n    React.useLayoutEffect(() => {\n        if (ref.current instanceof HTMLDivElement) {\n            swiperRef.current =\n                swiperRef.current ||\n                new Swiper('.swiper-container', {\n                    direction: 'vertical',\n                    slidesPerView: 'auto',\n                    centeredSlides: true,\n                    centeredSlidesBounds: true,\n                    /**\n                     * Если не выключить этот параметр то не вызывается\n                     * событие переключения на последний слайд.\n                     */\n                    normalizeSlideIndex: false,\n                    speed: 400,\n                    spaceBetween: cartListItemsPaddingBetween,\n                    initialSlide: listIndexOffset,\n                    roundLengths: true,\n                    slidesOffsetBefore: cartListPaddingBefore,\n                    slidesOffsetAfter: cartListPaddingAfter,\n                    on: {\n                        slideChange: () => {\n                            if (swiperRef.current) {\n                                // синхронизируем стор со swiper'ом\n                                dispatch(cartSlideListAction(swiperRef.current.activeIndex));\n                            }\n                        },\n                    },\n                });\n        }\n    }, [dispatch, listIndexOffset]);\n\n    /**\n     * Синхронизируем swiper со стором. Важно это делать именно в хуке\n     * useLayoutEffect. Это нужно для того чтобы синхронно внести\n     * все изменения в DOM (помимо скролла карусели так же\n     * пересчитываются бейджики индекса в карточках),\n     * и браузер пересчитывал лаяут один раз.\n     */\n    React.useLayoutEffect(() => {\n        if (swiperRef.current) {\n            swiperRef.current.slideTo(listIndexOffset, 400);\n        }\n    }, [listIndexOffset]);\n\n    /**\n     * Отслеживаем нажатия на клавиатуре и скроллим карусель.\n     * Здесь нельзя вызывать карусель напрямую, так как вместе со скроллом\n     * перерисовываются индексы на карточках. Поэтому все делаем через стор.\n     */\n    React.useEffect(() => {\n        const onKeyDown = (event: KeyboardEvent) => {\n            if (event.key === 'ArrowUp') {\n                const nextIndex = Math.max(0, listIndexOffset - cartListItemsInViewPort);\n\n                dispatch(cartSlideListAction(nextIndex));\n            }\n\n            if (event.key === 'ArrowDown') {\n                const maxIndex = order.length - 1;\n                const nextIndex = Math.min(maxIndex, listIndexOffset + cartListItemsInViewPort);\n\n                dispatch(cartSlideListAction(nextIndex));\n            }\n        };\n\n        window.addEventListener('keydown', onKeyDown);\n\n        return () => {\n            window.removeEventListener('keydown', onKeyDown);\n        };\n    }, [dispatch, order.length, listIndexOffset]);\n\n    React.useEffect(() => {\n        if (swiperRef.current) {\n            swiperRef.current.updateSize();\n            swiperRef.current.updateSlides();\n            swiperRef.current.updateProgress();\n            swiperRef.current.updateSlidesClasses();\n        }\n    }, [order.length]);\n\n    const items = React.useMemo(() => {\n        return order.map((itemId, index) => (\n            <StyledSwiperSlide className=\"swiper-slide\" key={itemId}>\n                <CartListItemPortal index={index + 1} id={itemId} />\n            </StyledSwiperSlide>\n        ));\n    }, [order]);\n\n    const isNotEnoughToMinimumPrice = Boolean(toMinimumPrice);\n    const bottomGradientYOffset = 42 * (isNotEnoughToMinimumPrice ? 2 : 1);\n\n    return (\n        <StyledCartList>\n            <GradientFade sizePx={cartListGradientHeight} kind=\"top\" isVisible={topGradientVisible}>\n                <GradientFade\n                    sizePx={cartListGradientHeight}\n                    yOffset={bottomGradientYOffset}\n                    kind=\"bottom\"\n                    isVisible={bottomGradientVisible}\n                >\n                    <StyledContainer ref={ref} className=\"swiper-container\" onScroll={preventAllScroll}>\n                        <StyledWrapper className=\"swiper-wrapper\">{items}</StyledWrapper>\n                    </StyledContainer>\n                </GradientFade>\n            </GradientFade>\n            <StyledPriceContainer>\n                <StyledTotalPrice>Сумма заказа {totalPrice} ₽</StyledTotalPrice>\n                {isNotEnoughToMinimumPrice && (\n                    <StyledMinimalPrice>До минимального заказа еще {toMinimumPrice} ₽</StyledMinimalPrice>\n                )}\n            </StyledPriceContainer>\n        </StyledCartList>\n    );\n};\n","export const cartContentHeight = 512;\n\nexport const cartListItemHeight = 196;\n\nexport const cartListItemsPaddingBetween = 32;\n\nexport const cartListItemsInViewPort = 2;\n\nexport const cartListPaddingBefore = 24;\n\nexport const cartListPaddingAfter = 96;\n\nexport const cartListGradientHeight = 128;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { CartInfoPortal } from './Info/CartInfo@portal';\nimport { CartListPortal } from './List/CartList@portal';\nimport bgImage from './Cart.assets/bg.jpg';\n\nconst StyledContainer = styled.div`\n    position: relative;\n    z-index: 2;\n\n    height: 100%;\n    width: 100%;\n\n    display: grid;\n\n    grid-template-columns: 512px 512px;\n    grid-column-gap: 32px;\n\n    padding: 0 112px;\n    box-sizing: border-box;\n`;\n\nconst StyledBackground = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1;\n\n    background-image: url('${bgImage}');\n`;\n\nexport const CartPortal: React.FC = () => (\n    <>\n        <StyledContainer>\n            <CartListPortal />\n            <CartInfoPortal />\n        </StyledContainer>\n        <StyledBackground />\n    </>\n);\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { closeAppAction } from 'store/actions/app';\nimport { ButtonPortal, ButtonViews } from 'components/Button/Button@portal';\nimport { BodyText2 } from 'components/Text/Body';\nimport { HeadlineText1 } from 'components/Text/Headline';\nimport { color } from 'style/const/color';\nimport { layoutContentHeight } from 'style/const/layout@portal';\n\nimport figureIcon1 from './Status.assets/figure-1.svg';\nimport figureIcon2 from './Status.assets/figure-2.svg';\nimport figureIcon3 from './Status.assets/figure-3.svg';\nimport figureIcon4 from './Status.assets/figure-4.svg';\nimport figureIcon5 from './Status.assets/figure-5.svg';\nimport figureIcon6 from './Status.assets/figure-6.svg';\nimport figureIcon7 from './Status.assets/figure-7.svg';\nimport figureIcon8 from './Status.assets/figure-8.svg';\nimport figureIcon9 from './Status.assets/figure-9.svg';\n\nconst StatusButton = styled(ButtonPortal)`\n    margin-top: 64px;\n`;\n\nconst StatusContainer = styled.div`\n    position: relative;\n\n    height: ${layoutContentHeight}px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n`;\n\nconst StatusOrderNumber = styled(BodyText2)`\n    color: ${color.text.secondary};\n`;\n\nconst StatusOrderTime = styled(HeadlineText1)`\n    margin-top: 16px;\n\n    text-align: center;\n\n    color: ${color.text.primary};\n`;\n\ninterface FigureProps {\n    params: [string, number, number, number];\n}\n\nconst StatusFigure = styled.div<FigureProps>`\n    position: absolute;\n\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: contain;\n\n    ${({ params: [bgUrl, topPx, leftPx, sizePx] }) => css`\n        top: ${topPx}px;\n        left: ${leftPx}px;\n\n        height: ${sizePx}px;\n        width: ${sizePx}px;\n\n        background-image: url('${bgUrl}');\n    `}\n`;\n\nconst figureList: FigureProps['params'][] = [\n    [figureIcon1, 92, 834, 61],\n    [figureIcon2, 0, 482, 61],\n    [figureIcon3, 280, 236, 46],\n    [figureIcon4, 158, 1487, 53],\n    [figureIcon5, 594, 340, 53],\n    [figureIcon6, 500, 652, 60],\n    [figureIcon7, 705, 1044, 40],\n    [figureIcon8, 492, 1268, 40],\n    [figureIcon9, 590, 1604, 90],\n];\n\nexport const StatusPortal: React.FC = () => {\n    const dispatch = useDispatch();\n    const deliveryTime = useSelector(({ delivery }) => delivery.deliveryTime);\n    const orderId = useSelector(({ cart }) => cart.orderId);\n    const handleButtonClick = React.useCallback(() => {\n        dispatch(closeAppAction());\n    }, [dispatch]);\n\n    return (\n        <StatusContainer>\n            <StatusOrderNumber>Заказ #{orderId} оформлен</StatusOrderNumber>\n            <StatusOrderTime>\n                Спасибо за заказ!\n                <br />\n                Будем у вас через {deliveryTime} минут.\n            </StatusOrderTime>\n            <StatusButton view={ButtonViews.primary} onClick={handleButtonClick}>\n                Очень жду\n            </StatusButton>\n            {figureList.map((params, index) => (\n                <StatusFigure key={index} params={params} />\n            ))}\n        </StatusContainer>\n    );\n};\n","import { BodyText1 } from 'components/Text/Body';\nimport { ButtonText2 } from 'components/Text/Button';\nimport React from 'react';\nimport { push } from 'connected-react-router';\nimport styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\n// import { useInterval } from 'hooks/useInterval';\nimport { closeAppAction } from 'store/actions/app';\nimport { ROUTES } from 'store/constants/router';\nimport { ButtonPortal, ButtonViews } from 'components/Button/Button@portal';\nimport { HeadlineText1, HeadlineText2 } from 'components/Text/Headline';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\n\nimport popcornBites from './Promo.assets/popcorn-bites.png';\nimport popcorn1 from './Promo.assets/popcorn-box_1.png';\nimport popcorn2 from './Promo.assets/popcorn-box_2.png';\nimport popcorn3 from './Promo.assets/popcorn-box_3.png';\nimport popcorn4 from './Promo.assets/popcorn-box_4.png';\nimport popcornPromo from './Promo.assets/popcorn-promo.png';\n\nconst TextContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    height: 100%;\n    width: 640px;\n\n    margin-left: 112px;\n    z-index: 2;\n`;\n\nconst Title = styled(HeadlineText2)`\n    color: ${color.text.primary};\n`;\n\nconst Subtitle = styled(BodyText1)`\n    margin-top: 24px;\n\n    color: ${color.text.secondary};\n`;\n\nconst ButtonContainer = styled.div`\n    margin-top: 48px;\n    display: flex;\n`;\n\nconst StyledButton = styled(ButtonPortal)`\n    &:not(:first-child) {\n        margin-left: 24px;\n    }\n`;\n\nconst PopcornContainer = styled.div`\n    position: absolute;\n    top: -144px;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    z-index: 0;\n\n    &::before {\n        content: '';\n\n        position: absolute;\n        top: 498px;\n        right: 138px;\n        z-index: 2;\n\n        display: block;\n        width: 386px;\n        height: 176px;\n\n        background-image: url('${popcornBites}');\n        background-position: center;\n        background-repeat: no-repeat;\n        background-size: contain;\n    }\n`;\n\nconst popcornList: FlattenSimpleInterpolation[] = [\n    css`\n        top: 162px;\n        right: 248px;\n        width: 440px;\n        height: 783px;\n        background-image: url('${popcorn1}');\n    `,\n    css`\n        top: 110px;\n        right: 66px;\n        width: 788px;\n        height: 816px;\n        background-image: url('${popcorn2}');\n    `,\n    css`\n        top: 215px;\n        right: 229px;\n        width: 469px;\n        height: 686px;\n        background-image: url('${popcorn3}');\n    `,\n    css`\n        top: 110px;\n        right: 66px;\n        width: 788px;\n        height: 816px;\n        background-image: url('${popcorn4}');\n    `,\n    css`\n        top: 0;\n        right: -19px;\n        width: 786px;\n        height: 772px;\n        background-image: url('${popcornPromo}');\n    `,\n];\n\ninterface PopcornProps {\n    popcornStyle: FlattenSimpleInterpolation;\n    isVisible: boolean;\n}\n\nconst Popcorn = styled.div<PopcornProps>`\n    position: absolute;\n\n    background-position: center;\n    background-size: contain;\n    background-repeat: no-repeat;\n\n    transition: opacity 1s ${transition.timingFn.default};\n\n    opacity: ${({ isVisible }) => Number(isVisible)};\n\n    ${({ popcornStyle }) => popcornStyle}\n`;\n\nconst StyledPromoBadge = styled.div`\n    position: absolute;\n    width: 216px;\n    height: 216px;\n\n    right: 162px;\n    top: 460px;\n\n    padding: 44px 0;\n    box-sizing: border-box;\n\n    border-radius: 50%;\n\n    display: flex;\n    flex-direction: column;\n\n    justify-content: center;\n    align-items: center;\n\n    background-color: ${color.text.active};\n`;\n\nconst StyledPromoTitle = styled(HeadlineText1)`\n    color: ${color.text.primary};\n`;\n\nconst StyledPromoSubtitle = styled(ButtonText2)`\n    color: ${color.text.primary};\n    text-align: center;\n`;\n\n// const timeoutMs = 4000;\n\n// const useIndex = (count: number) => {\n//     const [index, setIndex] = React.useState(0);\n//\n//     useInterval(() => setIndex((index + 1) % count), timeoutMs);\n//\n//     return index;\n// };\n\nexport const PromoPortal: React.FC = () => {\n    const dispatch = useDispatch();\n    // const currentIndex = useIndex(popcornList.length);\n\n    const handleClickSubmitButton = React.useCallback(() => {\n        dispatch(push(ROUTES.ADDRESS_SIMPLE));\n    }, [dispatch]);\n    const handleCloseButtonClick = React.useCallback(() => {\n        dispatch(closeAppAction());\n    }, [dispatch]);\n\n    return (\n        <>\n            <PopcornContainer>\n                <Popcorn isVisible popcornStyle={popcornList[4]} />\n                {/* {popcornList.map((style, index) => (\n                    <Popcorn key={index} isVisible={index === 0} popcornStyle={style} />\n                ))} */}\n                <StyledPromoBadge>\n                    <StyledPromoTitle>20%</StyledPromoTitle>\n                    <StyledPromoSubtitle>на первый заказ</StyledPromoSubtitle>\n                </StyledPromoBadge>\n            </PopcornContainer>\n            <TextContainer>\n                <Title>\n                    Доставляем попкорн\n                    <br />к просмотру фильмов и сериалов\n                </Title>\n                <Subtitle>\n                    Бесплатно за 15-30 минут\n                    <br />\n                    для Москвы и Санкт-Петербурга.\n                    <br />\n                    За 1 час в Подмосковье\n                    <br />и Ленобласти.\n                </Subtitle>\n                <ButtonContainer>\n                    <StyledButton view={ButtonViews.primary} onClick={handleClickSubmitButton}>\n                        Указать адрес\n                    </StyledButton>\n                    <StyledButton view={ButtonViews.secondary} onClick={handleCloseButtonClick}>\n                        Не сейчас\n                    </StyledButton>\n                </ButtonContainer>\n            </TextContainer>\n        </>\n    );\n};\n","import { FootnoteText1 } from 'components/Text/Footnote';\nimport React from 'react';\nimport { layoutContentHeight } from 'style/const/layout@portal';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { Pin } from 'components/Pin/Pin';\nimport { HeadlineText2 } from 'components/Text/Headline';\nimport { color } from 'style/const/color';\n\nimport faceIcon from './NoArea.assets/face.svg';\nimport bgImage from './NoArea.assets/bg.jpg';\n\nconst StyledContainer = styled.div`\n    position: relative;\n\n    height: ${layoutContentHeight}px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    z-index: 3;\n`;\n\nconst faceIconSizePx = 36;\n\nconst StyledFaceIcon = styled.div`\n    height: ${faceIconSizePx}px;\n    width: ${faceIconSizePx}px;\n\n    background-image: url(${faceIcon});\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: contain;\n`;\n\nconst StyledTitle = styled(HeadlineText2)`\n    margin-top: 32px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledSubtitle = styled(FootnoteText1)`\n    margin-top: 12px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledBackground = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1;\n\n    background-image: url('${bgImage}');\n`;\n\nexport const NoAreaPortal: React.FC = () => {\n    const address = useSelector(({ userModel }) => userModel.address);\n\n    return (\n        <>\n            <StyledContainer>\n                <Pin backgroundColor={color.background.secondary}>\n                    <StyledFaceIcon />\n                </Pin>\n                <StyledTitle>{address}</StyledTitle>\n                <StyledSubtitle>К сожалению, пока не доставляем по этому адресу</StyledSubtitle>\n            </StyledContainer>\n            <StyledBackground />\n        </>\n    );\n};\n","import { BodyText1 } from 'components/Text/Body';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { addressClickSuggestItemAction } from 'store/actions/addressSimplePage';\n\nconst StyledRoot = styled(BodyText1)`\n    padding: 20px 40px;\n    box-sizing: border-box;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n\n    border-radius: 24px;\n    color: #fff;\n    background: #1a1a1a;\n`;\n\ninterface SuggestListItemPortalProps {\n    index: number;\n}\n\nexport interface AddressSimpleSuggestItemPortalView {\n    id: string;\n    name: string;\n}\n\nexport const AddressSimpleSuggestListItemPortal: React.FC<SuggestListItemPortalProps> = ({ index }) => {\n    const { name, id } = useSelector(({ addressSimplePagePortal: { suggests } }) => suggests[index]);\n    const dispatch = useDispatch();\n    const handleClick = React.useCallback(() => {\n        dispatch(addressClickSuggestItemAction(id));\n    }, [dispatch, id]);\n\n    return <StyledRoot onClick={handleClick}>{name}</StyledRoot>;\n};\n","import { GradientFade } from 'components/GradientFade/GradientFade';\nimport React from 'react';\nimport { setTwoGisSuggests } from 'store/actions/twoGisSuggests';\nimport styled from 'styled-components';\nimport Swiper from 'swiper';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { getSuggestsList } from 'tools/twoGis/getSuggestsList';\nimport { addressChangeInputValueAction } from 'store/actions/addressSimplePage';\nimport { addressSubmitAction } from 'store/actions/server';\nimport { Input } from 'components/Input/Input';\nimport { ButtonPortal, ButtonViews } from 'components/Button/Button@portal';\nimport { preventAllScroll } from 'tools/preventAllScroll';\n\nimport { AddressSimpleSuggestListItemPortal } from './SuggestItem/AddressSimpleSuggestItem@portal';\n\nconst StyledContainer = styled.div`\n    display: flex;\n    align-items: start;\n    height: 100%;\n    padding: 16px 112px 0;\n`;\n\nconst StyledInputContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    flex: 1 0;\n    max-width: 900px;\n`;\n\nconst StyledButton = styled(ButtonPortal)`\n    margin-left: 32px;\n    padding: 36px 44px;\n    width: 268px;\n`;\n\ninterface StyledSuggestListProps {\n    hidden?: boolean;\n}\nconst StyledSuggestList = styled.div<StyledSuggestListProps>`\n    height: ${({ hidden }) => (hidden ? 0 : 416)}px;\n    width: 100%;\n    overflow: hidden;\n    transition: height 0.5s ease-in-out;\n`;\n\nconst StyledSuggestListContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n`;\n\nconst StyledSwiperSlide = styled.div`\n    height: 80px;\n`;\n\nconst useKeyboardExpanded = () => {\n    const [isKeyboardExpanded, setKeyboardExpanded] = React.useState(false);\n\n    React.useEffect(() => {\n        const onWindowResize = () => {\n            setKeyboardExpanded(!isKeyboardExpanded);\n        };\n\n        window.addEventListener('resize', onWindowResize);\n\n        return () => {\n            window.removeEventListener('resize', onWindowResize);\n        };\n    }, [isKeyboardExpanded, setKeyboardExpanded]);\n\n    return isKeyboardExpanded;\n};\n\nexport const AddressSimplePortal: React.FC = () => {\n    const [currentListIndex, setCurrentListIndex] = React.useState(0);\n    const swiperRef = React.useRef<Swiper | null>(null);\n    const ref = React.useRef<HTMLDivElement>(null);\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressSimplePagePortal }) => addressSimplePagePortal.inputValue);\n    const suggests = useSelector(({ addressSimplePagePortal }) => addressSimplePagePortal.suggests);\n    const isSubmitButtonDisabled = useSelector(\n        ({ addressSimplePagePortal }) => addressSimplePagePortal.isSubmitButtonDisabled,\n    );\n    const latitude = useSelector(({ userData }) => userData.deviceLocationLatitude);\n    const longitude = useSelector(({ userData }) => userData.deviceLocationLongitude);\n\n    const isKeyboardExpanded = useKeyboardExpanded();\n\n    const memoizedOnInputChange = React.useCallback<(e: React.ChangeEvent<HTMLInputElement>) => void>(\n        (event) => {\n            dispatch(addressChangeInputValueAction(event.currentTarget.value));\n        },\n        [dispatch],\n    );\n    const memoizedOnClickButton = React.useCallback(() => {\n        dispatch(addressSubmitAction());\n    }, [dispatch]);\n\n    React.useEffect(() => {\n        getSuggestsList({ q: inputValue, locale: 'ru_RU', latitude, longitude })\n            .then((items) => {\n                dispatch(setTwoGisSuggests(items));\n            })\n            .catch(() => {\n                dispatch(setTwoGisSuggests([]));\n            });\n    }, [dispatch, inputValue, latitude, longitude]);\n\n    React.useLayoutEffect(() => {\n        if (ref.current instanceof HTMLDivElement) {\n            swiperRef.current =\n                swiperRef.current ||\n                new Swiper(ref.current, {\n                    direction: 'vertical',\n                    slidesPerView: 'auto',\n                    speed: 400,\n                    initialSlide: 0,\n                    spaceBetween: 24,\n                    slidesOffsetBefore: 24,\n                    on: {\n                        slideChange: () => {\n                            if (swiperRef.current) {\n                                setCurrentListIndex(swiperRef.current.activeIndex);\n                            }\n                        },\n                    },\n                });\n        }\n    }, []);\n\n    React.useEffect(() => {\n        if (swiperRef.current) {\n            swiperRef.current.updateSize();\n            swiperRef.current.updateSlides();\n            swiperRef.current.updateProgress();\n            swiperRef.current.updateSlidesClasses();\n            swiperRef.current.slideTo(0);\n        }\n\n        setCurrentListIndex(0);\n    }, [suggests]);\n\n    const suggestItems = React.useMemo(() => {\n        return suggests.map((item, index) => (\n            <StyledSwiperSlide key={item.id} className=\"swiper-slide\">\n                <AddressSimpleSuggestListItemPortal index={index} />\n            </StyledSwiperSlide>\n        ));\n    }, [suggests]);\n\n    const itemsInViewport = 4;\n    const isTopGradientVisible = currentListIndex !== 0;\n    // prettier-ignore\n    const isBottomGradientVisible = (\n        (currentListIndex === 0 && suggestItems.length > 3) ||\n        currentListIndex < suggestItems.length - itemsInViewport\n    );\n\n    return (\n        <StyledContainer>\n            <StyledInputContainer>\n                <Input value={inputValue} title=\"Улица и дом\" onChange={memoizedOnInputChange} />\n                <GradientFade kind=\"top\" sizePx={24} isVisible={isTopGradientVisible}>\n                    <GradientFade kind=\"bottom\" sizePx={24} isVisible={isBottomGradientVisible}>\n                        <StyledSuggestList\n                            ref={ref}\n                            className=\"swiper-container\"\n                            hidden={isKeyboardExpanded}\n                            onScroll={preventAllScroll}\n                        >\n                            <StyledSuggestListContainer className=\"swiper-wrapper\">\n                                {suggestItems}\n                            </StyledSuggestListContainer>\n                        </StyledSuggestList>\n                    </GradientFade>\n                </GradientFade>\n            </StyledInputContainer>\n            <StyledButton view={ButtonViews.primary} disabled={isSubmitButtonDisabled} onClick={memoizedOnClickButton}>\n                Сохранить\n            </StyledButton>\n        </StyledContainer>\n    );\n};\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useFocusOnMount } from 'hooks/useFocusOnMount';\nimport { font } from 'style/const/font';\nimport { transition } from 'style/const/transition';\n\ninterface StyledTitleProps {\n    isMinified?: boolean;\n    isFocused?: boolean;\n}\nconst StyledTitle = styled.div<StyledTitleProps>`\n    position: absolute;\n    left: 32px;\n    top: 36px;\n\n    font-weight: 500;\n    font-size: 32px;\n    line-height: 40px;\n\n    color: ${({ isFocused }) => (isFocused ? '#2ac673' : 'rgba(255, 255, 255, 0.28)')};\n    transition: font-size 0.2s ease-in-out, top 0.2s ease-in-out, color 0.2s ease-in-out;\n\n    ${({ isMinified }) =>\n        isMinified &&\n        css`\n            top: 12px;\n            font-size: 24px;\n        `};\n`;\n\ninterface StyledInputProps {\n    disabled?: boolean;\n}\nconst StyledInput = styled.input<StyledInputProps>`\n    margin-top: 50px;\n    height: 40px;\n    width: 100%;\n    font-weight: ${font.weight.medium};\n    font-size: 32px;\n    color: ${({ disabled }) => (disabled ? 'rgba(255, 255, 255, 0.28)' : '#fff')};\n    caret-color: #2ac673;\n    line-height: 40px;\n    padding: 0;\n    border: none;\n    background: transparent;\n`;\n\ninterface StyledRootProps {\n    isFocused?: boolean;\n}\nconst StyledRoot = styled.div<StyledRootProps>`\n    position: relative;\n    height: 112px;\n    box-sizing: border-box;\n    padding: 0 32px;\n\n    border-top: 4px solid #1a1a1a;\n    border-left: 4px solid #1a1a1a;\n    border-right: 4px solid #1a1a1a;\n    border-bottom: 4px solid rgba(255, 255, 255, 0.12);\n\n    border-radius: 24px;\n    background-color: #1a1a1a;\n\n    transition: border ${transition.default};\n\n    ${({ isFocused }) =>\n        isFocused &&\n        css`\n            border-width: 4px;\n            border-style: solid;\n            border-color: #2ac673;\n\n            ${StyledTitle} {\n                color: #2ac673;\n\n                transition: color ${transition.default};\n            }\n        `}\n`;\n\ninterface InputProps {\n    title: string;\n    value: string;\n    className?: string;\n    type?: string;\n    disabled?: boolean;\n    onSubmit?: (event: React.SyntheticEvent<HTMLInputElement>) => void;\n    onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n    onRootClick?: (event: React.MouseEvent<HTMLDivElement>) => void;\n    forwardRef?: React.RefObject<HTMLDivElement>;\n    shouldFocusOnMount?: boolean;\n    shouldFocusInputOnMount?: boolean;\n}\n\nexport const InputPortal: React.FC<InputProps> = ({\n    title,\n    value,\n    className,\n    type = 'text',\n    disabled,\n    onSubmit,\n    onChange,\n    onRootClick,\n    forwardRef,\n    shouldFocusOnMount,\n    shouldFocusInputOnMount,\n}) => {\n    const [isFocused, setFocus] = React.useState(false);\n    const [isUsing, setUsing] = React.useState(false);\n    const inputRef = React.useRef<HTMLInputElement>(null);\n    const onMountRootRef = useFocusOnMount<HTMLDivElement>(forwardRef);\n    const rootRef = shouldFocusOnMount ? onMountRootRef : forwardRef;\n    const handleRootFocus = React.useCallback(() => setFocus(true), [setFocus]);\n    const handleRootBlur = React.useCallback(() => {\n        setFocus(false);\n        setUsing(false);\n    }, [setFocus, setUsing]);\n    const handleRootClick = React.useCallback(\n        (e: React.MouseEvent<HTMLDivElement>) => {\n            if (inputRef && inputRef.current) {\n                if (onRootClick) {\n                    onRootClick(e);\n                }\n\n                if (!e.defaultPrevented) {\n                    inputRef.current.focus();\n                    setUsing(true);\n                }\n            }\n        },\n        [onRootClick, setUsing],\n    );\n    const handleInputKeyPress = React.useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            if (onSubmit && event && event.key === 'Enter') {\n                event.stopPropagation();\n                onSubmit(event);\n            }\n        },\n        [onSubmit],\n    );\n\n    React.useEffect(() => {\n        if (shouldFocusInputOnMount && inputRef && inputRef.current) {\n            inputRef.current.focus();\n            setUsing(true);\n        }\n    }, [shouldFocusInputOnMount, inputRef, setUsing]);\n\n    const isTitleMinified = isUsing || Boolean(value);\n\n    return (\n        <StyledRoot\n            tabIndex={disabled ? -1 : 0}\n            className={className}\n            ref={rootRef}\n            isFocused={isFocused}\n            onFocus={handleRootFocus}\n            onBlur={handleRootBlur}\n            onClick={handleRootClick}\n        >\n            <StyledTitle isMinified={isTitleMinified} isFocused={isFocused}>\n                {title}\n            </StyledTitle>\n            <StyledInput\n                tabIndex={-1}\n                ref={inputRef}\n                type={type}\n                disabled={disabled}\n                onKeyPress={handleInputKeyPress}\n                onChange={onChange}\n                value={value}\n            />\n        </StyledRoot>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { ROUTES } from 'store/constants/router';\nimport { addressFullSubmitAction } from 'store/actions/server';\nimport { noop } from 'tools/noop';\nimport { InputPortal } from 'components/Input/Input@portal';\nimport { ButtonPortal, ButtonViews } from 'components/Button/Button@portal';\n\nconst StyledFirstRow = styled.div`\n    grid-area: first-row;\n    display: grid;\n    grid-column-gap: 32px;\n    grid-template-columns: 1.56fr 1fr;\n    color: #fff;\n`;\n\nconst StyledSecondRow = styled.div`\n    grid-area: second-row;\n    display: grid;\n    grid-column-gap: 32px;\n    grid-template-columns: 1fr 1fr 1fr;\n    color: #fff;\n`;\n\nconst StyledThirdRow = styled.div`\n    grid-area: third-row;\n    display: grid;\n    grid-column-gap: 32px;\n    grid-template-columns: 5.74fr 1fr;\n    color: #fff;\n`;\n\nconst StyledFourthRow = styled.div`\n    grid-area: fourth-row;\n`;\n\nconst SubmitButton = styled(ButtonPortal)`\n    flex-grow: 0;\n`;\n\nconst StyledRoot = styled.div`\n    display: grid;\n    padding: 16px 112px 0;\n    box-sizing: border-box;\n    grid-row-gap: 32px;\n    grid-column-gap: 32px;\n    grid-template-areas: 'first-row' 'second-row' 'third-row' 'fourth-row';\n\n    will-change: transform;\n`;\n\nexport const AddressFullAllPortal: React.FC = () => {\n    const dispatch = useDispatch();\n    const {\n        addressInputValue,\n        phoneNumberInputValue,\n        apartmentInputValue,\n        entranceInputValue,\n        floorInputValue,\n        doorCodeInputValue,\n        isSubmitButtonDisabled,\n    } = useSelector(({ addressFullPage }) => addressFullPage);\n    const handleSubmitClick = React.useCallback(() => {\n        dispatch(addressFullSubmitAction());\n    }, [dispatch]);\n\n    return (\n        <StyledRoot>\n            <StyledFirstRow>\n                <InputPortal\n                    title=\"Улица и дом\"\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootClick={() => dispatch(push(ROUTES.ADDRESS_SIMPLE))}\n                    value={addressInputValue}\n                />\n                <InputPortal\n                    title=\"Номер телефона\"\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootClick={() => dispatch(push(ROUTES.ADDRESS_FULL_PHONE))}\n                    value={phoneNumberInputValue}\n                />\n            </StyledFirstRow>\n            <StyledSecondRow>\n                <InputPortal\n                    title=\"Квартира\"\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootClick={() => dispatch(push(ROUTES.ADDRESS_FULL_APARTMENT))}\n                    value={apartmentInputValue}\n                />\n                <InputPortal\n                    title=\"Подъезд\"\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootClick={() => dispatch(push(ROUTES.ADDRESS_FULL_ENTRANCE))}\n                    value={entranceInputValue}\n                />\n                <InputPortal\n                    title=\"Этаж\"\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootClick={() => dispatch(push(ROUTES.ADDRESS_FULL_FLOOR))}\n                    value={floorInputValue}\n                />\n            </StyledSecondRow>\n            <StyledThirdRow>\n                <InputPortal\n                    title=\"Комментарий, например, код домофона\"\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootClick={() => dispatch(push(ROUTES.ADDRESS_FULL_DOORCODE))}\n                    value={doorCodeInputValue}\n                />\n            </StyledThirdRow>\n            <StyledFourthRow>\n                <SubmitButton view={ButtonViews.primary} disabled={isSubmitButtonDisabled} onClick={handleSubmitClick}>\n                    Сохранить\n                </SubmitButton>\n            </StyledFourthRow>\n        </StyledRoot>\n    );\n};\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullApartmentInputChangeAction } from 'store/actions/addressFullPage';\nimport { InputPortal } from 'components/Input/Input@portal';\n\nconst StyledInput = styled(InputPortal)`\n    margin: 16px 112px 0;\n`;\n\nexport const AddressFullApartmentPortal = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.apartmentInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullApartmentInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Квартира\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullDoorCodeInputChangeAction } from 'store/actions/addressFullPage';\nimport { InputPortal } from 'components/Input/Input@portal';\n\nconst StyledInput = styled(InputPortal)`\n    margin: 16px 112px 0;\n`;\n\nexport const AddressFullDoorCodePortal = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.doorCodeInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullDoorCodeInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Комментарий\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullEntranceInputChangeAction } from 'store/actions/addressFullPage';\nimport { InputPortal } from 'components/Input/Input@portal';\n\nconst StyledInput = styled(InputPortal)`\n    margin: 16px 112px 0;\n`;\n\nexport const AddressFullEntrancePortal = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.entranceInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullEntranceInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Подъезд\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullFloorInputChangeAction } from 'store/actions/addressFullPage';\nimport { InputPortal } from 'components/Input/Input@portal';\n\nconst StyledInput = styled(InputPortal)`\n    margin: 16px 112px 0;\n`;\n\nexport const AddressFullFloorPortal = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.floorInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullFloorInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Этаж\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullPhoneNumberInputChangeAction } from 'store/actions/addressFullPage';\nimport { InputPortal } from 'components/Input/Input@portal';\n\nconst StyledInput = styled(InputPortal)`\n    margin: 16px 112px 0;\n`;\n\nexport const AddressFullPhonePortal = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.phoneNumberInputValue);\n    const handleInputChange = React.useCallback(\n        ({ nativeEvent }: React.ChangeEvent<HTMLInputElement>) => {\n            // без этого тайпгварда TS не хочет показывать правильные поля\n            if (nativeEvent instanceof InputEvent) {\n                const { inputType, data } = nativeEvent;\n\n                dispatch(addressFullPhoneNumberInputChangeAction({ inputType, data }));\n            }\n        },\n        [dispatch],\n    );\n    const handleInputSubmit = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    return (\n        <StyledInput\n            title=\"Номер телефона\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleInputSubmit}\n        />\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { goBack } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { closeAppAction } from 'store/actions/app';\nimport { ButtonPortal, ButtonViews } from 'components/Button/Button@portal';\nimport { HeadlineText2 } from 'components/Text/Headline';\nimport { BodyText1 } from 'components/Text/Body';\nimport { color } from 'style/const/color';\nimport { layoutContentHeight, layoutHeight } from 'style/const/layout@portal';\n\nimport circlesImage from './Error.assets/circles.svg';\nimport warningIcon from './Error.assets/warning.svg';\n\nconst ErrorPage = styled.div`\n    position: relative;\n\n    height: ${layoutContentHeight}px;\n    display: flex;\n    justify-content: start;\n    align-items: center;\n    padding-left: 112px;\n`;\n\nconst TextContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    align-items: start;\n`;\n\nconst Title = styled(HeadlineText2)`\n    width: 430px;\n    color: ${color.text.primary};\n`;\n\nconst Subtitle = styled(BodyText1)`\n    margin-top: 24px;\n    width: 430px;\n\n    white-space: pre-wrap;\n\n    color: ${color.text.secondary};\n`;\n\nconst ButtonContainer = styled.div`\n    margin-top: 48px;\n\n    display: flex;\n`;\n\nconst StyledButton = styled(ButtonPortal)`\n    &:not(:first-child) {\n        margin-left: 24px;\n    }\n`;\n\nconst circlesGroupSize = 1176;\nconst circlesGroupTopPosition = -1 * ((circlesGroupSize - layoutHeight) / 2);\n\nconst Circles = styled.div`\n    position: fixed;\n    top: ${circlesGroupTopPosition}px;\n    bottom: 0;\n    left: 324px;\n    right: 0;\n\n    box-sizing: border-box;\n    width: ${circlesGroupSize}px;\n    height: ${circlesGroupSize}px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    background-image: url('${circlesImage}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n`;\n\nconst WarningIcon = styled.div`\n    width: 280px;\n    height: 280px;\n\n    background-image: url('${warningIcon}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n`;\n\nexport const ErrorPortal: React.FC = () => {\n    const dispatch = useDispatch();\n    const { title, subtitle, retryButtonText, closeButtonText } = useSelector(({ errorPage }) => errorPage);\n\n    const handleRetryButtonClick = React.useCallback(() => {\n        dispatch(goBack());\n    }, [dispatch]);\n\n    const handleCloseButtonClick = React.useCallback(() => {\n        dispatch(closeAppAction());\n    }, [dispatch]);\n\n    return (\n        <ErrorPage>\n            <TextContainer>\n                <Title>{title}</Title>\n                <Subtitle>{subtitle}</Subtitle>\n                <ButtonContainer>\n                    <StyledButton view={ButtonViews.secondary} onClick={handleRetryButtonClick}>\n                        {retryButtonText}\n                    </StyledButton>\n                    {closeButtonText ? (\n                        <StyledButton view={ButtonViews.secondary} onClick={handleCloseButtonClick}>\n                            {closeButtonText}\n                        </StyledButton>\n                    ) : null}\n                </ButtonContainer>\n            </TextContainer>\n            <Circles>\n                <WarningIcon />\n            </Circles>\n        </ErrorPage>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { Spinner } from 'components/Spinner/Spinner';\nimport { BodyText1 } from 'components/Text/Body';\nimport { color } from 'style/const/color';\n\nconst StyledContainer = styled.div`\n    height: 100%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n`;\n\nconst Text = styled(BodyText1)`\n    margin-top: 32px;\n\n    color: ${color.text.primary};\n`;\n\nexport const WaitPortal: React.FC = () => {\n    const text = useSelector(({ waitPage }) => waitPage.text);\n\n    return (\n        <StyledContainer>\n            <Spinner />\n            <Text>{text}</Text>\n        </StyledContainer>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport { Switch, Route } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { store, history } from 'store';\nimport { ROUTES } from 'store/constants/router';\nimport { AppLayoutPortal } from 'components/AppLayout/AppLayout@portal';\nimport { CatalogPortal } from 'pages/Catalog/Catalog@portal';\nimport { CartPortal } from 'pages/Cart/Cart@portal';\nimport { StatusPortal } from 'pages/Status/Status@portal';\nimport { PromoPortal } from 'pages/Promo/Promo@portal';\nimport { NoAreaPortal } from 'pages/NoArea/NoArea@portal';\nimport { AddressSimplePortal } from 'pages/AddressSimple/AddressSimple@portal';\nimport { AddressFullAllPortal } from 'pages/AddressFullAll/AddressFullAll@portal';\nimport { AddressFullApartmentPortal } from 'pages/AddressFullApartment/AddressFullApartment@portal';\nimport { AddressFullDoorCodePortal } from 'pages/AddressFullDoorCode/AddressFullDoorCode@portal';\nimport { AddressFullEntrancePortal } from 'pages/AddressFullEntrance/AddressFullEntrance@portal';\nimport { AddressFullFloorPortal } from 'pages/AddressFullFloor/AddressFullFloor@portal';\nimport { AddressFullPhonePortal } from 'pages/AddressFullPhone/AddressFullPhone@portal';\nimport { ErrorPortal } from 'pages/Error/Error@portal';\nimport { WaitPortal } from 'pages/Wait/Wait@portal';\nimport { preventAllScroll } from 'tools/preventAllScroll';\n\nimport 'style/global.scss';\n\nconst StyledContainer = styled.div`\n    overflow: hidden;\n    width: 100%;\n    height: 100vh;\n    outline: none;\n    font-family: 'SB Sans Text', Helvetica, Arial, sans-serif;\n    background: #000;\n`;\n\nexport const RootPortal: React.FC = () => (\n    <ReduxProvider store={store}>\n        <ConnectedRouter history={history}>\n            <StyledContainer onScroll={preventAllScroll}>\n                <AppLayoutPortal>\n                    <Switch>\n                        <Route path={ROUTES.CATALOG}>\n                            <CatalogPortal />\n                        </Route>\n                        <Route path={ROUTES.CART}>\n                            <CartPortal />\n                        </Route>\n                        <Route path={ROUTES.STATUS}>\n                            <StatusPortal />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_SIMPLE}>\n                            <AddressSimplePortal />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_ALL}>\n                            <AddressFullAllPortal />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_PHONE}>\n                            <AddressFullPhonePortal />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_APARTMENT}>\n                            <AddressFullApartmentPortal />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_ENTRANCE}>\n                            <AddressFullEntrancePortal />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_FLOOR}>\n                            <AddressFullFloorPortal />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL_DOORCODE}>\n                            <AddressFullDoorCodePortal />\n                        </Route>\n                        <Route path={ROUTES.PROMO}>\n                            <PromoPortal />\n                        </Route>\n                        <Route path={ROUTES.NO_AREA}>\n                            <NoAreaPortal />\n                        </Route>\n                        <Route path={ROUTES.ERROR}>\n                            <ErrorPortal />\n                        </Route>\n                        <Route path={ROUTES.WAIT}>\n                            <WaitPortal />\n                        </Route>\n                    </Switch>\n                </AppLayoutPortal>\n            </StyledContainer>\n        </ConnectedRouter>\n    </ReduxProvider>\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from '@sentry/react';\nimport { getRootForCurrentPlatform } from 'components/Root/Root';\n\nif (process.env.REACT_APP_ENVIRONMENT === 'production') {\n    Sentry.init({ dsn: 'https://b33b53e4a61946f1a44139076cefb598@o414705.ingest.sentry.io/5304676' });\n}\n\nexport const renderApp = (App: React.FC) => {\n    ReactDOM.render(<App />, document.getElementById('application_root'));\n};\n\nrenderApp(getRootForCurrentPlatform());\n\nif (process.env.REACT_APP_ENVIRONMENT !== 'production' && module.hot) {\n    module.hot.accept('./components/Root/Root', () => {\n        // eslint-disable-next-line\n        const { getRootForCurrentPlatform } = require('./components/Root/Root.tsx');\n        renderApp(getRootForCurrentPlatform());\n    });\n}\n\n// eslint-disable-next-line no-console\nconsole.log('rev', process.env.REACT_APP_REV);\n","import { isMobile, isPortal } from 'tools/browser';\n\nimport { RootSberBox } from './Root@sberbox';\nimport { RootTouch } from './Root@touch';\nimport { RootPortal } from './Root@portal';\n\nexport const getRootForCurrentPlatform = () => {\n    if (isMobile) {\n        return RootTouch;\n    }\n\n    if (isPortal) {\n        return RootPortal;\n    }\n\n    return RootSberBox;\n};\n","module.exports = __webpack_public_path__ + \"static/media/add.6f87e0cb.svg\";","module.exports = __webpack_public_path__ + \"static/media/remove.856b6a95.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-4.74f25c1b.svg\";","module.exports = __webpack_public_path__ + \"static/media/address.786915f5.svg\";","module.exports = __webpack_public_path__ + \"static/media/cart.f9b30afb.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.1072bc0d.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-1.cad64c9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-2.a3044c99.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-3.7084a68e.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-5.f121fdae.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-6.1cf5f7c7.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-7.ef978761.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-8.dcc5e538.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-9.fb8b47f7.svg\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-box_1.518d9c78.png\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-box_2.24d90011.png\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-box_3.d7453441.png\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-box_4.482bbaa4.png\";","module.exports = __webpack_public_path__ + \"static/media/background-tv-sber.c2fb7871.jpg\";","module.exports = __webpack_public_path__ + \"static/media/plus.9af213dd.svg\";","module.exports = __webpack_public_path__ + \"static/media/done.f4143229.svg\";","module.exports = __webpack_public_path__ + \"static/media/shadow.bb1d84f8.svg\";","module.exports = __webpack_public_path__ + \"static/media/bg.7b30988f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-bites.fe1b0e1a.png\";","module.exports = __webpack_public_path__ + \"static/media/face.1bb45b13.svg\";","module.exports = __webpack_public_path__ + \"static/media/bg.729407a2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/circles.b00db56e.svg\";","module.exports = __webpack_public_path__ + \"static/media/warning.4908c73c.svg\";","module.exports = __webpack_public_path__ + \"static/media/chevron-left.88658df7.svg\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}