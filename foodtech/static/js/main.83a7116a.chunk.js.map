{"version":3,"sources":["stores/ui.ts","tools/browsers-control/detect.js","tools/browsers-control/index.ts","tools/browsers-control/browser.js","index.tsx","tools/new-spatial-navigation.js","mocks/index.ts","tools/history.js","stores/user.ts","stores/product.ts","stores/products.ts","stores/cart.ts","stores/casts.ts","stores/index.ts","components/Suggest/Suggest.tsx","tools/bem.ts","hoc/withBem.tsx","components/Header/Header.tsx","components/HeaderAddress/HeaderAddress.tsx","tools/index.tsx","components/HeaderCart/HeaderCart.tsx","hooks/useFocusOnMount.tsx","pages/Catalog/ListItem/CatalogListItem.tsx","pages/Catalog/List/CatalogList.tsx","components/Skeleton/Skeleton.tsx","pages/Catalog/Skeleton/CatalogSkeleton.tsx","pages/Catalog/Catalog.tsx","components/Button/Button.tsx","pages/Cart/Info/CartInfo.tsx","pages/Cart/ListItem/CartListItem.tsx","pages/Cart/List/CartList.tsx","pages/Cart/Cart.tsx","pages/Status/Status.tsx","pages/Promo/Promo.tsx","hooks/useInterval.tsx","pages/NoArea/NoArea.tsx","pages/AddressSimple/AddressSimple.tsx","containers/AppContainer/index.tsx","tools/connect.tsx","configs/index.js"],"names":["routes","Ui","types","model","page","optional","enumeration","Object","values","PROMO","previous","maybeNull","visibles","array","string","actions","self","ui","gotoPage","to","history","push","goToCart","CART","window","AssistantClient","sendData","action_id","setVisible","itemId","removeVisible","splice","indexOf","getIndex","root","undefined","Array","prototype","map","callback","thisArg","T","A","k","this","TypeError","O","len","length","kValue","mappedValue","call","detect","_this","parsers","regexes","browser_parsers","regex","family_replacement","manufacturer","other","family_replacment","tablet","v2_replacement","v1_replacement","os_parsers","os_v2_replacement","os_v1_replacement","os_replacement","mobile_os_families","device_parsers","device_replacement","mobile_browser_families","results","parser","families","type","ArrayProto","nativeForEach","Function","forEach","find","ua","obj","ret","i","each","iterator","context","l","key","_","has","check","str","toVersionString","output","major","minor","patch","toString","suffix","family","parse","regexp","RegExp","rep","major_rep","major_version_replacement","m","match","replace","parseInt","man","a","source","browser","name","version","os","device","mobile_agents","arr","props","hasOwnProperty","prop","module","exports","define","require","UserAgent","navigator","userAgent","browsersContol","browserVerify","userBrowser","browserName","browserVersion","isIe","nodeElement","document","createElement","setAttribute","innerHTML","isNotAllowedBrowser","minVersion","some","chackBrowser","setStore","store","environment","default","browserContols","renderApp","App","ReactDOM","render","getElementById","body","appendChild","AppContainer","hot","accept","ARROW_KEY_CODE","37","38","39","40","mapOfBoundRect","startingPoint","savedSearchOrigin","element","rect","spatialNavigationHandler","addEventListener","e","currentKeyMode","parent","__spatialNavigation__","keyMode","eventTarget","activeElement","dir","keyCode","shiftKey","ctrlKey","metaKey","altKey","defaultPrevented","focusNavigableArrowKey","left","up","right","down","nodeName","startPosition","selectionStart","endPosition","selectionEnd","includes","getAttribute","value","handlingEditableElement","preventDefault","Map","navigate","x","clientX","y","clientY","target","getBoundingClientRect","searchOrigin","querySelector","elementStyle","getComputedStyle","invisibleStyle","disabled","getPropertyValue","documentElement","height","width","top","bottom","isVisibleInScroller","scroller","getScrollContainer","findSearchOrigin","console","log","elementFromPosition","elementFromPoint","isFocusable","isContainer","getSpatialNavigationContainer","container","contentDocument","bestInsideCandidate","spatialNavigationSearch","candidates","getSpatialNavigationCandidates","mode","focusingController","parentContainer","parentElement","location","navigateChain","bestCandidate","createSpatNavEvents","focus","preventScroll","scrollingController","isScrollable","isScrollBoundary","moveScroll","isHTMLScrollBoundary","ownerDocument","option","childElementCount","getElementsByTagName","children","elem","isDelegableContainer","concat","filter","isVisible","getFilteredSpatialNavigationCandidates","targetElement","filteredCandidates","args","bestTarget","internalCandidates","externalCandidates","insideOverlappedCandidates","focusableAreas","overlappedCandidates","isEntirelyVisible","getOverlappedCandidates","defaultContainer","defaultCandidates","contains","candidate","fullyOverlapped","overlappedByParent","elm","flat","currentElm","getClosestElement","getDistanceFromPoint","getInnerDistance","selectBestCandidateFromEdge","selectBestCandidate","innerTarget","descendantsBest","originalContainer","eventTargetRect","candidateRect","candidateBody","isOutside","isInside","spatialNavigationFunction","currentTargetRect","distanceFunction","alignedCandidates","isAligned","getAbsoluteDistance","getDistance","frameElement","minDistance","Number","POSITIVE_INFINITY","minDistanceElements","distance","getEuclideanDistance","scrollContainer","isScrollContainer","focusables","eventType","containerElement","currentElement","direction","triggeredEvent","CustomEvent","bubbles","cancelable","detail","causedTarget","dispatchEvent","readCssVar","varName","trim","currentOption","nextContainer","offset","scrollLeft","scrollTop","isCSSSpatNavContain","overflowX","overflowY","isOverflow","scrollWidth","clientWidth","scrollHeight","clientHeight","result","winScrollY","winScrollX","Math","abs","elementRect","nearestScroller","scrollerRect","DOMRect","innerWidth","innerHeight","tabIndex","tagName","isAtagWithoutHref","isActuallyDisabled","inert","isExpresslyInert","isVisibleStyleProperty","style","opacity","isBeingRendered","offsetX","offsetWidth","offsetY","offsetHeight","isNaN","hitTestPoint","middle","leftTop","rightBottom","point","elemFromPoint","hitTest","containerRect","thisVisibility","childRect","rightEdgeCheck","leftEdgeCheck","topEdgeCheck","bottomEdgeCheck","rect1","rect2","isRightSide","isBelow","points","getEntryAndExitPoints","P1","entryPoint","exitPoint","P2","sqrt","pow","baseEdge","orthogonalBias","alignBias","B","C","intersectionRect","intersection_rect","area","new_location","max","new_max_point","min","getIntersectionRect","D","get","boundingClientRect","toFixed","set","enableExperimentalAPIs","getInitialAPIs","assign","canScroll","findTarget","findCandidate","bestNextTarget","isArray","findCandidates","bind","findNextTarget","getDistanceFromTarget","candidateElement","getExperimentalAPI","seal","_keymode","setStartingPoint","__getSpatNavState","searchOriginRect","Element","CSS","registerProperty","syntax","inherits","initialValue","currentSpatialNavigationContainer","HTMLElement","nextSpatialNavigationContainer","__lastElementFocused","requestAnimationFrame","async","scrollIntoView","behavior","block","inline","Promise","resolve","IntersectionObserver","entry","isIntersecting","threshold","observe","event","HTMLButtonElement","click","USER_MOCK","address","SHOW_ITEMS_MOCK","categories","main_category","clear_name","guid","price","quantity_left","description","brand","barcode","shelf_life_days","properties","package_properties","url","images_urls","country","producer","storage_conditions","structured_description","protein","fats","carbohydrates","calories","package_description","volume","weight","number","size","createHashHistory","User","phoneNumber","updateUser","user","applySnapshot","ProductItem","id","identifier","clearName","imagesUrls","index","visible","boolean","Products","title","items","selectedId","products","setVisibility","item","selectItem","CartItem","product","reference","count","Cart","orderId","views","reduce","acc","floor","cart","clear","cast","addToCart","removeFromCart","shouldRemoveMention","findIndex","makePurchase","isDevelopment","onData","smart_app_data","command","status","goTo","casts","SHOW_ITEMS","stock","ADD_ITEM","REMOVE_ITEM","REMOVE_ALL","GO_TO_VALIDATION","GO_TO_NO_AREA","NO_AREA","GO_TO_ADDRESS_SIMPLE","GO_TO_CATALOG","address_string","VALIDATION_OK","order_id","STATUS","onMessage","message","castFn","afterCreate","AssistantHost","ready","setTimeout","create","castFromStore","CATALOG","count_in_cart","itemsMap","action","currentScreen","foodtech","keys","quantity","totalPrice","discountValue","__store","__inbox","__outbox","onStart","JSON","stringify","onRequestState","state","updateState","Suggest","className","PREFIX","config","cssPrefix","blockName","delimeter","modDelimeter","renderer","elements","join","mod","modVal","modify","conditions","elemToModify","entries","predicate","Boolean","all","Component","componentName","bem","Bem","Header","connectToStore","withBem","HeaderAddress","onClick","ADDRESS_SIMPLE","splitByThousands","data","split","reduceRight","HeaderCart","String","useFocusOnMount","ref","React","useRef","useLayoutEffect","current","CatalogListItem","countInCart","mountRef","backgroundImage","done","CatalogList","mountFocusRef","Skeleton","itemWidth","itemHeight","borderRadius","rowCount","columnCount","paddingBetweenColumns","paddingBetweenRows","list","from","columnIndex","rowIndex","rx","ry","CatalogSkeleton","viewBox","backgroundColor","foregroundColor","speed","Catalog","useEffect","onKeyDown","code","removeEventListener","Button","shouldFocusOnMount","CartInfo","hasPersonalData","big","small","addAddressInfo","CartListItem","onLessClick","onMoreClick","onSelect","selected","setFocus","useState","memoizedOnFocus","useCallback","less","remove","onFocus","onBlur","more","onScroll","currentTarget","getOffset","itemsCount","relatedIndex","CartList","selectedItemIndex","setSelectedItemIndex","isFirstItemSelected","isLastItemSelected","wrapperStyle","transform","hidden","Status","Promo","currentIndex","setIndex","timeout","POPCORN_TYPES_COUNT","intervalId","setInterval","clearInterval","NoArea","AddressSimple","fallback","containerStyle","Suspense","path","newStore","connect","selector","baseComponent","component","ownProps","Error","useObserver","displayName","storeData","process","pkg","api","REACT_APP_API","development","staging","production","test","isProduction"],"mappings":"qGAAA,qDAGO,MAQMA,EAAS,CAClB,OAAU,UACV,QAAW,WACX,KAAQ,QACR,eAAkB,kBAClB,OAAU,UACV,MAAS,SACT,QAAW,YAGTC,EAAKC,QACNC,MAAM,KAAM,CACTC,KAAMF,QAAMG,SAASH,QAAMI,YAAYC,OAAOC,OAAOR,IAAUA,EAAOS,OACtEC,SAAUR,QAAMS,UAAUT,QAAMI,YAAYC,OAAOC,OAAOR,KAC1DY,SAAUV,QAAMW,MAAMX,QAAMY,UAE/BC,QAASC,IACN,MAAMC,EAAKD,EAELE,EAAYC,IACdF,EAAGP,SAAWO,EAAGb,KACjBa,EAAGb,KAAOe,EACVC,IAAQC,KAAKF,IAqBjB,MAAO,CACHD,WACAI,SAVa,KACbJ,EAASlB,EAAOuB,MAChBC,OAAOC,gBAAgBC,SAAS,CAE5BC,UAAW,gBAOfC,WArBgBC,IAChBZ,EAAGL,SAASS,KAAKQ,IAqBjBC,cAlBmBD,IACnBZ,EAAGL,SAASmB,OAAOd,EAAGL,SAASoB,QAAQH,GAAS,IAkBhDI,SAfcJ,GAA2BZ,EAAGL,SAASoB,QAAQH,GAAU,KAuBpE5B,O,oBCnEf,OAkBA,SAAWiC,EAAMC,GAIRC,MAAMC,UAAUC,MACjBF,MAAMC,UAAUC,IAAM,SAAUC,EAAUC,GACtC,IAAIC,EAAGC,EAAGC,EACV,GAAY,MAARC,KACA,MAAM,IAAIC,UAAU,gCAGxB,MAAMC,EAAIvC,OAAOqC,MAGXG,EAAMD,EAAEE,SAAW,EAGzB,GAAwB,oBAAbT,EACP,MAAM,IAAIM,UAAUN,EAAW,sBAYnC,IATIC,IACAC,EAAID,GAIRE,EAAI,IAAIN,MAAMW,GAEdJ,EAAI,EAEGA,EAAII,GAAK,CACZ,IAAIE,EAAQC,EAMRP,KAAKG,IAELG,EAASH,EAAEH,GAGXO,EAAcX,EAASY,KAAKV,EAAGQ,EAAQN,EAAGG,GAO1CJ,EAAEC,GAAKO,GAGXP,IAGJ,OAAOD,IAIf,MAAMU,EAAUlB,EAAKkB,OAAU,WAE3B,MAAMC,EAAQ,aAurCdA,EAAMC,QAAU,CACZ,iBACA,kBACA,aACA,qBACA,2BAGJD,EAAMnD,MAAQ,CAAC,UAAW,KAAM,UAEhCmD,EAAME,QA/rCU,CACZC,gBAAiB,CACb,CACIC,MAAO,2CACPC,mBAAoB,MACpBC,aAAc,YAElB,CACIF,MAAO,0DACPC,mBAAoB,SACpBE,OAAO,GAEX,CACIH,MAAO,2CACPC,mBAAoB,8BACpBE,OAAO,GAEX,CACIH,MAAO,gDACPC,mBAAoB,kBAExB,CACID,MAAO,gCACPI,kBAAmB,kBAEvB,CACIJ,MAAO,2BACPC,mBAAoB,kBAExB,CACID,MAAO,oCACPC,mBAAoB,kBAExB,CACID,MAAO,kEACPC,mBAAoB,gBAExB,CACID,MAAO,yCACPC,mBAAoB,iBAExB,CACID,MAAO,yCACPC,mBAAoB,gBAExB,CACID,MAAO,0DACPC,mBAAoB,iBAExB,CACID,MAAO,0DACPC,mBAAoB,gBAExB,CACID,MAAO,kEACPC,mBAAoB,gBAExB,CACID,MAAO,qDACPC,mBAAoB,SACpBI,QAAQ,GAEZ,CACIL,MAAO,8DAEX,CACIA,MAAO,kCACPC,mBAAoB,QACpBE,OAAO,GAEX,CACIH,MAAO,sCACPC,mBAAoB,WACpBE,OAAO,GAEX,CACIH,MAAO,uCACPC,mBAAoB,YAExB,CACID,MAAO,wCACPC,mBAAoB,YAExB,CACID,MAAO,uCACPC,mBAAoB,YAExB,CACID,MAAO,4BACPC,mBAAoB,sBACpBE,OAAO,GAEX,CACIH,MAAO,wDACPC,mBAAoB,eACpBI,QAAQ,GAEZ,CACIL,MAAO,gDACPC,mBAAoB,gBAExB,CACID,MAAO,aACPC,mBAAoB,gBAExB,CACID,MAAO,+BACPC,mBAAoB,cAExB,CACID,MAAO,mCACPC,mBAAoB,cAExB,CACID,MAAO,sDACPC,mBAAoB,SAExB,CACID,MAAO,sCACPC,mBAAoB,SAExB,CACID,MAAO,iCACPC,mBAAoB,SAExB,CACID,MAAO,0BACPC,mBAAoB,SAExB,CACID,MAAO,yCACPC,mBAAoB,kBAExB,CACID,MAAO,WACPC,mBAAoB,SACpBE,OAAO,GAEX,CACIH,MAAO,+CACPC,mBAAoB,YACpBE,OAAO,GAEX,CACIH,MAAO,4DACPC,mBAAoB,WACpBE,OAAO,GAEX,CAC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CIF,MAAO,sBACPc,mBAAoB,QACpBZ,aAAc,MAElB,CACIF,MAAO,uBACPc,mBAAoB,QACpBZ,aAAc,MAElB,CACIF,MAAO,uBACPc,mBAAoB,QACpBZ,aAAc,MAElB,CACIF,MAAO,oBACPc,mBAAoB,QACpBZ,aAAc,MAElB,CACIF,MAAO,4BACPc,mBAAoB,QACpBZ,aAAc,MAElB,CACIF,MAAO,sBACPc,mBAAoB,QACpBZ,aAAc,MAElB,CACIF,MAAO,uBACPc,mBAAoB,QACpBZ,aAAc,MAElB,CACIF,MAAO,mBACPc,mBAAoB,QACpBZ,aAAc,MAElB,CACIF,MAAO,8BACPc,mBAAoB,gBAExB,CACId,MAAO,8BACPc,mBAAoB,gBAExB,CACId,MAAO,8BACPE,aAAc,YAElB,CACIF,MAAO,wBACPc,mBAAoB,cACpBZ,aAAc,YAElB,CACIF,MAAO,uBACPc,mBAAoB,cACpBZ,aAAc,YAElB,CACIF,MAAO,wBACPc,mBAAoB,aACpBZ,aAAc,WAElB,CACIF,MAAO,yBACPc,mBAAoB,aACpBZ,aAAc,WAElB,CACIF,MAAO,4BACPc,mBAAoB,aACpBZ,aAAc,WAElB,CACIF,MAAO,+BACPc,mBAAoB,aACpBZ,aAAc,WAElB,CACIF,MAAO,gCACPc,mBAAoB,cACpBX,OAAO,GAEX,CACIH,MAAO,gCACPc,mBAAoB,cACpBX,OAAO,GAEX,CACIH,MACI,wHACJc,mBAAoB,sBAExB,CACId,MACI,4gBACJc,mBAAoB,yBAExB,CACId,MACI,4hBACJc,mBAAoB,yBAExB,CACId,MACI,siBACJc,mBAAoB,yBAExB,CACId,MACI,wjBACJc,mBAAoB,yBAExB,CACId,MACI,4XACJc,mBAAoB,WAG5BC,wBAAyB,CACrB,iBACA,eACA,aACA,gBACA,QACA,YACA,uBACA,QACA,aACA,OACA,OACA,UACA,QACA,QACA,WACA,UACA,SACA,eACA,OACA,OACA,aACA,WACA,SACA,WACA,UACA,SACA,UACA,OACA,gBACA,oBACA,aACA,mBAgBH,WACG,MAAMC,EAAU,GAIhB,OAHApB,EAAMC,QAAQhB,IAAKo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","file":"static/js/main.83a7116a.chunk.js","sourcesContent":["import { types, Instance, SnapshotIn, SnapshotOut } from 'mobx-state-tree';\nimport history from 'tools/history';\n\nexport const SEARCH = 'SEARCH';\nexport const CATALOG = 'CATALOG';\nexport const CART = 'CART';\nexport const ADDRESS_SIMPLE = 'ADDRESS_SIMPLE';\nexport const STATUS = 'STATUS';\nexport const PROMO = 'PROMO';\nexport const NO_AREA = 'NO_AREA';\n\nexport const routes = {\n    [SEARCH]: '/search',\n    [CATALOG]: '/catalog',\n    [CART]: '/cart',\n    [ADDRESS_SIMPLE]: '/address-simple',\n    [STATUS]: '/status',\n    [PROMO]: '/promo',\n    [NO_AREA]: '/no-area',\n};\n\nconst Ui = types\n    .model('Ui', {\n        page: types.optional(types.enumeration(Object.values(routes)), routes.PROMO),\n        previous: types.maybeNull(types.enumeration(Object.values(routes))),\n        visibles: types.array(types.string),\n    })\n    .actions((self) => {\n        const ui = self;\n\n        const gotoPage = (to: string) => {\n            ui.previous = ui.page;\n            ui.page = to;\n            history.push(to);\n        };\n\n        const setVisible = (itemId: string): void => {\n            ui.visibles.push(itemId);\n        };\n\n        const removeVisible = (itemId: string): void => {\n            ui.visibles.splice(ui.visibles.indexOf(itemId), 1);\n        };\n\n        const getIndex = (itemId: string): number => ui.visibles.indexOf(itemId) + 1;\n\n        const goToCart = () => {\n            gotoPage(routes.CART);\n            window.AssistantClient.sendData({\n                // eslint-disable-next-line @typescript-eslint/camelcase\n                action_id: 'GO_TO_CART',\n            });\n        };\n\n        return {\n            gotoPage,\n            goToCart,\n            setVisible,\n            removeVisible,\n            getIndex,\n        };\n    });\n\nexport type UiModel = Instance<typeof Ui>;\nexport type UiSnapshotOut = SnapshotOut<typeof Ui>;\nexport type UiSnapshotIn = SnapshotIn<typeof Ui>;\n\nexport default Ui;\n","/* eslint-disable */\n/**\n * Detect.js: User-Agent Parser\n * https://github.com/darcyclarke/Detect.js\n * Dual licensed under the MIT and GPL licenses.\n *\n * @version 2.2.2\n * @author Darcy Clarke\n * @url http://darcyclarke.me\n * @createdat Mon Oct 26 2015 08:21:54 GMT-0200 (Horrio brasileiro de vero)\n *\n * Based on UA-Parser (https://github.com/tobie/ua-parser) by Tobie Langel\n *\n * Example Usage:\n * var agentInfo = detect.parse(navigator.userAgent);\n * console.log(agentInfo.browser.family); // Chrome\n *\n */\n(function (root, undefined) {\n    // Shim Array.prototype.map if necessary\n    // Production steps of ECMA-262, Edition 5, 15.4.4.19\n    // Reference: http://es5.github.com/#x15.4.4.19\n    if (!Array.prototype.map) {\n        Array.prototype.map = function (callback, thisArg) {\n            let T, A, k;\n            if (this == null) {\n                throw new TypeError(' this is null or not defined');\n            }\n            // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n            const O = Object(this);\n            // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\n            // 3. Let len be ToUint32(lenValue).\n            const len = O.length >>> 0;\n            // 4. If IsCallable(callback) is false, throw a TypeError exception.\n            // See: http://es5.github.com/#x9.11\n            if (typeof callback !== 'function') {\n                throw new TypeError(callback + ' is not a function');\n            }\n            // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\n            if (thisArg) {\n                T = thisArg;\n            }\n            // 6. Let A be a new array created as if by the expression new Array(len) where Array is\n            // the standard built-in constructor with that name and len is the value of len.\n            A = new Array(len);\n            // 7. Let k be 0\n            k = 0;\n            // 8. Repeat, while k < len\n            while (k < len) {\n                var kValue, mappedValue;\n                // a. Let Pk be ToString(k).\n                //   This is implicit for LHS operands of the in operator\n                // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\n                //   This step can be combined with c\n                // c. If kPresent is true, then\n                if (k in O) {\n                    // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\n                    kValue = O[k];\n                    // ii. Let mappedValue be the result of calling the Call internal method of callback\n                    // with T as the this value and argument list containing kValue, k, and O.\n                    mappedValue = callback.call(T, kValue, k, O);\n                    // iii. Call the DefineOwnProperty internal method of A with arguments\n                    // Pk, Property Descriptor {Value: mappedValue, : true, Enumerable: true, Configurable: true},\n                    // and false.\n                    // In browsers that support Object.defineProperty, use the following:\n                    // Object.defineProperty(A, Pk, { value: mappedValue, writable: true, enumerable: true, configurable: true });\n                    // For best browser support, use the following:\n                    A[k] = mappedValue;\n                }\n                // d. Increase k by 1.\n                k++;\n            }\n            // 9. return A\n            return A;\n        };\n    }\n    // Detect\n    const detect = (root.detect = (function () {\n        // Context\n        const _this = function () {};\n        // Regexes\n        const regexes = {\n            browser_parsers: [\n                {\n                    regex: '^(Opera)/(\\\\d+)\\\\.(\\\\d+) \\\\(Nintendo Wii',\n                    family_replacement: 'Wii',\n                    manufacturer: 'Nintendo',\n                },\n                {\n                    regex: '(SeaMonkey|Camino)/(\\\\d+)\\\\.(\\\\d+)\\\\.?([ab]?\\\\d+[a-z]*)',\n                    family_replacement: 'Camino',\n                    other: true,\n                },\n                {\n                    regex: '(Pale[Mm]oon)/(\\\\d+)\\\\.(\\\\d+)\\\\.?(\\\\d+)?',\n                    family_replacement: 'Pale Moon (Firefox Variant)',\n                    other: true,\n                },\n                {\n                    regex: '(Fennec)/(\\\\d+)\\\\.(\\\\d+)\\\\.?([ab]?\\\\d+[a-z]*)',\n                    family_replacement: 'Firefox Mobile',\n                },\n                {\n                    regex: '(Fennec)/(\\\\d+)\\\\.(\\\\d+)(pre)',\n                    family_replacment: 'Firefox Mobile',\n                },\n                {\n                    regex: '(Fennec)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Firefox Mobile',\n                },\n                {\n                    regex: 'Mobile.*(Firefox)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Firefox Mobile',\n                },\n                {\n                    regex: '(Namoroka|Shiretoko|Minefield)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+(?:pre)?)',\n                    family_replacement: 'Firefox ($1)',\n                },\n                {\n                    regex: '(Firefox)/(\\\\d+)\\\\.(\\\\d+)(a\\\\d+[a-z]*)',\n                    family_replacement: 'Firefox Alpha',\n                },\n                {\n                    regex: '(Firefox)/(\\\\d+)\\\\.(\\\\d+)(b\\\\d+[a-z]*)',\n                    family_replacement: 'Firefox Beta',\n                },\n                {\n                    regex: '(Firefox)-(?:\\\\d+\\\\.\\\\d+)?/(\\\\d+)\\\\.(\\\\d+)(a\\\\d+[a-z]*)',\n                    family_replacement: 'Firefox Alpha',\n                },\n                {\n                    regex: '(Firefox)-(?:\\\\d+\\\\.\\\\d+)?/(\\\\d+)\\\\.(\\\\d+)(b\\\\d+[a-z]*)',\n                    family_replacement: 'Firefox Beta',\n                },\n                {\n                    regex: '(Namoroka|Shiretoko|Minefield)/(\\\\d+)\\\\.(\\\\d+)([ab]\\\\d+[a-z]*)?',\n                    family_replacement: 'Firefox ($1)',\n                },\n                {\n                    regex: '(Firefox).*Tablet browser (\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'MicroB',\n                    tablet: true,\n                },\n                {\n                    regex: '(MozillaDeveloperPreview)/(\\\\d+)\\\\.(\\\\d+)([ab]\\\\d+[a-z]*)?',\n                },\n                {\n                    regex: '(Flock)/(\\\\d+)\\\\.(\\\\d+)(b\\\\d+?)',\n                    family_replacement: 'Flock',\n                    other: true,\n                },\n                {\n                    regex: '(RockMelt)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Rockmelt',\n                    other: true,\n                },\n                {\n                    regex: '(Navigator)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Netscape',\n                },\n                {\n                    regex: '(Navigator)/(\\\\d+)\\\\.(\\\\d+)([ab]\\\\d+)',\n                    family_replacement: 'Netscape',\n                },\n                {\n                    regex: '(Netscape6)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Netscape',\n                },\n                {\n                    regex: '(MyIBrow)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'My Internet Browser',\n                    other: true,\n                },\n                {\n                    regex: '(Opera Tablet).*Version/(\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?',\n                    family_replacement: 'Opera Tablet',\n                    tablet: true,\n                },\n                {\n                    regex: '(Opera)/.+Opera Mobi.+Version/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Opera Mobile',\n                },\n                {\n                    regex: 'Opera Mobi',\n                    family_replacement: 'Opera Mobile',\n                },\n                {\n                    regex: '(Opera Mini)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Opera Mini',\n                },\n                {\n                    regex: '(Opera Mini)/att/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Opera Mini',\n                },\n                {\n                    regex: '(Opera)/9.80.*Version/(\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?',\n                    family_replacement: 'Opera',\n                },\n                {\n                    regex: '(OPR)/(\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?',\n                    family_replacement: 'Opera',\n                },\n                {\n                    regex: '(webOSBrowser)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'webOS',\n                },\n                {\n                    regex: '(webOS)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'webOS',\n                },\n                {\n                    regex: '(wOSBrowser).+TouchPad/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'webOS TouchPad',\n                },\n                {\n                    regex: '(luakit)',\n                    family_replacement: 'LuaKit',\n                    other: true,\n                },\n                {\n                    regex: '(Lightning)/(\\\\d+)\\\\.(\\\\d+)([ab]?\\\\d+[a-z]*)',\n                    family_replacement: 'Lightning',\n                    other: true,\n                },\n                {\n                    regex: '(Firefox)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+(?:pre)?) \\\\(Swiftfox\\\\)',\n                    family_replacement: 'Swiftfox',\n                    other: true,\n                },\n                {\n                    regex: '(Firefox)/(\\\\d+)\\\\.(\\\\d+)([ab]\\\\d+[a-z]*)? \\\\(Swiftfox\\\\)',\n                    family_replacement: 'Swiftfox',\n                    other: true,\n                },\n                {\n                    regex: 'rekonq',\n                    family_replacement: 'Rekonq',\n                    other: true,\n                },\n                {\n                    regex: '(conkeror|Conkeror)/(\\\\d+)\\\\.(\\\\d+)\\\\.?(\\\\d+)?',\n                    family_replacement: 'Conkeror',\n                    other: true,\n                },\n                {\n                    regex: '(konqueror)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Konqueror',\n                    other: true,\n                },\n                {\n                    regex: '(WeTab)-Browser',\n                    family_replacement: 'WeTab',\n                    other: true,\n                },\n                {\n                    regex: '(Comodo_Dragon)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Comodo Dragon',\n                    other: true,\n                },\n                {\n                    regex: '(YottaaMonitor)',\n                    family_replacement: 'Yottaa Monitor',\n                    other: true,\n                },\n                {\n                    regex: '(Kindle)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Kindle',\n                },\n                {\n                    regex: '(Symphony) (\\\\d+).(\\\\d+)',\n                    family_replacement: 'Symphony',\n                    other: true,\n                },\n                {\n                    regex: 'Minimo',\n                    family_replacement: 'Minimo',\n                    other: true,\n                },\n                {\n                    regex: '(Edge)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Edge',\n                },\n                {\n                    regex: '(CrMo)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Chrome Mobile',\n                },\n                {\n                    regex: '(CriOS)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Chrome Mobile iOS',\n                },\n                {\n                    regex: '(Chrome)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+) Mobile',\n                    family_replacement: 'Chrome Mobile',\n                },\n                {\n                    regex: '(chromeframe)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Chrome Frame',\n                },\n                {\n                    regex: '(UC Browser)(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'UC Browser',\n                    other: true,\n                },\n                {\n                    regex: '(SLP Browser)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Tizen Browser',\n                    other: true,\n                },\n                {\n                    regex: '(Epiphany)/(\\\\d+)\\\\.(\\\\d+).(\\\\d+)',\n                    family_replacement: 'Epiphany',\n                    other: true,\n                },\n                {\n                    regex: '(SE 2\\\\.X) MetaSr (\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Sogou Explorer',\n                    other: true,\n                },\n                {\n                    regex: '(Pingdom.com_bot_version_)(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'PingdomBot',\n                    other: true,\n                },\n                {\n                    regex: '(facebookexternalhit)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'FacebookBot',\n                },\n                {\n                    regex: '(Twitterbot)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'TwitterBot',\n                },\n                {\n                    regex:\n                        '(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                },\n                {\n                    regex:\n                        '(Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\\\d+)\\\\.(\\\\d+)',\n                },\n                {\n                    regex:\n                        '(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                },\n                {\n                    regex: '(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\\\d+)\\\\.(\\\\d+)\\\\.?(\\\\d+)?',\n                },\n                {\n                    regex: '(Android) Donut',\n                    v2_replacement: '2',\n                    v1_replacement: '1',\n                },\n                {\n                    regex: '(Android) Eclair',\n                    v2_replacement: '1',\n                    v1_replacement: '2',\n                },\n                {\n                    regex: '(Android) Froyo',\n                    v2_replacement: '2',\n                    v1_replacement: '2',\n                },\n                {\n                    regex: '(Android) Gingerbread',\n                    v2_replacement: '3',\n                    v1_replacement: '2',\n                },\n                {\n                    regex: '(Android) Honeycomb',\n                    v1_replacement: '3',\n                },\n                {\n                    regex: '(IEMobile)[ /](\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'IE Mobile',\n                },\n                {\n                    regex: '(MSIE) (\\\\d+)\\\\.(\\\\d+).*XBLWP7',\n                    family_replacement: 'IE Large Screen',\n                },\n                {\n                    regex: '(Firefox)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                },\n                {\n                    regex: '(Firefox)/(\\\\d+)\\\\.(\\\\d+)(pre|[ab]\\\\d+[a-z]*)?',\n                },\n                {\n                    regex: '(Obigo)InternetBrowser',\n                    other: true,\n                },\n                {\n                    regex: '(Obigo)\\\\-Browser',\n                    other: true,\n                },\n                {\n                    regex: '(Obigo|OBIGO)[^\\\\d]*(\\\\d+)(?:.(\\\\d+))?',\n                    other: true,\n                },\n                {\n                    regex: '(MAXTHON|Maxthon) (\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Maxthon',\n                    other: true,\n                },\n                {\n                    regex: '(Maxthon|MyIE2|Uzbl|Shiira)',\n                    v1_replacement: '0',\n                    other: true,\n                },\n                {\n                    regex: '(PLAYSTATION) (\\\\d+)',\n                    family_replacement: 'PlayStation',\n                    manufacturer: 'Sony',\n                },\n                {\n                    regex: '(PlayStation Portable)[^\\\\d]+(\\\\d+).(\\\\d+)',\n                    manufacturer: 'Sony',\n                },\n                {\n                    regex: '(BrowseX) \\\\((\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(POLARIS)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Polaris',\n                    other: true,\n                },\n                {\n                    regex: '(Embider)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Polaris',\n                    other: true,\n                },\n                {\n                    regex: '(BonEcho)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Bon Echo',\n                    other: true,\n                },\n                {\n                    regex: '(iPod).+Version/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Mobile Safari',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPod).*Version/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Mobile Safari',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPod)',\n                    family_replacement: 'Mobile Safari',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPhone).*Version/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Mobile Safari',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPhone).*Version/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Mobile Safari',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPhone)',\n                    family_replacement: 'Mobile Safari',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPad).*Version/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Mobile Safari',\n                    tablet: true,\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPad).*Version/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Mobile Safari',\n                    tablet: true,\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPad)',\n                    family_replacement: 'Mobile Safari',\n                    tablet: true,\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(AvantGo) (\\\\d+).(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(Avant)',\n                    v1_replacement: '1',\n                    other: true,\n                },\n                {\n                    regex: '^(Nokia)',\n                    family_replacement: 'Nokia Services (WAP) Browser',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(NokiaBrowser)/(\\\\d+)\\\\.(\\\\d+).(\\\\d+)\\\\.(\\\\d+)',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(NokiaBrowser)/(\\\\d+)\\\\.(\\\\d+).(\\\\d+)',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(NokiaBrowser)/(\\\\d+)\\\\.(\\\\d+)',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(BrowserNG)/(\\\\d+)\\\\.(\\\\d+).(\\\\d+)',\n                    family_replacement: 'NokiaBrowser',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(Series60)/5\\\\.0',\n                    v2_replacement: '0',\n                    v1_replacement: '7',\n                    family_replacement: 'NokiaBrowser',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(Series60)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Nokia OSS Browser',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(S40OviBrowser)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Nokia Series 40 Ovi Browser',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(Nokia)[EN]?(\\\\d+)',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(PlayBook).+RIM Tablet OS (\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Blackberry WebKit',\n                    tablet: true,\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(Black[bB]erry).+Version/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Blackberry WebKit',\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: '(Black[bB]erry)\\\\s?(\\\\d+)',\n                    family_replacement: 'Blackberry',\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: '(OmniWeb)/v(\\\\d+)\\\\.(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(Blazer)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Palm Blazer',\n                    manufacturer: 'Palm',\n                },\n                {\n                    regex: '(Pre)/(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'Palm Pre',\n                    manufacturer: 'Palm',\n                },\n                {\n                    regex: '(Links) \\\\((\\\\d+)\\\\.(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(QtWeb) Internet Browser/(\\\\d+)\\\\.(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(Silk)/(\\\\d+)\\\\.(\\\\d+)(?:\\\\.([0-9\\\\-]+))?',\n                    other: true,\n                    tablet: true,\n                },\n                {\n                    regex: '(AppleWebKit)/(\\\\d+)\\\\.?(\\\\d+)?\\\\+ .* Version/\\\\d+\\\\.\\\\d+.\\\\d+ Safari/',\n                    family_replacement: 'WebKit Nightly',\n                },\n                {\n                    regex: '(Version)/(\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?.*Safari/',\n                    family_replacement: 'Safari',\n                },\n                {\n                    regex: '(Safari)/\\\\d+',\n                },\n                {\n                    regex: '(OLPC)/Update(\\\\d+)\\\\.(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(OLPC)/Update()\\\\.(\\\\d+)',\n                    v1_replacement: '0',\n                    other: true,\n                },\n                {\n                    regex: '(SEMC\\\\-Browser)/(\\\\d+)\\\\.(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(Teleca)',\n                    family_replacement: 'Teleca Browser',\n                    other: true,\n                },\n                {\n                    regex: 'Trident(.*)rv.(\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'IE',\n                },\n                {\n                    regex: '(MSIE) (\\\\d+)\\\\.(\\\\d+)',\n                    family_replacement: 'IE',\n                },\n            ],\n            os_parsers: [\n                {\n                    regex: '(Android) (\\\\d+)\\\\.(\\\\d+)(?:[.\\\\-]([a-z0-9]+))?',\n                },\n                {\n                    regex: '(Android)\\\\-(\\\\d+)\\\\.(\\\\d+)(?:[.\\\\-]([a-z0-9]+))?',\n                },\n                {\n                    regex: '(Android) Donut',\n                    os_v2_replacement: '2',\n                    os_v1_replacement: '1',\n                },\n                {\n                    regex: '(Android) Eclair',\n                    os_v2_replacement: '1',\n                    os_v1_replacement: '2',\n                },\n                {\n                    regex: '(Android) Froyo',\n                    os_v2_replacement: '2',\n                    os_v1_replacement: '2',\n                },\n                {\n                    regex: '(Android) Gingerbread',\n                    os_v2_replacement: '3',\n                    os_v1_replacement: '2',\n                },\n                {\n                    regex: '(Android) Honeycomb',\n                    os_v1_replacement: '3',\n                },\n                {\n                    regex: '(Silk-Accelerated=[a-z]{4,5})',\n                    os_replacement: 'Android',\n                },\n                {\n                    regex: '(Windows Phone 6\\\\.5)',\n                },\n                {\n                    regex: '(Windows (?:NT 5\\\\.2|NT 5\\\\.1))',\n                    os_replacement: 'Windows XP',\n                },\n                {\n                    regex: '(XBLWP7)',\n                    os_replacement: 'Windows Phone OS',\n                },\n                {\n                    regex: '(Windows NT 6\\\\.1)',\n                    os_replacement: 'Windows 7',\n                },\n                {\n                    regex: '(Windows NT 6\\\\.0)',\n                    os_replacement: 'Windows Vista',\n                },\n                {\n                    regex:\n                        '(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\\\.0|Windows Vista|Windows 2000)',\n                },\n                {\n                    regex: '(Windows NT 6\\\\.4|Windows NT 10\\\\.0)',\n                    os_replacement: 'Windows 10',\n                },\n                {\n                    regex: '(Windows NT 6\\\\.2)',\n                    os_replacement: 'Windows 8',\n                },\n                {\n                    regex: '(Windows Phone 8)',\n                    os_replacement: 'Windows Phone 8',\n                },\n                {\n                    regex: '(Windows NT 5\\\\.0)',\n                    os_replacement: 'Windows 2000',\n                },\n                {\n                    regex: '(Windows Phone OS) (\\\\d+)\\\\.(\\\\d+)',\n                },\n                {\n                    regex: '(Windows ?Mobile)',\n                    os_replacement: 'Windows Mobile',\n                },\n                {\n                    regex: '(WinNT4.0)',\n                    os_replacement: 'Windows NT 4.0',\n                },\n                {\n                    regex: '(Win98)',\n                    os_replacement: 'Windows 98',\n                },\n                {\n                    regex: '(Tizen)/(\\\\d+)\\\\.(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(Mac OS X) (\\\\d+)[_.](\\\\d+)(?:[_.](\\\\d+))?',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(?:PPC|Intel) (Mac OS X)',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(CPU OS|iPhone OS) (\\\\d+)_(\\\\d+)(?:_(\\\\d+))?',\n                    os_replacement: 'iOS',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPhone|iPad|iPod); Opera',\n                    os_replacement: 'iOS',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPad); Opera',\n                    tablet: true,\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPhone|iPad|iPod).*Mac OS X.*Version/(\\\\d+)\\\\.(\\\\d+)',\n                    os_replacement: 'iOS',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(CrOS) [a-z0-9_]+ (\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?',\n                    os_replacement: 'Chrome OS',\n                },\n                {\n                    regex: '(Debian)-(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?',\n                    other: true,\n                },\n                {\n                    regex: '(Linux Mint)(?:/(\\\\d+))?',\n                    other: true,\n                },\n                {\n                    regex: '(Mandriva)(?: Linux)?/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?',\n                    other: true,\n                },\n                {\n                    regex: '(Symbian[Oo][Ss])/(\\\\d+)\\\\.(\\\\d+)',\n                    os_replacement: 'Symbian OS',\n                },\n                {\n                    regex: '(Symbian/3).+NokiaBrowser/7\\\\.3',\n                    os_replacement: 'Symbian^3 Anna',\n                },\n                {\n                    regex: '(Symbian/3).+NokiaBrowser/7\\\\.4',\n                    os_replacement: 'Symbian^3 Belle',\n                },\n                {\n                    regex: '(Symbian/3)',\n                    os_replacement: 'Symbian^3',\n                },\n                {\n                    regex: '(Series 60|SymbOS|S60)',\n                    os_replacement: 'Symbian OS',\n                },\n                {\n                    regex: '(MeeGo)',\n                    other: true,\n                },\n                {\n                    regex: 'Symbian [Oo][Ss]',\n                    os_replacement: 'Symbian OS',\n                },\n                {\n                    regex: '(Black[Bb]erry)[0-9a-z]+/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?',\n                    os_replacement: 'BlackBerry OS',\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: '(Black[Bb]erry).+Version/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?',\n                    os_replacement: 'BlackBerry OS',\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: '(RIM Tablet OS) (\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    os_replacement: 'BlackBerry Tablet OS',\n                    tablet: true,\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: '(Play[Bb]ook)',\n                    os_replacement: 'BlackBerry Tablet OS',\n                    tablet: true,\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: '(Black[Bb]erry)',\n                    os_replacement: 'Blackberry OS',\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: '(webOS|hpwOS)/(\\\\d+)\\\\.(\\\\d+)(?:\\\\.(\\\\d+))?',\n                    os_replacement: 'webOS',\n                },\n                {\n                    regex: '(SUSE|Fedora|Red Hat|PCLinuxOS)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(SUSE|Fedora|Red Hat|Puppy|PCLinuxOS|CentOS)/(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)',\n                    other: true,\n                },\n                {\n                    regex: '(Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Red Hat|Slackware)/(\\\\d+)\\\\.(\\\\d+)',\n                },\n                {\n                    regex: '(Windows|OpenBSD|FreeBSD|NetBSD|Ubuntu|Kubuntu|Android|Arch Linux|CentOS|WeTab|Slackware)',\n                },\n                {\n                    regex: '(Linux|BSD)',\n                    other: true,\n                },\n            ],\n            mobile_os_families: ['Windows Phone 6.5', 'Windows CE', 'Symbian OS'],\n            device_parsers: [\n                {\n                    regex: 'HTC ([A-Z][a-z0-9]+) Build',\n                    device_replacement: 'HTC $1',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: 'HTC ([A-Z][a-z0-9 ]+) \\\\d+\\\\.\\\\d+\\\\.\\\\d+\\\\.\\\\d+',\n                    device_replacement: 'HTC $1',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: 'HTC_Touch_([A-Za-z0-9]+)',\n                    device_replacement: 'HTC Touch ($1)',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: 'USCCHTC(\\\\d+)',\n                    device_replacement: 'HTC $1 (US Cellular)',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: 'Sprint APA(9292)',\n                    device_replacement: 'HTC $1 (Sprint)',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: 'HTC ([A-Za-z0-9]+ [A-Z])',\n                    device_replacement: 'HTC $1',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: 'HTC-([A-Za-z0-9]+)',\n                    device_replacement: 'HTC $1',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: 'HTC_([A-Za-z0-9]+)',\n                    device_replacement: 'HTC $1',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: 'HTC ([A-Za-z0-9]+)',\n                    device_replacement: 'HTC $1',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: '(ADR[A-Za-z0-9]+)',\n                    device_replacement: 'HTC $1',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: '(HTC)',\n                    manufacturer: 'HTC',\n                },\n                {\n                    regex: 'SonyEricsson([A-Za-z0-9]+)/',\n                    device_replacement: 'Ericsson $1',\n                    other: true,\n                    manufacturer: 'Sony',\n                },\n                {\n                    regex: 'Android[\\\\- ][\\\\d]+\\\\.[\\\\d]+\\\\; [A-Za-z]{2}\\\\-[A-Za-z]{2}\\\\; WOWMobile (.+) Build',\n                },\n                {\n                    regex: 'Android[\\\\- ][\\\\d]+\\\\.[\\\\d]+\\\\.[\\\\d]+; [A-Za-z]{2}\\\\-[A-Za-z]{2}\\\\; (.+) Build',\n                },\n                {\n                    regex: 'Android[\\\\- ][\\\\d]+\\\\.[\\\\d]+\\\\-update1\\\\; [A-Za-z]{2}\\\\-[A-Za-z]{2}\\\\; (.+) Build',\n                },\n                {\n                    regex: 'Android[\\\\- ][\\\\d]+\\\\.[\\\\d]+\\\\; [A-Za-z]{2}\\\\-[A-Za-z]{2}\\\\; (.+) Build',\n                },\n                {\n                    regex: 'Android[\\\\- ][\\\\d]+\\\\.[\\\\d]+\\\\.[\\\\d]+; (.+) Build',\n                },\n                {\n                    regex: 'NokiaN([0-9]+)',\n                    device_replacement: 'Nokia N$1',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: 'Nokia([A-Za-z0-9\\\\v-]+)',\n                    device_replacement: 'Nokia $1',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: 'NOKIA ([A-Za-z0-9\\\\-]+)',\n                    device_replacement: 'Nokia $1',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: 'Nokia ([A-Za-z0-9\\\\-]+)',\n                    device_replacement: 'Nokia $1',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: 'Lumia ([A-Za-z0-9\\\\-]+)',\n                    device_replacement: 'Lumia $1',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: 'Symbian',\n                    device_replacement: 'Nokia',\n                    manufacturer: 'Nokia',\n                },\n                {\n                    regex: '(PlayBook).+RIM Tablet OS',\n                    device_replacement: 'Blackberry Playbook',\n                    tablet: true,\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: '(Black[Bb]erry [0-9]+);',\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: 'Black[Bb]erry([0-9]+)',\n                    device_replacement: 'BlackBerry $1',\n                    manufacturer: 'RIM',\n                },\n                {\n                    regex: '(Pre)/(\\\\d+)\\\\.(\\\\d+)',\n                    device_replacement: 'Palm Pre',\n                    manufacturer: 'Palm',\n                },\n                {\n                    regex: '(Pixi)/(\\\\d+)\\\\.(\\\\d+)',\n                    device_replacement: 'Palm Pixi',\n                    manufacturer: 'Palm',\n                },\n                {\n                    regex: '(Touchpad)/(\\\\d+)\\\\.(\\\\d+)',\n                    device_replacement: 'HP Touchpad',\n                    manufacturer: 'HP',\n                },\n                {\n                    regex: 'HPiPAQ([A-Za-z0-9]+)/(\\\\d+).(\\\\d+)',\n                    device_replacement: 'HP iPAQ $1',\n                    manufacturer: 'HP',\n                },\n                {\n                    regex: 'Palm([A-Za-z0-9]+)',\n                    device_replacement: 'Palm $1',\n                    manufacturer: 'Palm',\n                },\n                {\n                    regex: 'Treo([A-Za-z0-9]+)',\n                    device_replacement: 'Palm Treo $1',\n                    manufacturer: 'Palm',\n                },\n                {\n                    regex: 'webOS.*(P160UNA)/(\\\\d+).(\\\\d+)',\n                    device_replacement: 'HP Veer',\n                    manufacturer: 'HP',\n                },\n                {\n                    regex: '(Kindle Fire)',\n                    manufacturer: 'Amazon',\n                },\n                {\n                    regex: '(Kindle)',\n                    manufacturer: 'Amazon',\n                },\n                {\n                    regex: '(Silk)/(\\\\d+)\\\\.(\\\\d+)(?:\\\\.([0-9\\\\-]+))?',\n                    device_replacement: 'Kindle Fire',\n                    tablet: true,\n                    manufacturer: 'Amazon',\n                },\n                {\n                    regex: '(iPad) Simulator;',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPad);',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPod);',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPhone) Simulator;',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: '(iPhone);',\n                    manufacturer: 'Apple',\n                },\n                {\n                    regex: 'Nexus\\\\ ([A-Za-z0-9\\\\-]+)',\n                    device_replacement: 'Nexus $1',\n                },\n                {\n                    regex: 'acer_([A-Za-z0-9]+)_',\n                    device_replacement: 'Acer $1',\n                    manufacturer: 'Acer',\n                },\n                {\n                    regex: 'acer_([A-Za-z0-9]+)_',\n                    device_replacement: 'Acer $1',\n                    manufacturer: 'Acer',\n                },\n                {\n                    regex: 'Amoi\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Amoi $1',\n                    other: true,\n                    manufacturer: 'Amoi',\n                },\n                {\n                    regex: 'AMOI\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Amoi $1',\n                    other: true,\n                    manufacturer: 'Amoi',\n                },\n                {\n                    regex: 'Asus\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Asus $1',\n                    manufacturer: 'Asus',\n                },\n                {\n                    regex: 'ASUS\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Asus $1',\n                    manufacturer: 'Asus',\n                },\n                {\n                    regex: 'BIRD\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Bird $1',\n                    other: true,\n                },\n                {\n                    regex: 'BIRD\\\\.([A-Za-z0-9]+)',\n                    device_replacement: 'Bird $1',\n                    other: true,\n                },\n                {\n                    regex: 'BIRD ([A-Za-z0-9]+)',\n                    device_replacement: 'Bird $1',\n                    other: true,\n                },\n                {\n                    regex: 'Dell ([A-Za-z0-9]+)',\n                    device_replacement: 'Dell $1',\n                    manufacturer: 'Dell',\n                },\n                {\n                    regex: 'DoCoMo/2\\\\.0 ([A-Za-z0-9]+)',\n                    device_replacement: 'DoCoMo $1',\n                    other: true,\n                },\n                {\n                    regex: '([A-Za-z0-9]+)\\\\_W\\\\;FOMA',\n                    device_replacement: 'DoCoMo $1',\n                    other: true,\n                },\n                {\n                    regex: '([A-Za-z0-9]+)\\\\;FOMA',\n                    device_replacement: 'DoCoMo $1',\n                    other: true,\n                },\n                {\n                    regex: 'vodafone([A-Za-z0-9]+)',\n                    device_replacement: 'Huawei Vodafone $1',\n                    other: true,\n                },\n                {\n                    regex: 'i\\\\-mate ([A-Za-z0-9]+)',\n                    device_replacement: 'i-mate $1',\n                    other: true,\n                },\n                {\n                    regex: 'Kyocera\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Kyocera $1',\n                    other: true,\n                },\n                {\n                    regex: 'KWC\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Kyocera $1',\n                    other: true,\n                },\n                {\n                    regex: 'Lenovo\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Lenovo $1',\n                    manufacturer: 'Lenovo',\n                },\n                {\n                    regex: 'Lenovo\\\\_([A-Za-z0-9]+)',\n                    device_replacement: 'Lenovo $1',\n                    manufacturer: 'Levovo',\n                },\n                {\n                    regex: 'LG/([A-Za-z0-9]+)',\n                    device_replacement: 'LG $1',\n                    manufacturer: 'LG',\n                },\n                {\n                    regex: 'LG-LG([A-Za-z0-9]+)',\n                    device_replacement: 'LG $1',\n                    manufacturer: 'LG',\n                },\n                {\n                    regex: 'LGE-LG([A-Za-z0-9]+)',\n                    device_replacement: 'LG $1',\n                    manufacturer: 'LG',\n                },\n                {\n                    regex: 'LGE VX([A-Za-z0-9]+)',\n                    device_replacement: 'LG $1',\n                    manufacturer: 'LG',\n                },\n                {\n                    regex: 'LG ([A-Za-z0-9]+)',\n                    device_replacement: 'LG $1',\n                    manufacturer: 'LG',\n                },\n                {\n                    regex: 'LGE LG\\\\-AX([A-Za-z0-9]+)',\n                    device_replacement: 'LG $1',\n                    manufacturer: 'LG',\n                },\n                {\n                    regex: 'LG\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'LG $1',\n                    manufacturer: 'LG',\n                },\n                {\n                    regex: 'LGE\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'LG $1',\n                    manufacturer: 'LG',\n                },\n                {\n                    regex: 'LG([A-Za-z0-9]+)',\n                    device_replacement: 'LG $1',\n                    manufacturer: 'LG',\n                },\n                {\n                    regex: '(KIN)\\\\.One (\\\\d+)\\\\.(\\\\d+)',\n                    device_replacement: 'Microsoft $1',\n                },\n                {\n                    regex: '(KIN)\\\\.Two (\\\\d+)\\\\.(\\\\d+)',\n                    device_replacement: 'Microsoft $1',\n                },\n                {\n                    regex: '(Motorola)\\\\-([A-Za-z0-9]+)',\n                    manufacturer: 'Motorola',\n                },\n                {\n                    regex: 'MOTO\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Motorola $1',\n                    manufacturer: 'Motorola',\n                },\n                {\n                    regex: 'MOT\\\\-([A-Za-z0-9]+)',\n                    device_replacement: 'Motorola $1',\n                    manufacturer: 'Motorola',\n                },\n                {\n                    regex: 'Philips([A-Za-z0-9]+)',\n                    device_replacement: 'Philips $1',\n                    manufacturer: 'Philips',\n                },\n                {\n                    regex: 'Philips ([A-Za-z0-9]+)',\n                    device_replacement: 'Philips $1',\n                    manufacturer: 'Philips',\n                },\n                {\n                    regex: 'SAMSUNG-([A-Za-z0-9\\\\-]+)',\n                    device_replacement: 'Samsung $1',\n                    manufacturer: 'Samsung',\n                },\n                {\n                    regex: 'SAMSUNG\\\\; ([A-Za-z0-9\\\\-]+)',\n                    device_replacement: 'Samsung $1',\n                    manufacturer: 'Samsung',\n                },\n                {\n                    regex: 'Softbank/1\\\\.0/([A-Za-z0-9]+)',\n                    device_replacement: 'Softbank $1',\n                    other: true,\n                },\n                {\n                    regex: 'Softbank/2\\\\.0/([A-Za-z0-9]+)',\n                    device_replacement: 'Softbank $1',\n                    other: true,\n                },\n                {\n                    regex:\n                        '(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)',\n                    device_replacement: 'Generic Smartphone',\n                },\n                {\n                    regex:\n                        '^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\\\-|airn|alav|asus|attw|au\\\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\\\-n|bw\\\\-u|beck|benq|bilb|blac|c55/|cdm\\\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\\\-s|dica|ds\\\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\\\-|fly\\\\_|g\\\\-mo|g1 u|g560|gf\\\\-5|grun|gene|go.w|good|grad|hcit|hd\\\\-m|hd\\\\-p|hd\\\\-t|hei\\\\-|hp i|hpip|hs\\\\-c|htc |htc\\\\-|htca|htcg)',\n                    device_replacement: 'Generic Feature Phone',\n                },\n                {\n                    regex:\n                        '^(htcp|htcs|htct|htc\\\\_|haie|hita|huaw|hutc|i\\\\-20|i\\\\-go|i\\\\-ma|i230|iac|iac\\\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\\\-|klon|lexi|lg g|lg\\\\-a|lg\\\\-b|lg\\\\-c|lg\\\\-d|lg\\\\-f|lg\\\\-g|lg\\\\-k|lg\\\\-l|lg\\\\-m|lg\\\\-o|lg\\\\-p|lg\\\\-s|lg\\\\-t|lg\\\\-u|lg\\\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\\\-|lge/|lynx|leno|m1\\\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\\\-|nem\\\\-|newg|neon)',\n                    device_replacement: 'Generic Feature Phone',\n                },\n                {\n                    regex:\n                        '^(netf|noki|nzph|o2 x|o2\\\\-x|opwv|owg1|opti|oran|ot\\\\-s|p800|pand|pg\\\\-1|pg\\\\-2|pg\\\\-3|pg\\\\-6|pg\\\\-8|pg\\\\-c|pg13|phil|pn\\\\-2|pt\\\\-g|palm|pana|pire|pock|pose|psio|qa\\\\-a|qc\\\\-2|qc\\\\-3|qc\\\\-5|qc\\\\-7|qc07|qc12|qc21|qc32|qc60|qci\\\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\\\-|scp\\\\-|sdk/|se47|sec\\\\-|sec0|sec1|semc|sgh\\\\-|shar|sie\\\\-|sk\\\\-0|sl45|slid|smb3|smt5|sp01|sph\\\\-|spv |spv\\\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\\\-mo|t218|t250|t600|t610|t618|tcl\\\\-|tdg\\\\-|telm|tim\\\\-|ts70|tsm\\\\-|tsm3|tsm5|tx\\\\-9|tagt)',\n                    device_replacement: 'Generic Feature Phone',\n                },\n                {\n                    regex:\n                        '^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\\\-|your|zte\\\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\\\-|webc|whit|wmlb|xda\\\\-|xda\\\\_)',\n                    device_replacement: 'Generic Feature Phone',\n                },\n                {\n                    regex:\n                        '(bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\\\-webcrawler|converacrawler|dataparksearch|findlinks)',\n                    device_replacement: 'Spider',\n                },\n            ],\n            mobile_browser_families: [\n                'Firefox Mobile',\n                'Opera Mobile',\n                'Opera Mini',\n                'Mobile Safari',\n                'webOS',\n                'IE Mobile',\n                'Playstation Portable',\n                'Nokia',\n                'Blackberry',\n                'Palm',\n                'Silk',\n                'Android',\n                'Maemo',\n                'Obigo',\n                'Netfront',\n                'AvantGo',\n                'Teleca',\n                'SEMC-Browser',\n                'Bolt',\n                'Iris',\n                'UP.Browser',\n                'Symphony',\n                'Minimo',\n                'Bunjaloo',\n                'Jasmine',\n                'Dolfin',\n                'Polaris',\n                'BREW',\n                'Chrome Mobile',\n                'Chrome Mobile iOS',\n                'UC Browser',\n                'Tizen Browser',\n            ],\n        };\n        // Parsers\n        _this.parsers = [\n            'device_parsers',\n            'browser_parsers',\n            'os_parsers',\n            'mobile_os_families',\n            'mobile_browser_families',\n        ];\n        // Types\n        _this.types = ['browser', 'os', 'device'];\n        // Regular Expressions\n        _this.regexes =\n            regexes ||\n            (function () {\n                const results = {};\n                _this.parsers.map((parser) => {\n                    results[parser] = [];\n                });\n                return results;\n            })();\n        // Families\n        _this.families = (function () {\n            const results = {};\n            _this.types.map((type) => {\n                results[type] = [];\n            });\n            return results;\n        })();\n        // Utility Variables\n        let ArrayProto = Array.prototype,\n            ObjProto = Object.prototype,\n            FuncProto = Function.prototype,\n            nativeForEach = ArrayProto.forEach,\n            nativeIndexOf = ArrayProto.indexOf;\n        // Find Utility\n        const find = function (ua, obj) {\n            let ret = {};\n            for (let i = 0; i < obj.length; i++) {\n                ret = obj[i](ua);\n                if (ret) {\n                    break;\n                }\n            }\n            return ret;\n        };\n        // Remove Utility\n        const remove = function (arr, props) {\n            each(arr, (obj) => {\n                each(props, (prop) => {\n                    delete obj[prop];\n                });\n            });\n        };\n        // Contains Utility\n        const contains = function (obj, target) {\n            let found = false;\n            if (obj == null) return found;\n            if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n            found = any(obj, (value) => value === target);\n            return found;\n        };\n        // Each Utility\n        let forEach;\n        var each = (forEach = function (obj, iterator, context) {\n            if (obj == null) return;\n            if (nativeForEach && obj.forEach === nativeForEach) {\n                obj.forEach(iterator, context);\n            } else if (obj.length === +obj.length) {\n                for (let i = 0, l = obj.length; i < l; i++) {\n                    iterator.call(context, obj[i], i, obj);\n                }\n            } else {\n                for (const key in obj) {\n                    if (_.has(obj, key)) {\n                        iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            }\n        });\n        // Extend Utiltiy\n        const extend = function (obj) {\n            each(slice.call(arguments, 1), (source) => {\n                for (const prop in source) {\n                    obj[prop] = source[prop];\n                }\n            });\n            return obj;\n        };\n        // Check String Utility\n        const check = function (str) {\n            return !!(str && typeof str !== 'undefined' && str != null);\n        };\n        // To Version String Utility\n        const toVersionString = function (obj) {\n            let output = '';\n            obj = obj || {};\n            if (check(obj)) {\n                if (check(obj.major)) {\n                    output += obj.major;\n                    if (check(obj.minor)) {\n                        output += '.' + obj.minor;\n                        if (check(obj.patch)) {\n                            output += '.' + obj.patch;\n                        }\n                    }\n                }\n            }\n            return output;\n        };\n        // To String Utility\n        const toString = function (obj) {\n            obj = obj || {};\n            let suffix = toVersionString(obj);\n            if (suffix) suffix = ' ' + suffix;\n            return obj && check(obj.family) ? obj.family + suffix : '';\n        };\n        // Parse User-Agent String\n        _this.parse = function (ua) {\n            // Parsers Utility\n            const parsers = function (type) {\n                return _this.regexes[type + '_parsers'].map((obj) => {\n                    let regexp = new RegExp(obj.regex),\n                        rep = obj[(type === 'browser' ? 'family' : type) + '_replacement'],\n                        major_rep = obj.major_version_replacement;\n                    function parser(ua) {\n                        const m = ua.match(regexp);\n                        if (!m) return null;\n                        const ret = {};\n                        ret.family = (rep ? rep.replace('$1', m[1]) : m[1]) || 'other';\n                        ret.major = parseInt(major_rep || m[2]) || null;\n                        ret.minor = m[3] ? parseInt(m[3]) : null;\n                        ret.patch = m[4] ? parseInt(m[4]) : null;\n                        ret.tablet = obj.tablet;\n                        ret.man = obj.manufacturer || null;\n                        return ret;\n                    }\n                    return parser;\n                });\n            };\n            // User Agent\n            const UserAgent = function () {};\n            // Browsers Parsed\n            const browser_parsers = parsers('browser');\n            // Operating Systems Parsed\n            const os_parsers = parsers('os');\n            // Devices Parsed\n            const device_parsers = parsers('device');\n            // Set Agent\n            const a = new UserAgent();\n            // Remember the original user agent string\n            a.source = ua;\n            // Set Browser\n            a.browser = find(ua, browser_parsers);\n            if (check(a.browser)) {\n                a.browser.name = toString(a.browser);\n                a.browser.version = toVersionString(a.browser);\n            } else {\n                a.browser = {};\n            }\n            // Set OS\n            a.os = find(ua, os_parsers);\n            if (check(a.os)) {\n                a.os.name = toString(a.os);\n                a.os.version = toVersionString(a.os);\n            } else {\n                a.os = {};\n            }\n            // Set Device\n            a.device = find(ua, device_parsers);\n            if (check(a.device)) {\n                a.device.name = toString(a.device);\n                a.device.version = toVersionString(a.device);\n            } else {\n                a.device = {\n                    tablet: false,\n                    family: 'Other',\n                };\n            }\n            // Determine Device Type\n            const mobile_agents = {};\n            const mobile_browser_families = _this.regexes.mobile_browser_families.map((str) => {\n                mobile_agents[str] = true;\n            });\n            const mobile_os_families = _this.regexes.mobile_os_families.map((str) => {\n                mobile_agents[str] = true;\n            });\n            // Is Spider\n            if (a.browser.family === 'Spider') {\n                a.device.type = 'Spider';\n            } else if (a.browser.tablet || a.os.tablet || a.device.tablet) {\n                a.device.type = 'Tablet';\n            } else if (mobile_agents.hasOwnProperty(a.browser.family)) {\n                a.device.type = 'Mobile';\n            } else {\n                a.device.type = 'Desktop';\n            }\n            // Determine Device Manufacturer\n            a.device.manufacturer = a.browser.man || a.os.man || a.device.man || null;\n            // Cleanup Objects\n            remove([a.browser, a.os, a.device], ['tablet', 'man']);\n            // Return Agent\n            return a;\n        };\n        // Return context\n        return _this;\n    })());\n    // Export the Underscore object for **Node.js** and **\"CommonJS\"**,\n    // backwards-compatibility for the old `require()` API. If we're not\n    // CommonJS, add `_` to the global object via a string identifier\n    // the Closure Compiler \"advanced\" mode. Registration as an AMD\n    // via define() happens at the end of this file\n    if (typeof exports !== 'undefined') {\n        if (typeof module !== 'undefined' && module.exports) {\n            exports = module.exports = detect;\n        }\n        exports.detect = detect;\n    } else {\n        root.detect = detect;\n    }\n    // AMD define happens at the end for compatibility with AMD\n    // that don't enforce next-turn semantics on modules\n    if (typeof define === 'function' && define.amd) {\n        define((require) => detect);\n    }\n})(window);\n","import detect from './detect';\nimport html from './browser';\n\nif (process.env.NODE_ENV !== 'test') {\n    window.UserAgent = detect.parse(navigator.userAgent);\n}\n\nconst browsersContol = {\n    browserVerify() {\n        const userBrowser = {\n            browserName: window.UserAgent.browser.family,\n            browserVersion: window.UserAgent.browser.version,\n            source: window.UserAgent.source,\n        };\n        const isIe = userBrowser.browserName === 'IE';\n\n        const nodeElement = document.createElement('div');\n        nodeElement.setAttribute('id', 'for_bad_users');\n        nodeElement.innerHTML = html;\n\n        const allowedBrowsers = [\n            {\n                name: 'Chrome',\n                minVersion: '21',\n            },\n            {\n                name: 'IE',\n                minVersion: '11',\n            },\n            {\n                name: 'Firefox',\n                minVersion: '18',\n            },\n            {\n                name: 'Opera',\n                minVersion: '17',\n            },\n            {\n                name: 'Safari',\n                minVersion: '6.1',\n            },\n        ];\n\n        const isNotAllowedBrowser =\n            process.env.NODE_ENV === 'test'\n                ? false\n                : allowedBrowsers.some(\n                      (chackBrowser) =>\n                          chackBrowser.name === userBrowser.browserName &&\n                          +chackBrowser.minVersion > +userBrowser.browserVersion,\n                  );\n\n        return {\n            isNotAllowedBrowser,\n            nodeElement,\n            isIe,\n            userBrowser,\n        };\n    },\n};\n\nexport default browsersContol;\n","export default '<h1>UnacceptableBrowser</h1>';\n","import 'core-js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router } from 'react-router-dom';\nimport history from 'tools/history';\nimport store from 'stores';\nimport { environment } from 'configs';\nimport { setStore } from 'tools/connect';\n\nimport browserContols from './tools/browsers-control/index';\nimport AppContainer from './containers/AppContainer';\n\nimport 'tools/new-spatial-navigation';\n\nsetStore(store);\n\nif (environment !== 'production') {\n    window.store = store;\n    const makeInspectable = require('mobx-devtools-mst'); // eslint-disable-line\n    makeInspectable.default(store);\n}\n\nexport const browserVerify = browserContols.browserVerify();\n\nconst APP_ROOT_ID = 'application_root';\n\nexport function renderApp(App: React.FC<{}>): void {\n    ReactDOM.render(\n        <Router history={history}>\n            <App />\n        </Router>,\n        document.getElementById(APP_ROOT_ID),\n    );\n}\n\nif (browserVerify.isNotAllowedBrowser) {\n    document.body.appendChild(browserVerify.nodeElement);\n} else {\n    renderApp(AppContainer);\n}\n\nif (environment !== 'production' && module.hot) {\n    module.hot.accept('./containers/AppContainer', () => {\n        // eslint-disable-next-line\n        const NextApp = require('./containers/AppContainer').default;\n        renderApp(NextApp);\n    });\n}\n","/* eslint-disable */\n\n/* Spatial Navigation Polyfill\n *\n * It follows W3C official specification\n * https://drafts.csswg.org/css-nav-1/\n *\n * Copyright (c) 2018-2019 LG Electronics Inc.\n * https://github.com/WICG/spatial-navigation/polyfill\n *\n * Licensed under the MIT license (MIT)\n */\n\n(function () {\n    // The polyfill must not be executed, if it's already enabled via browser engine or browser extensions.\n    if ('navigate' in window) {\n        return;\n    }\n\n    const ARROW_KEY_CODE = { 37: 'left', 38: 'up', 39: 'right', 40: 'down' };\n    const TAB_KEY_CODE = 9;\n    let mapOfBoundRect = null;\n    let startingPoint = null; // Saves spatial navigation starting point\n    let savedSearchOrigin = { element: null, rect: null }; // Saves previous search origin\n    let searchOriginRect = null; // Rect of current search origin\n\n    window.__getSpatNavState = () => {\n        return {\n            mapOfBoundRect,\n            startingPoint,\n            savedSearchOrigin,\n            searchOriginRect,\n        };\n    };\n\n    /**\n     * Initiate the spatial navigation features of the polyfill.\n     * @function initiateSpatialNavigation\n     */\n    function initiateSpatialNavigation() {\n        /*\n         * Bind the standards APIs to be exposed to the window object for authors\n         */\n        window.navigate = navigate;\n        window.Element.prototype.spatialNavigationSearch = spatialNavigationSearch;\n        window.Element.prototype.focusableAreas = focusableAreas;\n        window.Element.prototype.getSpatialNavigationContainer = getSpatialNavigationContainer;\n\n        /*\n         * CSS.registerProperty() from the Properties and Values API\n         * Reference: https://drafts.css-houdini.org/css-properties-values-api/#the-registerproperty-function\n         */\n        if (window.CSS && CSS.registerProperty) {\n            if (\n                window.getComputedStyle(document.documentElement).getPropertyValue('--spatial-navigation-contain') ===\n                ''\n            ) {\n                CSS.registerProperty({\n                    name: '--spatial-navigation-contain',\n                    syntax: 'auto | contain',\n                    inherits: false,\n                    initialValue: 'auto',\n                });\n            }\n\n            if (\n                window.getComputedStyle(document.documentElement).getPropertyValue('--spatial-navigation-action') === ''\n            ) {\n                CSS.registerProperty({\n                    name: '--spatial-navigation-action',\n                    syntax: 'auto | focus | scroll',\n                    inherits: false,\n                    initialValue: 'auto',\n                });\n            }\n\n            if (\n                window.getComputedStyle(document.documentElement).getPropertyValue('--spatial-navigation-function') ===\n                ''\n            ) {\n                CSS.registerProperty({\n                    name: '--spatial-navigation-function',\n                    syntax: 'normal | grid',\n                    inherits: false,\n                    initialValue: 'normal',\n                });\n            }\n        }\n    }\n\n    /**\n     * Add event handlers for the spatial navigation behavior.\n     * This function defines which input methods trigger the spatial navigation behavior.\n     * @function spatialNavigationHandler\n     */\n    function spatialNavigationHandler() {\n        /*\n         * keydown EventListener :\n         * If arrow key pressed, get the next focusing element and send it to focusing controller\n         */\n        window.addEventListener('keydown', (e) => {\n            const currentKeyMode =\n                (parent && parent.__spatialNavigation__.keyMode) || window.__spatialNavigation__.keyMode;\n            const eventTarget = document.activeElement;\n            const dir = ARROW_KEY_CODE[e.keyCode];\n\n            if (e.keyCode === TAB_KEY_CODE) {\n                startingPoint = null;\n            }\n\n            if (\n                !currentKeyMode ||\n                currentKeyMode === 'NONE' ||\n                (currentKeyMode === 'SHIFTARROW' && !e.shiftKey) ||\n                (currentKeyMode === 'ARROW' && e.shiftKey) ||\n                e.ctrlKey ||\n                e.metaKey ||\n                e.altKey\n            )\n                return;\n\n            if (!e.defaultPrevented) {\n                let focusNavigableArrowKey = {\n                    left: true,\n                    up: true,\n                    right: true,\n                    down: true,\n                };\n\n                // Edge case (text input, area) : Don't move focus, just navigate cursor in text area\n                if (eventTarget.nodeName === 'INPUT' || eventTarget.nodeName === 'TEXTAREA') {\n                    focusNavigableArrowKey = handlingEditableElement(e);\n                }\n\n                if (focusNavigableArrowKey[dir]) {\n                    e.preventDefault();\n                    mapOfBoundRect = new Map();\n\n                    navigate(dir);\n\n                    mapOfBoundRect = null;\n                    startingPoint = null;\n                }\n            }\n        });\n\n        /*\n         * mouseup EventListener :\n         * If the mouse click a point in the page, the point will be the starting point.\n         * NOTE: Let UA set the spatial navigation starting point based on click\n         */\n        document.addEventListener('mouseup', (e) => {\n            startingPoint = { x: e.clientX, y: e.clientY };\n        });\n\n        /*\n         * focusin EventListener :\n         * When the element get the focus, save it and its DOMRect for resetting the search origin\n         * if it disappears.\n         */\n        window.addEventListener('focusin', (e) => {\n            if (e.target !== window) {\n                savedSearchOrigin.element = e.target;\n                savedSearchOrigin.rect = e.target.getBoundingClientRect();\n            }\n        });\n    }\n\n    /**\n     * Enable the author to trigger spatial navigation programmatically, as if the user had done so manually.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-window-navigate}\n     * @function navigate\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     */\n    function navigate(dir) {\n        // spatial navigation steps\n\n        // 1\n        const searchOrigin = findSearchOrigin();\n        console.log(searchOrigin);\n        let eventTarget = searchOrigin;\n        let elementFromPosition = null;\n\n        // 2 Optional step, UA defined starting point\n        if (startingPoint) {\n            // if there is a starting point, set eventTarget as the element from position for getting the spatnav container\n            elementFromPosition = document.elementFromPoint(startingPoint.x, startingPoint.y);\n\n            // Use starting point if the starting point isn't inside the focusable element (but not container)\n            // * Starting point is meaningfull when:\n            // 1) starting point is inside the spatnav container\n            // 2) starting point is inside the non-focusable element\n            if (elementFromPosition === null) {\n                elementFromPosition = document.body;\n            }\n            if (isFocusable(elementFromPosition) && !isContainer(elementFromPosition)) {\n                startingPoint = null;\n            } else if (isContainer(elementFromPosition)) {\n                eventTarget = elementFromPosition;\n            } else {\n                eventTarget = elementFromPosition.getSpatialNavigationContainer();\n            }\n        }\n\n        // 4\n        if (eventTarget === window || eventTarget === document || eventTarget === document.documentElement) {\n            eventTarget = document.body || document.documentElement;\n        }\n\n        // 5\n        // At this point, spatialNavigationSearch can be applied.\n        // If startingPoint is either a scroll container or the document,\n        // find the best candidate within startingPoint\n        let container = null;\n        if ((isContainer(eventTarget) || eventTarget.nodeName === 'BODY') && !(eventTarget.nodeName === 'INPUT')) {\n            if (eventTarget.nodeName === 'IFRAME') {\n                eventTarget = eventTarget.contentDocument.documentElement;\n            }\n\n            container = container === window ? document.body : eventTarget;\n            let bestInsideCandidate = null;\n\n            // 5-2\n            if (\n                document.activeElement === searchOrigin ||\n                (document.activeElement === document.body && searchOrigin === document.documentElement)\n            ) {\n                if (getCSSSpatNavAction(eventTarget) === 'scroll') {\n                    if (scrollingController(eventTarget, dir)) return;\n                } else if (getCSSSpatNavAction(eventTarget) === 'focus') {\n                    bestInsideCandidate = eventTarget.spatialNavigationSearch(dir, {\n                        container: eventTarget,\n                        candidates: getSpatialNavigationCandidates(eventTarget, {\n                            mode: 'all',\n                        }),\n                    });\n                    if (focusingController(bestInsideCandidate, dir)) return;\n                } else if (getCSSSpatNavAction(eventTarget) === 'auto') {\n                    bestInsideCandidate = eventTarget.spatialNavigationSearch(dir, {\n                        container: eventTarget,\n                    });\n                    if (focusingController(bestInsideCandidate, dir) || scrollingController(eventTarget, dir)) return;\n                }\n            } else {\n                // when the previous search origin became offscreen\n                container = container.getSpatialNavigationContainer();\n            }\n        }\n\n        // 6\n        // Let container be the nearest ancestor of eventTarget\n        container = eventTarget.getSpatialNavigationContainer();\n        let parentContainer = container.parentElement ? container.getSpatialNavigationContainer() : null;\n\n        // When the container is the viewport of a browsing context\n        if (!parentContainer && window.location !== window.parent.location) {\n            parentContainer = window.parent.document.documentElement;\n        }\n\n        if (getCSSSpatNavAction(container) === 'scroll') {\n            if (scrollingController(container, dir)) return;\n        } else if (getCSSSpatNavAction(container) === 'focus') {\n            navigateChain(eventTarget, container, parentContainer, dir, 'all');\n        } else if (getCSSSpatNavAction(container) === 'auto') {\n            navigateChain(eventTarget, container, parentContainer, dir, 'visible');\n        }\n    }\n\n    /**\n     * Move the focus to the best candidate or do nothing.\n     * @function focusingController\n     * @param bestCandidate {Node} - The best candidate of the spatial navigation\n     * @param dir {SpatialNavigationDirection}- The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function focusingController(bestCandidate, dir) {\n        // 10 & 11\n        // When bestCandidate is found\n        if (bestCandidate) {\n            // When bestCandidate is a focusable element and not a container : move focus\n            /*\n             * [event] navbeforefocus : Fired before spatial or sequential navigation changes the focus.\n             */\n            if (!createSpatNavEvents('beforefocus', bestCandidate, null, dir)) return true;\n\n            const container = bestCandidate.getSpatialNavigationContainer();\n\n            if (container !== window && getCSSSpatNavAction(container) === 'focus') {\n                bestCandidate.focus();\n            } else {\n                bestCandidate.focus({ preventScroll: true });\n            }\n\n            startingPoint = null;\n            return true;\n        }\n\n        // When bestCandidate is not found within the scrollport of a container: Nothing\n        return false;\n    }\n\n    /**\n     * Directionally scroll the scrollable spatial navigation container if it can be manually scrolled more.\n     * @function scrollingController\n     * @param container {Node} - The spatial navigation container which can scroll\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function scrollingController(container, dir) {\n        // If there is any scrollable area among parent elements and it can be manually scrolled, scroll the document\n        if (isScrollable(container, dir) && !isScrollBoundary(container, dir)) {\n            moveScroll(container, dir);\n            return true;\n        }\n\n        // If the spatnav container is document and it can be scrolled, scroll the document\n        if (!container.parentElement && !isHTMLScrollBoundary(container, dir)) {\n            moveScroll(container.ownerDocument.documentElement, dir);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Find the candidates within a spatial navigation container include delegable container.\n     * This function does not search inside delegable container or focusable container.\n     * In other words, this return candidates set is not included focusable elements inside delegable container or focusable container.\n     *\n     * @function getSpatialNavigationCandidates\n     * @param container {Node} - The spatial navigation container\n     * @param option {FocusableAreasOptions} - 'mode' attribute takes 'visible' or 'all' for searching the boundary of focusable elements.\n     *                                          Default value is 'visible'.\n     * @returns {sequence<Node>} candidate elements within the container\n     */\n    function getSpatialNavigationCandidates(container, option = { mode: 'visible' }) {\n        let candidates = [];\n\n        if (container.childElementCount > 0) {\n            if (!container.parentElement) {\n                container = container.getElementsByTagName('body')[0] || document.body;\n            }\n            const children = container.children;\n            for (const elem of children) {\n                if (isDelegableContainer(elem)) {\n                    candidates.push(elem);\n                } else if (isFocusable(elem)) {\n                    candidates.push(elem);\n\n                    if (!isContainer(elem) && elem.childElementCount) {\n                        candidates = candidates.concat(getSpatialNavigationCandidates(elem, { mode: 'all' }));\n                    }\n                } else if (elem.childElementCount) {\n                    candidates = candidates.concat(getSpatialNavigationCandidates(elem, { mode: 'all' }));\n                }\n            }\n        }\n\n        //   console.log(candidates)\n        return option.mode === 'all' ? candidates : candidates.filter(isVisible);\n    }\n\n    /**\n     * Find the candidates among focusable elements within a spatial navigation container from the search origin (currently focused element)\n     * depending on the directional information.\n     * @function getFilteredSpatialNavigationCandidates\n     * @param element {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation without the directional information\n     * @param container {Node} - The spatial navigation container\n     * @returns {Node} The candidates for spatial navigation considering the directional information\n     */\n    function getFilteredSpatialNavigationCandidates(element, dir, candidates, container) {\n        const targetElement = element;\n        // Removed below line due to a bug. (iframe body rect is sometime weird.)\n        // const targetElement = (element.nodeName === 'IFRAME') ? element.contentDocument.body : element;\n        // If the container is unknown, get the closest container from the element\n        container = container || targetElement.getSpatialNavigationContainer();\n\n        // If the candidates is unknown, find candidates\n        // 5-1\n        candidates = !candidates || candidates.length <= 0 ? getSpatialNavigationCandidates(container) : candidates;\n        return filteredCandidates(targetElement, candidates, dir, container);\n    }\n\n    /**\n     * Find the best candidate among the candidates within the container from the search origin (currently focused element)\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-element-spatialnavigationsearch}\n     * @function spatialNavigationSearch\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param container {Node} - The spatial navigation container\n     * @returns {Node} The best candidate which will gain the focus\n     */\n    function spatialNavigationSearch(dir, args) {\n        const targetElement = this;\n        let internalCandidates = [];\n        let externalCandidates = [];\n        let insideOverlappedCandidates = getOverlappedCandidates(targetElement);\n        let bestTarget;\n\n        // Set default parameter value\n        if (!args) args = {};\n\n        const defaultContainer = targetElement.getSpatialNavigationContainer();\n        let defaultCandidates = getSpatialNavigationCandidates(defaultContainer);\n        const container = args.container || defaultContainer;\n        if (args.container && defaultContainer.contains(args.container)) {\n            defaultCandidates = defaultCandidates.concat(getSpatialNavigationCandidates(container));\n        }\n        const candidates =\n            args.candidates && args.candidates.length > 0\n                ? args.candidates.filter((candidate) => container.contains(candidate))\n                : defaultCandidates.filter((candidate) => container.contains(candidate) && container !== candidate);\n\n        // Find the best candidate\n        // 5\n        // If startingPoint is either a scroll container or the document,\n        // find the best candidate within startingPoint\n        if (candidates && candidates.length > 0) {\n            // Divide internal or external candidates\n            candidates.forEach((candidate) => {\n                if (candidate !== targetElement) {\n                    (targetElement.contains(candidate) && targetElement !== candidate\n                            ? internalCandidates\n                            : externalCandidates\n                    ).push(candidate);\n                }\n            });\n\n            // include overlapped element to the internalCandidates\n            let fullyOverlapped = insideOverlappedCandidates.filter(\n                (candidate) => !internalCandidates.includes(candidate),\n            );\n            let overlappedContainer = candidates.filter(\n                (candidate) => isContainer(candidate) && isEntirelyVisible(targetElement, candidate),\n            );\n            let overlappedByParent = overlappedContainer\n                .map((elm) => elm.focusableAreas())\n                .flat()\n                .filter((candidate) => candidate !== targetElement);\n\n            internalCandidates = internalCandidates\n                .concat(fullyOverlapped)\n                .filter((candidate) => container.contains(candidate));\n            externalCandidates = externalCandidates\n                .concat(overlappedByParent)\n                .filter((candidate) => container.contains(candidate));\n\n            // Filter external Candidates\n            if (externalCandidates.length > 0) {\n                externalCandidates = getFilteredSpatialNavigationCandidates(\n                    targetElement,\n                    dir,\n                    externalCandidates,\n                    container,\n                );\n            }\n\n            // If there isn't search origin element but search orgin rect exist  (search origin isn't in the layout case)\n            if (searchOriginRect) {\n                bestTarget = selectBestCandidate(\n                    targetElement,\n                    getFilteredSpatialNavigationCandidates(targetElement, dir, internalCandidates, container),\n                    dir,\n                );\n            }\n\n            if (internalCandidates && internalCandidates.length > 0 && !(targetElement.nodeName === 'INPUT')) {\n                bestTarget = selectBestCandidateFromEdge(targetElement, internalCandidates, dir);\n            }\n\n            bestTarget = bestTarget || selectBestCandidate(targetElement, externalCandidates, dir);\n\n            if (bestTarget && isDelegableContainer(bestTarget)) {\n                // if best target is delegable container, then find descendants candidate inside delegable container.\n                const innerTarget = getSpatialNavigationCandidates(bestTarget, {\n                    mode: 'all',\n                });\n                const descendantsBest =\n                    innerTarget.length > 0\n                        ? targetElement.spatialNavigationSearch(dir, {\n                            candidates: innerTarget,\n                            container: bestTarget,\n                        })\n                        : null;\n                if (descendantsBest) {\n                    bestTarget = descendantsBest;\n                } else if (!isFocusable(bestTarget)) {\n                    // if there is no target inside bestTarget and delegable container is not focusable,\n                    // then try to find another best target without curren best target.\n                    candidates.splice(candidates.indexOf(bestTarget), 1);\n                    bestTarget = candidates.length\n                        ? targetElement.spatialNavigationSearch(dir, {\n                            candidates: candidates,\n                            container: container,\n                        })\n                        : null;\n                }\n            }\n            return bestTarget;\n        }\n\n        return null;\n    }\n\n    /**\n     * Get the filtered candidate among candidates.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#select-the-best-candidate}\n     * @function filteredCandidates\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param container {Node} - The spatial navigation container\n     * @returns {sequence<Node>} The filtered candidates which are not the search origin and not in the given spatial navigation direction from the search origin\n     */\n    // TODO: Need to fix filtering the candidates with more clean code\n    function filteredCandidates(currentElm, candidates, dir, container) {\n        const originalContainer = currentElm.getSpatialNavigationContainer();\n        let eventTargetRect;\n\n        // If D(dir) is null, let candidates be the same as visibles\n        if (dir === undefined) return candidates;\n\n        // Offscreen handling when originalContainer is not <HTML>\n        if (originalContainer.parentElement && container !== originalContainer && !isVisible(currentElm)) {\n            eventTargetRect = getBoundingClientRect(originalContainer);\n        } else {\n            eventTargetRect = searchOriginRect || getBoundingClientRect(currentElm);\n        }\n\n        /*\n         * Else, let candidates be the subset of the elements in visibles\n         * whose principal boxs geometric center is within the closed half plane\n         * whose boundary goes through the geometric center of starting point and is perpendicular to D.\n         */\n        if ((isContainer(currentElm) || currentElm.nodeName === 'BODY') && !(currentElm.nodeName === 'INPUT')) {\n            return candidates.filter((candidate) => {\n                const candidateRect = getBoundingClientRect(candidate);\n                return (\n                    container.contains(candidate) &&\n                    ((currentElm.contains(candidate) &&\n                        isInside(eventTargetRect, candidateRect) &&\n                        candidate !== currentElm) ||\n                        isOutside(candidateRect, eventTargetRect, dir))\n                );\n            });\n        } else {\n            return candidates.filter((candidate) => {\n                const candidateRect = getBoundingClientRect(candidate);\n                const candidateBody = candidate.nodeName === 'IFRAME' ? candidate.contentDocument.body : null;\n                return (\n                    container.contains(candidate) &&\n                    candidate !== currentElm &&\n                    candidateBody !== currentElm &&\n                    isOutside(candidateRect, eventTargetRect, dir) &&\n                    !isInside(eventTargetRect, candidateRect)\n                );\n            });\n        }\n    }\n\n    /**\n     * Select the best candidate among given candidates.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#select-the-best-candidate}\n     * @function selectBestCandidate\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Node} The best candidate which will gain the focus\n     */\n    function selectBestCandidate(currentElm, candidates, dir) {\n        const container = currentElm.getSpatialNavigationContainer();\n        const spatialNavigationFunction = getComputedStyle(container).getPropertyValue('--spatial-navigation-function');\n        const currentTargetRect = searchOriginRect || getBoundingClientRect(currentElm);\n        let distanceFunction;\n        let alignedCandidates;\n\n        switch (spatialNavigationFunction) {\n            case 'grid':\n                alignedCandidates = candidates.filter((elm) =>\n                    isAligned(currentTargetRect, getBoundingClientRect(elm), dir),\n                );\n                if (alignedCandidates.length > 0) {\n                    candidates = alignedCandidates;\n                }\n                distanceFunction = getAbsoluteDistance;\n                break;\n            default:\n                distanceFunction = getDistance;\n                break;\n        }\n        return getClosestElement(currentElm, candidates, dir, distanceFunction);\n    }\n\n    /**\n     * Select the best candidate among candidates by finding the closet candidate from the edge of the currently focused element (search origin).\n     * @see {@link https://drafts.csswg.org/css-nav-1/#select-the-best-candidate (Step 5)}\n     * @function selectBestCandidateFromEdge\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Node} The best candidate which will gain the focus\n     */\n    function selectBestCandidateFromEdge(currentElm, candidates, dir) {\n        if (startingPoint) return getClosestElement(currentElm, candidates, dir, getDistanceFromPoint);\n        else return getClosestElement(currentElm, candidates, dir, getInnerDistance);\n    }\n\n    /**\n     * Select the closest candidate from the currently focused element (search origin) among candidates by using the distance function.\n     * @function getClosestElement\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param distanceFunction {function} - The distance function which measures the distance from the search origin to each candidate\n     * @returns {Node} The candidate which is the closest one from the search origin\n     */\n    function getClosestElement(currentElm, candidates, dir, distanceFunction) {\n        let eventTargetRect = null;\n        if (\n            window.location !== window.parent.location &&\n            (currentElm.nodeName === 'BODY' || currentElm.nodeName === 'HTML')\n        ) {\n            // If the eventTarget is iframe, then get rect of it based on its containing document\n            // Set the iframe's position as (0,0) because the rects of elements inside the iframe don't know the real iframe's position.\n            eventTargetRect = window.frameElement.getBoundingClientRect();\n            eventTargetRect.x = 0;\n            eventTargetRect.y = 0;\n        } else {\n            eventTargetRect = searchOriginRect || currentElm.getBoundingClientRect();\n        }\n\n        let minDistance = Number.POSITIVE_INFINITY;\n        let minDistanceElements = [];\n\n        if (candidates) {\n            for (let i = 0; i < candidates.length; i++) {\n                const distance = distanceFunction(eventTargetRect, getBoundingClientRect(candidates[i]), dir);\n\n                // If the same distance, the candidate will be selected in the DOM order\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    minDistanceElements = [candidates[i]];\n                } else if (distance === minDistance) {\n                    minDistanceElements.push(candidates[i]);\n                }\n            }\n        }\n        if (minDistanceElements.length === 0) return null;\n\n        return minDistanceElements.length > 1 && distanceFunction === getAbsoluteDistance\n            ? getClosestElement(currentElm, minDistanceElements, dir, getEuclideanDistance)\n            : minDistanceElements[0];\n    }\n\n    /**\n     * Get container of an element.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-element-getspatialnavigationcontainer}\n     * @module Element\n     * @function getSpatialNavigationContainer\n     * @returns {Node} The spatial navigation container\n     */\n    function getSpatialNavigationContainer() {\n        let container = this;\n\n        do {\n            if (!container.parentElement) {\n                if (window.location !== window.parent.location) {\n                    container = window.parent.document.documentElement;\n                } else {\n                    container = window.document.documentElement;\n                }\n                break;\n            } else {\n                container = container.parentElement;\n            }\n\n            // console.log(container, isContainer(container));\n        } while (!isContainer(container));\n        return container;\n    }\n\n    /**\n     * Get nearest scroll container of an element.\n     * @function getScrollContainer\n     * @param Element\n     * @returns {Node} The spatial navigation container\n     */\n    function getScrollContainer(element) {\n        let scrollContainer = element;\n\n        do {\n            if (!scrollContainer.parentElement) {\n                if (window.location !== window.parent.location) {\n                    scrollContainer = window.parent.document.documentElement;\n                } else {\n                    scrollContainer = window.document.documentElement;\n                }\n                break;\n            } else {\n                scrollContainer = scrollContainer.parentElement;\n            }\n        } while (!isScrollContainer(scrollContainer) || !isVisible(scrollContainer));\n\n        if (scrollContainer === document || scrollContainer === document.documentElement) {\n            scrollContainer = window;\n        }\n\n        return scrollContainer;\n    }\n\n    /**\n     * Find focusable elements within the spatial navigation container.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-element-focusableareas}\n     * @function focusableAreas\n     * @param option {FocusableAreasOptions} - 'mode' attribute takes 'visible' or 'all' for searching the boundary of focusable elements.\n     *                                          Default value is 'visible'.\n     * @returns {sequence<Node>} All focusable elements or only visible focusable elements within the container\n     */\n    function focusableAreas(option = { mode: 'visible' }) {\n        const container = this.parentElement ? this : document.body;\n        const focusables = Array.prototype.filter.call(container.getElementsByTagName('*'), isFocusable);\n        return option.mode === 'all' ? focusables : focusables.filter(isVisible);\n    }\n\n    /**\n     * Create the NavigationEvent: navbeforefocus, navnotarget\n     * @see {@link https://drafts.csswg.org/css-nav-1/#events-navigationevent}\n     * @function createSpatNavEvents\n     * @param option {string} - Type of the navigation event (beforefocus, notarget)\n     * @param element {Node} - The target element of the event\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     */\n    function createSpatNavEvents(eventType, containerElement, currentElement, direction) {\n        if (['beforefocus', 'notarget'].includes(eventType)) {\n            const data = {\n                causedTarget: currentElement,\n                dir: direction,\n            };\n            const triggeredEvent = new CustomEvent('nav' + eventType, {\n                bubbles: true,\n                cancelable: true,\n                detail: data,\n            });\n            return containerElement.dispatchEvent(triggeredEvent);\n        }\n    }\n\n    /**\n     * Get the value of the CSS custom property of the element\n     * @function readCssVar\n     * @param element {Node}\n     * @param varName {string} - The name of the css custom property without '--'\n     * @returns {string} The value of the css custom property\n     */\n    function readCssVar(element, varName) {\n        return getComputedStyle(element).getPropertyValue(`--${varName}`).trim();\n    }\n\n    /**\n     * Decide whether or not the 'contain' value is given to 'spatial-navigation-contain' css property of an element\n     * @function isCSSSpatNavContain\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isCSSSpatNavContain(element) {\n        return readCssVar(element, 'spatial-navigation-contain') === 'contain';\n    }\n\n    /**\n     * Return the value of 'spatial-navigation-action' css property of an element\n     * @function getCSSSpatNavAction\n     * @param element {Node} - would be the spatial navigation container\n     * @returns {string} auto | focus | scroll\n     */\n    function getCSSSpatNavAction(element) {\n        return 'focus';\n        //   return readCssVar(element, 'spatial-navigation-action') || 'auto';\n    }\n\n    /**\n     * Only move the focus with spatial navigation. Manually scrolling isn't available.\n     * @function navigateChain\n     * @param eventTarget {Node} - currently focused element\n     * @param container {SpatialNavigationContainer} - container\n     * @param parentContainer {SpatialNavigationContainer} - parent container\n     * @param option - visible || all\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     */\n    function navigateChain(eventTarget, container, parentContainer, dir, option) {\n        let currentOption = {\n            candidates: getSpatialNavigationCandidates(container, { mode: option }),\n            container,\n        };\n        //   console.log(currentOption)\n\n        while (parentContainer) {\n            if (focusingController(eventTarget.spatialNavigationSearch(dir, currentOption), dir)) {\n                return;\n            } else {\n                if (option === 'visible' && scrollingController(container, dir)) return;\n                else {\n                    if (!createSpatNavEvents('notarget', container, eventTarget, dir)) return;\n\n                    // find the container\n                    if (container === document || container === document.documentElement) {\n                        if (window.location !== window.parent.location) {\n                            // The page is in an iframe. eventTarget needs to be reset because the position of the element in the iframe\n                            eventTarget = window.frameElement;\n                            container = eventTarget.ownerDocument.documentElement;\n                        }\n                    } else {\n                        container = parentContainer;\n                    }\n                    currentOption = {\n                        candidates: getSpatialNavigationCandidates(container, {\n                            mode: option,\n                        }),\n                        container,\n                    };\n                    let nextContainer = container.getSpatialNavigationContainer();\n\n                    if (nextContainer !== container) {\n                        parentContainer = nextContainer;\n                    } else {\n                        parentContainer = null;\n                    }\n                }\n            }\n        }\n\n        currentOption = {\n            candidates: getSpatialNavigationCandidates(container, { mode: option }),\n            container,\n        };\n\n        // Behavior after 'navnotarget' - Getting out from the current spatnav container\n        if (\n            !parentContainer &&\n            container &&\n            focusingController(eventTarget.spatialNavigationSearch(dir, currentOption), dir)\n        )\n            return;\n\n        if (!createSpatNavEvents('notarget', currentOption.container, eventTarget, dir)) return;\n\n        if (getCSSSpatNavAction(container) === 'auto' && option === 'visible') {\n            if (scrollingController(container, dir)) return;\n        }\n    }\n\n    /**\n     * Find search origin\n     * @see {@link https://drafts.csswg.org/css-nav-1/#nav}\n     * @function findSearchOrigin\n     * @returns {Node} The search origin for the spatial navigation\n     */\n    function findSearchOrigin() {\n        let searchOrigin = document.activeElement;\n\n        if (!searchOrigin || (searchOrigin === document.body && !document.querySelector(':focus'))) {\n            // When the previous search origin lost its focus by blur: (1) disable attribute (2) visibility: hidden\n            if (savedSearchOrigin.element && searchOrigin !== savedSearchOrigin.element) {\n                const elementStyle = window.getComputedStyle(savedSearchOrigin.element, null);\n                const invisibleStyle = ['hidden', 'collapse'];\n\n                if (\n                    savedSearchOrigin.element.disabled ||\n                    invisibleStyle.includes(elementStyle.getPropertyValue('visibility'))\n                ) {\n                    searchOrigin = savedSearchOrigin.element;\n                    return searchOrigin;\n                }\n            }\n            searchOrigin = document.documentElement;\n        }\n        // When the previous search origin lost its focus by blur: (1) display:none () element size turned into zero\n        if (\n            savedSearchOrigin.element &&\n            (getBoundingClientRect(savedSearchOrigin.element).height === 0 ||\n                getBoundingClientRect(savedSearchOrigin.element).width === 0)\n        ) {\n            (startingPoint = (savedSearchOrigin.left + savedSearchOrigin.right) / 2),\n            (savedSearchOrigin.top + savedSearchOrigin.bottom) / 2;\n            // searchOriginRect = savedSearchOrigin.rect;\n        }\n\n        if (!isVisibleInScroller(searchOrigin)) {\n            const scroller = getScrollContainer(searchOrigin);\n            if (scroller && (scroller === window || getCSSSpatNavAction(scroller) === 'auto')) return scroller;\n        }\n        return searchOrigin;\n    }\n\n    /**\n     * Move the scroll of an element depending on the given spatial navigation directrion\n     * (Assume that User Agent defined distance is '40px')\n     * @see {@link https://drafts.csswg.org/css-nav-1/#directionally-scroll-an-element}\n     * @function moveScroll\n     * @param element {Node} - The scrollable element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param offset {Number} - The explicit amount of offset for scrolling. Default value is 0.\n     */\n    function moveScroll(element, dir, offset = 0) {\n        if (element) {\n            switch (dir) {\n                case 'left':\n                    element.scrollLeft -= 40 + offset;\n                    break;\n                case 'right':\n                    element.scrollLeft += 40 + offset;\n                    break;\n                case 'up':\n                    element.scrollTop -= 40 + offset;\n                    break;\n                case 'down':\n                    element.scrollTop += 40 + offset;\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Decide whether an element is container or not.\n     * @function isContainer\n     * @param element {Node} element\n     * @returns {boolean}\n     */\n    function isContainer(element) {\n        return (\n            !element.parentElement ||\n            element.nodeName === 'IFRAME' ||\n            isScrollContainer(element) ||\n            isCSSSpatNavContain(element)\n        );\n    }\n\n    /**\n     * Decide whether an element is delegable container or not.\n     * NOTE: THIS IS NON-NORMATIVE API.\n     * @function isDelegableContainer\n     * @param element {Node} element\n     * @returns {boolean}\n     */\n    function isDelegableContainer(element) {\n        return readCssVar(element, 'spatial-navigation-contain') === 'delegable';\n    }\n\n    /**\n     * Decide whether an element is a scrollable container or not.\n     * @see {@link https://drafts.csswg.org/css-overflow-3/#scroll-container}\n     * @function isScrollContainer\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isScrollContainer(element) {\n        const elementStyle = window.getComputedStyle(element, null);\n        const overflowX = elementStyle.getPropertyValue('overflow-x');\n        const overflowY = elementStyle.getPropertyValue('overflow-y');\n\n        return (overflowX !== 'visible' && overflowX !== 'clip' && isOverflow(element, 'left')) ||\n        (overflowY !== 'visible' && overflowY !== 'clip' && isOverflow(element, 'down'))\n            ? true\n            : false;\n    }\n\n    /**\n     * Decide whether this element is scrollable or not.\n     * NOTE: If the value of 'overflow' is given to either 'visible', 'clip', or 'hidden', the element isn't scrollable.\n     *       If the value is 'hidden', the element can be only programmically scrollable. (https://drafts.csswg.org/css-overflow-3/#valdef-overflow-hidden)\n     * @function isScrollable\n     * @param element {Node}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isScrollable(element, dir) {\n        // element, dir\n        if (element && typeof element === 'object') {\n            if (dir && typeof dir === 'string') {\n                // parameter: dir, element\n                if (isOverflow(element, dir)) {\n                    // style property\n                    const elementStyle = window.getComputedStyle(element, null);\n                    const overflowX = elementStyle.getPropertyValue('overflow-x');\n                    const overflowY = elementStyle.getPropertyValue('overflow-y');\n\n                    switch (dir) {\n                        case 'left':\n                        /* falls through */\n                        case 'right':\n                            return overflowX !== 'visible' && overflowX !== 'clip' && overflowX !== 'hidden';\n                        case 'up':\n                        /* falls through */\n                        case 'down':\n                            return overflowY !== 'visible' && overflowY !== 'clip' && overflowY !== 'hidden';\n                    }\n                }\n                return false;\n            } else {\n                // parameter: element\n                return (\n                    element.nodeName === 'HTML' ||\n                    element.nodeName === 'BODY' ||\n                    (isScrollContainer(element) && isOverflow(element))\n                );\n            }\n        }\n    }\n\n    /**\n     * Decide whether an element is overflow or not.\n     * @function isOverflow\n     * @param element {Node}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isOverflow(element, dir) {\n        if (element && typeof element === 'object') {\n            if (dir && typeof dir === 'string') {\n                // parameter: element, dir\n                switch (dir) {\n                    case 'left':\n                    /* falls through */\n                    case 'right':\n                        return element.scrollWidth > element.clientWidth;\n                    case 'up':\n                    /* falls through */\n                    case 'down':\n                        return element.scrollHeight > element.clientHeight;\n                }\n            } else {\n                // parameter: element\n                return element.scrollWidth > element.clientWidth || element.scrollHeight > element.clientHeight;\n            }\n            return false;\n        }\n    }\n\n    /**\n     * Decide whether the scrollbar of the browsing context reaches to the end or not.\n     * @function isHTMLScrollBoundary\n     * @param element {Node} - The top browsing context\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isHTMLScrollBoundary(element, dir) {\n        let result = false;\n        switch (dir) {\n            case 'left':\n                result = element.scrollLeft === 0;\n                break;\n            case 'right':\n                result = element.scrollWidth - element.scrollLeft - element.clientWidth === 0;\n                break;\n            case 'up':\n                result = element.scrollTop === 0;\n                break;\n            case 'down':\n                result = element.scrollHeight - element.scrollTop - element.clientHeight === 0;\n                break;\n        }\n        return result;\n    }\n\n    /**\n     * Decide whether the scrollbar of an element reaches to the end or not.\n     * @function isScrollBoundary\n     * @param element {Node}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isScrollBoundary(element, dir) {\n        if (isScrollable(element, dir)) {\n            const winScrollY = element.scrollTop;\n            const winScrollX = element.scrollLeft;\n\n            const height = element.scrollHeight - element.clientHeight;\n            const width = element.scrollWidth - element.clientWidth;\n\n            switch (dir) {\n                case 'left':\n                    return winScrollX === 0;\n                case 'right':\n                    return Math.abs(winScrollX - width) <= 1;\n                case 'up':\n                    return winScrollY === 0;\n                case 'down':\n                    return Math.abs(winScrollY - height) <= 1;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Decide whether an element is inside the scorller viewport or not\n     *\n     * @function isVisibleInScroller\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isVisibleInScroller(element) {\n        const elementRect = element.getBoundingClientRect();\n        let nearestScroller = getScrollContainer(element);\n\n        let scrollerRect = null;\n        if (nearestScroller !== window) {\n            scrollerRect = getBoundingClientRect(nearestScroller);\n        } else {\n            scrollerRect = new DOMRect(0, 0, window.innerWidth, window.innerHeight);\n        }\n\n        if (isInside(scrollerRect, elementRect, 'left') && isInside(scrollerRect, elementRect, 'down')) return true;\n        else return false;\n    }\n\n    /**\n     * Decide whether an element is focusable for spatial navigation.\n     * 1. If element is the browsing context (document, iframe), then it's focusable,\n     * 2. If the element is scrollable container (regardless of scrollable axis), then it's focusable,\n     * 3. The value of tabIndex >= 0, then it's focusable,\n     * 4. If the element is disabled, it isn't focusable,\n     * 5. If the element is expressly inert, it isn't focusable,\n     * 6. Whether the element is being rendered or not.\n     *\n     * @function isFocusable\n     * @param element {Node}\n     * @returns {boolean}\n     *\n     * @see {@link https://html.spec.whatwg.org/multipage/interaction.html#focusable-area}\n     */\n    function isFocusable(element) {\n        if (\n            element.tabIndex < 0 ||\n            isAtagWithoutHref(element) ||\n            isActuallyDisabled(element) ||\n            isExpresslyInert(element) ||\n            !isBeingRendered(element)\n        )\n            return false;\n        else if (!element.parentElement || (isScrollable(element) && isOverflow(element)) || element.tabIndex >= 0)\n            return true;\n    }\n\n    /**\n     * Decide whether an element is a tag without href attribute or not.\n     *\n     * @function isAtagWithoutHref\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isAtagWithoutHref(element) {\n        return (\n            element.tagName === 'A' &&\n            element.getAttribute('href') === null &&\n            element.getAttribute('tabIndex') === null\n        );\n    }\n\n    /**\n     * Decide whether an element is actually disabled or not.\n     *\n     * @function isActuallyDisabled\n     * @param element {Node}\n     * @returns {boolean}\n     *\n     * @see {@link https://html.spec.whatwg.org/multipage/semantics-other.html#concept-element-disabled}\n     */\n    function isActuallyDisabled(element) {\n        if (['BUTTON', 'INPUT', 'SELECT', 'TEXTAREA', 'OPTGROUP', 'OPTION', 'FIELDSET'].includes(element.tagName))\n            return element.disabled;\n        else return false;\n    }\n\n    /**\n     * Decide whether the element is expressly inert or not.\n     * @see {@link https://html.spec.whatwg.org/multipage/interaction.html#expressly-inert}\n     * @function isExpresslyInert\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isExpresslyInert(element) {\n        return element.inert && !element.ownerDocument.documentElement.inert;\n    }\n\n    /**\n     * Decide whether the element is being rendered or not.\n     * 1. If an element has the style as \"visibility: hidden | collapse\" or \"display: none\", it is not being rendered.\n     * 2. If an element has the style as \"opacity: 0\", it is not being rendered.(that is, invisible).\n     * 3. If width and height of an element are explicitly set to 0, it is not being rendered.\n     * 4. If a parent element is hidden, an element itself is not being rendered.\n     * (CSS visibility property and display property are inherited.)\n     * @see {@link https://html.spec.whatwg.org/multipage/rendering.html#being-rendered}\n     * @function isBeingRendered\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isBeingRendered(element) {\n        if (!isVisibleStyleProperty(element.parentElement)) return false;\n        if (\n            !isVisibleStyleProperty(element) ||\n            element.style.opacity === '0' ||\n            window.getComputedStyle(element).height === '0px' ||\n            window.getComputedStyle(element).width === '0px'\n        )\n            return false;\n        return true;\n    }\n\n    /**\n     * Decide whether this element is partially or completely visible to user agent.\n     * @function isVisible\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isVisible(element) {\n        return !element.parentElement || (isVisibleStyleProperty(element) && hitTest(element));\n    }\n\n    /**\n     * Decide whether this element is completely visible in this viewport for the arrow direction.\n     * @function isEntirelyVisible\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isEntirelyVisible(element, container) {\n        const rect = getBoundingClientRect(element);\n        const containerElm = container || element.getSpatialNavigationContainer();\n        const containerRect = getBoundingClientRect(containerElm);\n\n        // FIXME: when element is bigger than container?\n        const entirelyVisible = !(\n            rect.left < containerRect.left ||\n            rect.right > containerRect.right ||\n            rect.top < containerRect.top ||\n            rect.bottom > containerRect.bottom\n        );\n\n        return entirelyVisible;\n    }\n\n    /**\n     * Decide the style property of this element is specified whether it's visible or not.\n     * @function isVisibleStyleProperty\n     * @param element {CSSStyleDeclaration}\n     * @returns {boolean}\n     */\n    function isVisibleStyleProperty(element) {\n        const elementStyle = window.getComputedStyle(element, null);\n        const thisVisibility = elementStyle.getPropertyValue('visibility');\n        const thisDisplay = elementStyle.getPropertyValue('display');\n        const invisibleStyle = ['hidden', 'collapse'];\n\n        return thisDisplay !== 'none' && !invisibleStyle.includes(thisVisibility);\n    }\n\n    /**\n     * Decide whether this element is entirely or partially visible within the viewport.\n     * @function hitTest\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function hitTest(element) {\n        const elementRect = getBoundingClientRect(element);\n        if (\n            element.nodeName !== 'IFRAME' &&\n            (elementRect.top < 0 ||\n                elementRect.left < 0 ||\n                elementRect.top > element.ownerDocument.documentElement.clientHeight ||\n                elementRect.left > element.ownerDocument.documentElement.clientWidth)\n        )\n            return false;\n\n        let offsetX = parseInt(element.offsetWidth) / 10;\n        let offsetY = parseInt(element.offsetHeight) / 10;\n\n        offsetX = isNaN(offsetX) ? 1 : offsetX;\n        offsetY = isNaN(offsetY) ? 1 : offsetY;\n\n        const hitTestPoint = {\n            // For performance, just using the three point(middle, leftTop, rightBottom) of the element for hit testing\n            middle: [(elementRect.left + elementRect.right) / 2, (elementRect.top + elementRect.bottom) / 2],\n            leftTop: [elementRect.left + offsetX, elementRect.top + offsetY],\n            rightBottom: [elementRect.right - offsetX, elementRect.bottom - offsetY],\n        };\n\n        for (const point in hitTestPoint) {\n            const elemFromPoint = element.ownerDocument.elementFromPoint(...hitTestPoint[point]);\n            if (element === elemFromPoint || element.contains(elemFromPoint)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Decide whether a child element is entirely or partially Included within container visually.\n     * @function isInside\n     * @param containerRect {DOMRect}\n     * @param childRect {DOMRect}\n     * @returns {boolean}\n     */\n    function isInside(containerRect, childRect) {\n        const rightEdgeCheck = containerRect.left < childRect.right && containerRect.right >= childRect.right;\n        const leftEdgeCheck = containerRect.left <= childRect.left && containerRect.right > childRect.left;\n        const topEdgeCheck = containerRect.top <= childRect.top && containerRect.bottom > childRect.top;\n        const bottomEdgeCheck = containerRect.top < childRect.bottom && containerRect.bottom >= childRect.bottom;\n        return (rightEdgeCheck || leftEdgeCheck) && (topEdgeCheck || bottomEdgeCheck);\n    }\n\n    /**\n     * Decide whether this element is entirely or partially visible within the viewport.\n     * Note: rect1 is outside of rect2 for the dir\n     * @function isOutside\n     * @param rect1 {DOMRect}\n     * @param rect2 {DOMRect}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isOutside(rect1, rect2, dir) {\n        switch (dir) {\n            case 'left':\n                return isRightSide(rect2, rect1);\n            case 'right':\n                return isRightSide(rect1, rect2);\n            case 'up':\n                return isBelow(rect2, rect1);\n            case 'down':\n                return isBelow(rect1, rect2);\n            default:\n                return false;\n        }\n    }\n\n    /* rect1 is right of rect2 */\n    function isRightSide(rect1, rect2) {\n        return (\n            rect1.left >= rect2.right ||\n            (rect1.left >= rect2.left &&\n                rect1.right > rect2.right &&\n                rect1.bottom > rect2.top &&\n                rect1.top < rect2.bottom)\n        );\n    }\n\n    /* rect1 is below of rect2 */\n    function isBelow(rect1, rect2) {\n        return (\n            rect1.top >= rect2.bottom ||\n            (rect1.top >= rect2.top &&\n                rect1.bottom > rect2.bottom &&\n                rect1.left < rect2.right &&\n                rect1.right > rect2.left)\n        );\n    }\n\n    /* rect1 is completely aligned or partially aligned for the direction */\n    function isAligned(rect1, rect2, dir) {\n        switch (dir) {\n            case 'left':\n            /* falls through */\n            case 'right':\n                return rect1.bottom > rect2.top && rect1.top < rect2.bottom;\n            case 'up':\n            /* falls through */\n            case 'down':\n                return rect1.right > rect2.left && rect1.left < rect2.right;\n            default:\n                return false;\n        }\n    }\n\n    /**\n     * Get distance between the search origin and a candidate element along the direction when candidate element is inside the search origin.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#find-the-shortest-distance}\n     * @function getDistanceFromPoint\n     * @param point {Point} - The search origin\n     * @param element {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The euclidian distance between the spatial navigation container and an element inside it\n     */\n    function getDistanceFromPoint(point, element, dir) {\n        point = startingPoint;\n        // Get exit point, entry point -> {x: '', y: ''};\n        const points = getEntryAndExitPoints(dir, point, element);\n\n        // Find the points P1 inside the border box of starting point and P2 inside the border box of candidate\n        // that minimize the distance between these two points\n        const P1 = Math.abs(points.entryPoint.x - points.exitPoint.x);\n        const P2 = Math.abs(points.entryPoint.y - points.exitPoint.y);\n\n        // The result is euclidian distance between P1 and P2.\n        return Math.sqrt(Math.pow(P1, 2) + Math.pow(P2, 2));\n    }\n\n    /**\n     * Get distance between the search origin and a candidate element along the direction when candidate element is inside the search origin.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#find-the-shortest-distance}\n     * @function getInnerDistance\n     * @param rect1 {DOMRect} - The search origin\n     * @param rect2 {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The euclidean distance between the spatial navigation container and an element inside it\n     */\n    function getInnerDistance(rect1, rect2, dir) {\n        const baseEdgeForEachDirection = {\n            left: 'right',\n            right: 'left',\n            up: 'bottom',\n            down: 'top',\n        };\n        const baseEdge = baseEdgeForEachDirection[dir];\n\n        return Math.abs(rect1[baseEdge] - rect2[baseEdge]);\n    }\n\n    /**\n     * Get the distance between the search origin and a candidate element considering the direction.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#calculating-the-distance}\n     * @function getDistance\n     * @param searchOrigin {DOMRect | Point} - The search origin\n     * @param candidateRect {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The distance scoring between two elements\n     */\n    function getDistance(searchOrigin, candidateRect, dir) {\n        const kOrthogonalWeightForLeftRight = 30;\n        const kOrthogonalWeightForUpDown = 2;\n\n        let orthogonalBias = 0;\n        let alignBias = 0;\n        const alignWeight = 5.0;\n\n        // Get exit point, entry point -> {x: '', y: ''};\n        const points = getEntryAndExitPoints(dir, searchOrigin, candidateRect);\n\n        // Find the points P1 inside the border box of starting point and P2 inside the border box of candidate\n        // that minimize the distance between these two points\n        const P1 = Math.abs(points.entryPoint.x - points.exitPoint.x);\n        const P2 = Math.abs(points.entryPoint.y - points.exitPoint.y);\n\n        // A: The euclidean distance between P1 and P2.\n        const A = Math.sqrt(Math.pow(P1, 2) + Math.pow(P2, 2));\n        let B, C;\n\n        // B: The absolute distance in the direction which is orthogonal to dir between P1 and P2, or 0 if dir is null.\n        // C: The intersection edges between a candidate and the starting point.\n\n        // D: The square root of the area of intersection between the border boxes of candidate and starting point\n        const intersectionRect = getIntersectionRect(searchOrigin, candidateRect);\n        const D = intersectionRect.area;\n\n        switch (dir) {\n            case 'left':\n            /* falls through */\n            case 'right':\n                // If two elements are aligned, add align bias\n                // else, add orthogonal bias\n                if (isAligned(searchOrigin, candidateRect, dir))\n                    alignBias = Math.min(intersectionRect.height / searchOrigin.height, 1);\n                else orthogonalBias = searchOrigin.height / 2;\n\n                B = (P2 + orthogonalBias) * kOrthogonalWeightForLeftRight;\n                C = alignWeight * alignBias;\n                break;\n\n            case 'up':\n            /* falls through */\n            case 'down':\n                // If two elements are aligned, add align bias\n                // else, add orthogonal bias\n                if (isAligned(searchOrigin, candidateRect, dir))\n                    alignBias = Math.min(intersectionRect.width / searchOrigin.width, 1);\n                else orthogonalBias = searchOrigin.width / 2;\n\n                B = (P1 + orthogonalBias) * kOrthogonalWeightForUpDown;\n                C = alignWeight * alignBias;\n                break;\n\n            default:\n                B = 0;\n                C = 0;\n                break;\n        }\n\n        return A + B - C - D;\n    }\n\n    /**\n     * Get the euclidean distance between the search origin and a candidate element considering the direction.\n     * @function getEuclideanDistance\n     * @param rect1 {DOMRect} - The search origin\n     * @param rect2 {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The distance scoring between two elements\n     */\n    function getEuclideanDistance(rect1, rect2, dir) {\n        // Get exit point, entry point\n        const points = getEntryAndExitPoints(dir, rect1, rect2);\n\n        // Find the points P1 inside the border box of starting point and P2 inside the border box of candidate\n        // that minimize the distance between these two points\n        const P1 = Math.abs(points.entryPoint.x - points.exitPoint.x);\n        const P2 = Math.abs(points.entryPoint.y - points.exitPoint.y);\n\n        // Return the euclidean distance between P1 and P2.\n        return Math.sqrt(Math.pow(P1, 2) + Math.pow(P2, 2));\n    }\n\n    /**\n     * Get the absolute distance between the search origin and a candidate element considering the direction.\n     * @function getAbsoluteDistance\n     * @param rect1 {DOMRect} - The search origin\n     * @param rect2 {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The distance scoring between two elements\n     */\n    function getAbsoluteDistance(rect1, rect2, dir) {\n        // Get exit point, entry point\n        const points = getEntryAndExitPoints(dir, rect1, rect2);\n\n        // Return the absolute distance in the dir direction between P1 and P.\n        return dir === 'left' || dir === 'right'\n            ? Math.abs(points.entryPoint.x - points.exitPoint.x)\n            : Math.abs(points.entryPoint.y - points.exitPoint.y);\n    }\n\n    /**\n     * Get entry point and exit point of two elements considering the direction.\n     * @function getEntryAndExitPoints\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD). Default value for dir is 'down'.\n     * @param searchOrigin {DOMRect | Point} - The search origin which contains the exit point\n     * @param candidateRect {DOMRect} - One of candidates which contains the entry point\n     * @returns {Points} The exit point from the search origin and the entry point from a candidate\n     */\n    function getEntryAndExitPoints(dir = 'down', searchOrigin, candidateRect) {\n        /**\n         * User type definition for Point\n         * @typeof {Object} Points\n         * @property {Point} Points.entryPoint\n         * @property {Point} Points.exitPoint\n         */\n        const points = { entryPoint: { x: 0, y: 0 }, exitPoint: { x: 0, y: 0 } };\n\n        if (startingPoint) {\n            points.exitPoint = searchOrigin;\n\n            switch (dir) {\n                case 'left':\n                    points.entryPoint.x = candidateRect.right;\n                    break;\n                case 'up':\n                    points.entryPoint.y = candidateRect.bottom;\n                    break;\n                case 'right':\n                    points.entryPoint.x = candidateRect.left;\n                    break;\n                case 'down':\n                    points.entryPoint.y = candidateRect.top;\n                    break;\n            }\n\n            // Set orthogonal direction\n            switch (dir) {\n                case 'left':\n                case 'right':\n                    if (startingPoint.y <= candidateRect.top) {\n                        points.entryPoint.y = candidateRect.top;\n                    } else if (startingPoint.y < candidateRect.bottom) {\n                        points.entryPoint.y = startingPoint.y;\n                    } else {\n                        points.entryPoint.y = candidateRect.bottom;\n                    }\n                    break;\n\n                case 'up':\n                case 'down':\n                    if (startingPoint.x <= candidateRect.left) {\n                        points.entryPoint.x = candidateRect.left;\n                    } else if (startingPoint.x < candidateRect.right) {\n                        points.entryPoint.x = startingPoint.x;\n                    } else {\n                        points.entryPoint.x = candidateRect.right;\n                    }\n                    break;\n            }\n        } else {\n            // Set direction\n            switch (dir) {\n                case 'left':\n                    points.exitPoint.x = searchOrigin.left;\n                    points.entryPoint.x =\n                        candidateRect.right < searchOrigin.left ? candidateRect.right : searchOrigin.left;\n                    break;\n                case 'up':\n                    points.exitPoint.y = searchOrigin.top;\n                    points.entryPoint.y =\n                        candidateRect.bottom < searchOrigin.top ? candidateRect.bottom : searchOrigin.top;\n                    break;\n                case 'right':\n                    points.exitPoint.x = searchOrigin.right;\n                    points.entryPoint.x =\n                        candidateRect.left > searchOrigin.right ? candidateRect.left : searchOrigin.right;\n                    break;\n                case 'down':\n                    points.exitPoint.y = searchOrigin.bottom;\n                    points.entryPoint.y =\n                        candidateRect.top > searchOrigin.bottom ? candidateRect.top : searchOrigin.bottom;\n                    break;\n            }\n\n            // Set orthogonal direction\n            switch (dir) {\n                case 'left':\n                case 'right':\n                    if (isBelow(searchOrigin, candidateRect)) {\n                        points.exitPoint.y = searchOrigin.top;\n                        points.entryPoint.y =\n                            candidateRect.bottom < searchOrigin.top ? candidateRect.bottom : searchOrigin.top;\n                    } else if (isBelow(candidateRect, searchOrigin)) {\n                        points.exitPoint.y = searchOrigin.bottom;\n                        points.entryPoint.y =\n                            candidateRect.top > searchOrigin.bottom ? candidateRect.top : searchOrigin.bottom;\n                    } else {\n                        points.exitPoint.y = Math.max(searchOrigin.top, candidateRect.top);\n                        points.entryPoint.y = points.exitPoint.y;\n                    }\n                    break;\n\n                case 'up':\n                case 'down':\n                    if (isRightSide(searchOrigin, candidateRect)) {\n                        points.exitPoint.x = searchOrigin.left;\n                        points.entryPoint.x =\n                            candidateRect.right < searchOrigin.left ? candidateRect.right : searchOrigin.left;\n                    } else if (isRightSide(candidateRect, searchOrigin)) {\n                        points.exitPoint.x = searchOrigin.right;\n                        points.entryPoint.x =\n                            candidateRect.left > searchOrigin.right ? candidateRect.left : searchOrigin.right;\n                    } else {\n                        points.exitPoint.x = Math.max(searchOrigin.left, candidateRect.left);\n                        points.entryPoint.x = points.exitPoint.x;\n                    }\n                    break;\n            }\n        }\n\n        return points;\n    }\n\n    /**\n     * Find focusable elements within the container\n     * @see {@link https://drafts.csswg.org/css-nav-1/#find-the-shortest-distance}\n     * @function getIntersectionRect\n     * @param rect1 {DOMRect} - The search origin which contains the exit point\n     * @param rect2 {DOMRect} - One of candidates which contains the entry point\n     * @returns {IntersectionArea} The intersection area between two elements.\n     *\n     * @typeof {Object} IntersectionArea\n     * @property {Number} IntersectionArea.width\n     * @property {Number} IntersectionArea.height\n     */\n    function getIntersectionRect(rect1, rect2) {\n        const intersection_rect = { width: 0, height: 0, area: 0 };\n\n        const new_location = [Math.max(rect1.left, rect2.left), Math.max(rect1.top, rect2.top)];\n        const new_max_point = [Math.min(rect1.right, rect2.right), Math.min(rect1.bottom, rect2.bottom)];\n\n        intersection_rect.width = Math.abs(new_location[0] - new_max_point[0]);\n        intersection_rect.height = Math.abs(new_location[1] - new_max_point[1]);\n\n        if (!(new_location[0] >= new_max_point[0] || new_location[1] >= new_max_point[1])) {\n            // intersecting-cases\n            intersection_rect.area = Math.sqrt(intersection_rect.width * intersection_rect.height);\n        }\n\n        return intersection_rect;\n    }\n\n    /**\n     * Handle the spatial navigation behavior for HTMLInputElement, HTMLTextAreaElement\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input|HTMLInputElement (MDN)}\n     * @function handlingEditableElement\n     * @param e {Event} - keydownEvent\n     * @returns {boolean}\n     */\n    function handlingEditableElement(e) {\n        const SPINNABLE_INPUT_TYPES = ['email', 'date', 'month', 'number', 'time', 'week'],\n            TEXT_INPUT_TYPES = ['password', 'text', 'search', 'tel', 'url', null];\n        const eventTarget = document.activeElement;\n        const startPosition = eventTarget.selectionStart;\n        const endPosition = eventTarget.selectionEnd;\n        const focusNavigableArrowKey = {\n            left: false,\n            up: false,\n            right: false,\n            down: false,\n        };\n\n        const dir = ARROW_KEY_CODE[e.keyCode];\n        if (dir === undefined) {\n            return focusNavigableArrowKey;\n        }\n\n        if (SPINNABLE_INPUT_TYPES.includes(eventTarget.getAttribute('type')) && (dir === 'up' || dir === 'down')) {\n            focusNavigableArrowKey[dir] = true;\n        } else if (TEXT_INPUT_TYPES.includes(eventTarget.getAttribute('type')) || eventTarget.nodeName === 'TEXTAREA') {\n            if (startPosition === endPosition) {\n                // if there isn't any selected text\n                if (startPosition === 0) {\n                    focusNavigableArrowKey.left = true;\n                    focusNavigableArrowKey.up = true;\n                }\n                if (endPosition === eventTarget.value.length) {\n                    focusNavigableArrowKey.right = true;\n                    focusNavigableArrowKey.down = true;\n                }\n            }\n        } else {\n            // HTMLDataListElement, HTMLSelectElement, HTMLOptGroup\n            focusNavigableArrowKey[dir] = true;\n        }\n\n        return focusNavigableArrowKey;\n    }\n\n    /**\n     * Get the DOMRect of an element\n     * @function getBoundingClientRect\n     * @param {Node} element\n     * @returns {DOMRect}\n     */\n    function getBoundingClientRect(element) {\n        // memoization\n        let rect = mapOfBoundRect && mapOfBoundRect.get(element);\n        if (!rect) {\n            const boundingClientRect = element.getBoundingClientRect();\n            rect = {\n                top: Number(boundingClientRect.top.toFixed(2)),\n                right: Number(boundingClientRect.right.toFixed(2)),\n                bottom: Number(boundingClientRect.bottom.toFixed(2)),\n                left: Number(boundingClientRect.left.toFixed(2)),\n                width: Number(boundingClientRect.width.toFixed(2)),\n                height: Number(boundingClientRect.height.toFixed(2)),\n            };\n            mapOfBoundRect && mapOfBoundRect.set(element, rect);\n        }\n        return rect;\n    }\n\n    /**\n     * Get the candidates which is fully inside the target element in visual\n     * @param {Node} targetElement\n     * @returns {sequence<Node>}  overlappedCandidates\n     */\n    function getOverlappedCandidates(targetElement) {\n        const container = targetElement.getSpatialNavigationContainer();\n        const candidates = container.focusableAreas();\n        const overlappedCandidates = [];\n\n        candidates.forEach((element) => {\n            if (targetElement !== element && isEntirelyVisible(element, targetElement)) {\n                overlappedCandidates.push(element);\n            }\n        });\n\n        return overlappedCandidates;\n    }\n\n    /**\n     * Get the list of the experimental APIs\n     * @function getExperimentalAPI\n     */\n    function getExperimentalAPI() {\n        function canScroll(container, dir) {\n            return (\n                (isScrollable(container, dir) && !isScrollBoundary(container, dir)) ||\n                (!container.parentElement && !isHTMLScrollBoundary(container, dir))\n            );\n        }\n\n        function findTarget(findCandidate, element, dir, option) {\n            let eventTarget = element;\n            let bestNextTarget = null;\n\n            // 4\n            if (eventTarget === document || eventTarget === document.documentElement) {\n                eventTarget = document.body || document.documentElement;\n            }\n\n            // 5\n            // At this point, spatialNavigationSearch can be applied.\n            // If startingPoint is either a scroll container or the document,\n            // find the best candidate within startingPoint\n            if ((isContainer(eventTarget) || eventTarget.nodeName === 'BODY') && !(eventTarget.nodeName === 'INPUT')) {\n                if (eventTarget.nodeName === 'IFRAME') eventTarget = eventTarget.contentDocument.body;\n\n                const candidates = getSpatialNavigationCandidates(eventTarget, option);\n\n                // 5-2\n                if (Array.isArray(candidates) && candidates.length > 0) {\n                    return findCandidate\n                        ? getFilteredSpatialNavigationCandidates(eventTarget, dir, candidates)\n                        : eventTarget.spatialNavigationSearch(dir, { candidates });\n                }\n                if (canScroll(eventTarget, dir)) {\n                    return findCandidate ? [] : eventTarget;\n                }\n            }\n\n            // 6\n            // Let container be the nearest ancestor of eventTarget\n            let container = eventTarget.getSpatialNavigationContainer();\n            let parentContainer = container.parentElement ? container.getSpatialNavigationContainer() : null;\n\n            // When the container is the viewport of a browsing context\n            if (!parentContainer && window.location !== window.parent.location) {\n                parentContainer = window.parent.document.documentElement;\n            }\n\n            // 7\n            while (parentContainer) {\n                const candidates = filteredCandidates(\n                    eventTarget,\n                    getSpatialNavigationCandidates(container, option),\n                    dir,\n                    container,\n                );\n\n                if (Array.isArray(candidates) && candidates.length > 0) {\n                    bestNextTarget = eventTarget.spatialNavigationSearch(dir, {\n                        candidates,\n                        container,\n                    });\n                    if (bestNextTarget) {\n                        return findCandidate ? candidates : bestNextTarget;\n                    }\n                }\n\n                    // If there isn't any candidate and the best candidate among candidate:\n                    // 1) Scroll or 2) Find candidates of the ancestor container\n                // 8 - if\n                else if (canScroll(container, dir)) {\n                    return findCandidate ? [] : eventTarget;\n                } else if (container === document || container === document.documentElement) {\n                    container = window.document.documentElement;\n\n                    // The page is in an iframe\n                    if (window.location !== window.parent.location) {\n                        // eventTarget needs to be reset because the position of the element in the IFRAME\n                        // is unuseful when the focus moves out of the iframe\n                        eventTarget = window.frameElement;\n                        container = window.parent.document.documentElement;\n                        if (container.parentElement) parentContainer = container.getSpatialNavigationContainer();\n                        else {\n                            parentContainer = null;\n                            break;\n                        }\n                    }\n                } else {\n                    // avoiding when spatnav container with tabindex=-1\n                    if (isFocusable(container)) {\n                        eventTarget = container;\n                    }\n\n                    container = parentContainer;\n                    if (container.parentElement) parentContainer = container.getSpatialNavigationContainer();\n                    else {\n                        parentContainer = null;\n                        break;\n                    }\n                }\n            }\n\n            if (!parentContainer && container) {\n                // Getting out from the current spatnav container\n                const candidates = filteredCandidates(\n                    eventTarget,\n                    getSpatialNavigationCandidates(container, option),\n                    dir,\n                    container,\n                );\n\n                // 9\n                if (Array.isArray(candidates) && candidates.length > 0) {\n                    bestNextTarget = eventTarget.spatialNavigationSearch(dir, {\n                        candidates,\n                        container,\n                    });\n                    if (bestNextTarget) {\n                        return findCandidate ? candidates : bestNextTarget;\n                    }\n                }\n            }\n\n            if (canScroll(container, dir)) {\n                bestNextTarget = eventTarget;\n                return bestNextTarget;\n            }\n        }\n\n        return {\n            isContainer,\n            isScrollContainer,\n            isVisibleInScroller,\n            findCandidates: findTarget.bind(null, true),\n            findNextTarget: findTarget.bind(null, false),\n            getDistanceFromTarget: (element, candidateElement, dir) => {\n                if ((isContainer(element) || element.nodeName === 'BODY') && !(element.nodeName === 'INPUT')) {\n                    if (getSpatialNavigationCandidates(element).includes(candidateElement)) {\n                        return getInnerDistance(\n                            getBoundingClientRect(element),\n                            getBoundingClientRect(candidateElement),\n                            dir,\n                        );\n                    }\n                }\n                return getDistance(getBoundingClientRect(element), getBoundingClientRect(candidateElement), dir);\n            },\n        };\n    }\n\n    /**\n     * Makes to use the experimental APIs.\n     * @function enableExperimentalAPIs\n     * @param option {boolean} - If it is true, the experimental APIs can be used or it cannot.\n     */\n    function enableExperimentalAPIs(option) {\n        const currentKeyMode = window.__spatialNavigation__ && window.__spatialNavigation__.keyMode;\n        window.__spatialNavigation__ =\n            option === false ? getInitialAPIs() : Object.assign(getInitialAPIs(), getExperimentalAPI());\n        window.__spatialNavigation__.keyMode = currentKeyMode;\n        Object.seal(window.__spatialNavigation__);\n    }\n\n    /**\n     * Set the environment for using the spatial navigation polyfill.\n     * @function getInitialAPIs\n     */\n    function getInitialAPIs() {\n        return {\n            enableExperimentalAPIs,\n            get keyMode() {\n                return this._keymode ? this._keymode : 'ARROW';\n            },\n            set keyMode(mode) {\n                this._keymode = ['SHIFTARROW', 'ARROW', 'NONE'].includes(mode) ? mode : 'ARROW';\n            },\n            setStartingPoint: function (x, y) {\n                startingPoint = x && y ? { x, y } : null;\n            },\n        };\n    }\n\n    initiateSpatialNavigation();\n    enableExperimentalAPIs(true);\n\n    window.addEventListener('load', () => {\n        spatialNavigationHandler();\n    });\n})();\n\nlet currentSpatialNavigationContainer = null;\n\ndocument.addEventListener('navbeforefocus', (e) => {\n    if (e.target instanceof HTMLElement) {\n        e.preventDefault();\n\n        let { target } = e;\n\n        // focus on the first element when changing spatnav container\n        const nextSpatialNavigationContainer = target.getSpatialNavigationContainer();\n\n        if (currentSpatialNavigationContainer && currentSpatialNavigationContainer !== nextSpatialNavigationContainer) {\n            if (nextSpatialNavigationContainer.__lastElementFocused) {\n                target = nextSpatialNavigationContainer.__lastElementFocused;\n            } else {\n                [target] = nextSpatialNavigationContainer.focusableAreas({ mode: 'all' });\n            }\n            // target.focus();\n        }\n\n        currentSpatialNavigationContainer = nextSpatialNavigationContainer;\n        currentSpatialNavigationContainer.__lastElementFocused = target;\n\n        requestAnimationFrame(async () => {\n            target.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'nearest' });\n            // if (isElementInViewport(target)) {\n            //     target.focus();\n            // }\n\n            await new Promise((resolve) => {\n                const intersectionObserver = new IntersectionObserver(\n                    ([entry]) => {\n                        if (entry.isIntersecting) {\n                            resolve();\n                        }\n                    },\n                    {\n                        threshold: 1,\n                    },\n                );\n                intersectionObserver.observe(target);\n            });\n\n            target.focus();\n        });\n    }\n});\n\ndocument.addEventListener('keyup', (event) => {\n    if (event.keyCode === 13) {\n        event.preventDefault();\n        if (document.activeElement && !(document.activeElement instanceof HTMLButtonElement)) {\n            document.activeElement.click();\n        }\n    }\n});\n\n// console.log('1');\n\n// let isIntersecting = false;\n// const intersectionObserver = new IntersectionObserver(([entry]) => {\n// console.log('2');\n//   isIntersecting = entry.isIntersecting;\n// }, {\n//   threshold: 1\n// });\n// intersectionObserver.observe($0)\n// console.log('3');\n\n// start observing\n// intersectionObserver.observe());\n\nfunction isElementInViewport(el) {\n    const rect = el.getBoundingClientRect();\n    return (\n        rect.top >= 0 &&\n        rect.left >= 0 &&\n        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n        rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n}\n","/* eslint-disable @typescript-eslint/camelcase */\nexport const USER_MOCK = {\n    address: ' , 32',\n    location: ' ,  2',\n};\n\nexport const CART_MOCK = [\n    '  ',\n    '  ',\n    '  ',\n    '  ',\n    '  ',\n\n    '  ',\n    '  ',\n    '  ',\n\n    '  ',\n    '  ',\n    '  ',\n    '  ',\n    '  ',\n\n    '    ',\n    '    ',\n];\n\nexport const SHOW_ITEMS_MOCK = {\n    '2ff0d82c-681c-11e9-80c5-0cc47a817925': {\n        categories: ['', '  '],\n        main_category: '  ',\n        name: '  ',\n        clear_name: '  ',\n        guid: '2ff0d82c-681c-11e9-80c5-0cc47a817925',\n        price: '29000',\n        quantity_left: '3',\n        description: '      ',\n        brand: '',\n        barcode: 0,\n        shelf_life_days: 0,\n        properties: [],\n        package_properties: [],\n        url: '',\n        images_urls: ['https://zefirka.github.io/foodtech/images/big-salty.png'],\n        country: '',\n        producer: '',\n        storage_conditions: '',\n        'product composition': '',\n        structured_description: { protein: 0, fats: 0, carbohydrates: 0, calories: 0 },\n        package_description: { volume: null, weight: null, number: null, size: null },\n    },\n    '21ff407a-fa98-11e8-80c5-0cc47a817925': {\n        categories: ['', '  '],\n        main_category: '  ',\n        name: '   ',\n        clear_name: '   ',\n        guid: '21ff407a-fa98-11e8-80c5-0cc47a817925',\n        price: '25000',\n        quantity_left: '3',\n        description: '     ',\n        brand: '',\n        barcode: 0,\n        shelf_life_days: 0,\n        properties: [],\n        package_properties: [],\n        url: '',\n        images_urls: ['https://zefirka.github.io/foodtech/images/lil-chips.png'],\n        country: '',\n        producer: '',\n        storage_conditions: '',\n        'product composition': '',\n        structured_description: { protein: 0, fats: 0, carbohydrates: 0, calories: 0 },\n        package_description: { volume: null, weight: null, number: null, size: null },\n    },\n    '21ff407c-fa98-11e8-80c5-0cc47a817925': {\n        categories: ['', '  '],\n        main_category: '  ',\n        name: '  ',\n        clear_name: '  ',\n        guid: '21ff407c-fa98-11e8-80c5-0cc47a817925',\n        price: '18000',\n        quantity_left: '99998',\n        description: '      ',\n        brand: '',\n        barcode: 0,\n        shelf_life_days: 0,\n        properties: [],\n        package_properties: [],\n        url: '',\n        images_urls: ['https://zefirka.github.io/foodtech/images/sweet.png'],\n        country: '',\n        producer: '',\n        storage_conditions: '',\n        'product composition': '',\n        structured_description: { protein: 0, fats: 0, carbohydrates: 0, calories: 0 },\n        package_description: { volume: null, weight: null, number: null, size: null },\n    },\n    '21ff4078-fa98-11e8-80c5-0cc47a817925': {\n        categories: ['', '  '],\n        main_category: '  ',\n        name: '  ',\n        clear_name: '  ',\n        guid: '21ff4078-fa98-11e8-80c5-0cc47a817925',\n        price: '14000',\n        quantity_left: '100000',\n        description: '     ',\n        brand: '',\n        barcode: 0,\n        shelf_life_days: 0,\n        properties: [],\n        package_properties: [],\n        url: '',\n        images_urls: ['https://zefirka.github.io/foodtech/images/lil-salty.png'],\n        country: '',\n        producer: '',\n        storage_conditions: '',\n        'product composition': '',\n        structured_description: { protein: 0, fats: 0, carbohydrates: 0, calories: 0 },\n        package_description: { volume: null, weight: null, number: null, size: null },\n    },\n};\n/* eslint-enable @typescript-eslint/camelcase */\n","import { createHashHistory } from 'history';\n\nexport default createHashHistory();\n","import { types, applySnapshot, Instance, SnapshotIn, SnapshotOut } from 'mobx-state-tree';\n\nconst User = types\n    .model('User', {\n        address: types.maybeNull(types.string),\n        location: types.maybeNull(types.string),\n        phoneNumber: types.maybeNull(types.string),\n        name: types.maybeNull(types.string),\n    })\n    .actions((self) => ({\n        updateUser: (user: Record<string, string>) => {\n            applySnapshot(self, { ...self, ...user });\n        },\n    }));\n\nexport default User;\n\nexport type UserSnapshotOut = SnapshotOut<typeof User>;\nexport type UserSnapshotIn = SnapshotIn<typeof User>;\nexport type UserModel = Instance<typeof User>;\n","import { types, Instance, SnapshotIn, SnapshotOut } from 'mobx-state-tree';\n\nconst ProductItem = types.model('Product', {\n    id: types.identifier,\n    name: types.string,\n    clearName: types.string,\n    price: types.number,\n    imagesUrls: types.array(types.string),\n    index: types.maybeNull(types.number),\n    visible: types.maybeNull(types.boolean),\n});\n\nexport default ProductItem;\n\nexport type ProductItemSnapshotOut = SnapshotOut<typeof ProductItem>;\nexport type ProductItemSnapshotIn = SnapshotIn<typeof ProductItem>;\nexport type ProductItemModel = Instance<typeof ProductItem>;\n","import { types, Instance, SnapshotIn, SnapshotOut } from 'mobx-state-tree';\n\nimport ProductItem, { ProductItemModel } from './product';\n\nconst Products = types\n    .model('Products', {\n        title: types.optional(types.string, ''),\n        items: types.array(ProductItem),\n        selectedId: types.maybeNull(types.string),\n    })\n    .actions((self) => {\n        const products = self;\n        const setVisibility = (item: ProductItemModel, value: boolean, index: number | null): void => {\n            item.visible = value;\n            item.index = index;\n        };\n\n        const selectItem = (itemId: string): void => {\n            if (products.items.find((item) => item.id === itemId)) {\n                products.selectedId = itemId;\n            }\n        };\n\n        return {\n            setVisibility,\n            selectItem,\n        };\n    });\n\nexport default Products;\n\nexport type ProductsModel = Instance<typeof Products>;\nexport type ProductsSnapshotOut = SnapshotOut<typeof Products>;\nexport type ProductsSnapshotIn = SnapshotIn<typeof Products>;\n","import { types, Instance, SnapshotIn, cast, SnapshotOut } from 'mobx-state-tree';\nimport { isDevelopment } from 'configs';\n\nimport ProductItem from './product';\n\nconst CartItem = types.model('CartItem', {\n    product: types.reference(ProductItem),\n    count: types.number,\n});\n\nexport type CartItemModel = Instance<typeof CartItem>;\n\nconst Cart = types\n    .model('Cart', {\n        items: types.array(CartItem),\n        orderId: types.maybeNull(types.string),\n    })\n    .views((self) => ({\n        get count(): number {\n            return self.items.reduce((acc: number, item: CartItemModel) => acc + item.count, 0);\n        },\n\n        get totalPrice(): number {\n            return self.items.reduce(\n                (acc: number, item: CartItemModel) => acc + Math.floor(item.product.price * item.count) / 100,\n                0,\n            );\n        },\n\n        get itemsMap(): { [key: string]: CartItemModel } {\n            return self.items.reduce((acc: Record<string, CartItemModel>, item: CartItemModel) => {\n                acc[item.product.id] = item;\n\n                return acc;\n            }, {});\n        },\n    }))\n    .actions((self) => {\n        const cart = self;\n\n        const addToCart = (itemId: string, count = 1) => {\n            const item = cart.items.find((item) => item.product.id === itemId);\n\n            if (item) {\n                item.count += count;\n            } else {\n                cart.items.push({\n                    product: itemId,\n                    count,\n                });\n            }\n        };\n\n        const clear = (): void => {\n            cart.items = cast([]);\n        };\n\n        interface RemoveFromCartParams {\n            itemId: string;\n            count: number;\n            shouldRemoveMention?: boolean;\n        }\n\n        const removeFromCart = ({ itemId, count, shouldRemoveMention }: RemoveFromCartParams) => {\n            const index = cart.items.findIndex((item: CartItemModel) => item.product.id === itemId);\n            const item = cart.items[index];\n\n            if (!item) {\n                return;\n            }\n\n            item.count = Math.max(0, item.count - count);\n\n            if (!item.count && shouldRemoveMention) {\n                cart.items.splice(index, 1);\n            }\n        };\n\n        const makePurchase = () => {\n            window.AssistantClient.sendData({\n                // eslint-disable-next-line @typescript-eslint/camelcase\n                action_id: 'MAKE_PURCHASE',\n                // action_id: 'make_purchase',\n            });\n\n            if (isDevelopment) {\n                window.AssistantClient.onData({\n                    type: 'smart_app_data',\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    smart_app_data: {\n                        command: 'VALIDATION_OK',\n                        status: true,\n                        orderId: '364528',\n                    },\n                });\n            }\n        };\n\n        return {\n            clear,\n            addToCart,\n            removeFromCart,\n            makePurchase,\n        };\n    });\n\nexport type CartModel = Instance<typeof Cart>;\nexport type CartSnapshotOut = SnapshotOut<typeof Cart>;\nexport type CartSnapshotIn = SnapshotIn<typeof Cart>;\n\nexport default Cart;\n","import { applySnapshot } from 'mobx-state-tree';\n\nimport { StoreType } from './types';\nimport { routes } from './ui';\n\ninterface VpsStockItem {\n    name: string;\n    clear_name: string; // eslint-disable-line camelcase\n    guid: string;\n    price: string;\n    images_urls: string[]; // eslint-disable-line camelcase\n}\n\ninterface AddItemsCommand {\n    stock: VpsStockItem[];\n}\n\nconst showItemsCast = (store: StoreType, command: AddItemsCommand): void => {\n    const stock = Object.values(command.stock);\n    const items = stock.map((item: VpsStockItem) => ({\n        id: item.guid,\n        name: item.name,\n        clearName: item.clear_name,\n        price: Number(item.price),\n        guid: item.guid,\n        imagesUrls: item.images_urls,\n    }));\n\n    applySnapshot(store.products, {\n        title: '',\n        items,\n    });\n};\n\ninterface VpsAddItem extends AssistantSdkCommand {\n    item: string;\n    count: string;\n}\n\nconst addItemCast = (store: StoreType, command: VpsAddItem): void => {\n    const { item: itemId, count } = command;\n\n    store.cart.addToCart(itemId, Number(count));\n};\n\ninterface RemoveItemFromCartCommand extends AssistantSdkCommand {\n    item: string;\n    count: string;\n}\n\nconst removeItem = (store: StoreType, { item, count }: RemoveItemFromCartCommand) =>\n    store.cart.removeFromCart({ itemId: item, count: Number(count), shouldRemoveMention: true });\n\nconst removeAll = (store: StoreType) => store.cart.clear();\n\nconst goTo = (page: string) => (store: StoreType) => store.ui.gotoPage(page);\n\ninterface GotoCatalogCommand extends AssistantSdkCommand {\n    clear: boolean;\n    address_string: string;\n}\n\nconst gotoCatalog = (store: StoreType, command: GotoCatalogCommand): void => {\n    if (command.clear) {\n        store.cart.clear();\n    }\n\n    store.user.address = command.address_string;\n\n    // TODO: \n    // store.ui.gotoPage(routes.CATALOG);\n};\n\ninterface ValidationOkCommand extends AssistantSdkCommand {\n    order_id: string; // eslint-disable-line camelcase\n}\n\nconst success = (store: StoreType, command: ValidationOkCommand): void => {\n    store.cart.orderId = command.order_id;\n    store.ui.gotoPage(routes.STATUS);\n};\n\nconst casts: { [key: string]: Function } = {\n    SHOW_ITEMS: showItemsCast,\n    ADD_ITEM: addItemCast,\n    REMOVE_ITEM: removeItem,\n    REMOVE_ALL: removeAll,\n    GO_TO_VALIDATION: goTo(routes.CART),\n    GO_TO_NO_AREA: goTo(routes.NO_AREA),\n    GO_TO_ADDRESS_SIMPLE: goTo(routes.PROMO),\n    GO_TO_CATALOG: gotoCatalog,\n    VALIDATION_OK: success,\n};\n\nexport default casts;\n","import { types } from 'mobx-state-tree';\nimport { isDevelopment } from 'configs';\nimport { USER_MOCK } from 'mocks';\n\nimport user from './user';\nimport ui, { routes } from './ui';\nimport products from './products';\nimport cart from './cart';\nimport { StoreType } from './types';\nimport casts from './casts';\n\nconst Store = types\n    .model('Store', {\n        ui: types.optional(ui, {}),\n        products: types.optional(products, {}),\n        cart: types.optional(cart, {}),\n        user: types.optional(user, {}),\n    })\n    .actions((self) => {\n        const store = self;\n\n        const afterCreate = function init() {\n            if (window.AssistantHost && typeof window.AssistantHost.ready === 'function') {\n                console.log('call ready native method');\n                window.AssistantHost.ready();\n            }\n\n            if (isDevelopment) {\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'GO_TO_CATALOG',\n                            // eslint-disable-next-line @typescript-eslint/camelcase\n                            address_string: USER_MOCK.address,\n                        },\n                    });\n                }, 0);\n            }\n        };\n\n        const onMessage = (message: AssistantSdkCommand): void => {\n            const { command } = message.smart_app_data;\n\n            if (command in casts) {\n                const castFn = casts[command];\n\n                castFn(store, message.smart_app_data);\n            }\n        };\n\n        return { onMessage, afterCreate };\n    });\n\nconst store = Store.create({});\n\n// eslint-disable-next-line no-underscore-dangle\nwindow.__store = store;\n\nfunction castFromStore(store: StoreType): AppStateInterface {\n    return {\n        items:\n            store.ui.page === routes.CATALOG\n                ? store.products.items.map((product) => ({\n                      number: product.index,\n                      title: product.name,\n                      visibles: product.visible,\n                      id: product.id,\n                      count_in_cart: store.cart.itemsMap[product.id] ? store.cart.itemsMap[product.id].count : 0, // eslint-disable-line\n                      action: {},\n                  }))\n                : [],\n        currentScreen: store.ui.page === routes.CATALOG ? 'catalog' : 'cart', // eslint-disable-line\n        foodtech: {\n            products: Object.keys(store.cart.itemsMap).map((itemId) => ({\n                id: itemId,\n                quantity: store.cart.itemsMap[itemId].count,\n            })),\n            totalPrice: {\n                value: store.cart.totalPrice,\n                discountValue: 0,\n            },\n            address: {\n                // eslint-disable-next-line @typescript-eslint/camelcase\n                address_string: store.user.address || undefined,\n            },\n        },\n    };\n}\n\nwindow.AssistantClient = window.AssistantClient || {};\n// eslint-disable-next-line no-underscore-dangle\nwindow.__inbox = window.__inbox || [];\n// eslint-disable-next-line no-underscore-dangle\nwindow.__outbox = window.__outbox || [];\n\n/**\n * Assistand SDK API implementation:\n */\nwindow.AssistantClient.onStart = function AssistantSdkOnStart() {\n    console.log('invoke onStart callback');\n};\n\nwindow.AssistantClient.onData = function AssistantSdkOnMessage(command: AssistantSdkCommand): void {\n    // eslint-disable-next-line no-underscore-dangle\n    window.__inbox.push(command);\n    console.log('server message', command);\n    store.onMessage(command);\n};\n\nwindow.AssistantClient.sendData = function AssistantSdkSendMessage(message: any): void {\n    // eslint-disable-next-line no-underscore-dangle\n    window.__outbox.push({ message, store: castFromStore(store) });\n\n    console.log('sendData', message);\n\n    if (window.AssistantHost && typeof window.AssistantHost.sendData === 'function') {\n        window.AssistantHost.sendData(JSON.stringify(message), null);\n    }\n};\n\nwindow.AssistantClient.onRequestState = function AssistantSdkOnRequestState(): void {\n    console.log('invoke request state callback');\n    const state = castFromStore(store);\n\n    if (window.AssistantHost && typeof window.AssistantHost.updateState === 'function') {\n        window.AssistantHost.updateState(JSON.stringify(state));\n    }\n};\n\nexport default store;\n","import React from 'react';\n\nimport './Suggest.scss';\n\ninterface SuggestProps {\n    items: string[];\n}\n\nexport const Suggest: React.FC<SuggestProps> = ({ items }) => (\n    <div className=\"Suggest\">\n        {items.map((item) => (\n            <div className=\"Suggest-Item\" key={item}>\n                {item}\n            </div>\n        ))}\n    </div>\n);\n","import config from 'configs';\n\nconst PREFIX = config.cssPrefix || '';\n\ninterface ConfitionsInterface<T> {\n    T?: boolean;\n}\n\nexport default (blockName: string, delimeter = '__', modDelimeter = '_'): BemRenderer => {\n    function renderer(...elements: string[]): string {\n        if (!elements.length) {\n            return PREFIX + blockName;\n        }\n\n        return elements.map((element) => PREFIX + blockName + delimeter + element).join(' ');\n    }\n\n    renderer.elem = (element: string, mod: string, modVal?: string): string =>\n        PREFIX + blockName + delimeter + element + modDelimeter + mod + (modVal ? modDelimeter + modVal : '');\n\n    renderer.mod = (mod: string, modVal?: string): string =>\n        PREFIX + blockName + modDelimeter + mod + (modVal ? modDelimeter + modVal : '');\n\n    renderer.modify = (conditions: ConfitionsInterface<string> = {}, elem?: string): string => {\n        const elemToModify = elem ? blockName + delimeter + elem : blockName;\n\n        return [\n            PREFIX,\n            elemToModify,\n            ' ',\n            Object.entries(conditions)\n                .map(([mod, predicate]) => Boolean(predicate) && PREFIX + elemToModify + modDelimeter + mod)\n                .filter(Boolean)\n                .join(' '),\n        ].join('');\n    };\n\n    renderer.all = (...values: string[]): string => values.join(' ');\n\n    return renderer;\n};\n","import React from 'react';\nimport Bem from 'tools/bem';\n\nexport default (Component: React.FC<any>, componentName?: string) => (props?: any, context?: any) => (\n    <Component {...props} context={context} bem={Bem(componentName || Component.name)} />\n);\n","import React from 'react';\nimport { StoreType } from 'stores/types';\nimport withBem from 'hoc/withBem';\nimport { connectToStore } from 'tools/connect';\n\nimport './Header.scss';\n\ninterface HeaderProps extends BemProps, StoreType {\n    className?: string;\n    title: string;\n}\n\nconst Component: React.FC<HeaderProps> = ({ bem, ui, title, children, className }) => (\n    <div className={bem.all(bem(), className || '')}>\n        {ui.previous ? <span className={bem('back')} /> : ''}\n        <div className={bem('section')}>\n            <div className={bem('logo')} />\n            <div className={bem('title')}>{title}</div>\n        </div>\n        <div className={bem('section')}>{children}</div>\n    </div>\n);\n\nexport const Header = connectToStore(withBem(Component, 'Header'));\n","import React from 'react';\nimport { connectToStore } from 'tools/connect';\nimport { StoreType } from 'stores/types';\nimport withBem from 'hoc/withBem';\nimport { routes } from 'stores/ui';\n\nimport './HeaderAddress.scss';\n\ninterface HeaderAddressProps extends StoreType, BemProps {}\n\nconst Component: React.FC<HeaderAddressProps> = ({ user, ui, bem }) => (\n    <div className={bem()} tabIndex={0} onClick={() => ui.gotoPage(routes.ADDRESS_SIMPLE)}>\n        <div className={bem('icon')} />\n        <div className={bem('text')}>{user.address}</div>\n    </div>\n);\n\nexport const HeaderAddress = withBem(connectToStore(Component), 'HeaderAddress');\n","export const splitByThousands = (data: string) =>\n    data.split('').reduceRight((acc, item, index, arr) => {\n        const indexFromEnd = index - (arr.length - 1);\n\n        if (indexFromEnd % 3 === 0) {\n            acc = ` ${acc}`;\n        }\n\n        return item + acc;\n    }, '');\n","import React from 'react';\nimport { connectToStore } from 'tools/connect';\nimport { StoreType } from 'stores/types';\nimport withBem from 'hoc/withBem';\nimport { splitByThousands } from 'tools';\n\nimport './HeaderCart.scss';\n\ninterface HeaderCartProps extends StoreType, BemProps {}\n\nconst Component: React.FC<HeaderCartProps> = ({ cart, ui, bem }) => (\n    <div className={bem()} tabIndex={0} onClick={() => ui.goToCart()}>\n        <div className={bem('icon')}>{cart.count > 0 && <span className={bem('badge')}>{cart.count}</span>}</div>\n        <div className={bem('price')}>{splitByThousands(String(cart.totalPrice))} </div>\n    </div>\n);\n\nexport const HeaderCart = withBem(connectToStore(Component), 'HeaderCart');\n","import React from 'react';\n\nexport function useFocusOnMount<T>() {\n    const ref = React.useRef<T>(null);\n\n    React.useLayoutEffect(() => {\n        if (ref.current instanceof HTMLElement) {\n            ref.current.focus();\n        }\n    }, []);\n\n    return ref;\n}\n","import React from 'react';\nimport withBem from 'hoc/withBem';\nimport { ProductItemModel } from 'stores/product';\n\nimport './CatalogListItem.scss';\n\ninterface CatalogListItemProps extends ProductItemModel, BemProps {\n    mountRef?: React.RefObject<HTMLDivElement>;\n    countInCart: number;\n    onClick: () => void;\n}\n\nconst Component: React.FC<CatalogListItemProps> = ({\n    bem,\n    imagesUrls,\n    countInCart,\n    name,\n    price,\n    index,\n    onClick,\n    mountRef,\n}) => (\n    <div tabIndex={0} className={bem()} onClick={onClick} ref={mountRef}>\n        <div className={bem('index-badge')}>{index}</div>\n        <div className={bem('thumb')} style={{ backgroundImage: `url(${imagesUrls[0]})` }} />\n        <div className={bem('description')}>\n            <div className={bem.modify({ done: Boolean(countInCart) }, 'add-badge')} />\n            <div className={bem('description-name')}>{name}</div>\n            <div className={bem('price-container')}>\n                <div className={bem('price')}>{Math.floor(Number(price) / 100)} </div>\n                {countInCart ? <div className={bem('count')}>{countInCart}</div> : ''}\n            </div>\n        </div>\n    </div>\n);\n\nexport const CatalogListItem = withBem(Component, 'CatalogListItem');\n","import React from 'react';\nimport { connectToStore } from 'tools/connect';\nimport withBem from 'hoc/withBem';\nimport { StoreType } from 'stores/types';\nimport { ProductItemModel } from 'stores/product';\nimport { useFocusOnMount } from 'hooks';\n\nimport { CatalogListItem } from '../ListItem/CatalogListItem';\nimport './CatalogList.scss';\n\ninterface CatalogListProps extends StoreType, BemProps {\n    childKeyPrefix: string;\n}\n\nconst Component: React.FC<CatalogListProps> = ({ bem, products, cart }) => {\n    const mountFocusRef = useFocusOnMount<HTMLDivElement>();\n\n    return (\n        <div className={bem()}>\n            <div className={bem('container')}>\n                {products.items.map((item: ProductItemModel, index) => (\n                    <CatalogListItem\n                        {...item}\n                        mountRef={!index ? mountFocusRef : undefined}\n                        countInCart={cart.itemsMap[item.id] ? cart.itemsMap[item.id].count : 0}\n                        key={item.id}\n                        index={index + 1}\n                        onClick={() => cart.addToCart(item.id)}\n                    />\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport const CatalogList = withBem(connectToStore(Component), 'CatalogList');\n","import React from 'react';\nimport ContentLoader, { IContentLoaderProps } from 'react-content-loader';\n\ninterface SkeletonProps extends IContentLoaderProps {\n    itemWidth: number;\n    itemHeight: number;\n    borderRadius: number;\n    rowCount: number;\n    columnCount: number;\n    paddingBetweenColumns: number;\n    paddingBetweenRows: number;\n}\n\nexport const Skeleton: React.FC<SkeletonProps> = ({\n    itemWidth,\n    itemHeight,\n    borderRadius,\n    rowCount,\n    columnCount,\n    paddingBetweenColumns,\n    paddingBetweenRows,\n    ...props\n}) => {\n    const list = Array.from(Array(columnCount)).map((_, columnIndex) =>\n        Array.from(Array(rowCount)).map((_, rowIndex) => (\n            <rect\n                key={`${columnIndex} ${rowIndex}`}\n                x={columnIndex * (itemWidth + paddingBetweenColumns)}\n                y={rowIndex * (itemHeight + paddingBetweenRows)}\n                width={itemWidth}\n                height={itemHeight}\n                rx={borderRadius}\n                ry={borderRadius}\n            />\n        )),\n    );\n\n    return <ContentLoader {...props}>{list}</ContentLoader>;\n};\n","import React from 'react';\nimport { Skeleton } from 'components/Skeleton/Skeleton';\nimport withBem from 'hoc/withBem';\n\nimport './CatalogSkeleton.scss';\n\ntype CatalogSkeletonProps = BemProps;\n\nexport const Component: React.FC<CatalogSkeletonProps> = ({ bem }) => (\n    <div className={bem()}>\n        <Skeleton\n            viewBox={`0 0 ${392 * 5 + 32 * 4} ${592}`}\n            width=\"100%\"\n            height=\"100%\"\n            backgroundColor=\"#262828\"\n            foregroundColor=\"#414545\"\n            itemWidth={392}\n            itemHeight={592}\n            borderRadius={24}\n            rowCount={2}\n            columnCount={5}\n            paddingBetweenRows={32}\n            paddingBetweenColumns={32}\n            speed={2}\n        />\n    </div>\n);\n\nexport const CatalogSkeleton = withBem(Component, 'CatalogSkeleton');\n","import React from 'react';\nimport { SHOW_ITEMS_MOCK } from 'mocks';\nimport { isDevelopment } from 'configs';\nimport { Suggest } from 'components/Suggest/Suggest';\nimport { Header } from 'components/Header/Header';\nimport { HeaderAddress } from 'components/HeaderAddress/HeaderAddress';\nimport { HeaderCart } from 'components/HeaderCart/HeaderCart';\nimport { connectToStore } from 'tools/connect';\nimport { StoreType } from 'stores/types';\n\nimport { CatalogList } from './List/CatalogList';\nimport { CatalogSkeleton } from './Skeleton/CatalogSkeleton';\n\ntype CatalogProps = StoreType;\n\nconst Component: React.FC<CatalogProps> = ({ cart, products }) => {\n    React.useEffect(() => {\n        console.log('ask for stock');\n        window.AssistantClient.sendData({\n            // eslint-disable-next-line @typescript-eslint/camelcase\n            action_id: 'ASK_FOR_STOCK',\n        });\n    }, []);\n\n    React.useEffect(() => {\n        if (isDevelopment) {\n            window.AssistantClient.onData({\n                type: 'smart_app_data',\n                // eslint-disable-next-line\n                smart_app_data: {\n                    command: 'SHOW_ITEMS',\n                    stock: SHOW_ITEMS_MOCK,\n                },\n            });\n\n            window.AssistantClient.onData({\n                type: 'smart_app_data',\n                // eslint-disable-next-line\n                smart_app_data: {\n                    command: 'ADD_ITEM',\n                    item: '21ff407a-fa98-11e8-80c5-0cc47a817925',\n                    count: '2',\n                },\n            });\n        }\n    }, []);\n\n    React.useEffect(() => {\n        const onKeyDown = (event: any) => {\n            switch (event.code) {\n                case 'Digit1':\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line\n                        smart_app_data: {\n                            command: 'SHOW_ITEMS',\n                            stock: SHOW_ITEMS_MOCK,\n                        },\n                    });\n                    break;\n                case 'Digit2':\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line\n                        smart_app_data: {\n                            command: 'REMOVE_ITEM',\n                            item: '32e5b884-fa98-11e8-80c5-0cc47a817925',\n                            count: '2',\n                        },\n                    });\n                    break;\n                case 'Digit3':\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line\n                        smart_app_data: {\n                            command: 'REMOVE_ALL',\n                        },\n                    });\n                    break;\n                default:\n            }\n        };\n\n        document.addEventListener('keydown', onKeyDown);\n\n        return () => {\n            document.removeEventListener('keydown', onKeyDown);\n        };\n    }, []);\n\n    return (\n        <>\n            <Header title=\"\">\n                <HeaderAddress />\n                {cart.count > 0 ? <HeaderCart /> : ''}\n            </Header>\n            {products.items.length ? <CatalogList /> : <CatalogSkeleton />}\n            {isDevelopment ? (\n                <Suggest items={['1.  ', '2.     ', '3.  ']} />\n            ) : (\n                ''\n            )}\n        </>\n    );\n};\n\nexport const Catalog = connectToStore(Component);\n","import React from 'react';\nimport withBem from 'hoc/withBem';\nimport { useFocusOnMount } from 'hooks';\n\nimport './Button.scss';\n\ninterface ButtonProps extends BemProps, React.HTMLAttributes<HTMLButtonElement> {\n    shouldFocusOnMount?: boolean;\n}\n\nconst Component: React.FC<ButtonProps> = ({ bem, children, className, shouldFocusOnMount, ...props }) => {\n    const mountFocusRef = useFocusOnMount<HTMLButtonElement>();\n\n    return (\n        <button\n            className={bem.all(bem(), className || '')}\n            ref={shouldFocusOnMount ? mountFocusRef : null}\n            type=\"button\"\n            {...props}\n        >\n            {children}\n        </button>\n    );\n};\n\nexport const Button = withBem(Component, 'Button');\n","import React from 'react';\nimport withBem from 'hoc/withBem';\nimport { connectToStore } from 'tools/connect';\nimport { Button } from 'components/Button/Button';\nimport { StoreType } from 'stores/types';\n\nimport './CartInfo.scss';\n\ninterface CartInfoProps extends BemProps, StoreType {}\n\nconst addAddressInfo = (user: StoreType['user']) =>\n    user.updateUser({\n        location: ' 1,  ',\n        phoneNumber: '+7 910 345 67 89',\n        name: '',\n    });\n\nconst Component: React.FC<CartInfoProps> = ({ bem, user, cart }) => {\n    const { phoneNumber, address, location, name } = user;\n    const hasPersonalData = phoneNumber && address && location && name;\n\n    return (\n        <div className={bem()}>\n            <div className={bem('badge')}>\n                <div className={bem('badge-body')}>\n                    <div className={bem('badge-name')}>15-30</div>\n                    <div className={bem('badge-desc')}></div>\n                </div>\n                <div className={bem('badge-kernel')} />\n                <div className={bem.modify({ big: true }, 'badge-shadow')} />\n                <div className={bem.modify({ small: true }, 'badge-shadow')} />\n            </div>\n            <div className={bem('address')}>{user.address}</div>\n            {hasPersonalData ? (\n                <>\n                    <div className={bem('personal')}>\n                        <div className={bem('personal-location')}>{user.location}</div>\n                        <div className={bem('personal-phone-number')}>{user.phoneNumber}</div>\n                        <div className={bem('personal-name')}>{user.name}</div>\n                    </div>\n                    <Button\n                        className={bem.modify({ disabled: false }, 'button')}\n                        shouldFocusOnMount\n                        onClick={() => cart.makePurchase()}\n                    >\n                          \n                    </Button>\n                </>\n            ) : (\n                <>\n                    <div className={bem('ask-personal')}>\n                          ,  ,     \n                    </div>\n                    <Button\n                        className={bem.modify({ disabled: false }, 'button')}\n                        shouldFocusOnMount\n                        onClick={() => addAddressInfo(user)}\n                    >\n                         \n                    </Button>\n                </>\n            )}\n        </div>\n    );\n};\n\nexport const CartInfo = withBem(connectToStore(Component), 'CartInfo');\n","import React from 'react';\nimport { CartItemModel } from 'stores/cart';\nimport withBem from 'hoc/withBem';\n\nimport './CartListItem.scss';\n\ninterface CartListItemProps extends CartItemModel, BemProps {\n    index: number;\n    onMoreClick: () => void;\n    onLessClick: () => void;\n    onSelect: (index: number) => void;\n}\n\nconst Component: React.FC<CartListItemProps> = ({\n    index,\n    onLessClick,\n    onMoreClick,\n    onSelect,\n    product: { imagesUrls, clearName, price },\n    count,\n    bem,\n}) => {\n    const [selected, setFocus] = React.useState(false);\n    const memoizedOnFocus = React.useCallback(() => {\n        onSelect(index - 1); // -1       \n        setFocus(true);\n    }, [onSelect, index]);\n\n    return (\n        <div className={bem()}>\n            <div className={bem('index-badge')}>{index}</div>\n            <div className={bem('image')} style={{ backgroundImage: `url(\"${imagesUrls[0]}\")` }} />\n            <div className={bem('info')}>\n                <div className={bem('name')}>{clearName}</div>\n                <div className={bem('price')}>{Math.floor(Number(price) / 100)} </div>\n            </div>\n            <div className={bem.modify({ selected }, 'selector')}>\n                <div\n                    tabIndex={0}\n                    className={bem.modify({ less: !!count, remove: !count }, 'selector-button')}\n                    onFocus={memoizedOnFocus}\n                    onBlur={() => setFocus(false)}\n                    onClick={onLessClick}\n                />\n                <div className={bem('selector-value')}>{count}</div>\n                <div\n                    tabIndex={0}\n                    className={bem.modify({ more: true }, 'selector-button')}\n                    onFocus={memoizedOnFocus}\n                    onBlur={() => setFocus(false)}\n                    onClick={onMoreClick}\n                />\n            </div>\n        </div>\n    );\n};\n\nexport const CartListItem = withBem(Component, 'CartListItem');\n","import React from 'react';\nimport { connectToStore } from 'tools/connect';\nimport { splitByThousands } from 'tools';\nimport { isDevelopment } from 'configs';\nimport { StoreType } from 'stores/types';\nimport { SHOW_ITEMS_MOCK } from 'mocks';\nimport withBem from 'hoc/withBem';\n\nimport { CartListItem } from '../ListItem/CartListItem';\n\nimport './CartList.scss';\n\ninterface CartListProps extends StoreType, BemProps {}\n\nconst ITEM_WIDTH = 152;\n\nconst onScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    e.currentTarget.scrollTop = 0;\n};\n\nconst getOffset = (index: number, itemsCount: number) => {\n    console.log('get offset', index, itemsCount);\n\n    //      0,      \n    //    ( = 1),      \n    // 3- ,     1\n    let relatedIndex = Math.max(0, index - 1);\n\n    //    \n    relatedIndex = Math.min(Math.max(0, itemsCount - 4), relatedIndex);\n\n    console.log('related index', relatedIndex);\n    //      \n    return relatedIndex * ITEM_WIDTH;\n};\n\n// TODO:    \n// TODO:    \n\nconst Component: React.FC<CartListProps> = ({ cart, bem }) => {\n    const { items } = cart;\n    // const items = [...cart.items, ...cart.items, ...cart.items];\n    const [selectedItemIndex, setSelectedItemIndex] = React.useState(0);\n    const isFirstItemSelected = !selectedItemIndex;\n    const isLastItemSelected = selectedItemIndex === items.length - 1;\n\n    const wrapperStyle: React.CSSProperties = {\n        transform: `translateY(-${getOffset(selectedItemIndex, items.length)}px)`,\n    };\n\n    React.useEffect(() => {\n        if (isDevelopment) {\n            window.AssistantClient.onData({\n                type: 'smart_app_data',\n                // eslint-disable-next-line\n                smart_app_data: {\n                    command: 'SHOW_ITEMS',\n                    stock: SHOW_ITEMS_MOCK,\n                },\n            });\n\n            [\n                { item: '21ff4078-fa98-11e8-80c5-0cc47a817925', count: 5 },\n                { item: '21ff407a-fa98-11e8-80c5-0cc47a817925', count: 4 },\n                { item: '2ff0d82c-681c-11e9-80c5-0cc47a817925', count: 2 },\n                { item: '21ff407c-fa98-11e8-80c5-0cc47a817925', count: 5 },\n            ].map(({ item, count }) =>\n                window.AssistantClient.onData({\n                    type: 'smart_app_data',\n                    // eslint-disable-next-line\n                    smart_app_data: {\n                        command: 'ADD_ITEM',\n                        item,\n                        count,\n                    },\n                }),\n            );\n        }\n    }, []);\n\n    return (\n        <div className={bem()}>\n            <div className={bem('container')} onScroll={onScroll}>\n                <div\n                    className={bem.modify({ top: true, hidden: items.length <= 4 || isFirstItemSelected }, 'gradient')}\n                />\n                <div className={bem('wrapper')} style={wrapperStyle}>\n                    {items.map((item, index) => (\n                        <CartListItem\n                            {...item}\n                            onSelect={setSelectedItemIndex}\n                            onLessClick={() =>\n                                cart.removeFromCart({\n                                    itemId: item.product.id,\n                                    count: 1,\n                                    shouldRemoveMention: !item.count,\n                                })\n                            }\n                            onMoreClick={() => cart.addToCart(item.product.id)}\n                            index={index + 1}\n                            key={`${item.product.id} TODO ${index}`}\n                        />\n                    ))}\n                </div>\n                <div\n                    className={bem.modify(\n                        { bottom: true, hidden: items.length <= 4 || isLastItemSelected },\n                        'gradient',\n                    )}\n                />\n            </div>\n            <div className={bem('total-price')}>  {splitByThousands(String(cart.totalPrice))} </div>\n        </div>\n    );\n};\n\nexport const CartList = withBem(connectToStore(Component), 'CartList');\n","import React from 'react';\nimport { applySnapshot } from 'mobx-state-tree';\nimport { isDevelopment } from 'configs';\nimport { USER_MOCK } from 'mocks';\nimport { Suggest } from 'components/Suggest/Suggest';\nimport { Header } from 'components/Header/Header';\nimport { connectToStore } from 'tools/connect';\nimport { StoreType } from 'stores/types';\nimport withBem from 'hoc/withBem';\n\nimport { CartInfo } from './Info/CartInfo';\nimport { CartList } from './List/CartList';\nimport './Cart.scss';\n\ninterface CartProps extends StoreType, BemProps {}\n\nconst Component: React.FC<CartProps> = ({ user, bem }) => {\n    React.useEffect(() => {\n        const onKeyDown = (event: any) => {\n            switch (event.code) {\n                case 'Digit1':\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line\n                        smart_app_data: {\n                            command: 'REMOVE_ITEM',\n                            item: '32e5b884-fa98-11e8-80c5-0cc47a817925',\n                            count: 2,\n                        },\n                    });\n                    break;\n                case 'Digit2':\n                    applySnapshot(user, USER_MOCK);\n                    break;\n                default:\n                    break;\n            }\n        };\n\n        document.addEventListener('keydown', onKeyDown);\n\n        return () => {\n            document.removeEventListener('keydown', onKeyDown);\n        };\n    }, [user]);\n\n    return (\n        <>\n            <div className={bem('background')} />\n            <Header title=\"\" />\n            <div className={bem('container')}>\n                <CartList />\n                <CartInfo />\n            </div>\n            {isDevelopment ? <Suggest items={['1.     ', '2.  ']} /> : ''}\n        </>\n    );\n};\n\nexport const Cart = withBem(connectToStore(Component), 'Cart');\n","import React from 'react';\nimport { Header } from 'components/Header/Header';\nimport { Button } from 'components/Button/Button';\nimport { StoreType } from 'stores/types';\nimport withBem from 'hoc/withBem';\nimport { connectToStore } from 'tools/connect';\n\nimport './Status.scss';\n\ninterface StatusProps extends BemProps, StoreType {}\n\nconst Component: React.FC<StatusProps> = ({ cart, bem }) => (\n    <>\n        <Header title=\"\" />\n        <div className={bem('container')}>\n            <div className={bem('order-number')}> #{cart.orderId} </div>\n            <div className={bem('order-time')}>\n                  !\n                <br />\n                    15-30 .\n            </div>\n            <Button className={bem('success-button')} shouldFocusOnMount>\n                 \n            </Button>\n            <div className={bem('figure-1')} />\n            <div className={bem('figure-2')} />\n            <div className={bem('figure-3')} />\n            <div className={bem('figure-4')} />\n            <div className={bem('figure-5')} />\n            <div className={bem('figure-6')} />\n            <div className={bem('figure-7')} />\n            <div className={bem('figure-8')} />\n            <div className={bem('figure-9')} />\n        </div>\n    </>\n);\n\nexport const Status = withBem(connectToStore(Component), 'Status');\n","import React from 'react';\nimport withBem from 'hoc/withBem';\nimport { useFocusOnMount, useInterval } from 'hooks';\nimport { Button } from 'components/Button/Button';\n\nimport './Promo.scss';\n\ntype PromoProps = BemProps;\n\nconst POPCORN_TYPES_COUNT = 4;\n\nconst Component: React.FC<PromoProps> = ({ bem }) => {\n    const mountRef = useFocusOnMount<HTMLButtonElement>();\n    const [currentIndex, setIndex] = React.useState(0);\n    useInterval(() => setIndex(currentIndex === POPCORN_TYPES_COUNT - 1 ? 0 : currentIndex + 1), 3000);\n\n    return (\n        <div className={bem.modify({ [`type-${currentIndex + 1}`]: true })}>\n            <div className={bem('glow')}>\n                <div className={bem.modify({ [`type-${currentIndex + 1}`]: true }, 'glow-1')} />\n                <div className={bem.modify({ [`type-${currentIndex + 1}`]: true }, 'glow-2')} />\n                <div className={bem.modify({ [`type-${currentIndex + 1}`]: true }, 'glow-3')} />\n                <div className={bem.modify({ [`type-${currentIndex + 1}`]: true }, 'glow-4')} />\n            </div>\n            <div className={bem('title')}>\n                  \n                <br />  \n                <br /> \n            </div>\n            <div className={bem('subtitle')}>\n                    15-30     -\n            </div>\n            {Array.from(Array(POPCORN_TYPES_COUNT)).map((_, index) => (\n                <div\n                    key={index}\n                    className={bem.modify({ [`type-${index + 1}`]: true, hidden: index !== currentIndex }, 'image')}\n                />\n            ))}\n            <div className={bem('button-container')}>\n                <Button className={bem('button')} shouldFocusOnMount>\n                     \n                </Button>\n                <Button className={bem('button')}> </Button>\n            </div>\n        </div>\n    );\n};\n\nexport const Promo = withBem(Component, 'Promo');\n","import React from 'react';\n\nexport const useInterval = (callback: (...args: any[]) => void, timeout: number) =>\n    React.useEffect(() => {\n        const intervalId = setInterval(callback, timeout);\n\n        return () => clearInterval(intervalId);\n    });\n","import React from 'react';\nimport { Header } from 'components/Header/Header';\nimport { Button } from 'components/Button/Button';\nimport withBem from 'hoc/withBem';\nimport { connectToStore } from 'tools/connect';\nimport { StoreType } from 'stores/types';\n\nimport './NoArea.scss';\n\ninterface NoAreaProps extends BemProps, StoreType {}\n\nconst Component: React.FC<NoAreaProps> = ({ bem, user }) => (\n    <div className={bem()}>\n        <Header className={bem('header')} title=\" \" />\n        <div className={bem('container')}>\n            <div className={bem('badge')}>\n                <div className={bem('badge-body')} />\n                <div className={bem('badge-kernel')} />\n                <div className={bem.modify({ big: true }, 'badge-shadow')} />\n                <div className={bem.modify({ small: true }, 'badge-shadow')} />\n            </div>\n            <div className={bem('title')}>{user.address}</div>\n            <div className={bem('subtitle')}> ,      </div>\n            <Button shouldFocusOnMount className={bem('button')}>\n                \n            </Button>\n        </div>\n        <div className={bem('background')} />\n    </div>\n);\n\nexport const NoArea = withBem(connectToStore(Component), 'NoArea');\n","import React from 'react';\nimport { Header } from 'components/Header/Header';\nimport withBem from 'hoc/withBem';\n\nimport './AddressSimpole.scss';\n\ntype AddressSimpleProps = BemProps;\n\nexport const Component: React.FC<AddressSimpleProps> = ({ bem }) => (\n    <>\n        <Header title=\" \" />\n        <div className={bem('container')}>\n            <input type=\"text\" />\n        </div>\n    </>\n);\n\nexport const AddressSimple = withBem(Component, 'AddressSimple');\n","import React from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { environment } from 'configs';\nimport { Catalog } from 'pages/Catalog/Catalog';\nimport { Cart } from 'pages/Cart/Cart';\nimport { Status } from 'pages/Status/Status';\nimport { Promo } from 'pages/Promo/Promo';\nimport { NoArea } from 'pages/NoArea/NoArea';\nimport { AddressSimple } from 'pages/AddressSimple/AddressSimple';\nimport { routes } from 'stores/ui';\nimport 'style/global.scss';\nimport 'normalize.css/normalize.css';\n\nimport './style.scss';\n\nconst App: React.FC = () => {\n    const fallback = <div>Loading</div>;\n\n    const containerStyle =\n        environment === 'staging'\n            ? {\n                  transform: 'scale(0.4)',\n                  height: '1080px',\n                  width: '1920px',\n              }\n            : {};\n\n    const wrapperStyle =\n        environment === 'staging'\n            ? {\n                  transform: 'translate(-580px, -310px)',\n              }\n            : {};\n\n    return (\n        <div style={wrapperStyle}>\n            <div style={containerStyle} className=\"AppContainer\">\n                <React.Suspense fallback={fallback}>\n                    <Switch>\n                        <Route path={routes.CATALOG}>\n                            <Catalog />\n                        </Route>\n                        <Route path={routes.CART}>\n                            <Cart />\n                        </Route>\n                        <Route path={routes.STATUS}>\n                            <Status />\n                        </Route>\n                        <Route path={routes.ADDRESS_SIMPLE}>\n                            <AddressSimple />\n                        </Route>\n                        <Route path={routes.PROMO}>\n                            <Promo />\n                        </Route>\n                        <Route path={routes.NO_AREA}>\n                            <NoArea />\n                        </Route>\n                        <Redirect to={routes.CATALOG} />\n                    </Switch>\n                </React.Suspense>\n            </div>\n        </div>\n    );\n};\n\nexport default App;\n","import { useObserver } from 'mobx-react-lite';\n\nimport { StoreType } from '../stores/types';\n\nlet store: StoreType | null = null;\n\nexport const setStore = (newStore: StoreType): void => {\n    store = newStore;\n};\n\ntype PropsType = Record<string, any>;\n\nconst connect = (selector: Function) => (\n    baseComponent: React.FC<StoreType & PropsType>,\n): React.FC<StoreType & PropsType> => {\n    /* eslint-disable */\n    const component = (ownProps: PropsType) => {\n        if (store === null) throw new Error('Please, use setStore before your ReactDOM.render call');\n        return useObserver(() => {\n            return baseComponent({ ...ownProps, ...selector(store, ownProps) });\n        });\n    };\n    /* eslint-enable */\n    component.displayName = baseComponent.name;\n    return component;\n};\n\nexport default connect;\nexport const getStore = (): StoreType | null => store;\n\nexport const connectToStore = (component: React.FC<StoreType & any>): React.FC<StoreType & any> =>\n    connect((storeData: StoreType): StoreType => storeData)(component);\n","import pkg from '../../package.json';\n\nconst defaults = {\n    development: {\n        api: 'dev-api',\n    },\n    staging: {\n        api: 'stage-api',\n    },\n    production: {\n        api: 'prod-api',\n    },\n    test: {\n        api: 'test-api',\n    },\n};\n\nexport const environment = process.env.REACT_APP_ENVIRONMENT || 'development';\n\nexport const isProduction = environment === 'production';\n\nexport const isDevelopment = environment === 'development';\n\nexport default {\n    cssPrefix: pkg.cssPrefix,\n    environment,\n    api: process.env.REACT_APP_API || defaults[environment].api,\n    isProduction: environment === 'production',\n};\n"],"sourceRoot":""}