{"version":3,"sources":["pages/Promo/Promo.assets/popcorn-1.png","pages/Promo/Promo.assets/popcorn-3.png","pages/Success/Success.assets/figure-4.svg","assets/images/background-tv-sber.jpg","assets/icons/plus.svg","assets/icons/done.svg","components/Cart/Cart.assets/bg.jpg","pages/Promo/Promo.assets/popcorn-promo.png","components/LocationPage/LocationPage.assets/bg.jpg","pages/NoArea/NoArea.assets/face.svg","pages/Error/Error.assets/circles.svg","pages/Error/Error.assets/warning.svg","components/Spinner/spinner.svg","pages/StatusSummary/StatusSummary.assets/pending.svg","pages/StatusSummary/StatusSummary.assets/delivering.svg","pages/StatusSummary/StatusSummary.assets/success.svg","pages/StatusSummary/StatusSummary.assets/failed.svg","pages/StatusEmpty/StatusEmpty.assets/empty.svg","components/Pin/Pin.assets/shadow.svg","pages/Cart/Cart.assets/bg@touch.jpg","pages/Promo/Promo.assets/popcorn-2.png","pages/Success/Success.assets/figure-1.svg","pages/Success/Success.assets/figure-2.svg","pages/Success/Success.assets/figure-3.svg","pages/Success/Success.assets/figure-5.svg","pages/Success/Success.assets/figure-6.svg","pages/Success/Success.assets/figure-7.svg","pages/Success/Success.assets/figure-8.svg","pages/Success/Success.assets/figure-9.svg","tools/new-spatial-navigation.js","tools/browser.ts","tools/history.ts","store/constants/orderStatus.ts","mocks/lastOrderInfo.ts","tools/create-action.ts","store/actions/app.ts","store/selectors/index.ts","store/reducers/helpers/catalogPage.ts","tools/memoize.ts","store/reducers/view/addressSimplePage.tsx","store/actions/native.tsx","store/constants/router.tsx","store/thunks/addressFullPage.ts","store/actions/server.tsx","hooks/useFocusOnMount.tsx","style/const/color.ts","style/const/transition.ts","style/const/focus.ts","style/mixin/focus.ts","style/const/font.ts","components/ButtonSpinner/ButtonSpinner.tsx","components/Button/Button.tsx","tools/twoGis/api/doApiRequest.ts","tools/request.ts","store/reducers/data/twoGisSuggestsData.ts","tools/twoGis/api/suggest.ts","store/constants/index.tsx","store/thunks/native.ts","store/actions/router.ts","store/actions/addressSimplePage.tsx","store/reducers/data/products.ts","store/reducers/data/productsDiff.ts","store/reducers/data/user.ts","store/reducers/data/delivery.ts","store/reducers/data/orderStatus.ts","store/reducers/model/cart.ts","tools/phoneNumber.ts","store/reducers/model/user.ts","store/reducers/view/catalogPage.ts","store/reducers/view/catalogPage@touch.ts","tools/split-by-thousands.ts","store/reducers/helpers/cartPage.ts","store/reducers/view/cartPage.ts","store/reducers/view/cartPage@touch.ts","store/reducers/view/addressFullPage.tsx","store/reducers/view/header.ts","store/reducers/view/errorPage.tsx","store/reducers/view/statusPage.ts","store/index.tsx","store/reducers/index.tsx","store/reducers/model/router.ts","hooks/useSelector.tsx","hooks/useContainerFocus.ts","style/const/icon.ts","style/const/layout.ts","components/Text/Headline.ts","components/Text/Footnote.ts","hooks/useDispatch.tsx","components/Text/Button.ts","components/HeaderButton/HeaderButton.tsx","components/HeaderAddress/HeaderAddress.tsx","components/HeaderCart/HeaderCart.tsx","components/Header/Header.tsx","components/TransparentPixel/TransparentPixel.tsx","components/AppLayout/AppLayout.tsx","components/Text/Caption.ts","components/Badge/Badge.tsx","components/IndexBadge/IndexBadge.tsx","components/Text/Body.ts","pages/Catalog/ListItem/CatalogListItem.tsx","store/actions/catalogPage.tsx","hooks/useFocusOnChange.ts","pages/Catalog/List/CatalogList.tsx","components/Skeleton/Skeleton.tsx","pages/Catalog/Skeleton/CatalogSkeleton.tsx","pages/Catalog/Catalog.tsx","components/Cart/Cart.tsx","components/MultilineText/MultilineText.tsx","webpack:///./src/components/Pin/Pin.assets/shadow.svg?8d4c","components/Pin/Pin.assets/dead-face.svg","components/Pin/Pin.assets/happy-face.svg","components/Pin/Pin.tsx","components/Text/Paragraph.ts","components/Cart/CartInfo.tsx","pages/Cart/Info/CartInfo.tsx","components/GradientFade/GradientFade.tsx","components/Cart/CartList.tsx","components/Label/Label.tsx","components/Cart/CartListItem.tsx","pages/Cart/ListItem/CartListItem.tsx","store/actions/cartPage.tsx","pages/Cart/List/CartList.tsx","pages/Cart/Cart.tsx","components/DialogPage/DialogPage.tsx","components/SplendidAnimation/SplendidAnimation.tsx","pages/Success/Success.tsx","pages/Promo/Promo.tsx","components/LocationPage/LocationPage.tsx","pages/NoArea/NoArea.tsx","store/actions/twoGisSuggests.ts","tools/twoGis/api/common.ts","tools/twoGis/getSuggestsList.ts","pages/AddressSimple/AddressSimple.hooks.tsx","pages/AddressSimple/AddressSimple.tools.ts","pages/AddressSimple/SuggestItem/AddressSimpleSuggestItem.tsx","pages/AddressSimple/AddressSimple.tsx","components/PlasmaIcon/PlasmaIcon.tsx","components/GuidePage/GuidePage.tsx","pages/AddressSimpleGuide/AddressSimpleGuide.tsx","pages/AddressSimpleQuestion/AddressSimpleQuestion.tsx","hooks/useKeyboardClose.tsx","hooks/useKeyboardExpanded.tsx","components/Input/Input.tsx","pages/AddressSimpleInput/AddressSimpleInput.tsx","hooks/useIsValueChanged.tsx","tools/noop.ts","pages/AddressFullAll/AddressFullAll.tsx","pages/AddressFullApartment/AddressFullApartment.tsx","store/actions/addressFullPage.ts","pages/AddressFullDoorCode/AddressFullDoorCode.tsx","pages/AddressFullEntrance/AddressFullEntrance.tsx","pages/AddressFullFloor/AddressFullFloor.tsx","pages/AddressFullPhone/AddressFullPhone.tsx","pages/AddressFullAccommodationGuide/AddressFullAccommodationGuide.tsx","pages/AddressFullPhoneGuide/AddressFullPhoneGuide.tsx","pages/Error/Error.tsx","pages/Wait/Wait.tsx","components/Spinner/Spinner.tsx","components/SpinnerPage/SpinnerPage.tsx","pages/StatusSummary/StatusSummary.tsx","pages/StatusDetails/Info/StatusDetailsInfo.tsx","pages/StatusDetails/ListItem/StatusDetailsListItem.tsx","store/actions/statusDetailsPage.ts","pages/StatusDetails/List/StatusDetailsList.tsx","pages/StatusDetails/StatusDetails.tsx","components/Text/Display.ts","pages/StatusReport/StatusReport.tsx","pages/StatusEmpty/StatusEmpty.tsx","components/Root/Root@desktop.tsx","style/const/layout@touch.ts","components/Text/Body@touch.ts","components/Text/Button@touch.ts","components/HeaderButton/HeaderButton@touch.tsx","components/HeaderAddress/HeaderAddress@touch.tsx","components/HeaderCart/HeaderCart@touch.tsx","components/Header/Header@touch.tsx","components/AppLayout/AppLayout@touch.tsx","components/Text/Footnote@touch.ts","pages/Cart/ListItem/CartListItem@touch.tsx","pages/Cart/List/CartList@touch.tsx","components/Pin/Pin@touch.tsx","components/Text/Paragraph@touch.ts","components/Text/Headline@touch.ts","pages/Cart/Info/CartInfo@touch.tsx","pages/Cart/Cart@touch.tsx","pages/Catalog/ListItem/CatalogListItem@touch.tsx","pages/Catalog/List/CatalogList@touch.tsx","pages/Catalog/Catalog@touch.tsx","components/Slider/Slider.tsx","pages/Promo/Promo@touch.tsx","pages/Success/Success@touch.tsx","components/Root/Root@touch.tsx","components/Root/Root.tsx","index.tsx","assets/icons/add.svg","assets/icons/remove.svg","components/HeaderAddress/address.svg","components/HeaderCart/HeaderCart.assets/cart.svg","components/Header/Header.assets/chevron-left.svg","components/Header/Header.assets/logo.svg","pages/Promo/Promo.assets/popcorn-box_1.png","pages/Promo/Promo.assets/popcorn-box_2.png","pages/Promo/Promo.assets/popcorn-box_3.png","pages/Promo/Promo.assets/popcorn-box_4.png"],"names":["module","exports","window","ARROW_KEY_CODE","37","38","39","40","mapOfBoundRect","startingPoint","savedSearchOrigin","element","rect","navigate","dir","searchOrigin","document","activeElement","body","querySelector","elementStyle","getComputedStyle","invisibleStyle","disabled","includes","getPropertyValue","documentElement","getBoundingClientRect","height","width","left","right","top","bottom","isVisibleInScroller","scroller","getScrollContainer","findSearchOrigin","console","log","eventTarget","elementFromPosition","elementFromPoint","x","y","isFocusable","isContainer","getSpatialNavigationContainer","container","nodeName","contentDocument","bestInsideCandidate","spatialNavigationSearch","candidates","getSpatialNavigationCandidates","mode","focusingController","parentContainer","parentElement","location","parent","navigateChain","bestCandidate","createSpatNavEvents","focus","preventScroll","scrollingController","isScrollable","isScrollBoundary","moveScroll","isHTMLScrollBoundary","ownerDocument","option","childElementCount","getElementsByTagName","children","elem","isDelegableContainer","push","concat","filter","isVisible","getFilteredSpatialNavigationCandidates","targetElement","filteredCandidates","length","args","this","bestTarget","internalCandidates","externalCandidates","insideOverlappedCandidates","focusableAreas","overlappedCandidates","forEach","isEntirelyVisible","getOverlappedCandidates","defaultContainer","defaultCandidates","contains","candidate","fullyOverlapped","overlappedByParent","map","elm","flat","currentElm","getClosestElement","getDistanceFromPoint","getInnerDistance","selectBestCandidateFromEdge","selectBestCandidate","innerTarget","descendantsBest","splice","indexOf","originalContainer","eventTargetRect","undefined","candidateRect","candidateBody","isOutside","isInside","spatialNavigationFunction","currentTargetRect","distanceFunction","alignedCandidates","isAligned","getAbsoluteDistance","getDistance","frameElement","minDistance","Number","POSITIVE_INFINITY","minDistanceElements","i","distance","getEuclideanDistance","scrollContainer","isScrollContainer","focusables","Array","prototype","call","eventType","containerElement","currentElement","direction","triggeredEvent","CustomEvent","bubbles","cancelable","detail","causedTarget","dispatchEvent","readCssVar","varName","trim","currentOption","nextContainer","offset","scrollLeft","scrollTop","isCSSSpatNavContain","overflowX","overflowY","isOverflow","scrollWidth","clientWidth","scrollHeight","clientHeight","result","winScrollY","winScrollX","Math","abs","elementRect","nearestScroller","scrollerRect","DOMRect","innerWidth","innerHeight","tabIndex","tagName","getAttribute","isAtagWithoutHref","isActuallyDisabled","inert","isExpresslyInert","isVisibleStyleProperty","style","opacity","isBeingRendered","offsetX","parseInt","offsetWidth","offsetY","offsetHeight","isNaN","hitTestPoint","middle","leftTop","rightBottom","point","elemFromPoint","hitTest","containerRect","thisVisibility","childRect","rightEdgeCheck","leftEdgeCheck","topEdgeCheck","bottomEdgeCheck","rect1","rect2","isRightSide","isBelow","points","getEntryAndExitPoints","P1","entryPoint","exitPoint","P2","sqrt","pow","baseEdge","up","down","orthogonalBias","alignBias","A","B","C","intersectionRect","intersection_rect","area","new_location","max","new_max_point","min","getIntersectionRect","D","get","boundingClientRect","toFixed","set","enableExperimentalAPIs","currentKeyMode","__spatialNavigation__","keyMode","getInitialAPIs","Object","assign","canScroll","findTarget","findCandidate","bestNextTarget","isArray","findCandidates","bind","findNextTarget","getDistanceFromTarget","candidateElement","getExperimentalAPI","seal","_keymode","setStartingPoint","__getSpatNavState","searchOriginRect","Element","CSS","registerProperty","name","syntax","inherits","initialValue","addEventListener","e","keyCode","shiftKey","ctrlKey","metaKey","altKey","defaultPrevented","focusNavigableArrowKey","startPosition","selectionStart","endPosition","selectionEnd","value","handlingEditableElement","preventDefault","Map","clientX","clientY","target","HTMLElement","requestAnimationFrame","async","scrollIntoView","behavior","block","inline","Promise","resolve","IntersectionObserver","entry","isIntersecting","threshold","observe","doClick","fn","wait","timeoutId","Boolean","clearTimeout","setTimeout","debounce","click","event","HTMLButtonElement","isTrusted","stopImmediatePropagation","capture","mobileDetect","navigator","userAgent","vendor","test","substr","history","createHashHistory","getWaitNextNavigationEventPromise","unListen","listen","OrderStatus","OrderStatusCategory","mapOrderStatusToCategory","INITIAL","PENDING","INVOICE_CREATED","FUNDS_RESERVED","CONFIRMED_BY_PARTNER","DELIVERING","DELIVERED","SUCCESS","CANCEL_BY_PARTNER","FAILED","CANCEL_BY_CUSTOMER","CANCEL_BY_PAYMENT","PAID","CANCELLED","ERROR","Currency","RUB","createAction","type","payload","createEmptyAction","closeAppAction","revertUserChanges","selectProductById","state","itemId","productsData","itemsMap","selectProductDiffById","productsDiffData","selectCartItemById","cart","selectPathname","router","pathname","selectHeader","layout","header","formatPrice","price","ceil","prepareCount","cartItem","count","calculateButtonDisabled","productItem","quantityLeft","getQuantityLeftById","productItemDiff","getDisabled","getPriceById","preparePriceById","getOldPriceById","formatSale","oldValue","newValue","String","getCountById","countInCart","wantMoreThanHave","canAddMore","memoize","store","id","JSON","stringify","has","memoizedPrepareSuggestItems","keys","addressSimplePageView","action","addressSimplePage","suggestsListIndex","suggests","findIndex","selectedSuggestItemId","inputValue","input","isKeyboardHintVisible","isAddressSubmitting","addressSubmittingTimerId","LOCATION_CHANGE","twoGisSuggestsData","prepareSuggestItems","addItemAction","removeItemAction","ROUTES","addressFullValidationOkThunk","dispatch","goBack","addressFullInputThunk","getState","currentRoute","addressFullInputAction","ADDRESS_FULL_PHONE_GUIDE","ADDRESS_FULL_ACCOMMODATION_GUIDE","replace","ADDRESS_FULL_ALL","addressFullSuccessThunk","askForItemsChangesAction","askForOrderStatusAction","useFocusOnMount","forwardRef","ref","React","useRef","onMountRef","useEffect","current","color","white","primary","secondary","tertiary","active","warning","critical","secondary1","secondary2","inactive","default","liquid1","liquid2","liquid3","card","solidWhite","solidBlack","solidTransparent","duration","defaultMs","timingFn","easeInOut","transition","paddingPx","borderSizePx","focusBorderMixin","isFocused","borderRadius","positionPx","css","ruleset","syntheticFocus","font","light","normal","regular","medium","semibold","bold","extrabold","StyledPoint","styled","div","initialPhase","phaseCount","phaseDurationMs","cycleLength","transitionCount","frames","fill","_","index","percent","phaseIndex","round","sin","PI","reduce","a","b","keyframes","StyledContainer","StyledContent","textAlign","ButtonViews","ButtonSize","ButtonTextAlign","mapSizeToButtonParams","l","borderRadiusPx","paddingXPx","paddingYPx","fontSizePx","lineHeightPx","m","s","buttonViewBackgroundMap","StyledButtonSpinner","pointCount","props","pointList","useMemo","key","StyledButton","size","view","isLocked","Button","shouldFocusOnMount","shouldLockAfterClick","lockTimeout","onClick","center","mountFocusRef","handleClick","scenarioResponseTimeout","setTimeoutId","useState","useCallback","usePressedState","as","doDGApiRequest","url","params","paramsString","acc","join","response","fetch","ok","statusCode","status","json","doRequest","TwoGisSuggestFetchingStatus","firstSuggest","fetchingStatus","FINISHED","suggestItem","hasAddressComponents","suggest","address","components","item","mostRepresentationSuggest","initialState","userData","customerName","phoneNumber","addressLocationLatitude","addressLocationLongitude","deviceLocationLatitude","deviceLocationLongitude","city","street","house","building","floor","entrance","apartment","doorCode","errorPage","title","subtitle","text","isBackButtonVisible","delivery","minimalPrice","deliveryTime","order","totalCount","totalPrice","orderId","date","Date","userModel","isPhoneValid","catalogPage","selectedItemId","itemsFocusHashMap","screenIndexMap","wrapperXShift","listIndexOffset","catalogPageTouch","cartPage","wrapperYShift","selectedItemIndex","topGradientVisible","bottomGradientVisible","toMinimumPrice","hasRequiredData","makePurchaseButtonView","isMakePurchaseButtonDisabled","personalAddress","cartPageTouch","addressFullPage","addressInputValue","phoneNumberInputValue","apartmentInputValue","entranceInputValue","floorInputValue","doorCodeInputValue","isSubmitButtonDisabled","nextFocus","orderStatusData","reportPhone","productList","orderDate","orderStatus","comment","isChanged","deliveryPrice","orderDiscount","originalTotalPrice","originalOrderPrice","formedTotalPrice","formedOrderPrice","orderStatusSummaryPage","isLoaded","orderStatusCategory","orderStatusDetailsPage","orderStatusReportPage","vpsTimeout","goBackToStartAndReplaceThunk","route","delta","go","goBackToStart","goToCatalogThunk","goToCatalogAction","CATALOG","goToNoAreaThunk","NO_AREA","goToPromoThunk","goToPromo","PROMO","validationOkThunk","validationOkAction","addressInputThunk","addressInputAction","ADDRESS_SIMPLE_QUESTION","addressSubmitThunk","timerId","addressSubmitAction","addressGuideThunk","ADDRESS_SIMPLE_GUIDE","addressInputDeclineThunk","totalSuggestsCount","ADDRESS_SIMPLE","addressInputAddThunk","addressInputAddAction","goToAddressFullAllThunk","normalizeProducts","productsMaps","guid","quantity_left","imageUrl","images_urls","stock","computeProductItemsMapBasedOnChanges","productsDiffMap","changes","entries","quantityLeftString","priceString","latitude","longitude","device_location","customer_name","phone_num","address_string","door_code","info","customer","phone","deliveryData","time","minimal_amount","parsePrice","ccy","currency","parseDiscountedPrice","discountValue","getOrderStateProductItem","position","originalPrice","originalQuantity","formedPrice","formedQuantity","positions","expectedDateTime","changedOnFormed","cartModel","countString","shouldRemoveMention","actualCount","cartItemId","clear","order_id","values","getTotalCount","getTotalPrice","filterPhoneInput","match","formatPhone","defaultCountryCode","parsedPhone","parsePhoneNumberFromString","formattedPhone","formatInternational","startsWith","formatPhoneInput","formattedInput","parsedNumber","typeFormatter","AsYouType","getNumber","parseNationalNumberInput","parsedInternationalNumberInput","number","slice","formatInternationalNumberInput","normalizePhoneInput","allowedPhoneTypes","allowedCountries","isValidPhone","isValid","getType","country","updateUserAddressBasedOnBuilding","address_name","full_name","addressComponent","split","lat","lon","ADDRESS_FULL_PHONE","ADDRESS_FULL_APARTMENT","ADDRESS_FULL_ENTRANCE","ADDRESS_FULL_FLOOR","ADDRESS_FULL_DOOR_CODE","inputType","data","screenItemCount","prepareBadge","content","prepareIndex","catalogPageView","skipFocus","random","currentListIndex","maxValue","getListIndexOffset","cardWidth","cardGap","getWrapperXShift","getScreenIndexMap","oldPrice","isWantMoreThanHave","badge","isButtonDisabled","prepareCatalogItemsMap","isEmpty","firstItem","prepareItemsFocusHashMap","catalogPageTouchView","buttonDisabled","splitByThousands","n","toString","prepareTotalPrice","prepareToMinimumPrice","getFormattedPersonalAddress","prepareHasRequiredData","getWrapperYShift","itemHeight","relatedIndex","prepareTopGradientVisible","prepareBottomGradientVisible","prepareLabel","cartPageView","label","isMoreButtonDisabled","prepareItemsMap","calculateMakePurchaseDisabled","calculateMakePurchaseButtonView","getFormattedPhoneNumber","cartPageTouchView","addressFullPageView","options","find","computeNextFocus","getOrderStatusTitle","routeToTitleMap","CART","STATUS_SUMMARY","STATUS_DETAILS","STATUS_REPORT","formatDate","toLocaleString","day","month","hour","minute","routeToVisibilityMap","headerView","getTitle","getSubtitle","getAddress","getCart","mapOrderErrorTypeToProps","partner","retryButtonText","closeButtonText","payment","timing","errorPageView","mapOrderStatusToSummaryText","getLabel","statusPageView","score","productId","sort","scoreA","scoreB","getOrder","getItemsMap","middlewares","thunk","routerMiddleware","next","AssistantClient","close","sendData","action_id","currentPathname","nextPathname","isAddressChanged","user","getHasValidAddress","process","createReduxStore","recoveryState","routerModel","changeRouter","connectRouter","getRouterModel","isMobile","produce","draft","applyReducer","reducer","getRootReducer","appRecoveryState","compose","applyMiddleware","dispatchToReduxStore","smart_app_data","command","itemsChangesAction","WAIT","orderErrorAction","addressFullInputAddAction","addressFullInputClearAction","addressFullCommentAction","lastOrderInfoAction","STATUS_EMPTY","castItemSelectorFromStore","ignored_words","items","visible","castCatalogItemSelectorFromStore","castCartItemSelectorFromStore","serializeAddress","storeUser","confirmed","prepareAddress","source","useSelector","mapStateToProps","useReduxSelector","appInitialData","onStart","onData","message","AssistantHost","onRequestState","item_selector","foodtech","currentScreen","substring","products","quantity","castFromStore","stateString","updateState","onRequestRecoveryState","ready","icon","sizePx","widthPx","heightPx","headerHeightPx","footerHeightPx","contentHeightPx","HeadlineText1","HeadlineText2","HeadlineText3","HeadlineText4","FootnoteText1","FootnoteText2","useDispatch","useReduxDispatch","ButtonText2","StyledHeaderButton","button","textHeightPx","StyledText","HeaderButton","addressIconSizePx","StyledIcon","addressIcon","HeaderAddress","cartIconSizePx","cartIcon","badgeOffsetPx","StyledBadge","span","HeaderCart","StyledHeader","backButtonIconSizePx","StyledBackButton","backButtonIcon","StyledSection","StyledLogo","logoIcon","StyledTitle","StyledSubtitle","StyledCaption","cartButtonRef","createRef","TransparentPixel","src","alt","gradientBackground","AppContent","isHeaderVisible","isAddressVisible","isCartVisible","hasSubtitle","handleReceiveFocus","handleFocus","handleBlur","onReceiveFocus","onLoseFocus","handlerTimeoutId","setHandlerTimeoutId","setFocused","handleLoseFocus","useContainerFocus","onFocus","onBlur","currentTarget","AppLayout","onScroll","CaptionText","lineHeight","contentMap","sale","backgroundColorMap","badgeHeightPx","mapSizeToPx","mapSizeToParams","xxs","xs","StyledIndexBadge","IndexBadge","BodyText1","BodyText2","StyledThumb","StyledDescription","cardHeightPx","StyledName","StyledPriceContainer","StyledPrice","StyledOldPrice","StyledCount","isWarning","buttonIconSizePx","isDisabled","isActive","doneIcon","plusIcon","CatalogListItemBadge","className","contentProvider","AddAnimation","addActiveDurationMs","ShakeAnimation","StyledCatalogListItem","isShaking","CatalogListItem","itemFocusHash","isCardActive","isButtonActive","displayCount","setCardActive","setButtonActive","setDisplayCount","prevCountRef","nextCount","useActive","doShake","setShaking","useShake","hash","timeout","onChangeFocusRef","useFocusOnChange","StyledCatalogList","StyledWrapper","CatalogList","wrapperStyle","transform","Skeleton","itemWidth","rowCount","columnCount","paddingBetweenColumns","paddingBetweenRows","list","from","columnIndex","rowIndex","rx","ry","getWidthByCount","skeletonWidthPx","skeletonPaddingXPx","skeletonPaddingYPx","backgroundColor","foregroundColor","StyledRoot","CatalogSkeleton","speed","Catalog","CartRoot","CartBackground","bgImage","MultilineText","lineList","nodeList","line","_extends","arguments","hasOwnProperty","apply","_ref","createElement","cx","cy","_ref2","_ref3","filterUnits","colorInterpolationFilters","floodOpacity","in","in2","stdDeviation","SvgShadow","svgRef","viewBox","ForwardRef","fillRule","clipRule","d","_ref4","_ref5","SvgDeadFace","stroke","strokeWidth","strokeLinecap","strokeLinejoin","SvgHappyFace","DeadFaceIcon","DeadFaceSvg","HappyFaceIcon","HappyFaceSvg","StyledBody","isBroken","StyledKernelTop","kernelWidthPx","StyledKernelBottom","StyledShadow","ShadowSvg","StyledPin","pinColor","Pin","ParagraphText1","ParagraphText2","CartInfoContainer","StyledTime","StyledUnit","CartInfoPin","StyledPersonal","StyledPersonalLocation","StyledPersonalPhoneNumber","StyledPersonalName","CartPersonal","CartAddress","StyledAskPersonal","CartInfoButton","CartInfo","handlePurchaseClick","handleSetAddressClick","GradientFade","kind","CartListContainer","StyledScrollerContainer","StyledScrollerWrapper","CartListScroller","CartTotalPrice","textColorMap","StyledLabel","Label","StyledInfo","isOneLine","CartListItemRoot","CartListItemThumb","CartListItemInfo","StyledSelector","StyledSelectorValue","iconTypeIconMap","less","removeIcon","more","addIcon","remove","selectorIconSizePx","StyledSelectorButton","selectorButtonSizePx","iconType","StyledDeleteButton","CartListItem","handleLessClick","handleMoreClick","handleRemoveClick","Infinity","aria-label","StyledMinimalPrice","CartList","itemList","Cart","DialogTitle","DialogText","StyledButtonContainer","StyledDecorations","DialogPage","buttons","decorations","DialogButton","FullscreenDecoration","StyledSpinner","Lottie","isPaused","defaultConfig","renderer","loop","autoplay","SplendidAnimation","config","delayMs","lottieOptions","lottieRef","pause","play","useLottie","isDelayed","setDelayed","start","useLayoutEffect","isStopped","Success","animationData","successAnimationData","TextContainer","Title","Subtitle","ButtonContainer","PopcornContainer","popcornList","popcornPromo","popcorn1","popcorn2","popcorn3","popcorn4","Popcorn","popcornStyle","Promo","handleClickSubmitButton","StyledBackground","LocationPage","showMap","StyledFaceIcon","faceIcon","NoArea","handleChangeButtonClick","handleCloseButtonClick","addressString","finishFetchingTwoGisSuggests","memoizedGetSuggests","memoizeResolvedPromise","fields","suggestType","viewpoint1","viewpoint2","suggest_type","convertParams","getPrimarySearchParams","userLocation","parseFloat","destination","units","geometry","coordinates","defaultSuggestOptions","getSuggestsList","q","searchParams","locale","toLowerCase","then","meta","isErrorResponse","code","Error","error","catch","Sentry","getSuggestListBySearchParams","useAddressSimpleUpdateSuggests","suggestsFetchingStatus","buildAddressString","isFlashing","AddressSimpleSuggestListItem","isSelectedItem","addressName","StyledSwiperContainer","slideWithMarginHeight","StyledSwiperWrapper","StyledSwiperSlide","AddressSimple","suggestIds","swiperContainerRef","swiperRef","Swiper","slidesPerView","spaceBetween","initialSlide","slidesOffsetBefore","slidesOffsetAfter","paddingForFocus","updateSize","updateSlides","updateProgress","updateSlidesClasses","slideTo","handleCantFindAddressClick","suggestItems","isTopGradientVisible","isBottomGradientVisible","PlasmaIcon","xmlns","StyledPlasmaIcon","circleContainerSize","StyledCircles","StyledOkButton","GuidePageRoot","GuidePagePlasmaIcon","GuidePageTitle","GuidePageSource","GuidePageSubtitle","GuidePageHint","onOkClick","okButtonRef","AddressSimpleGuide","handleOkClick","ADDRESS_SIMPLE_INPUT","StyledSubTitle","StyledButtonDivider","AddressSimpleQuestion","handleAcceptButtonClick","handleDeclineButtonClick","handleRepeatClick","useKeyboardClose","onKeyboardClose","keyboardExpandedCount","setKeyboardExpandedCount","handleWindowResize","currentStateValue","removeEventListener","useKeyboardExpanded","isInvalid","isMinified","StyledInput","Input","onSubmit","onChange","onRootKeyPress","forwardInputRef","shouldFocusInputOnMount","setFocus","isUsing","setUsing","inputRootRef","inputRef","onMountRootRef","rootRef","handleRootFocus","handleRootBlur","handleRootKeyPress","handleInputKeyPress","stopPropagation","isTitleMinified","onKeyPress","AddressSimpleInput","isInputValueChanged","useIsValueChanged","handleKeyboardClose","handleInputChange","noop","StyledFirstRow","StyledSecondRow","StyledThirdRow","StyledFourthRow","SubmitButton","StyledVoiceHint","AddressFullAll","handleAddressKeyPress","handlePhoneKeyPress","handleApartmentKeyPress","handleEntranceKeyPress","handleFloorKeyPress","handleDoorCodeKeyPress","handleSubmitClick","stopColor","AddressFullApartment","AddressFullDoorCode","AddressFullEntrance","AddressFullFloor","AddressFullPhone","isFirstTry","setFirstTry","isErrorLabelVisible","nativeEvent","InputEvent","AddressFullAccommodationGuide","AddressFullPhoneGuide","Circles","circlesImage","WarningIcon","warningIcon","Wait","waitAnimationData","Spinner","spinnerImage","SpinnerPage","mapCategoryToBackground","pendingSvg","deliveringSvg","successSvg","failedSvg","StyledDecoration","StatusSummary","isFailed","reverse","StatusDetailsInfo","StatusDetailsListItem","canFocus","StatusDetailsList","StatusDetails","DisplayText3","StyledPhone","StatusReport","emptySvg","StatusEmpty","HeaderButtonTouch","HeaderAddressTouch","HeaderCartTouch","HeaderTouch","Container","AppLayoutTouch","StyledCartListItemTouch","StyledCountTouchButton","isDanger","StyledRemoveIcon","CartListItemTouch","LessIcon","MoreIcon","StyledCartListTouch","StyledTotalPrice","CartListTouch","StyledKernel","shadowImage","StyledCartInfoTouch","StyledPlaceInfo","StyledAddress","CartInfoTouch","CartTouch","StyledListItem","StyledButtonsContainer","StyledTouchButton","CatalogListItemTouch","isPossibleChangeCountActive","handleClickAdd","handleClickRemove","RemoveIcon","AddIcon","StyledScrollableCatalogContainer","CatalogListTouch","itemIds","itemsList","CatalogTouch","StyledSliderContainer","StyledSlider","StyledSlide","popcornBoxList","popcornBox1","popcornBox2","popcornBox3","popcornBox4","auto","onSlideChange","slide","setSlide","isDragging","setDragging","springProps","setSpringProps","useSprings","gestureBinds","useGesture","onDrag","movement","xDelta","xDir","cancel","first","lower","upper","drag","delay","intervalId","setInterval","targetIndex","clearInterval","to","willChange","PopcornBox","SliderPinsContainer","CornsContainer","Corn","PromoTouch","promoRef","promoWidth","setPromoWidth","currentSlideIndex","setCurrentSlideIndex","cornsList","SuccessTouchContainer","SuccessTouchOrderInfo","SuccessTouchOrderNumber","SuccessTouchOrderTime","SuccessTouchFigure","bgUrl","topPx","leftPx","figureList","figureIcon1","figureIcon2","figureIcon3","figureIcon4","figureIcon5","figureIcon6","figureIcon7","figureIcon8","figureIcon9","SuccessTouch","touchFigureList","Root","path","ADDRESS_FULL","dsn","renderApp","App","ReactDOM","render","getElementById","REACT_APP_REV"],"mappings":"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","file":"static/js/main.9d2e371f.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/figure-4.74f25c1b.svg\";","module.exports = __webpack_public_path__ + \"static/media/background-tv-sber.c2fb7871.jpg\";","module.exports = __webpack_public_path__ + \"static/media/plus.9af213dd.svg\";","module.exports = __webpack_public_path__ + \"static/media/done.f4143229.svg\";","module.exports = __webpack_public_path__ + \"static/media/bg.7b30988f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-promo.bec95c9a.png\";","module.exports = __webpack_public_path__ + \"static/media/bg.729407a2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/face.1bb45b13.svg\";","module.exports = __webpack_public_path__ + \"static/media/circles.b00db56e.svg\";","module.exports = __webpack_public_path__ + \"static/media/warning.4908c73c.svg\";","module.exports = __webpack_public_path__ + \"static/media/spinner.ee0e70c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/pending.38d66d0b.svg\";","module.exports = __webpack_public_path__ + \"static/media/delivering.62e69f4c.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.9e79354f.svg\";","module.exports = __webpack_public_path__ + \"static/media/failed.5acfa260.svg\";","module.exports = __webpack_public_path__ + \"static/media/empty.38d66d0b.svg\";","module.exports = __webpack_public_path__ + \"static/media/shadow.bb1d84f8.svg\";","module.exports = __webpack_public_path__ + \"static/media/bg@touch.1c0b9508.jpg\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/figure-1.cad64c9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-2.a3044c99.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-3.7084a68e.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-5.f121fdae.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-6.1cf5f7c7.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-7.ef978761.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-8.dcc5e538.svg\";","module.exports = __webpack_public_path__ + \"static/media/figure-9.fb8b47f7.svg\";","/* eslint-disable */\n\n/* Spatial Navigation Polyfill\n *\n * It follows W3C official specification\n * https://drafts.csswg.org/css-nav-1/\n *\n * Copyright (c) 2018-2019 LG Electronics Inc.\n * https://github.com/WICG/spatial-navigation/polyfill\n *\n * Licensed under the MIT license (MIT)\n */\n\n(function () {\n    // The polyfill must not be executed, if it's already enabled via browser engine or browser extensions.\n    if ('navigate' in window) {\n        return;\n    }\n\n    const ARROW_KEY_CODE = { 37: 'left', 38: 'up', 39: 'right', 40: 'down' };\n    const TAB_KEY_CODE = 9;\n    let mapOfBoundRect = null;\n    let startingPoint = null; // Saves spatial navigation starting point\n    let savedSearchOrigin = { element: null, rect: null }; // Saves previous search origin\n    let searchOriginRect = null; // Rect of current search origin\n\n    window.__getSpatNavState = () => {\n        return {\n            mapOfBoundRect,\n            startingPoint,\n            savedSearchOrigin,\n            searchOriginRect,\n        };\n    };\n\n    /**\n     * Initiate the spatial navigation features of the polyfill.\n     * @function initiateSpatialNavigation\n     */\n    function initiateSpatialNavigation() {\n        /*\n         * Bind the standards APIs to be exposed to the window object for authors\n         */\n        window.navigate = navigate;\n        window.Element.prototype.spatialNavigationSearch = spatialNavigationSearch;\n        window.Element.prototype.focusableAreas = focusableAreas;\n        window.Element.prototype.getSpatialNavigationContainer = getSpatialNavigationContainer;\n\n        /*\n         * CSS.registerProperty() from the Properties and Values API\n         * Reference: https://drafts.css-houdini.org/css-properties-values-api/#the-registerproperty-function\n         */\n        if (window.CSS && CSS.registerProperty) {\n            if (\n                window.getComputedStyle(document.documentElement).getPropertyValue('--spatial-navigation-contain') ===\n                ''\n            ) {\n                CSS.registerProperty({\n                    name: '--spatial-navigation-contain',\n                    syntax: 'auto | contain',\n                    inherits: false,\n                    initialValue: 'auto',\n                });\n            }\n\n            if (\n                window.getComputedStyle(document.documentElement).getPropertyValue('--spatial-navigation-action') === ''\n            ) {\n                CSS.registerProperty({\n                    name: '--spatial-navigation-action',\n                    syntax: 'auto | focus | scroll',\n                    inherits: false,\n                    initialValue: 'auto',\n                });\n            }\n\n            if (\n                window.getComputedStyle(document.documentElement).getPropertyValue('--spatial-navigation-function') ===\n                ''\n            ) {\n                CSS.registerProperty({\n                    name: '--spatial-navigation-function',\n                    syntax: 'normal | grid',\n                    inherits: false,\n                    initialValue: 'normal',\n                });\n            }\n        }\n    }\n\n    /**\n     * Add event handlers for the spatial navigation behavior.\n     * This function defines which input methods trigger the spatial navigation behavior.\n     * @function spatialNavigationHandler\n     */\n    function spatialNavigationHandler() {\n        /*\n         * keydown EventListener :\n         * If arrow key pressed, get the next focusing element and send it to focusing controller\n         */\n        window.addEventListener('keydown', (e) => {\n            const currentKeyMode =\n                (parent && parent.__spatialNavigation__.keyMode) || window.__spatialNavigation__.keyMode;\n            const eventTarget = document.activeElement;\n            const dir = ARROW_KEY_CODE[e.keyCode];\n\n            if (e.keyCode === TAB_KEY_CODE) {\n                startingPoint = null;\n            }\n\n            if (\n                !currentKeyMode ||\n                currentKeyMode === 'NONE' ||\n                (currentKeyMode === 'SHIFTARROW' && !e.shiftKey) ||\n                (currentKeyMode === 'ARROW' && e.shiftKey) ||\n                e.ctrlKey ||\n                e.metaKey ||\n                e.altKey\n            )\n                return;\n\n            if (!e.defaultPrevented) {\n                let focusNavigableArrowKey = {\n                    left: true,\n                    up: true,\n                    right: true,\n                    down: true,\n                };\n\n                // Edge case (text input, area) : Don't move focus, just navigate cursor in text area\n                if (eventTarget.nodeName === 'INPUT' || eventTarget.nodeName === 'TEXTAREA') {\n                    focusNavigableArrowKey = handlingEditableElement(e);\n                }\n\n                if (focusNavigableArrowKey[dir]) {\n                    e.preventDefault();\n                    mapOfBoundRect = new Map();\n\n                    navigate(dir);\n\n                    mapOfBoundRect = null;\n                    startingPoint = null;\n                }\n            }\n        });\n\n        /*\n         * mouseup EventListener :\n         * If the mouse click a point in the page, the point will be the starting point.\n         * NOTE: Let UA set the spatial navigation starting point based on click\n         */\n        document.addEventListener('mouseup', (e) => {\n            startingPoint = { x: e.clientX, y: e.clientY };\n        });\n\n        /*\n         * focusin EventListener :\n         * When the element get the focus, save it and its DOMRect for resetting the search origin\n         * if it disappears.\n         */\n        window.addEventListener('focusin', (e) => {\n            if (e.target !== window) {\n                savedSearchOrigin.element = e.target;\n                savedSearchOrigin.rect = e.target.getBoundingClientRect();\n            }\n        });\n    }\n\n    /**\n     * Enable the author to trigger spatial navigation programmatically, as if the user had done so manually.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-window-navigate}\n     * @function navigate\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     */\n    function navigate(dir) {\n        // spatial navigation steps\n\n        // 1\n        const searchOrigin = findSearchOrigin();\n        console.log(searchOrigin);\n        let eventTarget = searchOrigin;\n        let elementFromPosition = null;\n\n        // 2 Optional step, UA defined starting point\n        if (startingPoint) {\n            // if there is a starting point, set eventTarget as the element from position for getting the spatnav container\n            elementFromPosition = document.elementFromPoint(startingPoint.x, startingPoint.y);\n\n            // Use starting point if the starting point isn't inside the focusable element (but not container)\n            // * Starting point is meaningfull when:\n            // 1) starting point is inside the spatnav container\n            // 2) starting point is inside the non-focusable element\n            if (elementFromPosition === null) {\n                elementFromPosition = document.body;\n            }\n            if (isFocusable(elementFromPosition) && !isContainer(elementFromPosition)) {\n                startingPoint = null;\n            } else if (isContainer(elementFromPosition)) {\n                eventTarget = elementFromPosition;\n            } else {\n                eventTarget = elementFromPosition.getSpatialNavigationContainer();\n            }\n        }\n\n        // 4\n        if (eventTarget === window || eventTarget === document || eventTarget === document.documentElement) {\n            eventTarget = document.body || document.documentElement;\n        }\n\n        // 5\n        // At this point, spatialNavigationSearch can be applied.\n        // If startingPoint is either a scroll container or the document,\n        // find the best candidate within startingPoint\n        let container = null;\n        if ((isContainer(eventTarget) || eventTarget.nodeName === 'BODY') && !(eventTarget.nodeName === 'INPUT')) {\n            if (eventTarget.nodeName === 'IFRAME') {\n                eventTarget = eventTarget.contentDocument.documentElement;\n            }\n\n            container = container === window ? document.body : eventTarget;\n            let bestInsideCandidate = null;\n\n            // 5-2\n            if (\n                document.activeElement === searchOrigin ||\n                (document.activeElement === document.body && searchOrigin === document.documentElement)\n            ) {\n                if (getCSSSpatNavAction(eventTarget) === 'scroll') {\n                    if (scrollingController(eventTarget, dir)) return;\n                } else if (getCSSSpatNavAction(eventTarget) === 'focus') {\n                    bestInsideCandidate = eventTarget.spatialNavigationSearch(dir, {\n                        container: eventTarget,\n                        candidates: getSpatialNavigationCandidates(eventTarget, {\n                            mode: 'all',\n                        }),\n                    });\n                    if (focusingController(bestInsideCandidate, dir)) return;\n                } else if (getCSSSpatNavAction(eventTarget) === 'auto') {\n                    bestInsideCandidate = eventTarget.spatialNavigationSearch(dir, {\n                        container: eventTarget,\n                    });\n                    if (focusingController(bestInsideCandidate, dir) || scrollingController(eventTarget, dir)) return;\n                }\n            } else {\n                // when the previous search origin became offscreen\n                container = container.getSpatialNavigationContainer();\n            }\n        }\n\n        // 6\n        // Let container be the nearest ancestor of eventTarget\n        container = eventTarget.getSpatialNavigationContainer();\n        let parentContainer = container.parentElement ? container.getSpatialNavigationContainer() : null;\n\n        // When the container is the viewport of a browsing context\n        if (!parentContainer && window.location !== window.parent.location) {\n            parentContainer = window.parent.document.documentElement;\n        }\n\n        if (getCSSSpatNavAction(container) === 'scroll') {\n            if (scrollingController(container, dir)) return;\n        } else if (getCSSSpatNavAction(container) === 'focus') {\n            navigateChain(eventTarget, container, parentContainer, dir, 'all');\n        } else if (getCSSSpatNavAction(container) === 'auto') {\n            navigateChain(eventTarget, container, parentContainer, dir, 'visible');\n        }\n    }\n\n    /**\n     * Move the focus to the best candidate or do nothing.\n     * @function focusingController\n     * @param bestCandidate {Node} - The best candidate of the spatial navigation\n     * @param dir {SpatialNavigationDirection}- The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function focusingController(bestCandidate, dir) {\n        // 10 & 11\n        // When bestCandidate is found\n        if (bestCandidate) {\n            // When bestCandidate is a focusable element and not a container : move focus\n            /*\n             * [event] navbeforefocus : Fired before spatial or sequential navigation changes the focus.\n             */\n            if (!createSpatNavEvents('beforefocus', bestCandidate, null, dir)) return true;\n\n            const container = bestCandidate.getSpatialNavigationContainer();\n\n            if (container !== window && getCSSSpatNavAction(container) === 'focus') {\n                bestCandidate.focus();\n            } else {\n                bestCandidate.focus({ preventScroll: true });\n            }\n\n            startingPoint = null;\n            return true;\n        }\n\n        // When bestCandidate is not found within the scrollport of a container: Nothing\n        return false;\n    }\n\n    /**\n     * Directionally scroll the scrollable spatial navigation container if it can be manually scrolled more.\n     * @function scrollingController\n     * @param container {Node} - The spatial navigation container which can scroll\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function scrollingController(container, dir) {\n        // If there is any scrollable area among parent elements and it can be manually scrolled, scroll the document\n        if (isScrollable(container, dir) && !isScrollBoundary(container, dir)) {\n            moveScroll(container, dir);\n            return true;\n        }\n\n        // If the spatnav container is document and it can be scrolled, scroll the document\n        if (!container.parentElement && !isHTMLScrollBoundary(container, dir)) {\n            moveScroll(container.ownerDocument.documentElement, dir);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Find the candidates within a spatial navigation container include delegable container.\n     * This function does not search inside delegable container or focusable container.\n     * In other words, this return candidates set is not included focusable elements inside delegable container or focusable container.\n     *\n     * @function getSpatialNavigationCandidates\n     * @param container {Node} - The spatial navigation container\n     * @param option {FocusableAreasOptions} - 'mode' attribute takes 'visible' or 'all' for searching the boundary of focusable elements.\n     *                                          Default value is 'visible'.\n     * @returns {sequence<Node>} candidate elements within the container\n     */\n    function getSpatialNavigationCandidates(container, option = { mode: 'visible' }) {\n        let candidates = [];\n\n        if (container.childElementCount > 0) {\n            if (!container.parentElement) {\n                container = container.getElementsByTagName('body')[0] || document.body;\n            }\n            const children = container.children;\n            for (const elem of children) {\n                if (isDelegableContainer(elem)) {\n                    candidates.push(elem);\n                } else if (isFocusable(elem)) {\n                    candidates.push(elem);\n\n                    if (!isContainer(elem) && elem.childElementCount) {\n                        candidates = candidates.concat(getSpatialNavigationCandidates(elem, { mode: 'all' }));\n                    }\n                } else if (elem.childElementCount) {\n                    candidates = candidates.concat(getSpatialNavigationCandidates(elem, { mode: 'all' }));\n                }\n            }\n        }\n\n        //   console.log(candidates)\n        return option.mode === 'all' ? candidates : candidates.filter(isVisible);\n    }\n\n    /**\n     * Find the candidates among focusable elements within a spatial navigation container from the search origin (currently focused element)\n     * depending on the directional information.\n     * @function getFilteredSpatialNavigationCandidates\n     * @param element {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation without the directional information\n     * @param container {Node} - The spatial navigation container\n     * @returns {Node} The candidates for spatial navigation considering the directional information\n     */\n    function getFilteredSpatialNavigationCandidates(element, dir, candidates, container) {\n        const targetElement = element;\n        // Removed below line due to a bug. (iframe body rect is sometime weird.)\n        // const targetElement = (element.nodeName === 'IFRAME') ? element.contentDocument.body : element;\n        // If the container is unknown, get the closest container from the element\n        container = container || targetElement.getSpatialNavigationContainer();\n\n        // If the candidates is unknown, find candidates\n        // 5-1\n        candidates = !candidates || candidates.length <= 0 ? getSpatialNavigationCandidates(container) : candidates;\n        return filteredCandidates(targetElement, candidates, dir, container);\n    }\n\n    /**\n     * Find the best candidate among the candidates within the container from the search origin (currently focused element)\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-element-spatialnavigationsearch}\n     * @function spatialNavigationSearch\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param container {Node} - The spatial navigation container\n     * @returns {Node} The best candidate which will gain the focus\n     */\n    function spatialNavigationSearch(dir, args) {\n        const targetElement = this;\n        let internalCandidates = [];\n        let externalCandidates = [];\n        let insideOverlappedCandidates = getOverlappedCandidates(targetElement);\n        let bestTarget;\n\n        // Set default parameter value\n        if (!args) args = {};\n\n        const defaultContainer = targetElement.getSpatialNavigationContainer();\n        let defaultCandidates = getSpatialNavigationCandidates(defaultContainer);\n        const container = args.container || defaultContainer;\n        if (args.container && defaultContainer.contains(args.container)) {\n            defaultCandidates = defaultCandidates.concat(getSpatialNavigationCandidates(container));\n        }\n        const candidates =\n            args.candidates && args.candidates.length > 0\n                ? args.candidates.filter((candidate) => container.contains(candidate))\n                : defaultCandidates.filter((candidate) => container.contains(candidate) && container !== candidate);\n\n        // Find the best candidate\n        // 5\n        // If startingPoint is either a scroll container or the document,\n        // find the best candidate within startingPoint\n        if (candidates && candidates.length > 0) {\n            // Divide internal or external candidates\n            candidates.forEach((candidate) => {\n                if (candidate !== targetElement) {\n                    (targetElement.contains(candidate) && targetElement !== candidate\n                        ? internalCandidates\n                        : externalCandidates\n                    ).push(candidate);\n                }\n            });\n\n            // include overlapped element to the internalCandidates\n            let fullyOverlapped = insideOverlappedCandidates.filter(\n                (candidate) => !internalCandidates.includes(candidate),\n            );\n            let overlappedContainer = candidates.filter(\n                (candidate) => isContainer(candidate) && isEntirelyVisible(targetElement, candidate),\n            );\n            let overlappedByParent = overlappedContainer\n                .map((elm) => elm.focusableAreas())\n                .flat()\n                .filter((candidate) => candidate !== targetElement);\n\n            internalCandidates = internalCandidates\n                .concat(fullyOverlapped)\n                .filter((candidate) => container.contains(candidate));\n            externalCandidates = externalCandidates\n                .concat(overlappedByParent)\n                .filter((candidate) => container.contains(candidate));\n\n            // Filter external Candidates\n            if (externalCandidates.length > 0) {\n                externalCandidates = getFilteredSpatialNavigationCandidates(\n                    targetElement,\n                    dir,\n                    externalCandidates,\n                    container,\n                );\n            }\n\n            // If there isn't search origin element but search orgin rect exist  (search origin isn't in the layout case)\n            if (searchOriginRect) {\n                bestTarget = selectBestCandidate(\n                    targetElement,\n                    getFilteredSpatialNavigationCandidates(targetElement, dir, internalCandidates, container),\n                    dir,\n                );\n            }\n\n            if (internalCandidates && internalCandidates.length > 0 && !(targetElement.nodeName === 'INPUT')) {\n                bestTarget = selectBestCandidateFromEdge(targetElement, internalCandidates, dir);\n            }\n\n            bestTarget = bestTarget || selectBestCandidate(targetElement, externalCandidates, dir);\n\n            if (bestTarget && isDelegableContainer(bestTarget)) {\n                // if best target is delegable container, then find descendants candidate inside delegable container.\n                const innerTarget = getSpatialNavigationCandidates(bestTarget, {\n                    mode: 'all',\n                });\n                const descendantsBest =\n                    innerTarget.length > 0\n                        ? targetElement.spatialNavigationSearch(dir, {\n                              candidates: innerTarget,\n                              container: bestTarget,\n                          })\n                        : null;\n                if (descendantsBest) {\n                    bestTarget = descendantsBest;\n                } else if (!isFocusable(bestTarget)) {\n                    // if there is no target inside bestTarget and delegable container is not focusable,\n                    // then try to find another best target without curren best target.\n                    candidates.splice(candidates.indexOf(bestTarget), 1);\n                    bestTarget = candidates.length\n                        ? targetElement.spatialNavigationSearch(dir, {\n                              candidates: candidates,\n                              container: container,\n                          })\n                        : null;\n                }\n            }\n            return bestTarget;\n        }\n\n        return null;\n    }\n\n    /**\n     * Get the filtered candidate among candidates.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#select-the-best-candidate}\n     * @function filteredCandidates\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param container {Node} - The spatial navigation container\n     * @returns {sequence<Node>} The filtered candidates which are not the search origin and not in the given spatial navigation direction from the search origin\n     */\n    // TODO: Need to fix filtering the candidates with more clean code\n    function filteredCandidates(currentElm, candidates, dir, container) {\n        const originalContainer = currentElm.getSpatialNavigationContainer();\n        let eventTargetRect;\n\n        // If D(dir) is null, let candidates be the same as visibles\n        if (dir === undefined) return candidates;\n\n        // Offscreen handling when originalContainer is not <HTML>\n        if (originalContainer.parentElement && container !== originalContainer && !isVisible(currentElm)) {\n            eventTargetRect = getBoundingClientRect(originalContainer);\n        } else {\n            eventTargetRect = searchOriginRect || getBoundingClientRect(currentElm);\n        }\n\n        /*\n         * Else, let candidates be the subset of the elements in visibles\n         * whose principal box’s geometric center is within the closed half plane\n         * whose boundary goes through the geometric center of starting point and is perpendicular to D.\n         */\n        if ((isContainer(currentElm) || currentElm.nodeName === 'BODY') && !(currentElm.nodeName === 'INPUT')) {\n            return candidates.filter((candidate) => {\n                const candidateRect = getBoundingClientRect(candidate);\n                return (\n                    container.contains(candidate) &&\n                    ((currentElm.contains(candidate) &&\n                        isInside(eventTargetRect, candidateRect) &&\n                        candidate !== currentElm) ||\n                        isOutside(candidateRect, eventTargetRect, dir))\n                );\n            });\n        } else {\n            return candidates.filter((candidate) => {\n                const candidateRect = getBoundingClientRect(candidate);\n                const candidateBody = candidate.nodeName === 'IFRAME' ? candidate.contentDocument.body : null;\n                return (\n                    container.contains(candidate) &&\n                    candidate !== currentElm &&\n                    candidateBody !== currentElm &&\n                    isOutside(candidateRect, eventTargetRect, dir) &&\n                    !isInside(eventTargetRect, candidateRect)\n                );\n            });\n        }\n    }\n\n    /**\n     * Select the best candidate among given candidates.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#select-the-best-candidate}\n     * @function selectBestCandidate\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Node} The best candidate which will gain the focus\n     */\n    function selectBestCandidate(currentElm, candidates, dir) {\n        const container = currentElm.getSpatialNavigationContainer();\n        const spatialNavigationFunction = getComputedStyle(container).getPropertyValue('--spatial-navigation-function');\n        const currentTargetRect = searchOriginRect || getBoundingClientRect(currentElm);\n        let distanceFunction;\n        let alignedCandidates;\n\n        switch (spatialNavigationFunction) {\n            case 'grid':\n                alignedCandidates = candidates.filter((elm) =>\n                    isAligned(currentTargetRect, getBoundingClientRect(elm), dir),\n                );\n                if (alignedCandidates.length > 0) {\n                    candidates = alignedCandidates;\n                }\n                distanceFunction = getAbsoluteDistance;\n                break;\n            default:\n                distanceFunction = getDistance;\n                break;\n        }\n        return getClosestElement(currentElm, candidates, dir, distanceFunction);\n    }\n\n    /**\n     * Select the best candidate among candidates by finding the closet candidate from the edge of the currently focused element (search origin).\n     * @see {@link https://drafts.csswg.org/css-nav-1/#select-the-best-candidate (Step 5)}\n     * @function selectBestCandidateFromEdge\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Node} The best candidate which will gain the focus\n     */\n    function selectBestCandidateFromEdge(currentElm, candidates, dir) {\n        if (startingPoint) return getClosestElement(currentElm, candidates, dir, getDistanceFromPoint);\n        else return getClosestElement(currentElm, candidates, dir, getInnerDistance);\n    }\n\n    /**\n     * Select the closest candidate from the currently focused element (search origin) among candidates by using the distance function.\n     * @function getClosestElement\n     * @param currentElm {Node} - The currently focused element which is defined as 'search origin' in the spec\n     * @param candidates {sequence<Node>} - The candidates for spatial navigation\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param distanceFunction {function} - The distance function which measures the distance from the search origin to each candidate\n     * @returns {Node} The candidate which is the closest one from the search origin\n     */\n    function getClosestElement(currentElm, candidates, dir, distanceFunction) {\n        let eventTargetRect = null;\n        if (\n            window.location !== window.parent.location &&\n            (currentElm.nodeName === 'BODY' || currentElm.nodeName === 'HTML')\n        ) {\n            // If the eventTarget is iframe, then get rect of it based on its containing document\n            // Set the iframe's position as (0,0) because the rects of elements inside the iframe don't know the real iframe's position.\n            eventTargetRect = window.frameElement.getBoundingClientRect();\n            eventTargetRect.x = 0;\n            eventTargetRect.y = 0;\n        } else {\n            eventTargetRect = searchOriginRect || currentElm.getBoundingClientRect();\n        }\n\n        let minDistance = Number.POSITIVE_INFINITY;\n        let minDistanceElements = [];\n\n        if (candidates) {\n            for (let i = 0; i < candidates.length; i++) {\n                const distance = distanceFunction(eventTargetRect, getBoundingClientRect(candidates[i]), dir);\n\n                // If the same distance, the candidate will be selected in the DOM order\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    minDistanceElements = [candidates[i]];\n                } else if (distance === minDistance) {\n                    minDistanceElements.push(candidates[i]);\n                }\n            }\n        }\n        if (minDistanceElements.length === 0) return null;\n\n        return minDistanceElements.length > 1 && distanceFunction === getAbsoluteDistance\n            ? getClosestElement(currentElm, minDistanceElements, dir, getEuclideanDistance)\n            : minDistanceElements[0];\n    }\n\n    /**\n     * Get container of an element.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-element-getspatialnavigationcontainer}\n     * @module Element\n     * @function getSpatialNavigationContainer\n     * @returns {Node} The spatial navigation container\n     */\n    function getSpatialNavigationContainer() {\n        let container = this;\n\n        do {\n            if (!container.parentElement) {\n                if (window.location !== window.parent.location) {\n                    container = window.parent.document.documentElement;\n                } else {\n                    container = window.document.documentElement;\n                }\n                break;\n            } else {\n                container = container.parentElement;\n            }\n\n            // console.log(container, isContainer(container));\n        } while (!isContainer(container));\n        return container;\n    }\n\n    /**\n     * Get nearest scroll container of an element.\n     * @function getScrollContainer\n     * @param Element\n     * @returns {Node} The spatial navigation container\n     */\n    function getScrollContainer(element) {\n        let scrollContainer = element;\n\n        do {\n            if (!scrollContainer.parentElement) {\n                if (window.location !== window.parent.location) {\n                    scrollContainer = window.parent.document.documentElement;\n                } else {\n                    scrollContainer = window.document.documentElement;\n                }\n                break;\n            } else {\n                scrollContainer = scrollContainer.parentElement;\n            }\n        } while (!isScrollContainer(scrollContainer) || !isVisible(scrollContainer));\n\n        if (scrollContainer === document || scrollContainer === document.documentElement) {\n            scrollContainer = window;\n        }\n\n        return scrollContainer;\n    }\n\n    /**\n     * Find focusable elements within the spatial navigation container.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#dom-element-focusableareas}\n     * @function focusableAreas\n     * @param option {FocusableAreasOptions} - 'mode' attribute takes 'visible' or 'all' for searching the boundary of focusable elements.\n     *                                          Default value is 'visible'.\n     * @returns {sequence<Node>} All focusable elements or only visible focusable elements within the container\n     */\n    function focusableAreas(option = { mode: 'visible' }) {\n        const container = this.parentElement ? this : document.body;\n        const focusables = Array.prototype.filter.call(container.getElementsByTagName('*'), isFocusable);\n        return option.mode === 'all' ? focusables : focusables.filter(isVisible);\n    }\n\n    /**\n     * Create the NavigationEvent: navbeforefocus, navnotarget\n     * @see {@link https://drafts.csswg.org/css-nav-1/#events-navigationevent}\n     * @function createSpatNavEvents\n     * @param option {string} - Type of the navigation event (beforefocus, notarget)\n     * @param element {Node} - The target element of the event\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     */\n    function createSpatNavEvents(eventType, containerElement, currentElement, direction) {\n        if (['beforefocus', 'notarget'].includes(eventType)) {\n            const data = {\n                causedTarget: currentElement,\n                dir: direction,\n            };\n            const triggeredEvent = new CustomEvent('nav' + eventType, {\n                bubbles: true,\n                cancelable: true,\n                detail: data,\n            });\n            return containerElement.dispatchEvent(triggeredEvent);\n        }\n    }\n\n    /**\n     * Get the value of the CSS custom property of the element\n     * @function readCssVar\n     * @param element {Node}\n     * @param varName {string} - The name of the css custom property without '--'\n     * @returns {string} The value of the css custom property\n     */\n    function readCssVar(element, varName) {\n        return getComputedStyle(element).getPropertyValue(`--${varName}`).trim();\n    }\n\n    /**\n     * Decide whether or not the 'contain' value is given to 'spatial-navigation-contain' css property of an element\n     * @function isCSSSpatNavContain\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isCSSSpatNavContain(element) {\n        return readCssVar(element, 'spatial-navigation-contain') === 'contain';\n    }\n\n    /**\n     * Return the value of 'spatial-navigation-action' css property of an element\n     * @function getCSSSpatNavAction\n     * @param element {Node} - would be the spatial navigation container\n     * @returns {string} auto | focus | scroll\n     */\n    function getCSSSpatNavAction(element) {\n        return 'focus';\n        //   return readCssVar(element, 'spatial-navigation-action') || 'auto';\n    }\n\n    /**\n     * Only move the focus with spatial navigation. Manually scrolling isn't available.\n     * @function navigateChain\n     * @param eventTarget {Node} - currently focused element\n     * @param container {SpatialNavigationContainer} - container\n     * @param parentContainer {SpatialNavigationContainer} - parent container\n     * @param option - visible || all\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     */\n    function navigateChain(eventTarget, container, parentContainer, dir, option) {\n        let currentOption = {\n            candidates: getSpatialNavigationCandidates(container, { mode: option }),\n            container,\n        };\n        //   console.log(currentOption)\n\n        while (parentContainer) {\n            if (focusingController(eventTarget.spatialNavigationSearch(dir, currentOption), dir)) {\n                return;\n            } else {\n                if (option === 'visible' && scrollingController(container, dir)) return;\n                else {\n                    if (!createSpatNavEvents('notarget', container, eventTarget, dir)) return;\n\n                    // find the container\n                    if (container === document || container === document.documentElement) {\n                        if (window.location !== window.parent.location) {\n                            // The page is in an iframe. eventTarget needs to be reset because the position of the element in the iframe\n                            eventTarget = window.frameElement;\n                            container = eventTarget.ownerDocument.documentElement;\n                        }\n                    } else {\n                        container = parentContainer;\n                    }\n                    currentOption = {\n                        candidates: getSpatialNavigationCandidates(container, {\n                            mode: option,\n                        }),\n                        container,\n                    };\n                    let nextContainer = container.getSpatialNavigationContainer();\n\n                    if (nextContainer !== container) {\n                        parentContainer = nextContainer;\n                    } else {\n                        parentContainer = null;\n                    }\n                }\n            }\n        }\n\n        currentOption = {\n            candidates: getSpatialNavigationCandidates(container, { mode: option }),\n            container,\n        };\n\n        // Behavior after 'navnotarget' - Getting out from the current spatnav container\n        if (\n            !parentContainer &&\n            container &&\n            focusingController(eventTarget.spatialNavigationSearch(dir, currentOption), dir)\n        )\n            return;\n\n        if (!createSpatNavEvents('notarget', currentOption.container, eventTarget, dir)) return;\n\n        if (getCSSSpatNavAction(container) === 'auto' && option === 'visible') {\n            if (scrollingController(container, dir)) return;\n        }\n    }\n\n    /**\n     * Find search origin\n     * @see {@link https://drafts.csswg.org/css-nav-1/#nav}\n     * @function findSearchOrigin\n     * @returns {Node} The search origin for the spatial navigation\n     */\n    function findSearchOrigin() {\n        let searchOrigin = document.activeElement;\n\n        if (!searchOrigin || (searchOrigin === document.body && !document.querySelector(':focus'))) {\n            // When the previous search origin lost its focus by blur: (1) disable attribute (2) visibility: hidden\n            if (savedSearchOrigin.element && searchOrigin !== savedSearchOrigin.element) {\n                const elementStyle = window.getComputedStyle(savedSearchOrigin.element, null);\n                const invisibleStyle = ['hidden', 'collapse'];\n\n                if (\n                    savedSearchOrigin.element.disabled ||\n                    invisibleStyle.includes(elementStyle.getPropertyValue('visibility'))\n                ) {\n                    searchOrigin = savedSearchOrigin.element;\n                    return searchOrigin;\n                }\n            }\n            searchOrigin = document.documentElement;\n        }\n        // When the previous search origin lost its focus by blur: (1) display:none () element size turned into zero\n        if (\n            savedSearchOrigin.element &&\n            (getBoundingClientRect(savedSearchOrigin.element).height === 0 ||\n                getBoundingClientRect(savedSearchOrigin.element).width === 0)\n        ) {\n            (startingPoint = (savedSearchOrigin.left + savedSearchOrigin.right) / 2),\n                (savedSearchOrigin.top + savedSearchOrigin.bottom) / 2;\n            // searchOriginRect = savedSearchOrigin.rect;\n        }\n\n        if (!isVisibleInScroller(searchOrigin)) {\n            const scroller = getScrollContainer(searchOrigin);\n            if (scroller && (scroller === window || getCSSSpatNavAction(scroller) === 'auto')) return scroller;\n        }\n        return searchOrigin;\n    }\n\n    /**\n     * Move the scroll of an element depending on the given spatial navigation directrion\n     * (Assume that User Agent defined distance is '40px')\n     * @see {@link https://drafts.csswg.org/css-nav-1/#directionally-scroll-an-element}\n     * @function moveScroll\n     * @param element {Node} - The scrollable element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @param offset {Number} - The explicit amount of offset for scrolling. Default value is 0.\n     */\n    function moveScroll(element, dir, offset = 0) {\n        if (element) {\n            switch (dir) {\n                case 'left':\n                    element.scrollLeft -= 40 + offset;\n                    break;\n                case 'right':\n                    element.scrollLeft += 40 + offset;\n                    break;\n                case 'up':\n                    element.scrollTop -= 40 + offset;\n                    break;\n                case 'down':\n                    element.scrollTop += 40 + offset;\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Decide whether an element is container or not.\n     * @function isContainer\n     * @param element {Node} element\n     * @returns {boolean}\n     */\n    function isContainer(element) {\n        return (\n            !element.parentElement ||\n            element.nodeName === 'IFRAME' ||\n            isScrollContainer(element) ||\n            isCSSSpatNavContain(element)\n        );\n    }\n\n    /**\n     * Decide whether an element is delegable container or not.\n     * NOTE: THIS IS NON-NORMATIVE API.\n     * @function isDelegableContainer\n     * @param element {Node} element\n     * @returns {boolean}\n     */\n    function isDelegableContainer(element) {\n        return readCssVar(element, 'spatial-navigation-contain') === 'delegable';\n    }\n\n    /**\n     * Decide whether an element is a scrollable container or not.\n     * @see {@link https://drafts.csswg.org/css-overflow-3/#scroll-container}\n     * @function isScrollContainer\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isScrollContainer(element) {\n        const elementStyle = window.getComputedStyle(element, null);\n        const overflowX = elementStyle.getPropertyValue('overflow-x');\n        const overflowY = elementStyle.getPropertyValue('overflow-y');\n\n        return (overflowX !== 'visible' && overflowX !== 'clip' && isOverflow(element, 'left')) ||\n            (overflowY !== 'visible' && overflowY !== 'clip' && isOverflow(element, 'down'))\n            ? true\n            : false;\n    }\n\n    /**\n     * Decide whether this element is scrollable or not.\n     * NOTE: If the value of 'overflow' is given to either 'visible', 'clip', or 'hidden', the element isn't scrollable.\n     *       If the value is 'hidden', the element can be only programmically scrollable. (https://drafts.csswg.org/css-overflow-3/#valdef-overflow-hidden)\n     * @function isScrollable\n     * @param element {Node}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isScrollable(element, dir) {\n        // element, dir\n        if (element && typeof element === 'object') {\n            if (dir && typeof dir === 'string') {\n                // parameter: dir, element\n                if (isOverflow(element, dir)) {\n                    // style property\n                    const elementStyle = window.getComputedStyle(element, null);\n                    const overflowX = elementStyle.getPropertyValue('overflow-x');\n                    const overflowY = elementStyle.getPropertyValue('overflow-y');\n\n                    switch (dir) {\n                        case 'left':\n                        /* falls through */\n                        case 'right':\n                            return overflowX !== 'visible' && overflowX !== 'clip' && overflowX !== 'hidden';\n                        case 'up':\n                        /* falls through */\n                        case 'down':\n                            return overflowY !== 'visible' && overflowY !== 'clip' && overflowY !== 'hidden';\n                    }\n                }\n                return false;\n            } else {\n                // parameter: element\n                return (\n                    element.nodeName === 'HTML' ||\n                    element.nodeName === 'BODY' ||\n                    (isScrollContainer(element) && isOverflow(element))\n                );\n            }\n        }\n    }\n\n    /**\n     * Decide whether an element is overflow or not.\n     * @function isOverflow\n     * @param element {Node}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isOverflow(element, dir) {\n        if (element && typeof element === 'object') {\n            if (dir && typeof dir === 'string') {\n                // parameter: element, dir\n                switch (dir) {\n                    case 'left':\n                    /* falls through */\n                    case 'right':\n                        return element.scrollWidth > element.clientWidth;\n                    case 'up':\n                    /* falls through */\n                    case 'down':\n                        return element.scrollHeight > element.clientHeight;\n                }\n            } else {\n                // parameter: element\n                return element.scrollWidth > element.clientWidth || element.scrollHeight > element.clientHeight;\n            }\n            return false;\n        }\n    }\n\n    /**\n     * Decide whether the scrollbar of the browsing context reaches to the end or not.\n     * @function isHTMLScrollBoundary\n     * @param element {Node} - The top browsing context\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isHTMLScrollBoundary(element, dir) {\n        let result = false;\n        switch (dir) {\n            case 'left':\n                result = element.scrollLeft === 0;\n                break;\n            case 'right':\n                result = element.scrollWidth - element.scrollLeft - element.clientWidth === 0;\n                break;\n            case 'up':\n                result = element.scrollTop === 0;\n                break;\n            case 'down':\n                result = element.scrollHeight - element.scrollTop - element.clientHeight === 0;\n                break;\n        }\n        return result;\n    }\n\n    /**\n     * Decide whether the scrollbar of an element reaches to the end or not.\n     * @function isScrollBoundary\n     * @param element {Node}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isScrollBoundary(element, dir) {\n        if (isScrollable(element, dir)) {\n            const winScrollY = element.scrollTop;\n            const winScrollX = element.scrollLeft;\n\n            const height = element.scrollHeight - element.clientHeight;\n            const width = element.scrollWidth - element.clientWidth;\n\n            switch (dir) {\n                case 'left':\n                    return winScrollX === 0;\n                case 'right':\n                    return Math.abs(winScrollX - width) <= 1;\n                case 'up':\n                    return winScrollY === 0;\n                case 'down':\n                    return Math.abs(winScrollY - height) <= 1;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Decide whether an element is inside the scorller viewport or not\n     *\n     * @function isVisibleInScroller\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isVisibleInScroller(element) {\n        const elementRect = element.getBoundingClientRect();\n        let nearestScroller = getScrollContainer(element);\n\n        let scrollerRect = null;\n        if (nearestScroller !== window) {\n            scrollerRect = getBoundingClientRect(nearestScroller);\n        } else {\n            scrollerRect = new DOMRect(0, 0, window.innerWidth, window.innerHeight);\n        }\n\n        if (isInside(scrollerRect, elementRect, 'left') && isInside(scrollerRect, elementRect, 'down')) return true;\n        else return false;\n    }\n\n    /**\n     * Decide whether an element is focusable for spatial navigation.\n     * 1. If element is the browsing context (document, iframe), then it's focusable,\n     * 2. If the element is scrollable container (regardless of scrollable axis), then it's focusable,\n     * 3. The value of tabIndex >= 0, then it's focusable,\n     * 4. If the element is disabled, it isn't focusable,\n     * 5. If the element is expressly inert, it isn't focusable,\n     * 6. Whether the element is being rendered or not.\n     *\n     * @function isFocusable\n     * @param element {Node}\n     * @returns {boolean}\n     *\n     * @see {@link https://html.spec.whatwg.org/multipage/interaction.html#focusable-area}\n     */\n    function isFocusable(element) {\n        if (\n            element.tabIndex < 0 ||\n            isAtagWithoutHref(element) ||\n            isActuallyDisabled(element) ||\n            isExpresslyInert(element) ||\n            !isBeingRendered(element)\n        )\n            return false;\n        else if (!element.parentElement || (isScrollable(element) && isOverflow(element)) || element.tabIndex >= 0)\n            return true;\n    }\n\n    /**\n     * Decide whether an element is a tag without href attribute or not.\n     *\n     * @function isAtagWithoutHref\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isAtagWithoutHref(element) {\n        return (\n            element.tagName === 'A' &&\n            element.getAttribute('href') === null &&\n            element.getAttribute('tabIndex') === null\n        );\n    }\n\n    /**\n     * Decide whether an element is actually disabled or not.\n     *\n     * @function isActuallyDisabled\n     * @param element {Node}\n     * @returns {boolean}\n     *\n     * @see {@link https://html.spec.whatwg.org/multipage/semantics-other.html#concept-element-disabled}\n     */\n    function isActuallyDisabled(element) {\n        if (['BUTTON', 'INPUT', 'SELECT', 'TEXTAREA', 'OPTGROUP', 'OPTION', 'FIELDSET'].includes(element.tagName))\n            return element.disabled;\n        else return false;\n    }\n\n    /**\n     * Decide whether the element is expressly inert or not.\n     * @see {@link https://html.spec.whatwg.org/multipage/interaction.html#expressly-inert}\n     * @function isExpresslyInert\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isExpresslyInert(element) {\n        return element.inert && !element.ownerDocument.documentElement.inert;\n    }\n\n    /**\n     * Decide whether the element is being rendered or not.\n     * 1. If an element has the style as \"visibility: hidden | collapse\" or \"display: none\", it is not being rendered.\n     * 2. If an element has the style as \"opacity: 0\", it is not being rendered.(that is, invisible).\n     * 3. If width and height of an element are explicitly set to 0, it is not being rendered.\n     * 4. If a parent element is hidden, an element itself is not being rendered.\n     * (CSS visibility property and display property are inherited.)\n     * @see {@link https://html.spec.whatwg.org/multipage/rendering.html#being-rendered}\n     * @function isBeingRendered\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isBeingRendered(element) {\n        if (!isVisibleStyleProperty(element.parentElement)) return false;\n        if (\n            !isVisibleStyleProperty(element) ||\n            element.style.opacity === '0' ||\n            window.getComputedStyle(element).height === '0px' ||\n            window.getComputedStyle(element).width === '0px'\n        )\n            return false;\n        return true;\n    }\n\n    /**\n     * Decide whether this element is partially or completely visible to user agent.\n     * @function isVisible\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isVisible(element) {\n        return !element.parentElement || (isVisibleStyleProperty(element) && hitTest(element));\n    }\n\n    /**\n     * Decide whether this element is completely visible in this viewport for the arrow direction.\n     * @function isEntirelyVisible\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function isEntirelyVisible(element, container) {\n        const rect = getBoundingClientRect(element);\n        const containerElm = container || element.getSpatialNavigationContainer();\n        const containerRect = getBoundingClientRect(containerElm);\n\n        // FIXME: when element is bigger than container?\n        const entirelyVisible = !(\n            rect.left < containerRect.left ||\n            rect.right > containerRect.right ||\n            rect.top < containerRect.top ||\n            rect.bottom > containerRect.bottom\n        );\n\n        return entirelyVisible;\n    }\n\n    /**\n     * Decide the style property of this element is specified whether it's visible or not.\n     * @function isVisibleStyleProperty\n     * @param element {CSSStyleDeclaration}\n     * @returns {boolean}\n     */\n    function isVisibleStyleProperty(element) {\n        const elementStyle = window.getComputedStyle(element, null);\n        const thisVisibility = elementStyle.getPropertyValue('visibility');\n        const thisDisplay = elementStyle.getPropertyValue('display');\n        const invisibleStyle = ['hidden', 'collapse'];\n\n        return thisDisplay !== 'none' && !invisibleStyle.includes(thisVisibility);\n    }\n\n    /**\n     * Decide whether this element is entirely or partially visible within the viewport.\n     * @function hitTest\n     * @param element {Node}\n     * @returns {boolean}\n     */\n    function hitTest(element) {\n        const elementRect = getBoundingClientRect(element);\n        if (\n            element.nodeName !== 'IFRAME' &&\n            (elementRect.top < 0 ||\n                elementRect.left < 0 ||\n                elementRect.top > element.ownerDocument.documentElement.clientHeight ||\n                elementRect.left > element.ownerDocument.documentElement.clientWidth)\n        )\n            return false;\n\n        let offsetX = parseInt(element.offsetWidth) / 10;\n        let offsetY = parseInt(element.offsetHeight) / 10;\n\n        offsetX = isNaN(offsetX) ? 1 : offsetX;\n        offsetY = isNaN(offsetY) ? 1 : offsetY;\n\n        const hitTestPoint = {\n            // For performance, just using the three point(middle, leftTop, rightBottom) of the element for hit testing\n            middle: [(elementRect.left + elementRect.right) / 2, (elementRect.top + elementRect.bottom) / 2],\n            leftTop: [elementRect.left + offsetX, elementRect.top + offsetY],\n            rightBottom: [elementRect.right - offsetX, elementRect.bottom - offsetY],\n        };\n\n        for (const point in hitTestPoint) {\n            const elemFromPoint = element.ownerDocument.elementFromPoint(...hitTestPoint[point]);\n            if (element === elemFromPoint || element.contains(elemFromPoint)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Decide whether a child element is entirely or partially Included within container visually.\n     * @function isInside\n     * @param containerRect {DOMRect}\n     * @param childRect {DOMRect}\n     * @returns {boolean}\n     */\n    function isInside(containerRect, childRect) {\n        const rightEdgeCheck = containerRect.left < childRect.right && containerRect.right >= childRect.right;\n        const leftEdgeCheck = containerRect.left <= childRect.left && containerRect.right > childRect.left;\n        const topEdgeCheck = containerRect.top <= childRect.top && containerRect.bottom > childRect.top;\n        const bottomEdgeCheck = containerRect.top < childRect.bottom && containerRect.bottom >= childRect.bottom;\n        return (rightEdgeCheck || leftEdgeCheck) && (topEdgeCheck || bottomEdgeCheck);\n    }\n\n    /**\n     * Decide whether this element is entirely or partially visible within the viewport.\n     * Note: rect1 is outside of rect2 for the dir\n     * @function isOutside\n     * @param rect1 {DOMRect}\n     * @param rect2 {DOMRect}\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {boolean}\n     */\n    function isOutside(rect1, rect2, dir) {\n        switch (dir) {\n            case 'left':\n                return isRightSide(rect2, rect1);\n            case 'right':\n                return isRightSide(rect1, rect2);\n            case 'up':\n                return isBelow(rect2, rect1);\n            case 'down':\n                return isBelow(rect1, rect2);\n            default:\n                return false;\n        }\n    }\n\n    /* rect1 is right of rect2 */\n    function isRightSide(rect1, rect2) {\n        return (\n            rect1.left >= rect2.right ||\n            (rect1.left >= rect2.left &&\n                rect1.right > rect2.right &&\n                rect1.bottom > rect2.top &&\n                rect1.top < rect2.bottom)\n        );\n    }\n\n    /* rect1 is below of rect2 */\n    function isBelow(rect1, rect2) {\n        return (\n            rect1.top >= rect2.bottom ||\n            (rect1.top >= rect2.top &&\n                rect1.bottom > rect2.bottom &&\n                rect1.left < rect2.right &&\n                rect1.right > rect2.left)\n        );\n    }\n\n    /* rect1 is completely aligned or partially aligned for the direction */\n    function isAligned(rect1, rect2, dir) {\n        switch (dir) {\n            case 'left':\n            /* falls through */\n            case 'right':\n                return rect1.bottom > rect2.top && rect1.top < rect2.bottom;\n            case 'up':\n            /* falls through */\n            case 'down':\n                return rect1.right > rect2.left && rect1.left < rect2.right;\n            default:\n                return false;\n        }\n    }\n\n    /**\n     * Get distance between the search origin and a candidate element along the direction when candidate element is inside the search origin.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#find-the-shortest-distance}\n     * @function getDistanceFromPoint\n     * @param point {Point} - The search origin\n     * @param element {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The euclidian distance between the spatial navigation container and an element inside it\n     */\n    function getDistanceFromPoint(point, element, dir) {\n        point = startingPoint;\n        // Get exit point, entry point -> {x: '', y: ''};\n        const points = getEntryAndExitPoints(dir, point, element);\n\n        // Find the points P1 inside the border box of starting point and P2 inside the border box of candidate\n        // that minimize the distance between these two points\n        const P1 = Math.abs(points.entryPoint.x - points.exitPoint.x);\n        const P2 = Math.abs(points.entryPoint.y - points.exitPoint.y);\n\n        // The result is euclidian distance between P1 and P2.\n        return Math.sqrt(Math.pow(P1, 2) + Math.pow(P2, 2));\n    }\n\n    /**\n     * Get distance between the search origin and a candidate element along the direction when candidate element is inside the search origin.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#find-the-shortest-distance}\n     * @function getInnerDistance\n     * @param rect1 {DOMRect} - The search origin\n     * @param rect2 {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The euclidean distance between the spatial navigation container and an element inside it\n     */\n    function getInnerDistance(rect1, rect2, dir) {\n        const baseEdgeForEachDirection = {\n            left: 'right',\n            right: 'left',\n            up: 'bottom',\n            down: 'top',\n        };\n        const baseEdge = baseEdgeForEachDirection[dir];\n\n        return Math.abs(rect1[baseEdge] - rect2[baseEdge]);\n    }\n\n    /**\n     * Get the distance between the search origin and a candidate element considering the direction.\n     * @see {@link https://drafts.csswg.org/css-nav-1/#calculating-the-distance}\n     * @function getDistance\n     * @param searchOrigin {DOMRect | Point} - The search origin\n     * @param candidateRect {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The distance scoring between two elements\n     */\n    function getDistance(searchOrigin, candidateRect, dir) {\n        const kOrthogonalWeightForLeftRight = 30;\n        const kOrthogonalWeightForUpDown = 2;\n\n        let orthogonalBias = 0;\n        let alignBias = 0;\n        const alignWeight = 5.0;\n\n        // Get exit point, entry point -> {x: '', y: ''};\n        const points = getEntryAndExitPoints(dir, searchOrigin, candidateRect);\n\n        // Find the points P1 inside the border box of starting point and P2 inside the border box of candidate\n        // that minimize the distance between these two points\n        const P1 = Math.abs(points.entryPoint.x - points.exitPoint.x);\n        const P2 = Math.abs(points.entryPoint.y - points.exitPoint.y);\n\n        // A: The euclidean distance between P1 and P2.\n        const A = Math.sqrt(Math.pow(P1, 2) + Math.pow(P2, 2));\n        let B, C;\n\n        // B: The absolute distance in the direction which is orthogonal to dir between P1 and P2, or 0 if dir is null.\n        // C: The intersection edges between a candidate and the starting point.\n\n        // D: The square root of the area of intersection between the border boxes of candidate and starting point\n        const intersectionRect = getIntersectionRect(searchOrigin, candidateRect);\n        const D = intersectionRect.area;\n\n        switch (dir) {\n            case 'left':\n            /* falls through */\n            case 'right':\n                // If two elements are aligned, add align bias\n                // else, add orthogonal bias\n                if (isAligned(searchOrigin, candidateRect, dir))\n                    alignBias = Math.min(intersectionRect.height / searchOrigin.height, 1);\n                else orthogonalBias = searchOrigin.height / 2;\n\n                B = (P2 + orthogonalBias) * kOrthogonalWeightForLeftRight;\n                C = alignWeight * alignBias;\n                break;\n\n            case 'up':\n            /* falls through */\n            case 'down':\n                // If two elements are aligned, add align bias\n                // else, add orthogonal bias\n                if (isAligned(searchOrigin, candidateRect, dir))\n                    alignBias = Math.min(intersectionRect.width / searchOrigin.width, 1);\n                else orthogonalBias = searchOrigin.width / 2;\n\n                B = (P1 + orthogonalBias) * kOrthogonalWeightForUpDown;\n                C = alignWeight * alignBias;\n                break;\n\n            default:\n                B = 0;\n                C = 0;\n                break;\n        }\n\n        return A + B - C - D;\n    }\n\n    /**\n     * Get the euclidean distance between the search origin and a candidate element considering the direction.\n     * @function getEuclideanDistance\n     * @param rect1 {DOMRect} - The search origin\n     * @param rect2 {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The distance scoring between two elements\n     */\n    function getEuclideanDistance(rect1, rect2, dir) {\n        // Get exit point, entry point\n        const points = getEntryAndExitPoints(dir, rect1, rect2);\n\n        // Find the points P1 inside the border box of starting point and P2 inside the border box of candidate\n        // that minimize the distance between these two points\n        const P1 = Math.abs(points.entryPoint.x - points.exitPoint.x);\n        const P2 = Math.abs(points.entryPoint.y - points.exitPoint.y);\n\n        // Return the euclidean distance between P1 and P2.\n        return Math.sqrt(Math.pow(P1, 2) + Math.pow(P2, 2));\n    }\n\n    /**\n     * Get the absolute distance between the search origin and a candidate element considering the direction.\n     * @function getAbsoluteDistance\n     * @param rect1 {DOMRect} - The search origin\n     * @param rect2 {DOMRect} - A candidate element\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD)\n     * @returns {Number} The distance scoring between two elements\n     */\n    function getAbsoluteDistance(rect1, rect2, dir) {\n        // Get exit point, entry point\n        const points = getEntryAndExitPoints(dir, rect1, rect2);\n\n        // Return the absolute distance in the dir direction between P1 and P.\n        return dir === 'left' || dir === 'right'\n            ? Math.abs(points.entryPoint.x - points.exitPoint.x)\n            : Math.abs(points.entryPoint.y - points.exitPoint.y);\n    }\n\n    /**\n     * Get entry point and exit point of two elements considering the direction.\n     * @function getEntryAndExitPoints\n     * @param dir {SpatialNavigationDirection} - The directional information for the spatial navigation (e.g. LRUD). Default value for dir is 'down'.\n     * @param searchOrigin {DOMRect | Point} - The search origin which contains the exit point\n     * @param candidateRect {DOMRect} - One of candidates which contains the entry point\n     * @returns {Points} The exit point from the search origin and the entry point from a candidate\n     */\n    function getEntryAndExitPoints(dir = 'down', searchOrigin, candidateRect) {\n        /**\n         * User type definition for Point\n         * @typeof {Object} Points\n         * @property {Point} Points.entryPoint\n         * @property {Point} Points.exitPoint\n         */\n        const points = { entryPoint: { x: 0, y: 0 }, exitPoint: { x: 0, y: 0 } };\n\n        if (startingPoint) {\n            points.exitPoint = searchOrigin;\n\n            switch (dir) {\n                case 'left':\n                    points.entryPoint.x = candidateRect.right;\n                    break;\n                case 'up':\n                    points.entryPoint.y = candidateRect.bottom;\n                    break;\n                case 'right':\n                    points.entryPoint.x = candidateRect.left;\n                    break;\n                case 'down':\n                    points.entryPoint.y = candidateRect.top;\n                    break;\n            }\n\n            // Set orthogonal direction\n            switch (dir) {\n                case 'left':\n                case 'right':\n                    if (startingPoint.y <= candidateRect.top) {\n                        points.entryPoint.y = candidateRect.top;\n                    } else if (startingPoint.y < candidateRect.bottom) {\n                        points.entryPoint.y = startingPoint.y;\n                    } else {\n                        points.entryPoint.y = candidateRect.bottom;\n                    }\n                    break;\n\n                case 'up':\n                case 'down':\n                    if (startingPoint.x <= candidateRect.left) {\n                        points.entryPoint.x = candidateRect.left;\n                    } else if (startingPoint.x < candidateRect.right) {\n                        points.entryPoint.x = startingPoint.x;\n                    } else {\n                        points.entryPoint.x = candidateRect.right;\n                    }\n                    break;\n            }\n        } else {\n            // Set direction\n            switch (dir) {\n                case 'left':\n                    points.exitPoint.x = searchOrigin.left;\n                    points.entryPoint.x =\n                        candidateRect.right < searchOrigin.left ? candidateRect.right : searchOrigin.left;\n                    break;\n                case 'up':\n                    points.exitPoint.y = searchOrigin.top;\n                    points.entryPoint.y =\n                        candidateRect.bottom < searchOrigin.top ? candidateRect.bottom : searchOrigin.top;\n                    break;\n                case 'right':\n                    points.exitPoint.x = searchOrigin.right;\n                    points.entryPoint.x =\n                        candidateRect.left > searchOrigin.right ? candidateRect.left : searchOrigin.right;\n                    break;\n                case 'down':\n                    points.exitPoint.y = searchOrigin.bottom;\n                    points.entryPoint.y =\n                        candidateRect.top > searchOrigin.bottom ? candidateRect.top : searchOrigin.bottom;\n                    break;\n            }\n\n            // Set orthogonal direction\n            switch (dir) {\n                case 'left':\n                case 'right':\n                    if (isBelow(searchOrigin, candidateRect)) {\n                        points.exitPoint.y = searchOrigin.top;\n                        points.entryPoint.y =\n                            candidateRect.bottom < searchOrigin.top ? candidateRect.bottom : searchOrigin.top;\n                    } else if (isBelow(candidateRect, searchOrigin)) {\n                        points.exitPoint.y = searchOrigin.bottom;\n                        points.entryPoint.y =\n                            candidateRect.top > searchOrigin.bottom ? candidateRect.top : searchOrigin.bottom;\n                    } else {\n                        points.exitPoint.y = Math.max(searchOrigin.top, candidateRect.top);\n                        points.entryPoint.y = points.exitPoint.y;\n                    }\n                    break;\n\n                case 'up':\n                case 'down':\n                    if (isRightSide(searchOrigin, candidateRect)) {\n                        points.exitPoint.x = searchOrigin.left;\n                        points.entryPoint.x =\n                            candidateRect.right < searchOrigin.left ? candidateRect.right : searchOrigin.left;\n                    } else if (isRightSide(candidateRect, searchOrigin)) {\n                        points.exitPoint.x = searchOrigin.right;\n                        points.entryPoint.x =\n                            candidateRect.left > searchOrigin.right ? candidateRect.left : searchOrigin.right;\n                    } else {\n                        points.exitPoint.x = Math.max(searchOrigin.left, candidateRect.left);\n                        points.entryPoint.x = points.exitPoint.x;\n                    }\n                    break;\n            }\n        }\n\n        return points;\n    }\n\n    /**\n     * Find focusable elements within the container\n     * @see {@link https://drafts.csswg.org/css-nav-1/#find-the-shortest-distance}\n     * @function getIntersectionRect\n     * @param rect1 {DOMRect} - The search origin which contains the exit point\n     * @param rect2 {DOMRect} - One of candidates which contains the entry point\n     * @returns {IntersectionArea} The intersection area between two elements.\n     *\n     * @typeof {Object} IntersectionArea\n     * @property {Number} IntersectionArea.width\n     * @property {Number} IntersectionArea.height\n     */\n    function getIntersectionRect(rect1, rect2) {\n        const intersection_rect = { width: 0, height: 0, area: 0 };\n\n        const new_location = [Math.max(rect1.left, rect2.left), Math.max(rect1.top, rect2.top)];\n        const new_max_point = [Math.min(rect1.right, rect2.right), Math.min(rect1.bottom, rect2.bottom)];\n\n        intersection_rect.width = Math.abs(new_location[0] - new_max_point[0]);\n        intersection_rect.height = Math.abs(new_location[1] - new_max_point[1]);\n\n        if (!(new_location[0] >= new_max_point[0] || new_location[1] >= new_max_point[1])) {\n            // intersecting-cases\n            intersection_rect.area = Math.sqrt(intersection_rect.width * intersection_rect.height);\n        }\n\n        return intersection_rect;\n    }\n\n    /**\n     * Handle the spatial navigation behavior for HTMLInputElement, HTMLTextAreaElement\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input|HTMLInputElement (MDN)}\n     * @function handlingEditableElement\n     * @param e {Event} - keydownEvent\n     * @returns {boolean}\n     */\n    function handlingEditableElement(e) {\n        const SPINNABLE_INPUT_TYPES = ['email', 'date', 'month', 'number', 'time', 'week'],\n            TEXT_INPUT_TYPES = ['password', 'text', 'search', 'tel', 'url', null];\n        const eventTarget = document.activeElement;\n        const startPosition = eventTarget.selectionStart;\n        const endPosition = eventTarget.selectionEnd;\n        const focusNavigableArrowKey = {\n            left: false,\n            up: false,\n            right: false,\n            down: false,\n        };\n\n        const dir = ARROW_KEY_CODE[e.keyCode];\n        if (dir === undefined) {\n            return focusNavigableArrowKey;\n        }\n\n        if (SPINNABLE_INPUT_TYPES.includes(eventTarget.getAttribute('type')) && (dir === 'up' || dir === 'down')) {\n            focusNavigableArrowKey[dir] = true;\n        } else if (TEXT_INPUT_TYPES.includes(eventTarget.getAttribute('type')) || eventTarget.nodeName === 'TEXTAREA') {\n            if (startPosition === endPosition) {\n                // if there isn't any selected text\n                if (startPosition === 0) {\n                    focusNavigableArrowKey.left = true;\n                    focusNavigableArrowKey.up = true;\n                }\n                if (endPosition === eventTarget.value.length) {\n                    focusNavigableArrowKey.right = true;\n                    focusNavigableArrowKey.down = true;\n                }\n            }\n        } else {\n            // HTMLDataListElement, HTMLSelectElement, HTMLOptGroup\n            focusNavigableArrowKey[dir] = true;\n        }\n\n        return focusNavigableArrowKey;\n    }\n\n    /**\n     * Get the DOMRect of an element\n     * @function getBoundingClientRect\n     * @param {Node} element\n     * @returns {DOMRect}\n     */\n    function getBoundingClientRect(element) {\n        // memoization\n        let rect = mapOfBoundRect && mapOfBoundRect.get(element);\n        if (!rect) {\n            const boundingClientRect = element.getBoundingClientRect();\n            rect = {\n                top: Number(boundingClientRect.top.toFixed(2)),\n                right: Number(boundingClientRect.right.toFixed(2)),\n                bottom: Number(boundingClientRect.bottom.toFixed(2)),\n                left: Number(boundingClientRect.left.toFixed(2)),\n                width: Number(boundingClientRect.width.toFixed(2)),\n                height: Number(boundingClientRect.height.toFixed(2)),\n            };\n            mapOfBoundRect && mapOfBoundRect.set(element, rect);\n        }\n        return rect;\n    }\n\n    /**\n     * Get the candidates which is fully inside the target element in visual\n     * @param {Node} targetElement\n     * @returns {sequence<Node>}  overlappedCandidates\n     */\n    function getOverlappedCandidates(targetElement) {\n        const container = targetElement.getSpatialNavigationContainer();\n        const candidates = container.focusableAreas();\n        const overlappedCandidates = [];\n\n        candidates.forEach((element) => {\n            if (targetElement !== element && isEntirelyVisible(element, targetElement)) {\n                overlappedCandidates.push(element);\n            }\n        });\n\n        return overlappedCandidates;\n    }\n\n    /**\n     * Get the list of the experimental APIs\n     * @function getExperimentalAPI\n     */\n    function getExperimentalAPI() {\n        function canScroll(container, dir) {\n            return (\n                (isScrollable(container, dir) && !isScrollBoundary(container, dir)) ||\n                (!container.parentElement && !isHTMLScrollBoundary(container, dir))\n            );\n        }\n\n        function findTarget(findCandidate, element, dir, option) {\n            let eventTarget = element;\n            let bestNextTarget = null;\n\n            // 4\n            if (eventTarget === document || eventTarget === document.documentElement) {\n                eventTarget = document.body || document.documentElement;\n            }\n\n            // 5\n            // At this point, spatialNavigationSearch can be applied.\n            // If startingPoint is either a scroll container or the document,\n            // find the best candidate within startingPoint\n            if ((isContainer(eventTarget) || eventTarget.nodeName === 'BODY') && !(eventTarget.nodeName === 'INPUT')) {\n                if (eventTarget.nodeName === 'IFRAME') eventTarget = eventTarget.contentDocument.body;\n\n                const candidates = getSpatialNavigationCandidates(eventTarget, option);\n\n                // 5-2\n                if (Array.isArray(candidates) && candidates.length > 0) {\n                    return findCandidate\n                        ? getFilteredSpatialNavigationCandidates(eventTarget, dir, candidates)\n                        : eventTarget.spatialNavigationSearch(dir, { candidates });\n                }\n                if (canScroll(eventTarget, dir)) {\n                    return findCandidate ? [] : eventTarget;\n                }\n            }\n\n            // 6\n            // Let container be the nearest ancestor of eventTarget\n            let container = eventTarget.getSpatialNavigationContainer();\n            let parentContainer = container.parentElement ? container.getSpatialNavigationContainer() : null;\n\n            // When the container is the viewport of a browsing context\n            if (!parentContainer && window.location !== window.parent.location) {\n                parentContainer = window.parent.document.documentElement;\n            }\n\n            // 7\n            while (parentContainer) {\n                const candidates = filteredCandidates(\n                    eventTarget,\n                    getSpatialNavigationCandidates(container, option),\n                    dir,\n                    container,\n                );\n\n                if (Array.isArray(candidates) && candidates.length > 0) {\n                    bestNextTarget = eventTarget.spatialNavigationSearch(dir, {\n                        candidates,\n                        container,\n                    });\n                    if (bestNextTarget) {\n                        return findCandidate ? candidates : bestNextTarget;\n                    }\n                }\n\n                // If there isn't any candidate and the best candidate among candidate:\n                // 1) Scroll or 2) Find candidates of the ancestor container\n                // 8 - if\n                else if (canScroll(container, dir)) {\n                    return findCandidate ? [] : eventTarget;\n                } else if (container === document || container === document.documentElement) {\n                    container = window.document.documentElement;\n\n                    // The page is in an iframe\n                    if (window.location !== window.parent.location) {\n                        // eventTarget needs to be reset because the position of the element in the IFRAME\n                        // is unuseful when the focus moves out of the iframe\n                        eventTarget = window.frameElement;\n                        container = window.parent.document.documentElement;\n                        if (container.parentElement) parentContainer = container.getSpatialNavigationContainer();\n                        else {\n                            parentContainer = null;\n                            break;\n                        }\n                    }\n                } else {\n                    // avoiding when spatnav container with tabindex=-1\n                    if (isFocusable(container)) {\n                        eventTarget = container;\n                    }\n\n                    container = parentContainer;\n                    if (container.parentElement) parentContainer = container.getSpatialNavigationContainer();\n                    else {\n                        parentContainer = null;\n                        break;\n                    }\n                }\n            }\n\n            if (!parentContainer && container) {\n                // Getting out from the current spatnav container\n                const candidates = filteredCandidates(\n                    eventTarget,\n                    getSpatialNavigationCandidates(container, option),\n                    dir,\n                    container,\n                );\n\n                // 9\n                if (Array.isArray(candidates) && candidates.length > 0) {\n                    bestNextTarget = eventTarget.spatialNavigationSearch(dir, {\n                        candidates,\n                        container,\n                    });\n                    if (bestNextTarget) {\n                        return findCandidate ? candidates : bestNextTarget;\n                    }\n                }\n            }\n\n            if (canScroll(container, dir)) {\n                bestNextTarget = eventTarget;\n                return bestNextTarget;\n            }\n        }\n\n        return {\n            isContainer,\n            isScrollContainer,\n            isVisibleInScroller,\n            findCandidates: findTarget.bind(null, true),\n            findNextTarget: findTarget.bind(null, false),\n            getDistanceFromTarget: (element, candidateElement, dir) => {\n                if ((isContainer(element) || element.nodeName === 'BODY') && !(element.nodeName === 'INPUT')) {\n                    if (getSpatialNavigationCandidates(element).includes(candidateElement)) {\n                        return getInnerDistance(\n                            getBoundingClientRect(element),\n                            getBoundingClientRect(candidateElement),\n                            dir,\n                        );\n                    }\n                }\n                return getDistance(getBoundingClientRect(element), getBoundingClientRect(candidateElement), dir);\n            },\n        };\n    }\n\n    /**\n     * Makes to use the experimental APIs.\n     * @function enableExperimentalAPIs\n     * @param option {boolean} - If it is true, the experimental APIs can be used or it cannot.\n     */\n    function enableExperimentalAPIs(option) {\n        const currentKeyMode = window.__spatialNavigation__ && window.__spatialNavigation__.keyMode;\n        window.__spatialNavigation__ =\n            option === false ? getInitialAPIs() : Object.assign(getInitialAPIs(), getExperimentalAPI());\n        window.__spatialNavigation__.keyMode = currentKeyMode;\n        Object.seal(window.__spatialNavigation__);\n    }\n\n    /**\n     * Set the environment for using the spatial navigation polyfill.\n     * @function getInitialAPIs\n     */\n    function getInitialAPIs() {\n        return {\n            enableExperimentalAPIs,\n            get keyMode() {\n                return this._keymode ? this._keymode : 'ARROW';\n            },\n            set keyMode(mode) {\n                this._keymode = ['SHIFTARROW', 'ARROW', 'NONE'].includes(mode) ? mode : 'ARROW';\n            },\n            setStartingPoint: function (x, y) {\n                startingPoint = x && y ? { x, y } : null;\n            },\n        };\n    }\n\n    initiateSpatialNavigation();\n    enableExperimentalAPIs(true);\n    spatialNavigationHandler();\n})();\n\nlet currentSpatialNavigationContainer = null;\n\ndocument.addEventListener('navbeforefocus', (e) => {\n    if (e.target instanceof HTMLElement) {\n        e.preventDefault();\n\n        let { target } = e;\n\n        // focus on the first element when changing spatnav container\n        // const nextSpatialNavigationContainer = target.getSpatialNavigationContainer();\n        //\n        // if (currentSpatialNavigationContainer && currentSpatialNavigationContainer !== nextSpatialNavigationContainer) {\n        //     if (nextSpatialNavigationContainer.__lastElementFocused) {\n        //         target = nextSpatialNavigationContainer.__lastElementFocused;\n        //     } else {\n        //         [target] = nextSpatialNavigationContainer.focusableAreas({ mode: 'all' });\n        //     }\n        //     // target.focus();\n        // }\n        //\n        // currentSpatialNavigationContainer = nextSpatialNavigationContainer;\n        // currentSpatialNavigationContainer.__lastElementFocused = target;\n\n        requestAnimationFrame(async () => {\n            target.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'nearest' });\n            // if (isElementInViewport(target)) {\n            //     target.focus();\n            // }\n\n            await new Promise((resolve) => {\n                const intersectionObserver = new IntersectionObserver(\n                    ([entry]) => {\n                        if (entry.isIntersecting) {\n                            resolve();\n                        }\n                    },\n                    {\n                        threshold: 1,\n                    },\n                );\n                intersectionObserver.observe(target);\n            });\n\n            target.focus();\n        });\n    }\n});\n\nconst doClick = debounce((element) => {\n    // если вызван setImmediatePropagation, производное событие не сработает\n    // поэтому добавляем клик в очередь событий\n    setTimeout(() => {\n        element.click();\n    });\n}, 200);\n\n// имитируем клик при нажатии OK на всем, что не кнопка\n// потому что при нажатии ОК на кнопке срабатывает и keyup, и ее собственный клик\ndocument.addEventListener('keyup', (event) => {\n    if (event.keyCode === 13) {\n        event.preventDefault();\n        if (document.activeElement && !(document.activeElement instanceof HTMLButtonElement)) {\n            doClick(document.activeElement);\n        }\n    }\n});\n\n// при клике отключаем стандартный клик\n// и включаем имитированный\ndocument.addEventListener('click', (event) => {\n    if (event.isTrusted) {\n        if (event.target === document.activeElement) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            doClick(document.activeElement);\n        }\n    }\n}, {capture: true});\n\n// console.log('1');\n\n// let isIntersecting = false;\n// const intersectionObserver = new IntersectionObserver(([entry]) => {\n// console.log('2');\n//   isIntersecting = entry.isIntersecting;\n// }, {\n//   threshold: 1\n// });\n// intersectionObserver.observe($0)\n// console.log('3');\n\n// start observing\n// intersectionObserver.observe());\n\nfunction isElementInViewport(el) {\n    const rect = el.getBoundingClientRect();\n    return (\n        rect.top >= 0 &&\n        rect.left >= 0 &&\n        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n        rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n}\n\nfunction debounce(fn, wait = 200) {\n    let timeoutId = undefined;\n\n    return (...args) => {\n        const isTimeoutSet = Boolean(timeoutId);\n\n        if (!isTimeoutSet) {\n            fn(...args);\n        } else {\n            clearTimeout(timeoutId);\n            console.log('debounced!');\n        }\n\n        timeoutId = setTimeout(() => {\n            timeoutId = undefined;\n        }, wait);\n    }\n}\n","export function mobileDetect() {\n    const navigator = window.navigator.userAgent || window.navigator.vendor;\n\n    /* eslint-disable */\n    return (\n        /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n            navigator,\n        ) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n            navigator.substr(0, 4),\n        )\n    );\n    /* eslint-enable */\n}\n","import { createHashHistory } from 'history';\n\nexport const history = createHashHistory();\n\n/**\n * Возвращает промис, который резолвится при следующем изменении стории.\n * Это нужно для того, чтобы можно было \"синхронно\" вызвать несколько изменений истории.\n *\n * Например, если вызвать go(-2) и replace('some-url') последовательно, то второй вызов\n * не отработает, потому что изменение истории работает асинхронно. Поэтому мы вызываем\n * первый метод, ждем пока прилетит событие и вызываем второй.\n */\nexport const getWaitNextNavigationEventPromise = () => {\n    return new Promise((resolve) => {\n        let unListen: () => void;\n\n        const handleLocationChange = () => {\n            if (unListen) {\n                unListen();\n            }\n\n            resolve();\n        };\n\n        unListen = history.listen(handleLocationChange);\n    });\n};\n","export enum OrderStatus {\n    INITIAL = 'INITIAL',\n    INVOICE_CREATED = 'INVOICE_CREATED',\n    FUNDS_RESERVED = 'FUNDS_RESERVED',\n    CONFIRMED_BY_PARTNER = 'CONFIRMED_BY_PARTNER',\n    DELIVERING = 'DELIVERING',\n    DELIVERED = 'DELIVERED',\n    CANCEL_BY_PARTNER = 'CANCEL_BY_PARTNER',\n    CANCEL_BY_CUSTOMER = 'CANCEL_BY_CUSTOMER',\n    CANCEL_BY_PAYMENT = 'CANCEL_BY_PAYMENT',\n    PAID = 'PAID',\n    CANCELLED = 'CANCELLED',\n    ERROR = 'ERROR',\n}\n\nexport enum OrderStatusCategory {\n    PENDING = 'PENDING',\n    DELIVERING = 'DELIVERING',\n    SUCCESS = 'SUCCESS',\n    FAILED = 'FAILED',\n}\n\nexport const mapOrderStatusToCategory: Record<OrderStatus, OrderStatusCategory> = {\n    [OrderStatus.INITIAL]: OrderStatusCategory.PENDING,\n    [OrderStatus.INVOICE_CREATED]: OrderStatusCategory.PENDING,\n    [OrderStatus.FUNDS_RESERVED]: OrderStatusCategory.PENDING,\n    [OrderStatus.CONFIRMED_BY_PARTNER]: OrderStatusCategory.PENDING,\n    [OrderStatus.DELIVERING]: OrderStatusCategory.DELIVERING,\n    [OrderStatus.DELIVERED]: OrderStatusCategory.SUCCESS,\n    [OrderStatus.CANCEL_BY_PARTNER]: OrderStatusCategory.FAILED,\n    [OrderStatus.CANCEL_BY_CUSTOMER]: OrderStatusCategory.FAILED,\n    [OrderStatus.CANCEL_BY_PAYMENT]: OrderStatusCategory.FAILED,\n    [OrderStatus.PAID]: OrderStatusCategory.SUCCESS,\n    [OrderStatus.CANCELLED]: OrderStatusCategory.FAILED,\n    [OrderStatus.ERROR]: OrderStatusCategory.FAILED,\n};\n\nexport enum Currency {\n    RUB = 'RUB',\n}\n\nexport interface Price {\n    value: string;\n    ccy: Currency;\n}\n\nexport interface DiscountedPrice extends Price {\n    discountValue: string;\n}\n\nexport interface ParsedPrice {\n    value: number;\n    currency: Currency;\n}\n\nexport interface ParsedDiscountedPrice extends ParsedPrice {\n    discountValue: number;\n}\n\nexport interface LastOrderPosition {\n    positionId: string;\n    productId: string;\n    originalPrice: DiscountedPrice;\n    originalTotalPrice: DiscountedPrice;\n    originalQuantity: string;\n    formedPrice: DiscountedPrice;\n    formedQuantity: string;\n    formedTotalPrice: DiscountedPrice;\n    name: string;\n    images_urls: string[];\n}\n\nexport interface LastOrderInfo {\n    orderId: string;\n    partner: string;\n    merchantId: string;\n    externalId: string;\n    invoiceId: string;\n    orderStatus: OrderStatus;\n    changedOnFormed: string;\n    expectedDateTime: string;\n    comment: string;\n    customer: {\n        sub: string;\n        name: string;\n        phone: string;\n        email: string;\n    };\n    address: {\n        location: {\n            latitude: string;\n            longitude: string;\n        };\n        city: string;\n        street: string;\n        house: string;\n        apartment: string;\n        entrance: string;\n        floor: string;\n        door_code: string;\n    };\n    positions: LastOrderPosition[];\n    deliveryPrice: DiscountedPrice;\n    orderDiscount: Price;\n    originalTotalPrice: DiscountedPrice;\n    originalOrderPrice: Price;\n    formedTotalPrice: DiscountedPrice;\n    formedOrderPrice: Price;\n    errorCode: string;\n}\n\nexport interface OrderStateProductItem {\n    positionId: string;\n    productId: string;\n    originalPrice: ParsedDiscountedPrice;\n    originalTotalPrice: ParsedDiscountedPrice;\n    originalQuantity: number;\n    formedPrice: ParsedDiscountedPrice;\n    formedQuantity: number;\n    formedTotalPrice: ParsedDiscountedPrice;\n    name: string;\n    imageUrl: string;\n}\n","import { OrderStatus, Currency, LastOrderInfo } from 'store/constants/orderStatus';\n\n/* eslint-disable @typescript-eslint/camelcase */\n\nexport const lastOrderInfoMock: LastOrderInfo = {\n    orderId: '290',\n    partner: 'SAMOKAT',\n    merchantId: 'f541fcf7-e198-11e8-ac06-00155d462103',\n    externalId: '95720461-884f-490b-ae4b-e9bd1c903702',\n    invoiceId: '30343',\n    orderStatus: OrderStatus.CONFIRMED_BY_PARTNER,\n    changedOnFormed: 'False',\n    expectedDateTime: '2020-09-16T14:17:06+03:00',\n    comment: 'None',\n    customer: {\n        sub: 'a19f38a0e97ed3497be0eca816af4e0db3ddc33029c9d3d9effb9aa5235d168da3028e64eea639f7',\n        name: 'SBERBOX_USER',\n        phone: '+79630000000',\n        email: 'string@test.com',\n    },\n    address: {\n        location: {\n            latitude: '59.840869',\n            longitude: '30.255716',\n        },\n        city: 'Санкт-Петербург',\n        street: 'Дачный проспект',\n        house: '19',\n        apartment: '',\n        entrance: '',\n        floor: '111',\n        door_code: '',\n    },\n    positions: [\n        {\n            positionId: '1',\n            productId: '3949e2f2-3a75-11e9-80c5-0cc47a8179251',\n            originalPrice: {\n                value: '20900',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            originalTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            originalQuantity: '2',\n            formedPrice: {\n                value: '20900',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            formedQuantity: '0',\n            formedTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            name: 'Драже M&Ms, 240г',\n            images_urls: ['https://cdn.sberdevices.ru/Samokat/mm.png'],\n        },\n        {\n            positionId: '3',\n            productId: '3949e2f2-3a75-11e9-80c5-0cc47a8179262',\n            originalPrice: {\n                value: '20900',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            originalTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            originalQuantity: '2',\n            formedPrice: {\n                value: '20800',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            formedQuantity: '2',\n            formedTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            name: 'Драже M&Ms, 240г',\n            images_urls: ['https://cdn.sberdevices.ru/Samokat/mm.png'],\n        },\n        {\n            positionId: '2',\n            productId: '71a76d3b-c355-11e9-bb93-ac1f6b6e023e3',\n            originalPrice: {\n                value: '28900',\n                discountValue: '28900',\n                ccy: Currency.RUB,\n            },\n            originalTotalPrice: {\n                value: '57800',\n                discountValue: '57800',\n                ccy: Currency.RUB,\n            },\n            originalQuantity: '2',\n            formedPrice: {\n                value: '28900',\n                discountValue: '28900',\n                ccy: Currency.RUB,\n            },\n            formedQuantity: '2',\n            formedTotalPrice: {\n                value: '57800',\n                discountValue: '57800',\n                ccy: Currency.RUB,\n            },\n            name: 'Шоколад Milka, 276г',\n            images_urls: ['https://cdn.sberdevices.ru/Samokat/milka.png'],\n        },\n        {\n            positionId: '1',\n            productId: '3949e2f2-3a75-11e9-80c5-0cc47a8179254',\n            originalPrice: {\n                value: '20900',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            originalTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            originalQuantity: '2',\n            formedPrice: {\n                value: '20900',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            formedQuantity: '0',\n            formedTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            name: 'Драже M&Ms, 240г',\n            images_urls: ['https://cdn.sberdevices.ru/Samokat/mm.png'],\n        },\n        {\n            positionId: '3',\n            productId: '3949e2f2-3a75-11e9-80c5-0cc47a8179265',\n            originalPrice: {\n                value: '20900',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            originalTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            originalQuantity: '2',\n            formedPrice: {\n                value: '20800',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            formedQuantity: '2',\n            formedTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            name: 'Драже M&Ms, 240г',\n            images_urls: ['https://cdn.sberdevices.ru/Samokat/mm.png'],\n        },\n        {\n            positionId: '2',\n            productId: '71a76d3b-c355-11e9-bb93-ac1f6b6e023e6',\n            originalPrice: {\n                value: '28900',\n                discountValue: '28900',\n                ccy: Currency.RUB,\n            },\n            originalTotalPrice: {\n                value: '57800',\n                discountValue: '57800',\n                ccy: Currency.RUB,\n            },\n            originalQuantity: '2',\n            formedPrice: {\n                value: '28900',\n                discountValue: '28900',\n                ccy: Currency.RUB,\n            },\n            formedQuantity: '2',\n            formedTotalPrice: {\n                value: '57800',\n                discountValue: '57800',\n                ccy: Currency.RUB,\n            },\n            name: 'Шоколад Milka, 276г',\n            images_urls: ['https://cdn.sberdevices.ru/Samokat/milka.png'],\n        },\n        {\n            positionId: '1',\n            productId: '3949e2f2-3a75-11e9-80c5-0cc47a8179257',\n            originalPrice: {\n                value: '20900',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            originalTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            originalQuantity: '2',\n            formedPrice: {\n                value: '20900',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            formedQuantity: '0',\n            formedTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            name: 'Драже M&Ms, 240г',\n            images_urls: ['https://cdn.sberdevices.ru/Samokat/mm.png'],\n        },\n        {\n            positionId: '3',\n            productId: '3949e2f2-3a75-11e9-80c5-0cc47a8179268',\n            originalPrice: {\n                value: '20900',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            originalTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            originalQuantity: '2',\n            formedPrice: {\n                value: '20800',\n                discountValue: '20900',\n                ccy: Currency.RUB,\n            },\n            formedQuantity: '2',\n            formedTotalPrice: {\n                value: '41800',\n                discountValue: '41800',\n                ccy: Currency.RUB,\n            },\n            name: 'Драже M&Ms, 240г',\n            images_urls: ['https://cdn.sberdevices.ru/Samokat/mm.png'],\n        },\n        {\n            positionId: '2',\n            productId: '71a76d3b-c355-11e9-bb93-ac1f6b6e023e9',\n            originalPrice: {\n                value: '28900',\n                discountValue: '28900',\n                ccy: Currency.RUB,\n            },\n            originalTotalPrice: {\n                value: '57800',\n                discountValue: '57800',\n                ccy: Currency.RUB,\n            },\n            originalQuantity: '2',\n            formedPrice: {\n                value: '28900',\n                discountValue: '28900',\n                ccy: Currency.RUB,\n            },\n            formedQuantity: '2',\n            formedTotalPrice: {\n                value: '57800',\n                discountValue: '57800',\n                ccy: Currency.RUB,\n            },\n            name: 'Шоколад Milka, 276г',\n            images_urls: ['https://cdn.sberdevices.ru/Samokat/milka.png'],\n        },\n    ],\n    deliveryPrice: {\n        value: '0',\n        discountValue: '0',\n        ccy: Currency.RUB,\n    },\n    orderDiscount: {\n        value: '0',\n        ccy: Currency.RUB,\n    },\n    originalTotalPrice: {\n        value: '99600',\n        discountValue: '99600',\n        ccy: Currency.RUB,\n    },\n    originalOrderPrice: {\n        value: '99600',\n        ccy: Currency.RUB,\n    },\n    formedTotalPrice: {\n        value: '99600',\n        discountValue: '99600',\n        ccy: Currency.RUB,\n    },\n    formedOrderPrice: {\n        value: '99600',\n        ccy: Currency.RUB,\n    },\n    errorCode: 'None',\n};\n","export function createAction<T extends string, P>(type: T, payload: P) {\n    return {\n        type,\n        payload,\n    };\n}\n\nexport function createEmptyAction<T extends string>(type: T) {\n    return {\n        type,\n    };\n}\n","import { createEmptyAction } from 'tools/create-action';\n\nexport const closeAppAction = () => createEmptyAction('CLOSE_APP');\n\nexport const applyItemsChanges = () => createEmptyAction('APPLY_ITEMS_CHANGES');\n\nexport const revertUserChanges = () => createEmptyAction('REVERT_USER_CHANGES');\n","import { AppState } from '../constants';\n\nexport const selectProductById = (state: AppState, itemId: string) => state.productsData.itemsMap[itemId];\nexport const selectProductDiffById = (state: AppState, itemId: string) => state.productsDiffData.itemsMap[itemId];\nexport const selectCartItemById = (state: AppState, itemId: string) => state.cart.itemsMap[itemId];\nexport const selectPathname = (state: AppState) => state.router.location.pathname;\nexport const selectHeader = (state: AppState) => state.layout.header;\n","import { AppState } from 'store/constants';\nimport { selectCartItemById, selectProductById, selectProductDiffById } from 'store/selectors';\n\nexport const formatPrice = (price: number) => Math.ceil(price / 100);\n\nexport const prepareCount = (state: AppState, itemId: string) => {\n    const cartItem = selectCartItemById(state, itemId);\n\n    return cartItem ? cartItem.count : 0;\n};\n\nexport const calculateButtonDisabled = (state: AppState, itemId: string) => {\n    const productItem = selectProductById(state, itemId);\n    const cartItem = selectCartItemById(state, itemId);\n\n    return cartItem && cartItem.count === productItem.quantityLeft;\n};\n\nexport const getQuantityLeftById = (state: AppState, itemId: string) => {\n    const productItem = selectProductById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n\n    if (productItemDiff && typeof productItemDiff.quantityLeft !== 'undefined') {\n        return productItemDiff.quantityLeft;\n    }\n\n    return productItem.quantityLeft;\n};\n\nexport const getDisabled = (state: AppState, itemId: string) => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n\n    return quantityLeft === 0;\n};\n\nexport const getPriceById = (state: AppState, itemId: string) => {\n    const productItem = selectProductById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        return productItemDiff.price;\n    }\n\n    return productItem.price;\n};\n\nexport const preparePriceById = (state: AppState, itemId: string) => {\n    const price = getPriceById(state, itemId);\n\n    return formatPrice(price);\n};\n\nexport const getOldPriceById = (state: AppState, itemId: string) => {\n    const productItem = selectProductById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        return formatPrice(productItem.price);\n    }\n\n    return undefined;\n};\n\nexport const formatSale = (oldValue: number, newValue: number) =>\n    String(Math.ceil(((oldValue - newValue) / oldValue) * 100));\n\nexport const getCountById = (state: AppState, itemId: string) => {\n    const cartItem = selectCartItemById(state, itemId);\n    const countInCart = cartItem ? cartItem.count : 0;\n    const quantityLeft = getQuantityLeftById(state, itemId);\n\n    return Math.min(countInCart, quantityLeft);\n};\n\nexport const wantMoreThanHave = (state: AppState, itemId: string) => {\n    const cartItem = selectCartItemById(state, itemId);\n    const quantityLeft = getQuantityLeftById(state, itemId);\n\n    return cartItem && cartItem.count > quantityLeft;\n};\n\nexport const canAddMore = (state: AppState, itemId: string) => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const cartItem = selectCartItemById(state, itemId);\n\n    return (\n        quantityLeft !== 0 && // есть остатки\n        (!cartItem || cartItem.count < quantityLeft) // текущее кол-во меньше остатков\n    );\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\ninterface Fn<R = any> {\n    (...args: any): R;\n}\n\nexport const memoize = <F extends Fn>(fn: F): F => {\n    const store = new Map<string, ReturnType<F>>();\n\n    return ((...args) => {\n        const id = JSON.stringify(args);\n\n        if (!store.has(id)) {\n            store.set(id, fn(...args));\n        }\n\n        return store.get(id);\n    }) as F;\n};\n\nexport const memoizeResolvedPromise = <F extends Fn<Promise<any>>>(fn: F): F => {\n    const store = new Map<string, ReturnType<F>>();\n\n    return (async (...args) => {\n        const id = JSON.stringify(args);\n\n        if (!store.has(id)) {\n            const result = await fn(...args);\n            store.set(id, result);\n        }\n\n        return store.get(id);\n    }) as F;\n};\n","import { StoreUser } from 'store/constants/user';\nimport { AppReducer, AppState } from 'store/constants';\nimport { memoize } from 'tools/memoize';\nimport { LOCATION_CHANGE } from 'connected-react-router';\n\nconst memoizedPrepareSuggestItems = memoize((itemsMap: AppState['twoGisSuggestsData']['itemsMap']) =>\n    Object.keys(itemsMap),\n);\n\n// важно сохранить ссылку чтобы хуки внутри компонента отрабатывали нормально\nconst prepareSuggestItems = (state: AppState) => memoizedPrepareSuggestItems(state.twoGisSuggestsData.itemsMap);\n\nexport const getHasValidAddress = (user: StoreUser) => {\n    const { street, house, city, address, addressLocationLatitude, addressLocationLongitude } = user;\n\n    return street && house && city && address && addressLocationLatitude && addressLocationLongitude;\n};\n\nexport const addressSimplePageView: AppReducer = (state, action) => {\n    const { addressSimplePage } = state;\n\n    switch (action.type) {\n        case 'address/SELECT_SUGGEST_ITEM': {\n            addressSimplePage.suggestsListIndex = state.addressSimplePage.suggests.findIndex(\n                (itemId) => itemId === action.payload,\n            );\n            addressSimplePage.selectedSuggestItemId = action.payload;\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT': {\n            addressSimplePage.inputValue = action.payload.input;\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT_ADD': {\n            addressSimplePage.inputValue = action.payload.input;\n\n            break;\n        }\n\n        case 'address/CHANGE_INPUT_VALUE': {\n            addressSimplePage.inputValue = action.payload;\n\n            break;\n        }\n\n        case 'address/SHOW_KEYBOARD_HINT': {\n            addressSimplePage.isKeyboardHintVisible = true;\n\n            break;\n        }\n\n        case 'ADDRESS_SUBMIT': {\n            addressSimplePage.isAddressSubmitting = true;\n            addressSimplePage.addressSubmittingTimerId = action.payload;\n\n            break;\n        }\n\n        // эти кейсы использовать строго для работы с флагом isAddressSubmitting\n        case LOCATION_CHANGE:\n        case 'address/SUBMIT_FAIL':\n        case 'GO_TO_CATALOG':\n        case 'GO_TO_NO_AREA': {\n            addressSimplePage.isAddressSubmitting = false;\n            clearTimeout(addressSimplePage.addressSubmittingTimerId);\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    addressSimplePage.suggests = prepareSuggestItems(state);\n};\n","import { createAction, createEmptyAction } from 'tools/create-action';\n\nimport {\n    ShowItemsCommandPayload,\n    AddItemCommandPayload,\n    RemoveItemCommandPayload,\n    GoToCatalogCommandPayload,\n    ValidationOkCommandPayload,\n    AddressInputPayload,\n    AddressInputAddPayload,\n    AddressFullInputAddPayload,\n    AddressFullInputCommandPayload,\n    OrderErrorPayload,\n    ItemsChangesCommandPayload,\n    AddressFullCommentCommandPayload,\n    GoToPromoCommandPayload,\n    AddressFullInputClearPayload,\n    LastOrderInfoPayload,\n} from '../constants/native';\n\nexport const showItemsAction = (payload: ShowItemsCommandPayload) => createAction('SHOW_ITEMS', payload);\n\nexport const itemsChangesAction = (payload: ItemsChangesCommandPayload) => createAction('ITEMS_CHANGES', payload);\n\nexport const addItemAction = (payload: AddItemCommandPayload) => createAction('ADD_ITEM', payload);\n\ninterface RemoveItemCommandPayloadExtended extends RemoveItemCommandPayload {\n    shouldRemoveMention?: boolean;\n}\nexport const removeItemAction = (payload: RemoveItemCommandPayloadExtended) => createAction('REMOVE_ITEM', payload);\n\nexport const removeAllAction = () => createEmptyAction('REMOVE_ALL');\n\nexport const goToCatalogAction = (payload: GoToCatalogCommandPayload) => createAction('GO_TO_CATALOG', payload);\n\nexport const goToNoAreaAction = () => createEmptyAction('GO_TO_NO_AREA');\n\nexport const goToPromo = (payload: GoToPromoCommandPayload) => createAction('GO_TO_PROMO', payload);\n\nexport const goBackAction = () => createEmptyAction('GO_BACK');\n\nexport const goToWaitAction = () => createEmptyAction('GO_TO_WAIT');\n\nexport const validationOkAction = (payload: ValidationOkCommandPayload) => createAction('VALIDATION_OK', payload);\n\nexport const orderErrorAction = (payload: OrderErrorPayload) => createAction('ORDER_ERROR', payload);\n\nexport const addressInputAction = (payload: AddressInputPayload) => createAction('ADDRESS_INPUT', payload);\n\nexport const addressGuideAction = () => createEmptyAction('ADDRESS_GUIDE');\n\nexport const addressInputAddAction = (payload: AddressInputAddPayload) => createAction('ADDRESS_INPUT_ADD', payload);\n\nexport const addressInputDeclineAction = () => createEmptyAction('ADDRESS_INPUT_DECLINE');\n\nexport const addressInputClearAction = () => createEmptyAction('ADDRESS_INPUT_CLEAR');\n\nexport const addressFullInputAction = (payload: AddressFullInputCommandPayload) =>\n    createAction('ADDRESS_FULL_INPUT', payload);\n\nexport const addressFullInputAddAction = (payload: AddressFullInputAddPayload) =>\n    createAction('ADDRESS_FULL_INPUT_ADD', payload);\n\nexport const addressFullInputClearAction = (payload: AddressFullInputClearPayload) =>\n    createAction('ADDRESS_FULL_INPUT_CLEAR', payload);\n\nexport const addressFullCommentAction = (payload: AddressFullCommentCommandPayload) =>\n    createAction('ADDRESS_FULL_COMMENT', payload);\n\nexport const addressFullValidationErrorAction = () => createEmptyAction('ADDRESS_FULL_VALIDATION_ERROR');\n\nexport const addressFullSuccessAction = () => createEmptyAction('ADDRESS_FULL_SUCCESS');\n\nexport const askAgainForOrderStatusAction = () => createEmptyAction('ASK_AGAIN_FOR_ORDER_STATUS');\n\nexport const askAgainForOrderStatusFinalAction = () => createEmptyAction('ASK_AGAIN_FOR_ORDER_STATUS_FINAL');\n\nexport const orderSuccessAction = () => createEmptyAction('ORDER_SUCCESS');\n\n/* Флоу статуса заказа */\n\nexport const lastOrderInfoAction = (payload: LastOrderInfoPayload) => createAction('LAST_ORDER_INFO', payload);\n\nexport const lastOrderEmptyAction = () => createEmptyAction('LAST_ORDER_EMPTY');\n\nexport const lastOrderErrorAction = () => createEmptyAction('LAST_ORDER_ERROR');\n","export enum ROUTES {\n    CATALOG = '/catalog',\n    CART = '/cart',\n    SUCCESS = '/success',\n    ADDRESS_SIMPLE = '/address-simple',\n    ADDRESS_SIMPLE_GUIDE = '/address-simple-guide',\n    ADDRESS_SIMPLE_QUESTION = '/address-simple-question',\n    ADDRESS_SIMPLE_INPUT = '/address-simple-input',\n    ADDRESS_FULL = '/address-full',\n    ADDRESS_FULL_ALL = '/address-full/all',\n    ADDRESS_FULL_PHONE = '/address-full/phone',\n    ADDRESS_FULL_APARTMENT = '/address-full/apartment',\n    ADDRESS_FULL_ENTRANCE = '/address-full/entrance',\n    ADDRESS_FULL_FLOOR = '/address-full/floor',\n    ADDRESS_FULL_DOOR_CODE = '/address-full/door-code',\n    ADDRESS_FULL_PHONE_GUIDE = '/address-full/phone-guide',\n    ADDRESS_FULL_ACCOMMODATION_GUIDE = '/address-full/accommodation-guide',\n    PROMO = '/promo',\n    NO_AREA = '/no-area',\n    ERROR = '/error',\n    WAIT = '/wait',\n    STATUS_SUMMARY = '/status/summary',\n    STATUS_DETAILS = '/status/details',\n    STATUS_REPORT = '/status/report',\n    STATUS_EMPTY = '/status/empty',\n}\n","import { addressFullInputAction, addressFullSuccessAction } from 'store/actions/native';\nimport { AppThunkAction } from 'store/constants';\nimport { goBack, push, replace } from 'connected-react-router';\nimport { AddressFullInputCommandPayload } from 'store/constants/native';\nimport { ROUTES } from 'store/constants/router';\nimport { selectPathname } from 'store/selectors';\nimport { getWaitNextNavigationEventPromise } from 'tools/history';\n\nexport const addressFullValidationOkThunk = (): AppThunkAction => (dispatch) => {\n    dispatch(goBack());\n};\n\nexport const addressFullInputThunk = (payload: AddressFullInputCommandPayload): AppThunkAction => async (\n    dispatch,\n    getState,\n) => {\n    const state = getState();\n    const currentRoute = selectPathname(state);\n\n    dispatch(addressFullInputAction(payload));\n\n    switch (currentRoute) {\n        case ROUTES.ADDRESS_FULL_PHONE_GUIDE: {\n            dispatch(push(ROUTES.ADDRESS_FULL_ACCOMMODATION_GUIDE));\n            break;\n        }\n        case ROUTES.ADDRESS_FULL_ACCOMMODATION_GUIDE: {\n            dispatch(goBack());\n\n            await getWaitNextNavigationEventPromise();\n\n            dispatch(replace(ROUTES.ADDRESS_FULL_ALL));\n\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n};\n\nexport const addressFullSuccessThunk = (): AppThunkAction => (dispatch) => {\n    dispatch(addressFullSuccessAction());\n\n    dispatch(goBack());\n};\n","import { createEmptyAction, createAction } from 'tools/create-action';\n\nexport const askForStockAction = () => createEmptyAction('ASK_FOR_STOCK');\n\nexport const askForItemsChangesAction = () => createEmptyAction('ASK_FOR_ITEMS_CHANGES');\n\nexport const makePurchaseAction = () => createEmptyAction('MAKE_PURCHASE');\n\nexport const pageChangeAction = () => createEmptyAction('PAGE_CHANGE');\n\nexport const openPaymentAction = () => createEmptyAction('OPEN_PAYMENT');\n\nexport const askForOrderStatusAction = () => createEmptyAction('ASK_FOR_ORDER_STATUS');\n\nexport const askForOrderStatusFinalAction = () => createEmptyAction('ASK_FOR_ORDER_STATUS_FINAL');\n\nexport const addressSubmitAction = (timerId = 0) => createAction('ADDRESS_SUBMIT', timerId);\n\nexport const addressFullSubmitAction = () => createEmptyAction('ADDRESS_FULL_SUBMIT');\n\nexport const askForLastOrderInfoAction = () => createEmptyAction('ASK_FOR_LAST_ORDER_INFO');\n","import React from 'react';\n\nexport function useFocusOnMount<T>(forwardRef?: React.RefObject<T>) {\n    const ref = React.useRef<T>(null);\n\n    const onMountRef = forwardRef || ref;\n\n    React.useEffect(() => {\n        if (onMountRef.current instanceof HTMLElement) {\n            onMountRef.current.focus();\n        }\n    }, [onMountRef]);\n\n    return onMountRef;\n}\n","// TODO: FRNTND-1 mv to npm package\n\nexport const color = {\n    text: {\n        white: '#ffffff',\n        primary: '#ffffff',\n        secondary: 'rgba(255, 255, 255, 0.56)',\n        tertiary: 'rgba(255, 255, 255, 0.28)',\n        active: '#2ac673',\n        warning: '#f6650a',\n        critical: '#e12d39',\n    },\n    button: {\n        secondary1: 'rgba(255, 255, 255, 0.12)',\n        secondary2: 'rgba(0, 0, 0, 0.56)',\n        primary: '#12a557',\n        warning: '#f6650a',\n        critical: '#dc283a',\n        inactive: '#3b3f44',\n        disabled: '#8f8f8f',\n    },\n    background: {\n        default: '#080808',\n    },\n    surface: {\n        liquid1: 'rgba(255, 255, 255, 0.06)',\n        liquid2: 'rgba(255, 255, 255, 0.12)',\n        liquid3: 'rgba(255, 255, 255, 0.20)',\n        card: 'rgba(255, 255, 255, 0.12)',\n        solidWhite: '#fff',\n        solidBlack: '#080808',\n        solidTransparent: 'transparent',\n    },\n};\n","// TODO: FRNTND-1 mv to npm package\n\nconst duration = {\n    defaultMs: 200,\n};\n\nconst timingFnEaseInOut = 'ease-in-out';\n\nconst timingFn = {\n    easeInOut: timingFnEaseInOut,\n    default: timingFnEaseInOut,\n};\n\nexport const transition = {\n    duration,\n    timingFn,\n    default: `${duration.defaultMs}ms ${timingFn.default}`,\n};\n","import { transition } from './transition';\nimport { color } from './color';\n\n// TODO: FRNTND-1 mv to npm package\n\nexport const focus = {\n    paddingPx: 4,\n    borderSizePx: 4,\n    color: color.text.active,\n    transition: transition.default,\n};\n","import { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { focus } from 'style/const/focus';\n\nexport const syntheticFocus = (ruleset: FlattenSimpleInterpolation, isFocused?: boolean) => {\n    if (isFocused === undefined) {\n        return css`\n            &:focus {\n                ${ruleset}\n            }\n        `;\n    }\n\n    return isFocused && ruleset;\n};\n\ninterface FocusMixinOptions {\n    isFocused?: boolean;\n    borderRadius?: number;\n    paddingPx?: number;\n}\n\nexport const focusBorderMixin = ({\n    isFocused,\n    borderRadius = 0,\n    paddingPx = focus.paddingPx + focus.borderSizePx,\n}: FocusMixinOptions) => {\n    const positionPx = -1 * paddingPx;\n\n    return css`\n        &::after {\n            content: '';\n\n            position: absolute;\n            top: ${positionPx}px;\n            bottom: ${positionPx}px;\n            left: ${positionPx}px;\n            right: ${positionPx}px;\n\n            display: block;\n            box-sizing: border-box;\n\n            border-width: ${focus.borderSizePx}px;\n            border-color: ${focus.color};\n            border-style: solid;\n            border-radius: ${borderRadius ? borderRadius + (paddingPx - focus.borderSizePx) * 2 : 0}px;\n\n            opacity: 0;\n\n            transition: opacity ${focus.transition};\n\n            z-index: 2;\n            pointer-events: none;\n        }\n\n        ${syntheticFocus(\n            css`\n                &::after {\n                    opacity: 1;\n                }\n            `,\n            isFocused,\n        )}\n    `;\n};\n","// TODO: FRNTND-1 mv to npm package\n\nexport const font = {\n    weight: {\n        light: 300,\n        normal: 400,\n        regular: 400,\n        medium: 500,\n        semibold: 600,\n        bold: 700,\n        extrabold: 800,\n    },\n};\n","import React from 'react';\nimport styled, { keyframes, css } from 'styled-components';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\n\ninterface PointProps {\n    phaseCount: number;\n    phaseDurationMs: number;\n    initialPhase: number;\n}\n\nconst StyledPoint = styled.div<PointProps>`\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    margin: 0 8px;\n\n    background: ${color.surface.solidWhite};\n\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n\n    ${({ initialPhase, phaseCount, phaseDurationMs }) => {\n        const cycleLength = phaseCount * 2 - 1;\n        const transitionCount = cycleLength - 1;\n\n        const frames = Array(cycleLength)\n            .fill(0)\n            .map((_, index) => {\n                const percent = (100 * index) / transitionCount;\n\n                // точка колеблется между тремя состояниями, меняя направление:\n                // такое поведение математически проще всего описать синусоидой\n                // c указанием начальной фазы:\n                //\n                // 0 - 0 -> 1 -> 2 -> 1 -> 0 -> 1 -> 2 -> ...\n                // 1 - 1 -> 2 -> 1 -> 0 -> 1 -> 2 -> 1 -> ...\n                // 2 - 2 -> 1 -> 0 -> 1 -> 2 -> 1 -> 0 -> ...\n                // 3 - 1 -> 0 -> 1 -> 2 -> 1 -> 0 -> 1 -> ...\n                //\n                // синусоида колеблется в интервале [-1;1]\n                // чтобы значения были положительными, сдвигаем синусоиду на 1 вверх и уменьшаем амплитуду вдвое\n                // получаем интервал [0;1], дальше домножаем на (число фаз - 1) и округляем\n\n                const phaseIndex = Math.round(\n                    (phaseCount - 1) * ((Math.sin((2 * Math.PI * (index + initialPhase)) / transitionCount) + 1) / 2),\n                );\n\n                const result = css`\n                    ${`${percent}%`} {\n                        opacity: ${((phaseIndex + 1) / phaseCount).toFixed(1)};\n                    }\n                `;\n\n                return result;\n            })\n            .reduce((a, b) => css`${a}${b}`, css``);\n\n        return css`\n            animation-duration: ${phaseDurationMs * transitionCount}ms;\n            animation-name: ${keyframes`${frames}`};\n        `;\n    }}\n`;\n\ninterface ContainerProps {\n    isVisible: boolean;\n}\nconst StyledContainer = styled.div<ContainerProps>`\n    display: flex;\n    flex-direction: row;\n\n    opacity: ${({ isVisible }) => (isVisible ? 1 : 0)};\n    transition: opacity ${transition.default};\n\n    ${StyledPoint} {\n        animation-play-state: ${({ isVisible }) => (isVisible ? 'running' : 'paused')};\n    }\n`;\n\ninterface ButtonSpinnerProps {\n    isVisible: boolean;\n    pointCount: number;\n    phaseCount: number;\n    phaseDurationMs: number;\n}\nexport const ButtonSpinner: React.FC<ButtonSpinnerProps> = ({ pointCount, phaseCount, phaseDurationMs, ...props }) => {\n    const pointList = React.useMemo(\n        () =>\n            Array(pointCount)\n                .fill(0)\n                .map((_, index) => (\n                    <StyledPoint\n                        key={index}\n                        phaseDurationMs={phaseDurationMs}\n                        phaseCount={phaseCount}\n                        initialPhase={pointCount - index - 1}\n                    />\n                )),\n        [pointCount, phaseCount, phaseDurationMs],\n    );\n\n    return <StyledContainer {...props}>{pointList}</StyledContainer>;\n};\n","import React from 'react';\nimport { scenarioResponseTimeout } from 'store/constants';\nimport styled, { css } from 'styled-components';\nimport { useFocusOnMount } from 'hooks/useFocusOnMount';\nimport { color } from 'style/const/color';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport { font } from 'style/const/font';\nimport { ButtonSpinner } from 'components/ButtonSpinner/ButtonSpinner';\nimport { transition } from 'style/const/transition';\n\ninterface StyledContentProps {\n    isVisible: boolean;\n    textAlign: ButtonTextAlign;\n}\nconst StyledContent = styled.div<StyledContentProps>`\n    opacity: ${({ isVisible }) => Number(isVisible)};\n    transition: opacity ${transition.default};\n    width: 100%;\n    display: block;\n    text-align: ${({ textAlign }) => textAlign};\n`;\n\nexport enum ButtonViews {\n    primary = 'primary',\n    secondary = 'secondary',\n}\n\nexport enum ButtonSize {\n    l = 'l',\n    m = 'm',\n    s = 's',\n}\n\nexport enum ButtonTextAlign {\n    left = 'left',\n    center = 'center',\n    right = 'right',\n}\n\ninterface ButtonParams {\n    borderRadiusPx: number;\n    paddingXPx: number;\n    paddingYPx: number;\n    fontSizePx: number;\n    lineHeightPx: number;\n}\n\nconst mapSizeToButtonParams: Record<ButtonSize, ButtonParams> = {\n    [ButtonSize.l]: {\n        borderRadiusPx: 32,\n        paddingXPx: 56,\n        paddingYPx: 32,\n        fontSizePx: 32,\n        lineHeightPx: 40,\n    },\n    [ButtonSize.m]: {\n        borderRadiusPx: 24,\n        paddingXPx: 48,\n        paddingYPx: 24,\n        fontSizePx: 32,\n        lineHeightPx: 40,\n    },\n    [ButtonSize.s]: {\n        borderRadiusPx: 24,\n        paddingXPx: 28,\n        paddingYPx: 16,\n        fontSizePx: 28,\n        lineHeightPx: 32,\n    },\n};\n\nconst buttonViewBackgroundMap: Record<ButtonViews, string> = {\n    primary: color.button.primary,\n    secondary: color.button.secondary1,\n};\n\nconst StyledButtonSpinner = styled(ButtonSpinner)`\n    position: absolute;\n\n    transition: opacity ${transition.default};\n`;\n\ninterface StyledButtonProps {\n    view: ButtonViews;\n    size: ButtonSize;\n    isLocked: boolean;\n}\nconst StyledButton = styled.div<StyledButtonProps>`\n    position: relative;\n\n    ${({ size }) => {\n        const { borderRadiusPx, paddingXPx, paddingYPx, fontSizePx, lineHeightPx } = mapSizeToButtonParams[size];\n\n        return css`\n            padding: ${paddingYPx}px ${paddingXPx}px;\n            font-size: ${fontSizePx}px;\n            line-height: ${lineHeightPx}px;\n            border-radius: ${borderRadiusPx}px;\n        `;\n    }}\n\n    border: none;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    transition: background-color ${transition.default};\n\n    background-color: ${({ view }) => buttonViewBackgroundMap[view]};\n\n    font-family: inherit;\n    font-weight: ${font.weight.semibold};\n    color: ${color.text.primary};\n\n    ${({ size }) => focusBorderMixin({ borderRadius: mapSizeToButtonParams[size].borderRadiusPx })}\n\n    &[disabled] {\n        opacity: ${({ isLocked }) => (isLocked ? 1 : 0.5)};\n    }\n`;\n\nconst usePressedState = ({\n    shouldLockAfterClick,\n    lockTimeout = scenarioResponseTimeout,\n    onClick,\n}: Pick<ButtonProps, 'shouldLockAfterClick' | 'lockTimeout' | 'onClick'>) => {\n    const [timeoutId, setTimeoutId] = React.useState(0);\n\n    // если таймаут установлен - кнопка заблокирована\n    const isLocked = Boolean(timeoutId);\n\n    const handleClick = React.useCallback(\n        (event: React.SyntheticEvent<HTMLButtonElement>) => {\n            if (shouldLockAfterClick && !isLocked) {\n                setTimeoutId(setTimeout(() => setTimeoutId(0), lockTimeout));\n            }\n\n            onClick?.(event);\n        },\n        [shouldLockAfterClick, lockTimeout, isLocked, onClick],\n    );\n\n    React.useEffect(() => {\n        const id = timeoutId;\n        return () => {\n            if (id) {\n                clearTimeout(id);\n            }\n        };\n    }, [timeoutId]);\n\n    return {\n        isLocked,\n        handleClick,\n    };\n};\n\nexport interface ButtonProps {\n    className?: string;\n    shouldFocusOnMount?: boolean;\n    forwardRef?: React.RefObject<HTMLButtonElement>;\n    view?: ButtonViews;\n    disabled?: boolean;\n    size?: ButtonSize;\n    textAlign?: ButtonTextAlign;\n    shouldLockAfterClick?: boolean;\n    lockTimeout?: number;\n    onClick?: (event: React.SyntheticEvent<HTMLButtonElement>) => void;\n    onFocus?: (event: React.FocusEvent<HTMLButtonElement>) => void;\n}\nexport const Button: React.FC<ButtonProps> = ({\n    shouldFocusOnMount,\n    forwardRef,\n    shouldLockAfterClick,\n    lockTimeout,\n    onClick,\n    view = ButtonViews.secondary,\n    size = ButtonSize.m,\n    textAlign = ButtonTextAlign.center,\n    children,\n    disabled,\n    ...props\n}) => {\n    const mountFocusRef = useFocusOnMount<HTMLButtonElement>();\n    const ref = forwardRef || (shouldFocusOnMount ? mountFocusRef : null);\n\n    const { isLocked, handleClick } = usePressedState({\n        shouldLockAfterClick,\n        lockTimeout,\n        onClick,\n    });\n\n    return (\n        <StyledButton\n            as=\"button\"\n            type=\"button\"\n            view={view}\n            size={size}\n            ref={ref}\n            onClick={handleClick}\n            isLocked={isLocked}\n            disabled={disabled || isLocked}\n            {...props}\n        >\n            <StyledButtonSpinner isVisible={isLocked} pointCount={3} phaseCount={3} phaseDurationMs={300} />\n            <StyledContent isVisible={!isLocked} textAlign={textAlign}>\n                {children}\n            </StyledContent>\n        </StyledButton>\n    );\n};\n","import { doRequest } from 'tools/request';\n\nimport { DGApiResponse } from './common';\n\nconst apiKey = process.env.REACT_APP_ENVIRONMENT === 'production' ? 'rukrby5549' : 'rusrav6003';\n\nconst apiPrefix = 'https://catalog.api.2gis.ru';\n\nexport const doDGApiRequest = async <Params, ResponseType>(\n    url: string,\n    params: Params,\n): Promise<DGApiResponse<ResponseType>> => {\n    const response = await doRequest<DGApiResponse<ResponseType>>(`${apiPrefix}${url}`, {\n        key: apiKey,\n        ...params,\n    });\n\n    return response;\n};\n","const isStatusCode4xx = (statusCode: number) => statusCode >= 400 && statusCode <= 499;\n\nexport const doRequest = async <Result = unknown>(\n    url: string,\n    params: Record<string, string | number | boolean>,\n): Promise<Result> => {\n    const paramsString = Object.keys(params)\n        .reduce<string[]>((acc, key) => {\n            acc.push(`${key}=${params[key as keyof typeof params]}`);\n\n            return acc;\n        }, [])\n        .join('&');\n\n    const response = await fetch(`${url}?${paramsString}`);\n\n    // здесь выбрасываем только сетевые и серверные ошибки\n    if (!response.ok && !isStatusCode4xx(response.status)) {\n        throw response.status;\n    }\n\n    return response.json() as Promise<Result>;\n};\n","import { AppReducer, AppState, initialState } from 'store/constants';\nimport { hasAddressComponents } from 'tools/twoGis/api/suggest';\n\nexport enum TwoGisSuggestFetchingStatus {\n    INITIAL = 'INITIAL',\n    PENDING = 'PENDING',\n    FINISHED = 'FINISHED',\n}\n\nexport const twoGisSuggestsData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'FINISH_FETCHING_TWO_GIS_SUGGESTS': {\n            const [firstSuggest] = action.payload;\n\n            state.twoGisSuggestsData.fetchingStatus = TwoGisSuggestFetchingStatus.FINISHED;\n            state.twoGisSuggestsData.itemsMap = action.payload\n                .filter((suggestItem) => hasAddressComponents(suggestItem))\n                .reduce<AppState['twoGisSuggestsData']['itemsMap']>((result, item) => {\n                    result[item.id] = item;\n\n                    return result;\n                }, {});\n\n            state.twoGisSuggestsData.mostRepresentationSuggest = firstSuggest;\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT':\n        case 'ADDRESS_INPUT_ADD':\n        case 'address/CHANGE_INPUT_VALUE': {\n            state.twoGisSuggestsData = { ...initialState.twoGisSuggestsData };\n\n            break;\n        }\n\n        case 'START_FETCHING_TWO_GIS_SUGGESTS': {\n            state.twoGisSuggestsData.fetchingStatus = TwoGisSuggestFetchingStatus.PENDING;\n\n            break;\n        }\n\n        default: {\n            break;\n        }\n    }\n};\n","/* eslint-disable @typescript-eslint/camelcase */\nimport { doDGApiRequest } from './doApiRequest';\nimport { DGLocale, DGListResult, DGLatLng } from './common';\n\ntype DGGetSuggestsParams = {\n    locale: DGLocale;\n    q: string;\n    fields: string[];\n    suggestType: string;\n    type: string[];\n    polygon?: string;\n    viewpoint1?: [string, string];\n    viewpoint2?: [string, string];\n    location: [string, string];\n};\n\ninterface DGApiGetSuggestsParams {\n    locale: DGLocale;\n    q: string;\n    fields: string;\n    suggest_type: string;\n    type: string;\n    polygon?: string;\n    viewpoint1?: string;\n    viewpoint2?: string;\n    location: string;\n}\n\nexport interface DGSuggest {\n    id: string;\n    full_name: string;\n    name: string;\n    search_attributes: {\n        suggested_text: string;\n    };\n    type: string;\n    point?: DGLatLng;\n}\n\ninterface DGBuildingAddressComponent {\n    number: string;\n    street: string;\n    street_id: string;\n    type: 'street_number';\n}\n\ninterface DGBuildingAddress {\n    building_id: string;\n    components?: DGBuildingAddressComponent[];\n    postcode: string;\n}\n\nexport interface DGBuildingSuggest extends DGSuggest {\n    type: 'building';\n    address_name: string; // Кутузовский проспект, 43 ст2\n    purpose_name: string; // Жилой дом с административными помещениями\n    address: DGBuildingAddress;\n    point: DGLatLng;\n}\n\nexport const hasAddressComponents = (suggest: DGBuildingSuggest) => {\n    // prettier-ignore\n    return (\n        suggest.address.components &&\n        suggest.address.components.length\n    );\n};\n\nconst convertParams = ({\n    fields,\n    type,\n    suggestType,\n    location,\n    viewpoint1,\n    viewpoint2,\n    ...params\n}: DGGetSuggestsParams): DGApiGetSuggestsParams => ({\n    ...params,\n    fields: fields.join(','),\n    type: type.join(','),\n    suggest_type: suggestType,\n    location: location.join(','),\n    ...(viewpoint1 &&\n        viewpoint2 && {\n            viewpoint1: viewpoint1.join(','),\n            viewpoint2: viewpoint2.join(','),\n        }),\n});\n\nconst suggestsEndpointPath = '/3.0/suggests';\n\nexport const getSuggests = async (params: DGGetSuggestsParams) => {\n    return doDGApiRequest<DGApiGetSuggestsParams, DGListResult<DGBuildingSuggest>>(\n        suggestsEndpointPath,\n        convertParams(params),\n    );\n};\n","import { ButtonViews } from 'components/Button/Button';\nimport { LocationState } from 'history';\nimport { ThunkAction } from 'redux-thunk';\nimport { TwoGisSuggestFetchingStatus } from 'store/reducers/data/twoGisSuggestsData';\nimport { AppActionTypes } from 'types/app-actions';\nimport { DGBuildingSuggest } from 'tools/twoGis/api/suggest';\nimport { RouterState, RouterAction } from 'connected-react-router';\nimport { CatalogListItemViewProps } from 'pages/Catalog/ListItem/CatalogListItem';\nimport { CatalogListItemTouchViewProps } from 'pages/Catalog/ListItem/CatalogListItem@touch';\nimport { CartListItemViewProps } from 'pages/Cart/ListItem/CartListItem';\nimport { CartListItemTouchViewProps } from 'pages/Cart/ListItem/CartListItem@touch';\nimport { StatusDetailsListItemViewProps } from 'pages/StatusDetails/ListItem/StatusDetailsListItem';\n\nimport { StoreProductItem, StoreProductItemDiff } from './products';\nimport {\n    OrderStateProductItem,\n    OrderStatus,\n    ParsedDiscountedPrice,\n    ParsedPrice,\n    OrderStatusCategory,\n} from './orderStatus';\nimport { StoreUser } from './user';\nimport { ROUTES } from './router';\nimport { ErrorPageProps } from './error';\n\nexport const initialState = {\n    /* Общий стейт */\n\n    // здесь важно поставить undefined, подробности смотри в редюсере роутера\n    router: (undefined as unknown) as RouterState<LocationState>,\n    userData: {\n        customerName: '',\n        phoneNumber: '',\n        addressLocationLatitude: '',\n        addressLocationLongitude: '',\n        // addressLocationLatitude: '55.737209', // Москва, Кутузовский проспект\n        // addressLocationLongitude: '37.538145', // Москва, Кутузовский проспект\n        // addressLocationLatitude: '59.84112819369227', // Питер, Дачный проспект\n        // addressLocationLongitude: '30.25827884674072', // Питер, Дачный проспект\n        // addressLocationLatitude: '59.940184', // Питер, Дворцовая набережная\n        // addressLocationLongitude: '30.315266', // Питер, Дворцовая набережная\n        // deviceLocationLatitude: '55.737209', // Москва, Кутузовский проспект\n        // deviceLocationLongitude: '37.538145', // Москва, Кутузовский проспект\n        deviceLocationLatitude: '',\n        deviceLocationLongitude: '',\n        address: '',\n        city: '',\n        street: '',\n        house: '',\n        building: '',\n        floor: '',\n        entrance: '',\n        apartment: '',\n        doorCode: '',\n    } as StoreUser,\n    errorPage: {\n        title: '',\n        subtitle: '',\n    } as ErrorPageProps,\n    layout: {\n        header: {\n            title: '',\n            subtitle: '',\n            isVisible: false,\n            address: {\n                text: '',\n                isVisible: false,\n            },\n            cart: {\n                isVisible: false,\n                count: 0,\n                price: '0',\n            },\n            isBackButtonVisible: false,\n        },\n    },\n\n    /* Флоу заказа */\n\n    delivery: {\n        minimalPrice: 0,\n        deliveryTime: 0,\n    },\n    cart: {\n        itemsMap: {} as Record<string, CartItem>,\n        order: [] as string[],\n        totalCount: 0,\n        totalPrice: 0, // в копейках\n        orderId: '',\n        date: new Date(),\n    },\n    twoGisSuggestsData: {\n        itemsMap: {} as Record<string, DGBuildingSuggest>,\n        mostRepresentationSuggest: undefined as DGBuildingSuggest | undefined,\n        fetchingStatus: TwoGisSuggestFetchingStatus.INITIAL,\n    },\n    productsData: {\n        itemsMap: {} as Record<string, StoreProductItem>,\n    },\n    productsDiffData: {\n        itemsMap: {} as Record<string, StoreProductItemDiff>,\n    },\n    userModel: {\n        customerName: '',\n        phoneNumber: '',\n        addressLocationLatitude: '',\n        addressLocationLongitude: '',\n        deviceLocationLatitude: '',\n        deviceLocationLongitude: '',\n        address: '',\n        city: '',\n        street: '',\n        house: '',\n        building: '',\n        floor: '',\n        entrance: '',\n        apartment: '',\n        doorCode: '',\n        isPhoneValid: false,\n    } as StoreUser,\n    catalogPage: {\n        selectedItemId: '',\n        order: [] as string[],\n        itemsMap: {} as Record<string, CatalogListItemViewProps>,\n        itemsFocusHashMap: {} as Record<string, number>,\n        screenIndexMap: {} as Record<string, number>,\n        wrapperXShift: 0,\n        listIndexOffset: 0,\n    },\n    catalogPageTouch: {\n        order: [] as string[],\n        itemsMap: {} as Record<string, CatalogListItemTouchViewProps>,\n        screenIndexMap: {} as Record<string, number>,\n    },\n    cartPage: {\n        wrapperYShift: 0,\n        selectedItemIndex: 0,\n        topGradientVisible: true,\n        bottomGradientVisible: true,\n        order: [] as string[],\n        itemsMap: {} as Record<string, CartListItemViewProps>,\n        totalPrice: '',\n        toMinimumPrice: 0,\n        hasRequiredData: false,\n        /**\n         * Здесь не объект пропсов для кнопки из-за того что иммер не может нормально прожевать React.refObject и,\n         * соответственно, тайпинги написаны так, чтобы такого не допустить\n         * */\n        makePurchaseButtonView: ButtonViews.primary,\n        isMakePurchaseButtonDisabled: false,\n        phoneNumber: '',\n        personalAddress: '',\n        deliveryTime: 0,\n    },\n    cartPageTouch: {\n        order: [] as string[],\n        itemsMap: {} as Record<string, CartListItemTouchViewProps>,\n        totalPrice: '',\n        toMinimumPrice: 0,\n        hasRequiredData: false,\n        phoneNumber: '',\n        personalAddress: '',\n        deliveryTime: 0,\n    },\n    addressSimplePage: {\n        inputValue: '',\n        suggestsListIndex: 0,\n        selectedSuggestItemId: '',\n        isKeyboardHintVisible: false,\n        isAddressSubmitting: false,\n        addressSubmittingTimerId: 0,\n        suggests: [] as string[],\n    },\n    addressFullPage: {\n        addressInputValue: '',\n        phoneNumberInputValue: '',\n        apartmentInputValue: '',\n        entranceInputValue: '',\n        floorInputValue: '',\n        doorCodeInputValue: '',\n        isPhoneValid: false,\n        isSubmitButtonDisabled: false,\n        nextFocus: ROUTES.ADDRESS_FULL_ALL as string,\n    },\n\n    /* Флоу статуса заказа */\n\n    orderStatusData: {\n        reportPhone: '900',\n        productList: [] as OrderStateProductItem[],\n        orderDate: undefined as Date | undefined,\n        orderStatus: OrderStatus.INITIAL,\n        orderId: '',\n        comment: '',\n        isChanged: false,\n        deliveryPrice: {} as ParsedDiscountedPrice,\n        orderDiscount: {} as ParsedPrice,\n        originalTotalPrice: {} as ParsedDiscountedPrice,\n        originalOrderPrice: {} as ParsedPrice,\n        formedTotalPrice: {} as ParsedDiscountedPrice,\n        formedOrderPrice: {} as ParsedPrice,\n    },\n    orderStatusSummaryPage: {\n        isLoaded: false,\n        title: '',\n        text: '',\n        orderStatusCategory: OrderStatusCategory.PENDING,\n    },\n    orderStatusDetailsPage: {\n        phoneNumber: '',\n        personalAddress: '',\n        order: [] as string[],\n        itemsMap: {} as Record<string, StatusDetailsListItemViewProps>,\n        wrapperYShift: 0,\n        selectedItemId: '',\n        selectedItemIndex: 0,\n        topGradientVisible: true,\n        bottomGradientVisible: true,\n        totalPrice: 0,\n    },\n    orderStatusReportPage: {\n        phoneNumber: '',\n    },\n};\n\nexport const vpsTimeout = 7000;\n// через это время ответ точно не прилетит\nexport const scenarioResponseTimeout = vpsTimeout + 1000;\n\nexport type AppState = typeof initialState;\n\nexport type AppCommonAction = ReturnType<AppActionTypes[keyof AppActionTypes]>;\nexport type AppBaseAction = AppCommonAction | RouterAction<LocationState>;\nexport type AppThunkAction = ThunkAction<void, AppState, {}, AppBaseAction>;\nexport type AppAction = AppThunkAction | AppBaseAction;\nexport type AppDispatch = (action: AppAction) => AppBaseAction;\nexport type AppReducer = (state: AppState, action: AppBaseAction) => void;\nexport interface AppMiddleware {\n    (api: AppMiddlewareAPI): (next: AppDispatch) => (action: AppBaseAction) => AppBaseAction;\n}\n\nexport interface AppMiddlewareAPI {\n    dispatch: AppDispatch;\n    getState(): AppState;\n}\n\nexport interface CartItem {\n    itemId: string;\n    count: number;\n}\n","import { push, replace, goBack } from 'connected-react-router';\nimport { addressSubmitFailAction } from 'store/actions/addressSimplePage';\nimport {\n    addressGuideAction,\n    addressInputAction,\n    addressInputAddAction,\n    addressInputDeclineAction,\n    goToCatalogAction,\n    goToNoAreaAction,\n    goToPromo,\n    validationOkAction,\n} from 'store/actions/native';\nimport { goBackToStart } from 'store/actions/router';\nimport { addressSubmitAction } from 'store/actions/server';\nimport { AppThunkAction, scenarioResponseTimeout } from 'store/constants';\nimport {\n    AddressInputAddPayload,\n    AddressInputPayload,\n    GoToCatalogCommandPayload,\n    GoToPromoCommandPayload,\n    ValidationOkCommandPayload,\n} from 'store/constants/native';\nimport { ROUTES } from 'store/constants/router';\nimport { selectPathname } from 'store/selectors';\nimport { addressFullSuccessThunk } from 'store/thunks/addressFullPage';\nimport { getWaitNextNavigationEventPromise } from 'tools/history';\n\nexport const goBackToStartAndReplaceThunk = (route: ROUTES): AppThunkAction => async (dispatch) => {\n    if (window.history.length > 1) {\n        dispatch(goBackToStart());\n\n        await getWaitNextNavigationEventPromise();\n    }\n\n    dispatch(replace(route));\n};\n\nexport const goToCatalogThunk = (payload: GoToCatalogCommandPayload): AppThunkAction => (dispatch) => {\n    dispatch(goToCatalogAction(payload));\n\n    // чтобы при перезагрузке страницы постоянно не переходить в каталог\n    if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n        return;\n    }\n\n    dispatch(goBackToStartAndReplaceThunk(ROUTES.CATALOG));\n};\n\nexport const goToNoAreaThunk = (): AppThunkAction => (dispatch) => {\n    dispatch(goToNoAreaAction());\n    dispatch(push(ROUTES.NO_AREA));\n};\n\nexport const goToPromoThunk = (payload: GoToPromoCommandPayload): AppThunkAction => (dispatch) => {\n    dispatch(goToPromo(payload));\n\n    // чтобы при перезагрузке страницы постоянно не переходить в промо\n    if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n        return;\n    }\n\n    dispatch(replace(ROUTES.PROMO));\n};\n\nexport const validationOkThunk = (payload: ValidationOkCommandPayload): AppThunkAction => (dispatch) => {\n    dispatch(validationOkAction(payload));\n\n    dispatch(goBackToStartAndReplaceThunk(ROUTES.SUCCESS));\n};\n\nexport const addressInputThunk = (payload: AddressInputPayload): AppThunkAction => (dispatch) => {\n    dispatch(addressInputAction(payload));\n\n    // чтобы при перезагрузке страницы постоянно не переходить на страницу с вопросом\n    if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n        return;\n    }\n\n    dispatch(push(ROUTES.ADDRESS_SIMPLE_QUESTION));\n};\n\nexport const addressSubmitThunk = (): AppThunkAction => (dispatch) => {\n    // TODO: убрать таймаут и сделать на промисах\n    // https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-269\n    const timerId = setTimeout(() => {\n        dispatch(addressSubmitFailAction());\n    }, scenarioResponseTimeout);\n\n    dispatch(addressSubmitAction(timerId));\n};\n\nexport const addressGuideThunk = (): AppThunkAction => (dispatch) => {\n    dispatch(addressGuideAction());\n    dispatch(push(ROUTES.ADDRESS_SIMPLE_GUIDE));\n};\n\nexport const addressInputDeclineThunk = (): AppThunkAction => (dispatch, getState) => {\n    const {\n        addressSimplePage: { suggests },\n    } = getState();\n    const totalSuggestsCount = suggests.length;\n\n    dispatch(addressInputDeclineAction());\n\n    if (totalSuggestsCount > 1) {\n        dispatch(replace(ROUTES.ADDRESS_SIMPLE));\n    } else {\n        dispatch(goBack());\n    }\n};\n\nexport const addressInputAddThunk = (payload: AddressInputAddPayload): AppThunkAction => (dispatch) => {\n    dispatch(addressInputAddAction(payload));\n    dispatch(push(ROUTES.ADDRESS_SIMPLE_QUESTION));\n};\n\nexport const goToAddressFullAllThunk = (): AppThunkAction => (dispatch, getState) => {\n    const state = getState();\n    const {\n        addressFullPage: { isSubmitButtonDisabled },\n    } = state;\n\n    // значит мы заходим не впервые и нужно показывать все инпуты\n    if (!isSubmitButtonDisabled) {\n        dispatch(push(ROUTES.ADDRESS_FULL_ALL));\n\n        return;\n    }\n\n    dispatch(push(ROUTES.ADDRESS_FULL_PHONE_GUIDE));\n};\n\nexport const goToValidationThunk = (): AppThunkAction => (dispatch, getState) => {\n    const state = getState();\n    const currentPathname = selectPathname(state);\n\n    switch (currentPathname) {\n        // это значит что ввод доп. адреса сохранился успешно\n        case ROUTES.ADDRESS_FULL_ALL: {\n            dispatch(addressFullSuccessThunk());\n            break;\n        }\n        case ROUTES.WAIT: {\n            dispatch(goBack());\n            break;\n        }\n\n        default: {\n            dispatch(push(ROUTES.CART));\n            break;\n        }\n    }\n};\n","import { go } from 'connected-react-router';\n\nexport const goBackToStart = () => {\n    const delta =\n        // prettier-ignore\n        (\n            window.history.length\n            // потому что мы должны прийти в 1, а не в 0; у history.length не может быть 0\n            - 1\n            // при отладке в браузере на выкинет на стартовую страницу хрома\n            - (process.env.REACT_APP_ENVIRONMENT !== 'production' ? 1 : 0)\n        )\n        // мы считаем отрицательную дельту, чтобы снавигироваться назад\n        * -1;\n\n    return go(delta);\n};\n","import { createAction, createEmptyAction } from 'tools/create-action';\n\nexport const addressChangeInputValueAction = (payload: string) => createAction('address/CHANGE_INPUT_VALUE', payload);\n\nexport const addressSelectSuggestItemAction = (payload: string) => createAction('address/SELECT_SUGGEST_ITEM', payload);\n\nexport const addressSubmitFailAction = () => createEmptyAction('address/SUBMIT_FAIL');\n\nexport const addressShowKeyboardHintAction = () => createEmptyAction('address/SHOW_KEYBOARD_HINT');\n","import { AppReducer, AppState } from 'store/constants';\nimport { StoreProductItem, ProductItem } from 'store/constants/products';\nimport { selectProductById, selectProductDiffById } from 'store/selectors';\n\nconst normalizeProductItem = (productItem: ProductItem): StoreProductItem => ({\n    name: productItem.name,\n    id: productItem.guid,\n    price: Number(productItem.price),\n    quantityLeft: Number(productItem.quantity_left),\n    imageUrl: productItem.images_urls[0] || '',\n});\n\nexport const normalizeProducts = (productsMaps: Record<string, ProductItem>): Record<string, StoreProductItem> =>\n    Object.keys(productsMaps).reduce<Record<string, StoreProductItem>>((acc, itemId) => {\n        acc[itemId] = normalizeProductItem(productsMaps[itemId]);\n\n        return acc;\n    }, {});\n\nexport const computeProductItemsMapBasedOnChanges = (state: AppState) => {\n    return Object.keys(state.productsData.itemsMap).reduce<AppState['productsData']['itemsMap']>((result, itemId) => {\n        const productItem = selectProductById(state, itemId);\n        const productItemDiff = selectProductDiffById(state, itemId);\n\n        result[itemId] = Object.assign(productItem, productItemDiff);\n\n        return result;\n    }, {});\n};\n\nexport const productsData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'SHOW_ITEMS': {\n            state.productsData.itemsMap = normalizeProducts(action.payload.stock);\n            break;\n        }\n\n        case 'APPLY_ITEMS_CHANGES': {\n            state.productsData.itemsMap = computeProductItemsMapBasedOnChanges(state);\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n","import { AppReducer } from 'store/constants';\nimport { ProductItemDiff, StoreProductItemDiff } from 'store/constants/products';\n\nconst normalizeProductItemsDiffMap = (productsDiffMap: Record<string, ProductItemDiff>) =>\n    Object.entries(productsDiffMap).reduce((result, [itemId, productItemDiff]) => {\n        const { quantity_left: quantityLeftString, price: priceString } = productItemDiff;\n\n        if (!quantityLeftString && !priceString) {\n            return result;\n        }\n\n        result[itemId] = {};\n\n        if (quantityLeftString) {\n            result[itemId].quantityLeft = Number(quantityLeftString);\n        }\n\n        if (priceString) {\n            result[itemId].price = Number(priceString);\n        }\n\n        return result;\n    }, {} as Record<string, StoreProductItemDiff>);\n\nexport const productsDiffData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'ITEMS_CHANGES': {\n            state.productsDiffData.itemsMap = normalizeProductItemsDiffMap(action.payload.changes);\n\n            break;\n        }\n\n        case 'APPLY_ITEMS_CHANGES': {\n            state.productsDiffData.itemsMap = {};\n\n            break;\n        }\n\n        default: {\n            break;\n        }\n    }\n};\n","import { AppReducer } from 'store/constants';\nimport { GoToCatalogCommandPayload } from 'store/constants/native';\nimport { StoreUser } from 'store/constants/user';\n\nconst normalizeUserData = (payload: GoToCatalogCommandPayload): StoreUser => {\n    return {\n        customerName: payload.address.customer_name,\n        phoneNumber: payload.address.phone_num,\n        addressLocationLatitude: payload.address.address.location.latitude,\n        addressLocationLongitude: payload.address.address.location.longitude,\n        deviceLocationLatitude: payload.device_location.latitude,\n        deviceLocationLongitude: payload.device_location.longitude,\n        address: payload.address.address.address_string,\n        city: payload.address.address.city,\n        street: payload.address.address.street,\n        house: payload.address.address.house,\n        building: payload.address.address.building,\n        floor: payload.address.address.floor,\n        entrance: payload.address.address.entrance,\n        apartment: payload.address.address.apartment,\n        doorCode: payload.address.address.door_code,\n        isPhoneValid: true,\n    };\n};\n\nexport const userData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'GO_TO_PROMO': {\n            const { latitude, longitude } = action.payload.device_location;\n            state.userData.deviceLocationLatitude = latitude;\n            state.userData.deviceLocationLongitude = longitude;\n            break;\n        }\n\n        case 'GO_TO_CATALOG': {\n            state.userData = normalizeUserData(action.payload);\n            break;\n        }\n\n        case 'ADDRESS_FULL_SUCCESS': {\n            state.userData.phoneNumber = state.userModel.phoneNumber;\n            state.userData.apartment = state.userModel.apartment;\n            state.userData.entrance = state.userModel.entrance;\n            state.userData.floor = state.userModel.floor;\n            state.userData.doorCode = state.userModel.doorCode;\n\n            break;\n        }\n\n        case 'LAST_ORDER_INFO': {\n            const payload = action.payload.info;\n\n            state.userData = {\n                addressLocationLatitude: payload.address.location.latitude,\n                addressLocationLongitude: payload.address.location.longitude,\n                customerName: payload.customer.name,\n                phoneNumber: payload.customer.phone,\n                city: payload.address.city,\n                street: payload.address.street,\n                house: payload.address.house,\n                floor: payload.address.floor,\n                entrance: payload.address.entrance,\n                apartment: payload.address.apartment,\n                doorCode: payload.address.door_code,\n                address: `${payload.address.street}, ${payload.address.house}`,\n                building: '',\n                deviceLocationLatitude: payload.address.location.latitude,\n                deviceLocationLongitude: payload.address.location.longitude,\n                isPhoneValid: true,\n            };\n\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n","import { AppReducer } from '../../constants';\n\nexport const deliveryData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'GO_TO_CATALOG': {\n            state.delivery.deliveryTime = action.payload.time;\n            state.delivery.minimalPrice = action.payload.minimal_amount;\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n","import { AppReducer, initialState } from 'store/constants';\nimport {\n    LastOrderPosition,\n    OrderStateProductItem,\n    Price,\n    ParsedPrice,\n    DiscountedPrice,\n    ParsedDiscountedPrice,\n} from 'store/constants/orderStatus';\n\nconst parsePrice = ({ value, ccy: currency }: Price): ParsedPrice => ({\n    value: parseInt(value, 10) / 100,\n    currency,\n});\n\nconst parseDiscountedPrice = ({ discountValue, ...price }: DiscountedPrice): ParsedDiscountedPrice => ({\n    ...parsePrice(price),\n    discountValue: parseInt(discountValue, 10) / 100,\n});\n\nconst getOrderStateProductItem = (position: LastOrderPosition): OrderStateProductItem => ({\n    ...position,\n    originalPrice: parseDiscountedPrice(position.originalPrice),\n    originalTotalPrice: parseDiscountedPrice(position.originalTotalPrice),\n    originalQuantity: parseInt(position.originalQuantity, 10),\n    formedPrice: parseDiscountedPrice(position.formedPrice),\n    formedQuantity: parseInt(position.formedQuantity, 10),\n    formedTotalPrice: parseDiscountedPrice(position.formedTotalPrice),\n    imageUrl: position.images_urls[0],\n});\n\nconst parseBoolean = (value: string): boolean => value === 'False';\n\nexport const orderStatusData: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'LAST_ORDER_INFO': {\n            const payload = action.payload.info;\n\n            state.orderStatusData = {\n                ...initialState.orderStatusData,\n                productList: payload.positions.map(getOrderStateProductItem),\n                orderDate: new Date(payload.expectedDateTime),\n                orderStatus: payload.orderStatus,\n                orderId: payload.orderId,\n                comment: payload.comment !== 'None' ? payload.comment : '',\n                isChanged: parseBoolean(payload.changedOnFormed),\n                deliveryPrice: parseDiscountedPrice(payload.deliveryPrice),\n                orderDiscount: parsePrice(payload.orderDiscount),\n                originalTotalPrice: parseDiscountedPrice(payload.originalTotalPrice),\n                originalOrderPrice: parsePrice(payload.originalOrderPrice),\n                formedTotalPrice: parseDiscountedPrice(payload.formedTotalPrice),\n                formedOrderPrice: parsePrice(payload.formedOrderPrice),\n            };\n\n            break;\n        }\n\n        case 'LAST_ORDER_EMPTY':\n        case 'LAST_ORDER_ERROR':\n        case 'ASK_FOR_LAST_ORDER_INFO': {\n            state.orderStatusData = { ...initialState.orderStatusData };\n\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n","import { getCountById, getPriceById, getQuantityLeftById } from 'store/reducers/helpers/catalogPage';\nimport { selectCartItemById, selectProductById } from 'store/selectors';\nimport { AppReducer, AppState, initialState } from 'store/constants';\n\nconst getTotalCount = (state: AppState) =>\n    Object.values(state.cart.itemsMap).reduce((acc, { itemId }) => {\n        acc += getCountById(state, itemId);\n\n        return acc;\n    }, 0);\n\nconst getTotalPrice = (state: AppState) =>\n    state.cart.order.reduce((acc, itemId) => {\n        const count = getCountById(state, itemId);\n        const price = getPriceById(state, itemId);\n\n        acc += count * price;\n\n        return acc;\n    }, 0);\n\nexport const cartModel: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'ADD_ITEM': {\n            const { count: countString, item: itemId } = action.payload;\n            const count = Number(countString);\n            const productItem = selectProductById(state, itemId);\n            const quantityLeft = getQuantityLeftById(state, itemId);\n\n            if (!productItem) {\n                return;\n            }\n\n            const cartItem = selectCartItemById(state, itemId);\n\n            if (cartItem) {\n                cartItem.count = Math.min(quantityLeft, cartItem.count + count);\n            } else if (count <= quantityLeft) {\n                state.cart.itemsMap[itemId] = {\n                    itemId,\n                    count,\n                };\n\n                state.cart.order.push(itemId);\n            }\n\n            break;\n        }\n\n        case 'REMOVE_ITEM': {\n            const { item: itemId, count: countString, shouldRemoveMention } = action.payload;\n            const count = Number(countString);\n\n            const cartItem = selectCartItemById(state, itemId);\n            const productItem = selectProductById(state, itemId);\n            const actualCount = getCountById(state, itemId);\n\n            if (!cartItem || !productItem) {\n                return;\n            }\n\n            cartItem.count = Math.max(0, actualCount - count);\n\n            if (!cartItem.count && shouldRemoveMention) {\n                delete state.cart.itemsMap[itemId];\n                state.cart.order = state.cart.order.filter((cartItemId) => cartItemId !== itemId);\n            }\n\n            break;\n        }\n\n        case 'REMOVE_ALL': {\n            state.cart = { ...initialState.cart };\n\n            break;\n        }\n\n        case 'GO_TO_CATALOG': {\n            if (action.payload.clear) {\n                state.cart = { ...initialState.cart };\n            }\n\n            break;\n        }\n\n        case 'VALIDATION_OK': {\n            state.cart = { ...initialState.cart };\n            state.cart.orderId = action.payload.order_id;\n            state.cart.date = new Date(action.payload.date);\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    state.cart.totalCount = getTotalCount(state);\n    state.cart.totalPrice = getTotalPrice(state);\n};\n","import { parsePhoneNumberFromString, AsYouType, CountryCode, NumberType } from 'libphonenumber-js';\nimport { memoize } from 'tools/memoize';\n\n// TODO: FOODTECHUI-224 Валидация и форматирование иностранных номеров\n\nconst defaultDefaultCountryCode = 'RU';\n\n// чистим ввод от всего лишнего\n// +7 (123123) 12-3=12+3 => +7123123123123\nexport const filterPhoneInput = (input?: string | null) =>\n    (input ?? '')\n        .replace(/\\+/g, (match, offset) => (offset > 0 ? '' : match)) // удаляем все плюсы, кроме первого\n        .replace(/[^\\d+]/g, ''); // ищем все, кроме цифр и плюсов, и удаляем\n\n// парсим телефон и форматируем в международный формат\n//\n// NB: эта функция предназначена для обработанных и отфильтрованных данных\n// поэтому она и позволяет всякие извращения типа 8 800\nexport const formatPhone = memoize(\n    (input: string, defaultCountryCode: CountryCode = defaultDefaultCountryCode): string => {\n        // делаем очевидное исключение\n        if (input === '900') {\n            return input;\n        }\n\n        const parsedPhone = parsePhoneNumberFromString(input, defaultCountryCode);\n\n        if (!parsedPhone) {\n            return '';\n        }\n\n        const formattedPhone = parsedPhone.formatInternational();\n\n        // делаем исключение для платных номеров вида 8 800...\n        if (formattedPhone.startsWith('+7 800')) {\n            return formattedPhone.replace(/^\\+7/, '8');\n        }\n\n        return formattedPhone;\n    },\n);\n\n// парсим вводимый телефон, предполагая, что он может быть в национальном формате\nconst parseNationalNumberInput = (input: string, defaultCountryCode: CountryCode) => {\n    const typeFormatter = new AsYouType(defaultCountryCode);\n\n    const formattedInput = typeFormatter.input(filterPhoneInput(input));\n\n    const parsedNumber = typeFormatter.getNumber();\n\n    return { formattedInput, parsedNumber };\n};\n\nconst formatInternationalNumberInput = (input: string) => new AsYouType().input(input);\n\n// форматируем номер во время вводв\nexport const formatPhoneInput = memoize(\n    (input: string, defaultCountryCode: CountryCode = defaultDefaultCountryCode): string => {\n        const { formattedInput, parsedNumber } = parseNationalNumberInput(input, defaultCountryCode);\n\n        const parsedInternationalNumberInput = String(parsedNumber?.number ?? '');\n\n        // хак, чтобы исключить форматирование частичного ввода 8 (987) 654-32-1 как +78987654321\n        // негеографические коды 800–899 относятся к специальным, сервисным или резервным,\n        // поэтому мы можем тут безопасно на них забить и заменить начальную 8 на +7\n        if (input.startsWith('8') && parsedInternationalNumberInput.startsWith('+78')) {\n            return formatPhoneInput(`+7${input.slice(1)}`);\n        }\n\n        // хак, чтобы при первой же возможности приводить номера к международному формату\n        if (parsedInternationalNumberInput) {\n            return formatInternationalNumberInput(parsedInternationalNumberInput);\n        }\n\n        return formattedInput;\n    },\n);\n\n// приводит номер к международному формату и чистит от форматирования\nexport const normalizePhoneInput = (\n    input: string,\n    defaultCountryCode: CountryCode = defaultDefaultCountryCode,\n): string => {\n    return filterPhoneInput(formatPhoneInput(input, defaultCountryCode));\n};\n\n// разрешаем мобильные и стацмонарные телефоны\n// в некоторых странах (например, Украина) такие телефоны не имеют маркировки и пишутся как undefined\nconst allowedPhoneTypes: NumberType[] = [undefined, 'FIXED_LINE', 'FIXED_LINE_OR_MOBILE', 'MOBILE'];\n\nconst allowedCountries: CountryCode[] = ['RU'];\n\nexport const isValidPhone = memoize(\n    (input: string, defaultCountryCode: CountryCode = defaultDefaultCountryCode): boolean => {\n        const phoneNumber = parsePhoneNumberFromString(input, defaultCountryCode);\n\n        return Boolean(\n            phoneNumber?.isValid() &&\n                allowedPhoneTypes.includes(phoneNumber.getType()) &&\n                phoneNumber.country &&\n                allowedCountries.includes(phoneNumber.country),\n        );\n    },\n);\n","import { AppState, initialState, AppReducer } from 'store/constants';\nimport { ROUTES } from 'store/constants/router';\nimport { selectPathname } from 'store/selectors';\nimport { DGBuildingSuggest } from 'tools/twoGis/api/suggest';\nimport { normalizePhoneInput, isValidPhone } from 'tools/phoneNumber';\n\nconst updateUserAddressBasedOnBuilding = ({ userModel }: AppState, suggest: DGBuildingSuggest) => {\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    const { point, address, address_name, full_name } = suggest;\n    /**\n     * этот ифак скорее тайпгвард\n     * саджесты без компонентов адреса фильтруются в самом начале\n     */\n    if (!address.components || !address.components.length) {\n        return;\n    }\n\n    const [addressComponent] = address.components;\n    const { street, number } = addressComponent;\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    const [city] = full_name.split(', ');\n\n    userModel.city = city;\n    userModel.street = street;\n    userModel.house = number;\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    userModel.address = address_name;\n    userModel.addressLocationLatitude = String(point.lat);\n    userModel.addressLocationLongitude = String(point.lon);\n};\n\nexport const userModel: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'address/CHANGE_INPUT_VALUE': {\n            state.userModel = { ...initialState.userModel };\n\n            break;\n        }\n\n        case 'REVERT_USER_CHANGES': {\n            state.userModel = { ...state.userData };\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT': {\n            state.userModel = { ...initialState.userModel };\n            state.userModel.address = action.payload.input;\n\n            break;\n        }\n\n        case 'FINISH_FETCHING_TWO_GIS_SUGGESTS': {\n            const suggestItem = state.twoGisSuggestsData.mostRepresentationSuggest;\n\n            if (suggestItem) {\n                updateUserAddressBasedOnBuilding(state, suggestItem);\n            }\n\n            break;\n        }\n\n        case 'address/SELECT_SUGGEST_ITEM': {\n            const suggestItem = state.twoGisSuggestsData.itemsMap[action.payload];\n\n            updateUserAddressBasedOnBuilding(state, suggestItem);\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT_ADD': {\n            state.userModel = { ...initialState.userModel };\n            state.userModel.address = action.payload.input;\n\n            break;\n        }\n\n        case 'ADDRESS_INPUT_CLEAR': {\n            state.userModel = { ...initialState.userModel };\n\n            break;\n        }\n\n        case 'ADDRESS_FULL_INPUT': {\n            if (action.payload.input.apartment) {\n                state.userModel.apartment = action.payload.input.apartment;\n            }\n\n            if (action.payload.input.floor) {\n                state.userModel.floor = action.payload.input.floor;\n            }\n\n            if (action.payload.input.entrance) {\n                state.userModel.entrance = action.payload.input.entrance;\n            }\n\n            if (action.payload.input.phone_num) {\n                state.userModel.phoneNumber = normalizePhoneInput(action.payload.input.phone_num);\n            }\n\n            if (action.payload.input.door_code) {\n                state.userModel.doorCode = action.payload.input.door_code;\n            }\n\n            break;\n        }\n\n        case 'ADDRESS_FULL_INPUT_ADD': {\n            const pathname = selectPathname(state);\n\n            switch (pathname) {\n                case ROUTES.ADDRESS_FULL_PHONE: {\n                    state.userModel.phoneNumber = normalizePhoneInput(action.payload.input);\n\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_APARTMENT: {\n                    state.userModel.apartment = action.payload.input;\n\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_ENTRANCE: {\n                    state.userModel.entrance = action.payload.input;\n\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_FLOOR: {\n                    state.userModel.floor = action.payload.input;\n\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_DOOR_CODE: {\n                    state.userModel.doorCode = action.payload.input;\n\n                    break;\n                }\n\n                default:\n                    break;\n            }\n\n            break;\n        }\n\n        case 'ADDRESS_FULL_INPUT_CLEAR': {\n            const pathname = selectPathname(state);\n\n            switch (pathname) {\n                case ROUTES.ADDRESS_FULL_PHONE: {\n                    state.userModel.phoneNumber = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_APARTMENT: {\n                    state.userModel.apartment = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_ENTRANCE: {\n                    state.userModel.entrance = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_FLOOR: {\n                    state.userModel.floor = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_DOOR_CODE: {\n                    state.userModel.doorCode = '';\n                    break;\n                }\n\n                case ROUTES.ADDRESS_FULL_ALL: {\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    const { phone_num, apartment, entrance, floor, door_code } = action.payload.input;\n\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    if (phone_num) {\n                        state.userModel.phoneNumber = '';\n                    }\n\n                    if (apartment) {\n                        state.userModel.apartment = '';\n                    }\n\n                    if (entrance) {\n                        state.userModel.entrance = '';\n                    }\n\n                    if (floor) {\n                        state.userModel.floor = '';\n                    }\n\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    if (door_code) {\n                        state.userModel.doorCode = '';\n                    }\n                    break;\n                }\n\n                default:\n                    break;\n            }\n\n            break;\n        }\n\n        case 'ADDRESS_FULL_COMMENT': {\n            state.userModel.doorCode = action.payload.input;\n\n            break;\n        }\n\n        case 'addressFull/PHONE_NUMBER_INPUT_CHANGE': {\n            const { inputType, data } = action.payload;\n\n            if (inputType === 'insertText') {\n                state.userModel.phoneNumber = normalizePhoneInput(`${state.userModel.phoneNumber}${data}`);\n            } else {\n                state.userModel.phoneNumber = state.userModel.phoneNumber.slice(0, -1);\n            }\n\n            break;\n        }\n\n        case 'addressFull/APARTMENT_INPUT_CHANGE': {\n            state.userModel.apartment = action.payload;\n\n            break;\n        }\n\n        case 'addressFull/ENTRANCE_INPUT_CHANGE': {\n            state.userModel.entrance = action.payload;\n\n            break;\n        }\n\n        case 'addressFull/FLOOR_INPUT_CHANGE': {\n            state.userModel.floor = action.payload;\n\n            break;\n        }\n\n        case 'addressFull/DOORCODE_INPUT_CHANGE': {\n            state.userModel.doorCode = action.payload;\n\n            break;\n        }\n\n        case 'GO_TO_CATALOG': {\n            state.userModel = { ...state.userData };\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    state.userModel.isPhoneValid = isValidPhone(state.userModel.phoneNumber);\n};\n","import { CatalogListItemViewProps } from 'pages/Catalog/ListItem/CatalogListItem';\nimport { AppState, AppReducer, initialState } from 'store/constants';\nimport { ROUTES } from 'store/constants/router';\nimport {\n    canAddMore,\n    getCountById,\n    getDisabled,\n    getOldPriceById,\n    preparePriceById,\n    getQuantityLeftById,\n    formatSale,\n    wantMoreThanHave,\n} from 'store/reducers/helpers/catalogPage';\nimport { selectProductById, selectPathname, selectProductDiffById } from 'store/selectors';\n\nconst screenWidth = 1920;\nconst cardWidth = 392;\nconst cardGap = 32;\n\nconst screenItemCount = Math.floor(screenWidth / (cardWidth + cardGap));\n\nconst listOffset = (-1 * (screenWidth % (cardWidth + cardGap))) / 2;\n\nconst itemWidth = cardWidth + cardGap;\n\nconst getListIndexOffset = ({ catalogPage: { selectedItemId, order, listIndexOffset } }: AppState) => {\n    const currentListIndex = listIndexOffset;\n    const selectedItemIndex = order.indexOf(selectedItemId);\n\n    if (selectedItemIndex === -1) {\n        return 0;\n    }\n\n    if (selectedItemIndex <= currentListIndex) {\n        return Math.max(0, selectedItemIndex - 1);\n    }\n\n    if (selectedItemIndex >= currentListIndex + screenItemCount - 1) {\n        const maxValue = order.length - screenItemCount;\n        return Math.min(maxValue, selectedItemIndex - 2);\n    }\n\n    return currentListIndex;\n};\n\nconst getWrapperXShift = ({ catalogPage: { listIndexOffset } }: AppState) =>\n    listOffset + listIndexOffset * itemWidth - cardGap / 2;\n\nconst getScreenIndexMap = ({ catalogPage: { listIndexOffset, order } }: AppState): Record<string, number> =>\n    new Array(screenItemCount).fill(0).reduce(\n        (result, _, index) => ({\n            ...result,\n            [order[index + listIndexOffset]]: index + 1,\n        }),\n        {} as Record<string, number>,\n    );\n\nconst prepareBadge = (state: AppState, itemId: string): CatalogListItemViewProps['badge'] => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const count = getCountById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n\n    // раскупили\n    if (quantityLeft === 0) {\n        return { type: 'sold-out' };\n    }\n\n    // больше не осталось\n    if (count === quantityLeft) {\n        return { type: 'few-left' };\n    }\n\n    // изменение цены\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        // подорожание\n        if (productItemDiff.price > productItem.price) {\n            return { type: 'price-changed' };\n        }\n\n        // скидка\n        if (productItemDiff.price < productItem.price) {\n            const content = formatSale(productItem.price, productItemDiff.price);\n            return { type: 'sale', content };\n        }\n    }\n\n    return undefined;\n};\n\nconst prepareIndex = ({ catalogPage: { screenIndexMap } }: AppState, itemId: string) => screenIndexMap[itemId];\n\nconst prepareCatalogItemsMap = (state: AppState) => {\n    const { productsData } = state;\n\n    return Object.keys(productsData.itemsMap).reduce<AppState['catalogPage']['itemsMap']>((acc, itemId) => {\n        const { name, imageUrl } = selectProductById(state, itemId);\n\n        acc[itemId] = {\n            imageUrl,\n            name,\n            price: preparePriceById(state, itemId),\n            oldPrice: getOldPriceById(state, itemId),\n            isWantMoreThanHave: wantMoreThanHave(state, itemId),\n            count: getCountById(state, itemId),\n            index: prepareIndex(state, itemId),\n            badge: prepareBadge(state, itemId),\n            isButtonDisabled: !canAddMore(state, itemId),\n            disabled: getDisabled(state, itemId),\n        };\n\n        return acc;\n    }, {});\n};\n\nconst prepareItemsFocusHashMap = (state: AppState) => {\n    const {\n        catalogPage: { itemsFocusHashMap, order },\n    } = state;\n\n    const isEmpty = Object.keys(itemsFocusHashMap).length === 0;\n    const [firstItem] = order;\n\n    return isEmpty && firstItem ? { [firstItem]: Math.random() } : itemsFocusHashMap;\n};\n\nexport const catalogPageView: AppReducer = (state, action) => {\n    const { productsData, catalogPage } = state;\n\n    switch (action.type) {\n        case 'ADD_ITEM': {\n            if (selectPathname(state) === ROUTES.CATALOG) {\n                catalogPage.selectedItemId = action.payload.item;\n\n                if (!action.payload.skipFocus) {\n                    catalogPage.itemsFocusHashMap[action.payload.item] = Math.random();\n                }\n            }\n\n            break;\n        }\n\n        case 'REMOVE_ITEM': {\n            if (selectPathname(state) === ROUTES.CATALOG) {\n                catalogPage.selectedItemId = action.payload.item;\n                catalogPage.itemsFocusHashMap[action.payload.item] = Math.random();\n            }\n\n            break;\n        }\n\n        case 'REMOVE_ALL': {\n            catalogPage.selectedItemId = initialState.catalogPage.selectedItemId;\n            catalogPage.itemsFocusHashMap = initialState.catalogPage.itemsFocusHashMap;\n\n            break;\n        }\n\n        case 'catalog/SELECT_ITEM': {\n            catalogPage.selectedItemId = action.payload;\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    catalogPage.order = Object.keys(productsData.itemsMap);\n    catalogPage.listIndexOffset = getListIndexOffset(state);\n    catalogPage.wrapperXShift = getWrapperXShift(state);\n    catalogPage.screenIndexMap = getScreenIndexMap(state);\n    catalogPage.itemsMap = prepareCatalogItemsMap(state);\n    catalogPage.itemsFocusHashMap = prepareItemsFocusHashMap(state);\n};\n","import { CatalogListItemTouchViewProps } from 'pages/Catalog/ListItem/CatalogListItem@touch';\nimport { AppState, AppReducer } from 'store/constants';\nimport { selectCartItemById, selectProductById } from 'store/selectors';\nimport { calculateButtonDisabled, formatPrice, prepareCount } from 'store/reducers/helpers/catalogPage';\n\nconst prepareBadge = (state: AppState, itemId: string): CatalogListItemTouchViewProps['badge'] => {\n    const cartItem = selectCartItemById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n\n    if (productItem.quantityLeft === 0) {\n        return 'sold-out';\n    }\n\n    if (cartItem && cartItem.count === productItem.quantityLeft) {\n        return 'few-left';\n    }\n\n    return undefined;\n};\n\nconst prepareIndex = ({ catalogPageTouch: { order } }: AppState, itemId: string) => order.indexOf(itemId) + 1;\n\nconst prepareCatalogItemsMap = (state: AppState) => {\n    const { productsData } = state;\n\n    return Object.keys(productsData.itemsMap).reduce<AppState['catalogPageTouch']['itemsMap']>((acc, itemId) => {\n        const productItem = selectProductById(state, itemId);\n\n        acc[itemId] = {\n            imageUrl: productItem.imageUrl,\n            name: productItem.name,\n            price: formatPrice(productItem.price),\n            count: prepareCount(state, itemId),\n            index: prepareIndex(state, itemId),\n            badge: prepareBadge(state, itemId),\n            buttonDisabled: calculateButtonDisabled(state, itemId),\n            disabled: productItem.quantityLeft === 0,\n        };\n\n        return acc;\n    }, {});\n};\n\nexport const catalogPageTouchView: AppReducer = (state) => {\n    const { productsData, catalogPageTouch } = state;\n\n    catalogPageTouch.order = Object.keys(productsData.itemsMap);\n    catalogPageTouch.itemsMap = prepareCatalogItemsMap(state);\n};\n","// 1. (?=(\\d{3})+$) - матчит подстроки нулевой длины, после которых идет три цифры подряд\n// 2. (?=...) - positive lookahead, конструкция, которая матчит позицию, после которой срабатывает указанный паттерн\n// 3. (?:\\d{3})+ - повторяющаяся незахватывающая группа, которая матчит подстроки из трех цифр\n// 4. $ - EOL - чтобы выровнять [3] по концу строки\nexport const splitByThousands = (n: number) => n.toString().replace(/(?=(?:\\d{3})+$)/g, ' ');\n","import { AppState } from 'store/constants';\nimport { splitByThousands } from 'tools/split-by-thousands';\n\nimport { formatPrice } from './catalogPage';\n\nexport const prepareTotalPrice = ({ cart: { totalPrice } }: AppState) => splitByThousands(formatPrice(totalPrice));\n\nexport const prepareToMinimumPrice = ({ cart: { totalPrice }, delivery: { minimalPrice } }: AppState) =>\n    Math.max(0, Math.ceil((minimalPrice - totalPrice) / 100));\n\nexport const getFormattedPersonalAddress = ({ userData: { apartment, entrance, floor } }: AppState) =>\n    [\n        apartment && `квартира ${apartment}`, //\n        entrance && `подъезд ${entrance}`,\n        floor && `этаж ${floor}`,\n    ]\n        .filter(Boolean)\n        .join(', ');\n\nexport const prepareHasRequiredData = ({ userData: { phoneNumber, address } }: AppState) =>\n    Boolean(address && phoneNumber);\n\nexport const getWrapperYShift = (index: number, count: number, itemHeight: number) => {\n    if (index === -1) {\n        return 0;\n    }\n\n    // так как индекс начинается с 0, то расчеты бы имели смысл начиная\n    // со второго элемента (индекс = 1), но нам нужно начинать скролл с\n    // 3-го элемента, поэтому сдвигаем значение на 1\n    let relatedIndex = Math.max(0, index - 1);\n\n    // ограничиваем максимальное значение индекса\n    relatedIndex = Math.min(Math.max(0, count - 4), relatedIndex);\n\n    // домножаем отступ на коэффициент высоты айтема\n    return relatedIndex * itemHeight;\n};\n\nexport const prepareTopGradientVisible = (wrapperYShift: number) => wrapperYShift !== 0;\n\nexport const prepareBottomGradientVisible = (wrapperYShift: number, count: number, itemHeight: number) =>\n    count > 4 && wrapperYShift !== (count - 4) * itemHeight;\n","import { ButtonViews } from 'components/Button/Button';\nimport { CartListItemViewProps } from 'pages/Cart/ListItem/CartListItem';\nimport {\n    canAddMore,\n    getCountById,\n    getDisabled,\n    getOldPriceById,\n    preparePriceById,\n    getQuantityLeftById,\n    formatSale,\n    wantMoreThanHave,\n} from 'store/reducers/helpers/catalogPage';\nimport {\n    getFormattedPersonalAddress,\n    prepareHasRequiredData,\n    prepareToMinimumPrice,\n    prepareTotalPrice,\n    getWrapperYShift,\n    prepareTopGradientVisible,\n    prepareBottomGradientVisible,\n} from 'store/reducers/helpers/cartPage';\nimport { selectProductById, selectCartItemById, selectProductDiffById } from 'store/selectors';\nimport { AppReducer, AppState } from 'store/constants';\nimport { formatPhone } from 'tools/phoneNumber';\n\nconst prepareLabel = (state: AppState, itemId: string): CartListItemViewProps['label'] => {\n    const quantityLeft = getQuantityLeftById(state, itemId);\n    const productItem = selectProductById(state, itemId);\n    const productItemDiff = selectProductDiffById(state, itemId);\n    const cartItem = selectCartItemById(state, itemId);\n    const isWantMoreThanHave = wantMoreThanHave(state, itemId);\n\n    // раскупили\n    if (quantityLeft === 0) {\n        return { type: 'sold-out' };\n    }\n\n    // есть меньше чем добавили\n    if (isWantMoreThanHave) {\n        return {\n            type: 'you-want',\n            content: String(cartItem.count),\n        };\n    }\n\n    // изменение цены\n    if (productItemDiff && typeof productItemDiff.price !== 'undefined') {\n        // подорожание\n        if (productItemDiff.price > productItem.price) {\n            return { type: 'price-changed' };\n        }\n\n        // скидка\n        if (productItemDiff.price < productItem.price) {\n            const content = formatSale(productItem.price, productItemDiff.price);\n            return { type: 'sale', content };\n        }\n    }\n\n    return undefined;\n};\n\nconst prepareItemsMap = (state: AppState) => {\n    const { cartPage } = state;\n\n    return cartPage.order.reduce<AppState['cartPage']['itemsMap']>((result, itemId) => {\n        const cartItem = selectCartItemById(state, itemId);\n        const { imageUrl, name } = selectProductById(state, itemId);\n\n        if (cartItem) {\n            result[itemId] = {\n                imageUrl,\n                name,\n                price: preparePriceById(state, itemId),\n                oldPrice: getOldPriceById(state, itemId),\n                count: getCountById(state, itemId),\n                isWantMoreThanHave: wantMoreThanHave(state, itemId),\n                disabled: getDisabled(state, itemId),\n                label: prepareLabel(state, itemId),\n                isMoreButtonDisabled: !canAddMore(state, itemId),\n            };\n        }\n\n        return result;\n    }, {});\n};\n\nconst itemHeight = 152;\n\nconst calculateMakePurchaseDisabled = (state: AppState) => {\n    const {\n        cart: { totalPrice },\n        delivery: { minimalPrice },\n    } = state;\n\n    return totalPrice < minimalPrice;\n};\n\nconst calculateMakePurchaseButtonView = (state: AppState): AppState['cartPage']['makePurchaseButtonView'] => {\n    return state.cartPage.isMakePurchaseButtonDisabled ? ButtonViews.secondary : ButtonViews.primary;\n};\n\nconst getFormattedPhoneNumber = ({ userData }: AppState) => userData.phoneNumber && formatPhone(userData.phoneNumber);\n\nexport const cartPageView: AppReducer = (state, action) => {\n    const { cart, delivery, cartPage } = state;\n\n    switch (action.type) {\n        case 'cart/SELECT_ITEM': {\n            cartPage.selectedItemIndex = cartPage.order.indexOf(action.payload);\n\n            break;\n        }\n\n        default:\n            break;\n    }\n\n    cartPage.order = cart.order;\n    cartPage.deliveryTime = delivery.deliveryTime;\n    cartPage.itemsMap = prepareItemsMap(state);\n    cartPage.totalPrice = prepareTotalPrice(state);\n    cartPage.toMinimumPrice = prepareToMinimumPrice(state);\n    cartPage.wrapperYShift = getWrapperYShift(\n        state.cartPage.selectedItemIndex,\n        state.cartPage.order.length,\n        itemHeight,\n    );\n    cartPage.isMakePurchaseButtonDisabled = calculateMakePurchaseDisabled(state);\n\n    cartPage.makePurchaseButtonView = calculateMakePurchaseButtonView(state);\n    cartPage.topGradientVisible = prepareTopGradientVisible(cartPage.wrapperYShift);\n    cartPage.bottomGradientVisible = prepareBottomGradientVisible(\n        cartPage.wrapperYShift,\n        cartPage.order.length,\n        itemHeight,\n    );\n    cartPage.hasRequiredData = prepareHasRequiredData(state);\n    cartPage.phoneNumber = getFormattedPhoneNumber(state);\n    cartPage.personalAddress = getFormattedPersonalAddress(state);\n};\n","import { selectCartItemById, selectProductById } from 'store/selectors';\nimport { AppReducer, AppState } from 'store/constants';\nimport { canAddMore, getCountById, getDisabled, preparePriceById } from 'store/reducers/helpers/catalogPage';\nimport {\n    getFormattedPersonalAddress,\n    prepareHasRequiredData,\n    prepareToMinimumPrice,\n    prepareTotalPrice,\n} from 'store/reducers/helpers/cartPage';\n\nconst prepareItemsMap = (state: AppState) => {\n    const { cartPageTouch } = state;\n\n    return cartPageTouch.order.reduce<AppState['cartPageTouch']['itemsMap']>((result, itemId) => {\n        const cartItem = selectCartItemById(state, itemId);\n        const { imageUrl, name } = selectProductById(state, itemId);\n\n        if (cartItem) {\n            result[itemId] = {\n                imageUrl,\n                name,\n                price: preparePriceById(state, itemId),\n                count: getCountById(state, itemId),\n                disabled: getDisabled(state, itemId),\n                isMoreButtonDisabled: !canAddMore(state, itemId),\n            };\n        }\n\n        return result;\n    }, {});\n};\n\nexport const cartPageTouchView: AppReducer = (state) => {\n    const { cart, delivery, cartPageTouch } = state;\n\n    cartPageTouch.order = cart.order;\n    cartPageTouch.deliveryTime = delivery.deliveryTime;\n    cartPageTouch.itemsMap = prepareItemsMap(state);\n    cartPageTouch.totalPrice = prepareTotalPrice(state);\n    cartPageTouch.toMinimumPrice = prepareToMinimumPrice(state);\n    cartPageTouch.hasRequiredData = prepareHasRequiredData(state);\n    cartPageTouch.personalAddress = getFormattedPersonalAddress(state);\n};\n","import { AppState, AppReducer } from 'store/constants';\nimport { ROUTES } from 'store/constants/router';\nimport { formatPhoneInput } from 'tools/phoneNumber';\n\nconst computeNextFocus = (state: AppState) => {\n    const { phoneNumber, apartment, entrance, floor, doorCode } = state.userModel;\n\n    const options = {\n        [ROUTES.ADDRESS_FULL_PHONE]: phoneNumber,\n        [ROUTES.ADDRESS_FULL_APARTMENT]: apartment,\n        [ROUTES.ADDRESS_FULL_ENTRANCE]: entrance,\n        [ROUTES.ADDRESS_FULL_FLOOR]: floor,\n        [ROUTES.ADDRESS_FULL_DOOR_CODE]: doorCode,\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const result = Object.entries(options).find(([_, value]) => !value);\n\n    return result ? result[0] : ROUTES.ADDRESS_FULL_ALL;\n};\n\nexport const addressFullPageView: AppReducer = (state) => {\n    state.addressFullPage.nextFocus = computeNextFocus(state);\n    state.addressFullPage.addressInputValue = state.userModel.address;\n    state.addressFullPage.phoneNumberInputValue = formatPhoneInput(state.userModel.phoneNumber);\n    state.addressFullPage.apartmentInputValue = state.userModel.apartment;\n    state.addressFullPage.entranceInputValue = state.userModel.entrance;\n    state.addressFullPage.floorInputValue = state.userModel.floor;\n    state.addressFullPage.doorCodeInputValue = state.userModel.doorCode;\n    state.addressFullPage.isPhoneValid = state.userModel.isPhoneValid;\n    state.addressFullPage.isSubmitButtonDisabled = !(state.userModel.phoneNumber && state.userModel.isPhoneValid);\n};\n","import { splitByThousands } from 'tools/split-by-thousands';\nimport { AppState, AppReducer } from 'store/constants';\nimport { ROUTES } from 'store/constants/router';\nimport { selectPathname } from 'store/selectors';\nimport { OrderStatus } from 'store/constants/orderStatus';\n\nconst getOrderStatusTitle = (state: AppState): string =>\n    state.orderStatusData.orderId ? `Заказ #${state.orderStatusData.orderId}` : 'Статус заказа';\n\nconst routeToTitleMap: Record<string, (state: AppState) => string> = {\n    [ROUTES.CATALOG]: () => 'Самокат',\n    [ROUTES.CART]: () => 'Корзина',\n    [ROUTES.SUCCESS]: (state) => `Заказ #${state.cart.orderId}`,\n    [ROUTES.ERROR]: () => 'Самокат',\n    [ROUTES.NO_AREA]: () => 'Адрес доставки',\n    [ROUTES.ADDRESS_FULL_ALL]: () => 'Адрес доставки и телефон',\n    [ROUTES.ADDRESS_SIMPLE_QUESTION]: () => 'Адрес доставки',\n    [ROUTES.ADDRESS_SIMPLE_GUIDE]: () => 'Адрес доставки',\n    [ROUTES.ADDRESS_SIMPLE]: () => 'Адрес доставки',\n    [ROUTES.STATUS_SUMMARY]: getOrderStatusTitle,\n    [ROUTES.STATUS_DETAILS]: getOrderStatusTitle,\n    [ROUTES.STATUS_REPORT]: getOrderStatusTitle,\n};\n\nconst formatDate = (date: Date) =>\n    date.toLocaleString('ru-RU', {\n        day: 'numeric',\n        month: 'long',\n        hour: 'numeric',\n        minute: 'numeric',\n    });\n\nconst getTitle = (state: AppState) => {\n    const pathname = selectPathname(state);\n\n    return routeToTitleMap[pathname]?.(state) ?? '';\n};\n\nconst getSubtitle = (state: AppState) => {\n    const pathname = selectPathname(state);\n\n    switch (pathname) {\n        case ROUTES.STATUS_SUMMARY:\n        case ROUTES.STATUS_DETAILS:\n        case ROUTES.STATUS_REPORT: {\n            if (state.orderStatusData.orderStatus !== OrderStatus.INITIAL) {\n                const { orderDate } = state.orderStatusData;\n                return orderDate ? formatDate(orderDate) : '';\n            }\n\n            return '';\n        }\n\n        case ROUTES.SUCCESS: {\n            return formatDate(state.cart.date);\n        }\n\n        default: {\n            return '';\n        }\n    }\n};\n\nconst getAddress = (state: AppState) => ({\n    text: state.userData.address,\n    isVisible: selectPathname(state) === ROUTES.CATALOG,\n});\n\nconst getCart = (state: AppState) => ({\n    isVisible: state.cart.totalCount > 0 && selectPathname(state) === ROUTES.CATALOG,\n    count: state.cart.totalCount,\n    price: splitByThousands(Math.ceil(state.cart.totalPrice / 100)),\n});\n\nconst routeToVisibilityMap: Record<string, boolean> = {\n    [ROUTES.CATALOG]: true,\n    [ROUTES.CART]: true,\n    [ROUTES.SUCCESS]: true,\n    [ROUTES.STATUS_DETAILS]: true,\n    [ROUTES.STATUS_SUMMARY]: true,\n    [ROUTES.STATUS_REPORT]: true,\n    [ROUTES.ERROR]: true,\n    [ROUTES.NO_AREA]: true,\n    [ROUTES.ADDRESS_FULL_ALL]: true,\n    [ROUTES.ADDRESS_SIMPLE_QUESTION]: true,\n    [ROUTES.ADDRESS_SIMPLE_GUIDE]: true,\n    [ROUTES.ADDRESS_SIMPLE]: true,\n};\n\nconst isVisible = ({ router }: AppState) => routeToVisibilityMap[router.location.pathname] || false;\n\nexport const headerView: AppReducer = (state) => {\n    const { header } = state.layout;\n\n    header.title = getTitle(state);\n    header.subtitle = getSubtitle(state);\n    header.address = getAddress(state);\n    header.cart = getCart(state);\n    header.isVisible = isVisible(state);\n    header.isBackButtonVisible = Boolean(window.history.length);\n};\n","import { AppReducer, AppState } from 'store/constants';\nimport { OrderErrorPayload } from 'store/constants/native';\n\nconst mapOrderErrorTypeToProps: Record<OrderErrorPayload['type'], AppState['errorPage']> = {\n    partner: {\n        title: 'Не получилось оформить заказ',\n        subtitle: 'Пожалуйста, попробуйте ещё раз',\n        retryButtonText: 'Повторить',\n        closeButtonText: 'Очень жаль',\n    },\n    payment: {\n        title: 'Не получилось оформить заказ',\n        subtitle: 'Пожалуйста, попробуйте ещё раз',\n        retryButtonText: 'Повторить',\n        closeButtonText: 'Очень жаль',\n    },\n    timing: {\n        title: 'Закрыто',\n        subtitle: 'Часы работы с 8:00 до 23:00, \\nбез обеда и выходных',\n        retryButtonText: 'Повторить',\n        closeButtonText: 'Зайду позже',\n    },\n};\n\nexport const errorPageView: AppReducer = (state, action) => {\n    switch (action.type) {\n        case 'ORDER_ERROR': {\n            state.errorPage = mapOrderErrorTypeToProps[action.payload.type];\n            break;\n        }\n        case 'LAST_ORDER_ERROR': {\n            state.errorPage = {\n                title: 'Не получилось получить статус заказа',\n                subtitle: 'Пожалуйста, попробуйте ещё раз',\n                retryButtonText: 'Повторить',\n                closeButtonText: 'Очень жаль',\n            };\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n};\n","import { AppReducer } from 'store/constants';\nimport { OrderStatus, OrderStateProductItem, mapOrderStatusToCategory } from 'store/constants/orderStatus';\nimport { formatPhone } from 'tools/phoneNumber';\nimport { LabelProps } from 'components/Label/Label';\nimport { StatusDetailsListItemViewProps } from 'pages/StatusDetails/ListItem/StatusDetailsListItem';\n\nimport {\n    getFormattedPersonalAddress,\n    getWrapperYShift,\n    prepareTopGradientVisible,\n    prepareBottomGradientVisible,\n} from '../helpers/cartPage';\n\nconst itemHeight = 152;\n\nconst mapOrderStatusToSummaryText: Record<OrderStatus, string[]> = {\n    [OrderStatus.INITIAL]: [''],\n    [OrderStatus.INVOICE_CREATED]: ['Заказ создан, но не оплачен'],\n    [OrderStatus.FUNDS_RESERVED]: ['Заказ создан и оплачен'],\n    [OrderStatus.CONFIRMED_BY_PARTNER]: ['Заказ принят'],\n    [OrderStatus.DELIVERING]: ['Заказ в доставке'],\n    [OrderStatus.DELIVERED]: ['Заказ доставлен'],\n    [OrderStatus.CANCEL_BY_PARTNER]: ['Заказ отменен'],\n    [OrderStatus.CANCEL_BY_CUSTOMER]: ['Заказ отменен'],\n    [OrderStatus.CANCEL_BY_PAYMENT]: ['Заказ отменен'],\n    [OrderStatus.PAID]: ['Заказ доставлен'],\n    [OrderStatus.CANCELLED]: ['Заказ отменен'],\n    [OrderStatus.ERROR]: ['Ошибка обработки заказа'],\n};\n\nconst getLabel = (item: OrderStateProductItem): LabelProps | undefined => {\n    if (item.formedQuantity === 0) {\n        return {\n            type: 'sold-out',\n        };\n    }\n\n    if (item.formedQuantity !== item.originalQuantity) {\n        return {\n            type: 'you-want',\n            content: `${item.originalQuantity}`,\n        };\n    }\n\n    if (item.formedPrice.value !== item.originalPrice.value) {\n        return {\n            type: 'price-changed',\n            content: `${item.originalPrice.value}`,\n        };\n    }\n\n    return undefined;\n};\n\nconst getOrder = (productList: OrderStateProductItem[]) =>\n    [...productList]\n        .map((item): [string, number] => {\n            let score = 0;\n\n            score += 100 * Number(item.formedQuantity === 0);\n            score +=\n                10 *\n                Number(\n                    item.formedQuantity !== item.originalQuantity ||\n                        item.formedPrice.value !== item.originalPrice.value,\n                );\n\n            return [item.productId, score];\n        })\n        .sort(([, scoreA], [, scoreB]) => scoreB - scoreA)\n        .map(([productId]) => productId);\n\nconst getItemsMap = (productList: OrderStateProductItem[]) =>\n    productList\n        .map((item) => ({\n            productId: item.productId,\n            imageUrl: item.imageUrl,\n            name: item.name,\n            price: item.formedPrice.value,\n            oldPrice: item.formedPrice.value !== item.originalPrice.value ? item.originalPrice.value : undefined,\n            count: item.formedQuantity,\n            label: getLabel(item),\n            disabled: item.formedQuantity === 0,\n        }))\n        .reduce((acc, item) => {\n            acc[item.productId] = item;\n            return acc;\n        }, {} as Record<string, StatusDetailsListItemViewProps>);\n\nexport const statusPageView: AppReducer = (state, action) => {\n    const { orderStatusSummaryPage, orderStatusReportPage, orderStatusDetailsPage, orderStatusData, userData } = state;\n    const { orderStatus, reportPhone, productList, formedTotalPrice } = orderStatusData;\n    const { phoneNumber } = userData;\n\n    switch (action.type) {\n        case 'statusDetails/SELECT_ITEM': {\n            orderStatusDetailsPage.selectedItemId = action.payload;\n            break;\n        }\n\n        default: {\n            break;\n        }\n    }\n\n    // summary page\n\n    orderStatusSummaryPage.isLoaded = orderStatusData.orderStatus !== OrderStatus.INITIAL;\n    orderStatusSummaryPage.title = mapOrderStatusToSummaryText[orderStatus][0] ?? '';\n    orderStatusSummaryPage.text = mapOrderStatusToSummaryText[orderStatus][1] ?? '';\n    orderStatusSummaryPage.orderStatusCategory = mapOrderStatusToCategory[orderStatus];\n\n    // report page\n\n    orderStatusReportPage.phoneNumber = formatPhone(reportPhone);\n\n    // details page\n\n    orderStatusDetailsPage.order = getOrder(productList);\n    orderStatusDetailsPage.itemsMap = getItemsMap(productList);\n    orderStatusDetailsPage.totalPrice = formedTotalPrice.value;\n\n    orderStatusDetailsPage.phoneNumber = formatPhone(phoneNumber);\n    orderStatusDetailsPage.personalAddress = getFormattedPersonalAddress(state);\n\n    orderStatusDetailsPage.selectedItemIndex = orderStatusDetailsPage.order.indexOf(\n        orderStatusDetailsPage.selectedItemId,\n    );\n\n    orderStatusDetailsPage.wrapperYShift = getWrapperYShift(\n        orderStatusDetailsPage.selectedItemIndex,\n        orderStatusDetailsPage.order.length,\n        itemHeight,\n    );\n\n    orderStatusDetailsPage.topGradientVisible = prepareTopGradientVisible(orderStatusDetailsPage.wrapperYShift);\n    orderStatusDetailsPage.bottomGradientVisible = prepareBottomGradientVisible(\n        orderStatusDetailsPage.wrapperYShift,\n        orderStatusDetailsPage.order.length,\n        itemHeight,\n    );\n};\n","/* eslint-disable no-underscore-dangle */\n/* eslint-disable @typescript-eslint/camelcase */\nimport { GO_TO_CATALOG_POOR, GO_TO_CATALOG_COMMAND } from 'mocks/goToCatalog';\nimport { ITEMS_CHANGES_MOCK } from 'mocks/itemsChanges';\nimport { SHOW_ITEMS_MOCK } from 'mocks/showItems';\nimport { lastOrderInfoMock } from 'mocks/lastOrderInfo';\nimport { createStore as createReduxStore, Middleware, applyMiddleware, compose, StoreEnhancer } from 'redux';\nimport { routerMiddleware, push, replace, goBack, LOCATION_CHANGE } from 'connected-react-router';\nimport thunk from 'redux-thunk';\nimport { applyItemsChanges, revertUserChanges } from 'store/actions/app';\nimport { getCountById } from 'store/reducers/helpers/catalogPage';\nimport { getHasValidAddress } from 'store/reducers/view/addressSimplePage';\nimport {\n    addressFullInputThunk,\n    addressFullSuccessThunk,\n    addressFullValidationOkThunk,\n} from 'store/thunks/addressFullPage';\nimport {\n    addressGuideThunk,\n    addressInputAddThunk,\n    addressInputDeclineThunk,\n    addressInputThunk,\n    goBackToStartAndReplaceThunk,\n    goToAddressFullAllThunk,\n    goToCatalogThunk,\n    goToNoAreaThunk,\n    goToPromoThunk,\n    goToValidationThunk,\n    validationOkThunk,\n} from 'store/thunks/native';\nimport { history } from 'tools/history';\nimport { AppStateInterface } from 'types/app-state';\n\nimport { AssistantSdkCommand } from './constants/native';\nimport { AssistantSdkServerAction } from './constants/server';\nimport { ROUTES } from './constants/router';\nimport { AppState, AppBaseAction, AppMiddleware, AppDispatch } from './constants';\nimport { getRootReducer } from './reducers';\nimport {\n    showItemsAction,\n    addItemAction,\n    removeAllAction,\n    removeItemAction,\n    addressInputClearAction,\n    addressFullInputAddAction,\n    addressFullInputClearAction,\n    addressFullValidationErrorAction,\n    askAgainForOrderStatusFinalAction,\n    goBackAction,\n    askAgainForOrderStatusAction,\n    orderErrorAction,\n    itemsChangesAction,\n    goToWaitAction,\n    addressFullCommentAction,\n    lastOrderInfoAction,\n    lastOrderErrorAction,\n    lastOrderEmptyAction,\n    orderSuccessAction,\n} from './actions/native';\nimport {\n    askForOrderStatusFinalAction,\n    askForOrderStatusAction,\n    askForStockAction,\n    askForItemsChangesAction,\n    pageChangeAction,\n    askForLastOrderInfoAction,\n    openPaymentAction,\n} from './actions/server';\nimport { selectPathname } from './selectors';\nimport { ScenarioUser, ScenarioUserAddress, StoreUser } from './constants/user';\n\nconst serverActionMiddleware: AppMiddleware = ({ dispatch, getState }) => (next) => (action) => {\n    switch (action.type) {\n        case 'CLOSE_APP': {\n            window.AssistantClient.close();\n            break;\n        }\n        case 'ASK_FOR_STOCK': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: SHOW_ITEMS_MOCK,\n                    });\n                }, 500);\n\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'ADD_ITEM',\n                            item: '21ff407a-fa98-11e8-80c5-0cc47a817925',\n                            count: '5',\n                        },\n                    });\n                }, 1000);\n\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'ADD_ITEM',\n                            item: '21ff407c-fa98-11e8-80c5-0cc47a817925',\n                            count: '2',\n                        },\n                    });\n                }, 1500);\n            }\n\n            break;\n        }\n        case 'ASK_FOR_ITEMS_CHANGES': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line\n                        smart_app_data: ITEMS_CHANGES_MOCK,\n                    });\n                }, 500);\n            }\n\n            break;\n        }\n        case 'ADDRESS_SUBMIT': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                setTimeout(() => {\n                    window.AssistantClient.onData(GO_TO_CATALOG_COMMAND);\n                }, 500);\n            }\n\n            break;\n        }\n        case 'ADDRESS_FULL_SUBMIT': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                window.AssistantClient.onData({\n                    type: 'smart_app_data',\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    smart_app_data: {\n                        command: 'GO_TO_VALIDATION',\n                    },\n                });\n            }\n\n            break;\n        }\n        case 'ASK_FOR_ORDER_STATUS': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                window.AssistantClient.onData({\n                    type: 'smart_app_data',\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    smart_app_data: {\n                        command: 'ASK_AGAIN_FOR_ORDER_STATUS_FINAL',\n                    },\n                });\n            }\n\n            break;\n        }\n        case 'ASK_FOR_ORDER_STATUS_FINAL': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                window.AssistantClient.onData({\n                    type: 'smart_app_data',\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    smart_app_data: {\n                        command: 'VALIDATION_OK',\n                        status: true,\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        order_id: '364528',\n                        date: '2020-05-11T10:35:08.003578+03:00',\n                    },\n                });\n            }\n\n            break;\n        }\n        case 'MAKE_PURCHASE': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'GO_TO_WAIT',\n                        },\n                    });\n                }, 500);\n            }\n\n            break;\n        }\n        case 'ASK_FOR_LAST_ORDER_INFO': {\n            window.AssistantClient.sendData({ action_id: action.type });\n\n            // эмуляция ответа бэка для отладки в браузере\n            if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                setTimeout(() => {\n                    window.AssistantClient.onData({\n                        type: 'smart_app_data',\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        smart_app_data: {\n                            command: 'LAST_ORDER_INFO',\n                            info: lastOrderInfoMock,\n                        },\n                    });\n                }, 500);\n            }\n\n            break;\n        }\n        case 'PAGE_CHANGE': {\n            window.AssistantClient.sendData({ action_id: action.type });\n            break;\n        }\n        case 'OPEN_PAYMENT': {\n            window.AssistantClient.sendData({ action_id: action.type });\n            break;\n        }\n        /**\n         * tldr; В кейсе LOCATION_CHANGE все dispatch'и нужно ОБЯЗАТЕЛЬНО оборачивать в setTimeout.\n         * Нельзя влазить и диспатчить action'ы перед LOCATION_CHANGE, от этого ломается\n         * взаимодействие connected-react-router и history.\n         *\n         * Внимание! Перед прочтением этого коммента лучше пойти взять бутылку чего нибудь покрепче,\n         * потому что без нее не разобраться.\n         *\n         * Так вот, для понимания того, почему это нужно делать. Сперва, нужно понять то,\n         * как работает навигация в кишках connected-react-router и history.\n         * Предположим, мы хотим перейти на другую страницу. Для этого\n         * dispatch'им push action react-connected-router'a с типом @@router/CALL_HISTORY_METHOD\n         * который подхватывает router middleware и вызывает\n         * соответствующий метод (push) у библиотеки history.\n         * В результате чего history меняет урл через History API браузера\n         * и обновляет свой стейт. После оповещает слушателей, подписанных на это.\n         * Внутри connected-react-router'а вызывается обработчик, который подписан\n         * на изменение стейта (локального, внутри библиотеки) history.\n         * Он dispatch'ит action, с типом @@router/LOCATION_CHANGE, который должен долететь\n         * до редюсера connected-react-router’а и актуализировать (синкнуть со стейтом в history) стейт router'a.\n         * После чего на изменение стейта срабатывает обработчик который обычно триггерит рендер react'а,\n         * но у connected-react-router’a есть свой такой, который нужен для того,\n         * чтобы синкать стейт router'a в сторе и стейт пакета history.\n         * То есть в обратную сторону. Вот в этом то месте и происходит рассинхрон.\n         *\n         * Из-за того что этот обработчик в connected-react-router'е не смотрит на action,\n         * который к нему прилетает (redux его не прокидывает), он пытается синкать\n         * состояния на каждый чих. Валидно убеждается в том, что состояния разные из-за того что history\n         * уже внесла в свой стейт изменения, а редюсер router'a еще не отработал, потому что\n         * до него влез другой action.\n         * После чего вызывает соответствующий метод у history, который снова меняет ее состояние\n         * и снова триггерит об этом экшен и все это еще больше запутывается.\n         **/\n        case LOCATION_CHANGE: {\n            const state = getState();\n\n            const currentPathname = selectPathname(state);\n            const nextPathname = action.payload.location.pathname;\n\n            /**\n             * Кейс LOCATION_CHANGE отвечает за сайд эффекты во время переходов\n             * между экранами. Может случиться так что реплейсится текущий экран\n             * (если мы с каталога пошли в ввода адреса, а потом вычистили историю),\n             * и в этом случае делать ничего не нужно.\n             */\n            if (currentPathname === nextPathname) {\n                break;\n            }\n\n            switch (currentPathname) {\n                case ROUTES.CATALOG:\n                case ROUTES.CART: {\n                    setTimeout(() => {\n                        dispatch(applyItemsChanges());\n                    });\n\n                    break;\n                }\n                case ROUTES.ADDRESS_SIMPLE:\n                case ROUTES.ADDRESS_SIMPLE_QUESTION: {\n                    /**\n                     * Если мы возвращаемся обратно на страницу ввода\n                     * полного адреса со страницы ввода базового адреса,\n                     * без сохранения, то нужно вернуть все поля в исходное\n                     * положение, но есть нюанс ;)\n                     */\n                    if (nextPathname === ROUTES.ADDRESS_FULL_ALL) {\n                        /**\n                         *  Если удалить один символ в инпуте, а потом ввести его,\n                         *  то адрес не поменяется (строковое значение), но все остальные поля\n                         *  (дом, улица, город) будут сброшены (потому что они сбрасываются при\n                         *  изменении значения инпуте).\n                         *  Поэтому здесь так же есть проверка на заполненность.\n                         */\n                        const isAddressChanged = state.userData.address !== state.userModel.address;\n                        const hasValidAddress = getHasValidAddress(state.userModel);\n                        if (!hasValidAddress || isAddressChanged) {\n                            setTimeout(() => {\n                                dispatch(revertUserChanges());\n                            });\n                        }\n                    }\n\n                    break;\n                }\n                case ROUTES.ADDRESS_FULL_ALL: {\n                    if (nextPathname === ROUTES.CART) {\n                        setTimeout(() => {\n                            dispatch(revertUserChanges());\n                        });\n                    }\n                    break;\n                }\n\n                default:\n                    break;\n            }\n\n            switch (nextPathname) {\n                case ROUTES.CATALOG: {\n                    if (Object.keys(state.productsData.itemsMap).length) {\n                        setTimeout(() => {\n                            dispatch(askForItemsChangesAction());\n                        });\n                    } else {\n                        setTimeout(() => {\n                            dispatch(askForStockAction());\n                        });\n                    }\n\n                    break;\n                }\n                case ROUTES.CART: {\n                    if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n                        if (!Object.keys(state.productsData.itemsMap).length) {\n                            setTimeout(() => {\n                                dispatch(askForStockAction());\n                            });\n                        }\n                    }\n\n                    setTimeout(() => {\n                        dispatch(askForItemsChangesAction());\n                    });\n\n                    break;\n                }\n\n                case ROUTES.STATUS_SUMMARY: {\n                    setTimeout(() => {\n                        dispatch(askForLastOrderInfoAction());\n                    });\n\n                    break;\n                }\n\n                default:\n                    break;\n            }\n\n            // при ините приложения прилетает LOCATION_CHANGE,\n            // это проверка нужна чтобы не слать лишний сервер экшен\n            if (currentPathname !== nextPathname) {\n                setTimeout(() => {\n                    dispatch(pageChangeAction());\n                });\n            }\n\n            break;\n        }\n        default:\n            break;\n    }\n\n    return next(action);\n};\n\nconst enhancers: StoreEnhancer[] = [];\nconst middlewares: Middleware[] = [thunk, routerMiddleware(history), serverActionMiddleware as Middleware];\n\nif (process.env.NODE_ENV !== 'production') {\n    if (typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION__) {\n        enhancers.push(window.__REDUX_DEVTOOLS_EXTENSION__());\n    }\n}\n\nexport const store = createReduxStore<AppState, AppBaseAction, {}, {}>(\n    /**\n     * TODO: прикрутить валидацию recoveryStat'a\n     * @see https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-200\n     */\n    getRootReducer(history, window.appRecoveryState as AppState),\n    compose(applyMiddleware(...middlewares), ...enhancers),\n);\nconst dispatch = store.dispatch as AppDispatch;\n\nif (process.env.NODE_ENV !== 'production') {\n    window.__store = store;\n}\n\nexport const dispatchToReduxStore = ({ smart_app_data, type }: AssistantSdkCommand) => {\n    if (type !== 'smart_app_data') {\n        return;\n    }\n\n    switch (smart_app_data.command) {\n        case 'SHOW_ITEMS':\n            dispatch(showItemsAction(smart_app_data));\n            break;\n        case 'ITEMS_CHANGES': {\n            dispatch(itemsChangesAction(smart_app_data));\n            break;\n        }\n        case 'ADD_ITEM': {\n            dispatch(addItemAction(smart_app_data));\n            break;\n        }\n        case 'REMOVE_ALL': {\n            dispatch(removeAllAction());\n            break;\n        }\n        case 'REMOVE_ITEM': {\n            dispatch(removeItemAction({ ...smart_app_data, shouldRemoveMention: true }));\n            break;\n        }\n        case 'GO_TO_CATALOG': {\n            dispatch(goToCatalogThunk(smart_app_data));\n            break;\n        }\n        case 'GO_TO_NO_AREA': {\n            dispatch(goToNoAreaThunk());\n            break;\n        }\n        case 'GO_TO_VALIDATION': {\n            dispatch(goToValidationThunk());\n            break;\n        }\n        case 'GO_TO_PROMO': {\n            dispatch(goToPromoThunk(smart_app_data));\n            break;\n        }\n        case 'GO_TO_ADDRESS_SIMPLE': {\n            dispatch(push(ROUTES.ADDRESS_SIMPLE));\n            break;\n        }\n        case 'GO_TO_ADDRESS_FULL': {\n            dispatch(goToAddressFullAllThunk());\n            break;\n        }\n        case 'VALIDATION_OK': {\n            dispatch(validationOkThunk(smart_app_data));\n            break;\n        }\n        case 'ORDER_ERROR': {\n            dispatch(orderErrorAction(smart_app_data));\n            dispatch(replace(ROUTES.ERROR));\n            break;\n        }\n        case 'ADDRESS_GUIDE': {\n            dispatch(addressGuideThunk());\n            break;\n        }\n        case 'ADDRESS_INPUT': {\n            dispatch(addressInputThunk(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_INPUT_ADD': {\n            dispatch(addressInputAddThunk(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_INPUT_DECLINE': {\n            dispatch(addressInputDeclineThunk());\n            break;\n        }\n        case 'ADDRESS_INPUT_CLEAR': {\n            dispatch(addressInputClearAction());\n            break;\n        }\n        case 'ADDRESS_FULL_SUCCESS': {\n            dispatch(addressFullSuccessThunk());\n            break;\n        }\n        case 'ADDRESS_FULL_INPUT': {\n            dispatch(addressFullInputThunk(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_FULL_INPUT_ADD': {\n            dispatch(addressFullInputAddAction(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_FULL_INPUT_CLEAR': {\n            dispatch(addressFullInputClearAction(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_FULL_COMMENT': {\n            dispatch(addressFullCommentAction(smart_app_data));\n            break;\n        }\n        case 'ADDRESS_FULL_VALIDATION_OK': {\n            dispatch(addressFullValidationOkThunk());\n            break;\n        }\n        case 'ADDRESS_FULL_VALIDATION_ERROR': {\n            dispatch(addressFullValidationErrorAction());\n            break;\n        }\n        case 'ASK_AGAIN_FOR_ORDER_STATUS_FINAL': {\n            dispatch(askAgainForOrderStatusFinalAction());\n            setTimeout(() => dispatch(askForOrderStatusFinalAction()), 500);\n            break;\n        }\n        case 'GO_TO_WAIT': {\n            dispatch(push(ROUTES.WAIT));\n            dispatch(goToWaitAction());\n            dispatch(askForOrderStatusAction());\n            break;\n        }\n        case 'GO_BACK': {\n            dispatch(goBackAction());\n            dispatch(goBack());\n            break;\n        }\n        case 'ASK_AGAIN_FOR_ORDER_STATUS': {\n            dispatch(askAgainForOrderStatusAction());\n            setTimeout(() => dispatch(askForOrderStatusAction()), 500);\n            break;\n        }\n        case 'ORDER_SUCCESS': {\n            dispatch(orderSuccessAction());\n            dispatch(openPaymentAction());\n            break;\n        }\n        case 'GO_TO_ORDER_SEARCH': {\n            dispatch(replace(ROUTES.STATUS_SUMMARY));\n            break;\n        }\n        case 'LAST_ORDER_INFO': {\n            dispatch(lastOrderInfoAction(smart_app_data));\n            break;\n        }\n        case 'LAST_ORDER_EMPTY': {\n            dispatch(lastOrderEmptyAction());\n            dispatch(goBackToStartAndReplaceThunk(ROUTES.STATUS_EMPTY));\n            break;\n        }\n        case 'LAST_ORDER_ERROR': {\n            dispatch(lastOrderErrorAction());\n            dispatch(push(ROUTES.ERROR));\n            break;\n        }\n        case 'GO_TO_LAST_ORDER_DETAILS': {\n            dispatch(push(ROUTES.STATUS_DETAILS));\n            break;\n        }\n        case 'GO_TO_LAST_ORDER_REPORT': {\n            dispatch(push(ROUTES.STATUS_REPORT));\n            break;\n        }\n        default:\n            break;\n    }\n};\n\nif (process.env.REACT_APP_ENVIRONMENT !== 'production' && module.hot) {\n    module.hot.accept('./reducers', () => {\n        // eslint-disable-next-line\n        const { getRootReducer } = require('./reducers');\n        const rootReducer = getRootReducer(history);\n\n        store.replaceReducer(rootReducer);\n    });\n}\n\ninterface ItemSelectorItem {\n    id: string;\n    title: string;\n    visible: boolean;\n    number?: number;\n}\n\nconst castCatalogItemSelectorFromStore = (state: AppState): AppStateInterface['item_selector'] => {\n    const {\n        catalogPage: { screenIndexMap },\n        productsData: { itemsMap },\n    } = state;\n\n    return {\n        ignored_words: ['добавь', 'удали'],\n        items: Object.values(itemsMap).map(\n            ({ id, name: title }): ItemSelectorItem => {\n                const number = screenIndexMap[id];\n\n                return {\n                    id,\n                    title,\n                    number,\n                    visible: Boolean(number),\n                };\n            },\n        ),\n    };\n};\n\nconst castCartItemSelectorFromStore = (state: AppState): AppStateInterface['item_selector'] => {\n    const {\n        cart: { order },\n        productsData: { itemsMap },\n    } = state;\n\n    return {\n        ignored_words: ['добавь', 'удали'],\n        items: Object.values(itemsMap).map(\n            ({ id, name: title }): ItemSelectorItem => {\n                const number = order.indexOf(id) + 1 || undefined;\n\n                return {\n                    id,\n                    title,\n                    number,\n                    visible: Boolean(number),\n                };\n            },\n        ),\n    };\n};\n\nconst castItemSelectorFromStore = (state: AppState): AppStateInterface['item_selector'] => {\n    const pathname = selectPathname(state);\n\n    switch (pathname) {\n        case ROUTES.CATALOG:\n            return castCatalogItemSelectorFromStore(state);\n\n        case ROUTES.CART:\n            return castCartItemSelectorFromStore(state);\n\n        default:\n            return {\n                ignored_words: [],\n                items: [],\n            };\n    }\n};\n\nconst serializeAddress = (storeUser: StoreUser): ScenarioUserAddress => {\n    const {\n        address,\n        city,\n        street,\n        house,\n        building,\n        floor,\n        entrance,\n        apartment,\n        doorCode,\n        addressLocationLatitude,\n        addressLocationLongitude,\n    } = storeUser;\n\n    return {\n        location: {\n            latitude: addressLocationLatitude,\n            longitude: addressLocationLongitude,\n        },\n        address_string: address,\n        city,\n        street,\n        house,\n        building,\n        floor,\n        entrance,\n        apartment,\n        door_code: doorCode,\n        confirmed: 'true',\n    };\n};\n\nconst prepareAddress = (state: AppState): ScenarioUser => {\n    let source;\n\n    switch (selectPathname(state)) {\n        case ROUTES.ADDRESS_SIMPLE:\n        case ROUTES.ADDRESS_SIMPLE_QUESTION:\n        case ROUTES.ADDRESS_FULL_ALL: {\n            source = state.userModel;\n\n            break;\n        }\n\n        default: {\n            source = state.userData;\n\n            break;\n        }\n    }\n\n    return {\n        phone_num: source.phoneNumber,\n        customer_name: source.customerName,\n        address: serializeAddress(source),\n    };\n};\n\nconst castFromStore = (): AppStateInterface => {\n    const state = store.getState();\n    const { cart } = state;\n    const pathname = selectPathname(state);\n\n    return {\n        item_selector: castItemSelectorFromStore(state),\n        foodtech: {\n            currentScreen: pathname.substring(1),\n            products: Object.keys(cart.itemsMap)\n                .map((id) => {\n                    const quantity = getCountById(state, id);\n\n                    return { id, quantity };\n                })\n                .filter(({ quantity }) => Boolean(quantity)),\n            totalPrice: {\n                value: cart.totalPrice,\n                discountValue: cart.totalPrice,\n            },\n            ...prepareAddress(state),\n        },\n    };\n};\n\nif (window.appInitialData) {\n    if (Array.isArray(window.appInitialData)) {\n        window.appInitialData.forEach(dispatchToReduxStore);\n    } else {\n        dispatchToReduxStore(window.appInitialData);\n    }\n}\n\n/* eslint-disable no-console */\nwindow.AssistantClient = window.AssistantClient || {};\n\nif (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n    // eslint-disable-next-line no-underscore-dangle\n    window.__inbox = window.__inbox || [];\n    // eslint-disable-next-line no-underscore-dangle\n    window.__outbox = window.__outbox || [];\n}\n\n/**\n * Assistand SDK API implementation:\n */\nwindow.AssistantClient.onStart = () => {\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('invoke onStart callback');\n    }\n};\n\nwindow.AssistantClient.onData = (command: AssistantSdkCommand) => {\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        // eslint-disable-next-line no-underscore-dangle\n        window.__inbox.push(command);\n    }\n\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log(`server command: ${JSON.stringify(command)}`);\n    }\n\n    dispatchToReduxStore(command);\n};\n\nwindow.AssistantClient.sendData = (message: AssistantSdkServerAction) => {\n    if (process.env.REACT_APP_ENVIRONMENT === 'development') {\n        window.AssistantClient.onRequestState();\n    }\n\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log(`sendData: ${JSON.stringify(message)}`);\n    }\n\n    if (window.AssistantHost && typeof window.AssistantHost.sendData === 'function') {\n        window.AssistantHost.sendData(JSON.stringify(message), null);\n    }\n};\n\nwindow.AssistantClient.onRequestState = () => {\n    const state = castFromStore();\n    const stateString = JSON.stringify(state);\n\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('invoke request state callback', stateString);\n    }\n\n    if (window.AssistantHost && typeof window.AssistantHost.updateState === 'function') {\n        window.AssistantHost.updateState(stateString);\n    }\n\n    return state;\n};\n\nwindow.AssistantClient.onRequestRecoveryState = () => {\n    const state = store.getState();\n\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('invoke request recovery state callback', JSON.stringify(state, null, 2));\n    }\n\n    return state;\n};\n\nwindow.AssistantClient.close = () => {\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('call close native method');\n    }\n\n    if (window.AssistantHost && typeof window.AssistantHost.close === 'function') {\n        window.AssistantHost.close();\n    }\n};\n\nif (window.AssistantHost && typeof window.AssistantHost.ready === 'function') {\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') {\n        console.log('call ready native method');\n    }\n\n    window.AssistantHost.ready();\n}\n\n// эмуляция первой команды от бэка\nif (process.env.REACT_APP_ENVIRONMENT === 'development') {\n    setTimeout(() => {\n        window.AssistantClient.onData({\n            type: 'smart_app_data',\n            // eslint-disable-next-line @typescript-eslint/camelcase\n            smart_app_data: GO_TO_CATALOG_POOR,\n        });\n    }, 100);\n}\n","import { produce } from 'immer';\nimport { History } from 'history';\nimport { mobileDetect } from 'tools/browser';\nimport { AppReducer, initialState, AppBaseAction, AppState } from 'store/constants';\nimport { twoGisSuggestsData } from 'store/reducers/data/twoGisSuggestsData';\nimport { productsData } from 'store/reducers/data/products';\nimport { productsDiffData } from 'store/reducers/data/productsDiff';\nimport { userData } from 'store/reducers/data/user';\nimport { deliveryData } from 'store/reducers/data/delivery';\nimport { orderStatusData } from 'store/reducers/data/orderStatus';\nimport { getRouterModel } from 'store/reducers/model/router';\nimport { cartModel } from 'store/reducers/model/cart';\nimport { userModel } from 'store/reducers/model/user';\nimport { catalogPageView } from 'store/reducers/view/catalogPage';\nimport { catalogPageTouchView } from 'store/reducers/view/catalogPage@touch';\nimport { cartPageView } from 'store/reducers/view/cartPage';\nimport { cartPageTouchView } from 'store/reducers/view/cartPage@touch';\nimport { addressSimplePageView } from 'store/reducers/view/addressSimplePage';\nimport { addressFullPageView } from 'store/reducers/view/addressFullPage';\nimport { headerView } from 'store/reducers/view/header';\nimport { errorPageView } from 'store/reducers/view/errorPage';\nimport { statusPageView } from 'store/reducers/view/statusPage';\n\nexport const getRootReducer = (history: History, recoveryState?: AppState) => {\n    const routerModel = getRouterModel(history);\n    const isMobile = mobileDetect();\n\n    return (state = recoveryState || initialState, action: AppBaseAction) =>\n        produce(state, (draft) => {\n            const applyReducer = (reducer: AppReducer) => reducer(draft, action);\n\n            [\n                // уровень данных\n                twoGisSuggestsData,\n                productsData,\n                productsDiffData,\n                userData,\n                deliveryData,\n                orderStatusData,\n            ].forEach(applyReducer);\n\n            [\n                // уровень бизнес логики\n                routerModel,\n                cartModel,\n                userModel,\n            ].forEach(applyReducer);\n\n            // уровень пропсов для для отрисовки компонентов\n            if (isMobile) {\n                [\n                    // мобильная версия\n                    cartPageTouchView,\n                    catalogPageTouchView,\n                    headerView,\n                ].forEach(applyReducer);\n            } else {\n                [\n                    // десктопная версия\n                    catalogPageView,\n                    cartPageView,\n                    addressSimplePageView,\n                    addressFullPageView,\n                    statusPageView,\n                    errorPageView,\n                    headerView,\n                ].forEach(applyReducer);\n            }\n        });\n};\n","import { History, LocationState } from 'history';\nimport { connectRouter, LocationChangeAction } from 'connected-react-router';\n\nimport { AppReducer } from '../../constants';\n\nexport const getRouterModel = (history: History): AppReducer => {\n    const changeRouter = connectRouter<LocationState>(history);\n\n    return (state, action) => {\n        /**\n         * @see https://github.com/supasate/connected-react-router/blob/master/src/reducer.js#L58\n         * Здесь костылим тип экшена, потому что в библиотеке\n         * криво написаны тайпинги. На самом деле, метод принимает любые экшены,\n         * но работает только LocationChangeAction (там стоит ифак на него).\n         *\n         * Проблема в том, что если не вызывать этот метод с другими экшенами,\n         * то по экшену @@INIT этот метод не вернет изначальное состояние router.\n         */\n        state.router = changeRouter(state.router, action as LocationChangeAction);\n    };\n};\n","import { useSelector as useReduxSelector } from 'react-redux';\nimport { AppState } from 'store/constants';\n\nexport function useSelector<T = unknown>(mapStateToProps: (state: AppState) => T) {\n    return useReduxSelector<AppState, T>(mapStateToProps);\n}\n","import React from 'react';\n\ninterface UseFocusInterface {\n    onReceiveFocus?: () => void;\n    onLoseFocus?: () => void;\n}\n\n/**\n * Срабатывает при получении/потери фокуса содержимым контейнера\n * Не срабатывает при переключении фокуса, пока он остается внутри контейнера\n */\nexport const useContainerFocus = ({ onReceiveFocus, onLoseFocus }: UseFocusInterface) => {\n    const [handlerTimeoutId, setHandlerTimeoutId] = React.useState(0);\n    const [isFocused, setFocused] = React.useState(false);\n\n    const handleReceiveFocus = React.useCallback(() => {\n        if (!isFocused) {\n            setFocused(true);\n            onReceiveFocus?.();\n        }\n    }, [isFocused, onReceiveFocus]);\n\n    const handleLoseFocus = React.useCallback(() => {\n        if (isFocused) {\n            setFocused(false);\n            onLoseFocus?.();\n        }\n    }, [isFocused, onLoseFocus]);\n\n    /**\n     * Планируем срабатывание handleReceiveFocus при получении фокуса контейнером или его дочерним элементом\n     */\n    const handleFocus = React.useCallback(() => setHandlerTimeoutId(setTimeout(handleReceiveFocus)), [\n        handleReceiveFocus,\n    ]);\n\n    /**\n     * Планируем срабатывание handleLoseFocus при потере фокуса контейнером или его дочерним элементом\n     */\n    const handleBlur = React.useCallback(() => setHandlerTimeoutId(setTimeout(handleLoseFocus)), [handleLoseFocus]);\n\n    /**\n     * Cбрасываем запланированные обработчики при планировании нового\n     */\n    React.useEffect(() => {\n        const timeoutId = handlerTimeoutId;\n        return () => {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n        };\n    }, [handlerTimeoutId]);\n\n    return {\n        handleFocus,\n        handleBlur,\n        isFocused,\n    };\n};\n","// TODO: FRNTND-1 mv to npm package\n\nexport const icon = {\n    xs: {\n        sizePx: 24,\n    },\n    m: {\n        sizePx: 48,\n    },\n    s: {\n        sizePx: 32,\n    },\n};\n","// TODO: FRNTND-1 mv to npm package\n\nconst widthPx = 1920;\nconst heightPx = 1080;\nconst headerHeightPx = 160;\nconst footerHeightPx = 128;\nconst contentHeightPx = heightPx - headerHeightPx - footerHeightPx;\n\nexport const layout = {\n    widthPx,\n    heightPx,\n    headerHeightPx,\n    footerHeightPx,\n    contentHeightPx,\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const HeadlineText1 = styled.div`\n    font-weight: ${font.weight.bold};\n    font-size: 64px;\n    line-height: 72px;\n    letter-spacing: -0.011em;\n`;\n\nexport const HeadlineText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 48px;\n    line-height: 56px;\n    letter-spacing: -0.022em;\n`;\n\nexport const HeadlineText3 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 40px;\n    line-height: 48px;\n    letter-spacing: -0.025em;\n`;\n\nexport const HeadlineText4 = styled.div`\n    font-weight: ${font.weight.bold};\n    font-size: 40px;\n    line-height: 48px;\n    letter-spacing: -0.025em;\n`;\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const FootnoteText1 = styled.div`\n    font-size: 28px;\n    line-height: 36px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.medium};\n`;\n\nexport const FootnoteText2 = styled.div`\n    font-size: 28px;\n    line-height: 36px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.semibold};\n`;\n","import { useDispatch as useReduxDispatch } from 'react-redux';\nimport { AppDispatch } from 'store/constants';\n\nexport const useDispatch = () => useReduxDispatch<AppDispatch>();\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const ButtonText1 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 32px;\n    line-height: 40px;\n`;\n\nexport const ButtonText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 28px;\n    line-height: 32px;\n`;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { transition } from 'style/const/transition';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport { ButtonText2 } from 'components/Text/Button';\nimport { color } from 'style/const/color';\nimport { icon } from 'style/const/icon';\n\nconst containerBorderRadiusPx = 24;\n\ninterface StyledHeaderButtonProps {\n    isVisible?: boolean;\n}\n\nconst StyledHeaderButton = styled.button<StyledHeaderButtonProps>`\n    position: relative;\n\n    display: flex;\n    align-items: center;\n\n    margin: 0 0 0 24px;\n\n    box-sizing: border-box;\n    height: 80px;\n    padding: 16px 36px;\n    border: none;\n    border-radius: ${containerBorderRadiusPx}px;\n\n    background: transparent;\n\n    font-family: inherit;\n\n    transition: background-color ${transition.default};\n    will-change: background-color;\n\n    ${focusBorderMixin({ borderRadius: containerBorderRadiusPx })}\n\n    &:focus {\n        background: ${color.button.secondary1};\n    }\n\n    &:first-of-type {\n        margin-left: 0;\n    }\n\n    ${({ isVisible }) =>\n        !isVisible &&\n        css`\n            display: none;\n        `}\n`;\n\nconst textHeightPx = icon.m.sizePx;\n\nconst StyledText = styled(ButtonText2)`\n    margin-left: 8px;\n\n    height: ${textHeightPx}px;\n    padding: 0 4px;\n\n    line-height: ${textHeightPx}px;\n\n    color: ${color.text.white};\n\n    opacity: 0.88;\n`;\n\ninterface HeaderButtonProps {\n    forwardRef?: React.RefObject<HTMLButtonElement>;\n    text: string;\n    isVisible?: boolean;\n    onClick?: () => void;\n}\n\nexport const HeaderButton: React.FC<HeaderButtonProps> = ({\n    forwardRef,\n    text,\n    onClick: handleClick,\n    children,\n    ...props\n}) => {\n    return (\n        <StyledHeaderButton ref={forwardRef} tabIndex={0} onClick={handleClick} type=\"button\" {...props}>\n            {children}\n            <StyledText>{text}</StyledText>\n        </StyledHeaderButton>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButton } from 'components/HeaderButton/HeaderButton';\nimport { icon } from 'style/const/icon';\n\nimport addressIcon from './address.svg';\n\nconst addressIconSizePx = icon.m.sizePx;\n\nconst StyledIcon = styled.div`\n    width: ${addressIconSizePx}px;\n    height: ${addressIconSizePx}px;\n\n    background-image: url('${addressIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\ninterface HeaderAddressProps {\n    forwardRef?: React.RefObject<HTMLButtonElement>;\n    isVisible: boolean;\n}\n\nexport const HeaderAddress: React.FC<HeaderAddressProps> = (props) => {\n    const dispatch = useDispatch();\n\n    const { text } = useSelector((state) => selectHeader(state).address);\n\n    const handleClick = React.useCallback(() => dispatch(push(ROUTES.ADDRESS_SIMPLE_GUIDE)), [dispatch]);\n\n    return (\n        <HeaderButton onClick={handleClick} text={text} {...props}>\n            <StyledIcon />\n        </HeaderButton>\n    );\n};\n","import React from 'react';\nimport { push } from 'connected-react-router';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButton } from 'components/HeaderButton/HeaderButton';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\n\nimport cartIcon from './HeaderCart.assets/cart.svg';\n\nconst cartIconSizePx = icon.m.sizePx;\n\nconst StyledIcon = styled.div`\n    position: relative;\n\n    width: ${cartIconSizePx}px;\n    height: ${cartIconSizePx}px;\n\n    background-image: url('${cartIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst badgeSizePx = 32;\nconst badgeOffsetPx = cartIconSizePx / 2;\n\nconst StyledBadge = styled.span`\n    position: absolute;\n    left: ${badgeOffsetPx}px;\n    bottom: ${badgeOffsetPx}px;\n\n    width: ${badgeSizePx}px;\n    height: ${badgeSizePx}px;\n    border-radius: 50%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    line-height: 24px;\n    font-size: 20px;\n    letter-spacing: -0.019em;\n\n    box-sizing: border-box;\n\n    color: ${color.text.primary};\n    background: ${color.button.primary};\n`;\n\ninterface HeaderCartProps {\n    forwardRef?: React.RefObject<HTMLButtonElement>;\n    isVisible: boolean;\n}\n\nexport const HeaderCart: React.FC<HeaderCartProps> = (props) => {\n    const dispatch = useDispatch();\n\n    const { count, price } = useSelector((state) => selectHeader(state).cart);\n\n    const handleClick = React.useCallback(() => {\n        dispatch(push(ROUTES.CART));\n    }, [dispatch]);\n\n    const text = `${price} ₽`;\n\n    return (\n        <HeaderButton onClick={handleClick} text={text} {...props}>\n            <StyledIcon>\n                <StyledBadge>{count}</StyledBadge>\n            </StyledIcon>\n        </HeaderButton>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useContainerFocus } from 'hooks/useContainerFocus';\nimport { selectHeader } from 'store/selectors';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout';\nimport { transition } from 'style/const/transition';\nimport { HeadlineText4 } from 'components/Text/Headline';\nimport { FootnoteText1 } from 'components/Text/Footnote';\n\nimport { HeaderAddress } from '../HeaderAddress/HeaderAddress';\nimport { HeaderCart } from '../HeaderCart/HeaderCart';\n\nimport backButtonIcon from './Header.assets/chevron-left.svg';\nimport logoIcon from './Header.assets/logo.svg';\n\nconst headerPaddingTopPx = 32;\n\ninterface StyledHeaderProps {\n    isVisible: boolean;\n}\n\nconst StyledHeader = styled.div<StyledHeaderProps>`\n    position: relative;\n\n    height: ${layout.headerHeightPx}px;\n\n    box-sizing: border-box;\n    padding: ${headerPaddingTopPx}px 88px 0 128px;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    --spatial-navigation-contain: contain;\n\n    opacity: ${({ isVisible }) => Number(isVisible)};\n\n    transition: opacity ${transition.default};\n`;\n\nconst backButtonTopPx = 24 + headerPaddingTopPx;\n\nconst backButtonIconSizePx = icon.m.sizePx;\n\nconst StyledBackButton = styled.span`\n    position: absolute;\n    top: ${backButtonTopPx}px;\n    left: 24px;\n\n    width: 80px;\n    height: 80px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &::before {\n        content: '';\n\n        display: block;\n        width: ${backButtonIconSizePx}px;\n        height: ${backButtonIconSizePx}px;\n\n        background-image: url(${backButtonIcon});\n        background-repeat: no-repeat;\n        background-size: contain;\n    }\n`;\n\nconst StyledSection = styled.div`\n    display: flex;\n    align-items: center;\n`;\n\nconst logoSizePx = 72;\n\nconst StyledLogo = styled.div`\n    width: ${logoSizePx}px;\n    height: ${logoSizePx}px;\n    border-radius: 16px;\n\n    background-image: url(${logoIcon});\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst StyledTitle = styled(HeadlineText4)`\n    color: ${color.text.white};\n`;\n\nconst StyledSubtitle = styled(FootnoteText1)`\n    color: ${color.text.secondary};\n`;\n\nconst StyledCaption = styled.div`\n    margin-left: 24px;\n\n    display: flex;\n\n    flex-direction: column;\n`;\n\nconst cartButtonRef = React.createRef<HTMLButtonElement>();\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const Header: React.FC = ({ children, ...props }) => {\n    const { title, subtitle, isBackButtonVisible, isVisible: isHeaderVisible } = useSelector(selectHeader);\n    const isAddressVisible = useSelector((state) => selectHeader(state).address.isVisible);\n    const isCartVisible = useSelector((state) => selectHeader(state).cart.isVisible);\n    const hasSubtitle = Boolean(subtitle);\n\n    const handleReceiveFocus = React.useCallback(() => {\n        if (isCartVisible) {\n            cartButtonRef.current?.focus();\n        }\n    }, [isCartVisible]);\n\n    const { handleFocus, handleBlur } = useContainerFocus({\n        onReceiveFocus: handleReceiveFocus,\n    });\n\n    return (\n        <StyledHeader isVisible={isHeaderVisible} {...props} onFocus={handleFocus} onBlur={handleBlur}>\n            {isBackButtonVisible && <StyledBackButton />}\n            <StyledSection>\n                <StyledLogo />\n                <StyledCaption>\n                    <StyledTitle>{title}</StyledTitle>\n                    {hasSubtitle ? <StyledSubtitle>{subtitle}</StyledSubtitle> : null}\n                </StyledCaption>\n            </StyledSection>\n            <StyledSection>\n                <HeaderAddress isVisible={isAddressVisible} />\n                <HeaderCart forwardRef={cartButtonRef} isVisible={isCartVisible} />\n            </StyledSection>\n        </StyledHeader>\n    );\n};\n","import React from 'react';\n\nconst pixelUrl = `${process.env.PUBLIC_URL}/success.png`;\n\nexport const TransparentPixel: React.FC = () => (\n    <img src={pixelUrl} alt=\"\" style={{ position: 'absolute', top: -1, left: -1 }} />\n);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Header } from 'components/Header/Header';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout';\nimport gradientBackground from 'assets/images/background-tv-sber.jpg';\nimport { TransparentPixel } from 'components/TransparentPixel/TransparentPixel';\n\nconst StyledContainer = styled.div`\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n\n    overflow: hidden;\n\n    background-color: ${color.background.default};\n    background-image: url('${gradientBackground}');\n    background-position: center;\n    background-size: cover;\n`;\n\nconst AppContent = styled.div`\n    position: relative;\n    z-index: 2;\n\n    height: ${layout.contentHeightPx}px;\n`;\n\nconst StyledHeader = styled(Header)`\n    z-index: 3;\n`;\n\nconst preventScroll = (event: React.SyntheticEvent<HTMLDivElement>) => {\n    event.currentTarget.scrollTop = 0;\n};\n\nexport const AppLayout: React.FC = ({ children }) => {\n    return (\n        <StyledContainer onScroll={preventScroll}>\n            <StyledHeader />\n            <TransparentPixel />\n            <AppContent>{children}</AppContent>\n            {/* <MapBackground isVisible={isMapVisible} maskType={maskType} /> */}\n        </StyledContainer>\n    );\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const captionLineHeightPx = 32;\n\ntype CaptionTextProps = {\n    size?: number;\n    lineHeight?: number;\n};\n\nexport const CaptionText = styled.div<CaptionTextProps>`\n    font-weight: ${font.weight.medium};\n    font-size: ${({ size }) => size || 24}px;\n    line-height: ${({ lineHeight }) => lineHeight || captionLineHeightPx}px;\n    letter-spacing: -0.022em;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/const/color';\nimport { CaptionText, captionLineHeightPx } from 'components/Text/Caption';\n\nexport type BadgeType = 'sold-out' | 'few-left' | 'sale' | 'price-changed';\n\nconst contentMap: Record<BadgeType, (s?: string) => string> = {\n    'sold-out': () => 'Раскупили',\n    'few-left': () => 'Больше нет',\n    'price-changed': () => 'Изменилась цена',\n    sale: (value) => `Скидка ${value}%`,\n};\n\nconst backgroundColorMap: Record<BadgeType, string> = {\n    'sold-out': color.background.default,\n    'few-left': color.button.warning,\n    'price-changed': color.button.warning,\n    sale: color.button.primary,\n};\n\nconst badgePaddingYPx = 8;\nconst badgeHeightPx = captionLineHeightPx + badgePaddingYPx * 2;\nconst badgeBorderRadiusPx = badgeHeightPx / 2;\n\ninterface StyledBadgeProps {\n    type: BadgeType;\n}\nconst StyledBadge = styled(CaptionText)<StyledBadgeProps>`\n    padding: ${badgePaddingYPx}px 16px;\n    border-radius: ${badgeBorderRadiusPx}px;\n\n    color: ${color.text.primary};\n    background-color: ${({ type }) => backgroundColorMap[type]};\n`;\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement> {\n    className?: string;\n    type: BadgeType;\n    content?: string;\n}\nexport const Badge: React.FC<BadgeProps> = ({ type, content, className }) => {\n    const contentProvider = contentMap[type];\n\n    return (\n        <StyledBadge className={className} type={type}>\n            {contentProvider(content)}\n        </StyledBadge>\n    );\n};\n","import React from 'react';\nimport styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport { CaptionText } from 'components/Text/Caption';\nimport { FootnoteText2 } from 'components/Text/Footnote';\n\ntype IndexBadgeSize = 'xxs' | 'xs' | 's' | 'm';\n\ninterface StyledIndexBadgeProps {\n    visible: boolean;\n    size: IndexBadgeSize;\n}\n\nconst mapSizeToPx: Record<IndexBadgeSize, number> = {\n    xxs: 22,\n    xs: 32,\n    s: 44,\n    m: 64,\n};\n\nconst mapSizeToParams: Record<IndexBadgeSize, FlattenSimpleInterpolation> = {\n    xxs: css`\n        width: ${mapSizeToPx.xxs}px;\n        height: ${mapSizeToPx.xxs}px;\n    `,\n    xs: css`\n        width: ${mapSizeToPx.xs}px;\n        height: ${mapSizeToPx.xs}px;\n    `,\n    s: css`\n        width: ${mapSizeToPx.s}px;\n        height: ${mapSizeToPx.s}px;\n    `,\n    m: css`\n        width: ${mapSizeToPx.m}px;\n        height: ${mapSizeToPx.m}px;\n    `,\n};\n\nconst StyledIndexBadge = styled.div<StyledIndexBadgeProps>`\n    position: absolute;\n\n    border-radius: 50%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    ${({ size }) => mapSizeToParams[size]};\n\n    color: ${color.text.secondary};\n\n    transition: transform ${transition.default}, opacity ${transition.default};\n\n    background: ${color.button.secondary2};\n\n    ${({ visible }) => css`\n        transform: scale(${Number(visible)});\n        opacity: ${Number(visible)};\n    `}\n`;\n\ninterface IndexBadgeProps {\n    size: IndexBadgeSize;\n    index?: number;\n}\n\nexport const IndexBadge: React.FC<IndexBadgeProps> = ({ index, size, ...props }) => {\n    return (\n        <StyledIndexBadge visible={index !== undefined && index > 0} size={size} {...props}>\n            {size === 'xxs' && (\n                <CaptionText size={10} lineHeight={12}>\n                    {index}\n                </CaptionText>\n            )}\n            {size === 'xs' && (\n                <CaptionText size={14} lineHeight={18}>\n                    {index}\n                </CaptionText>\n            )}\n            {size === 's' && <CaptionText>{index}</CaptionText>}\n            {size === 'm' && <FootnoteText2>{index}</FootnoteText2>}\n        </StyledIndexBadge>\n    );\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const BodyText1 = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 32px;\n    line-height: 40px;\n    letter-spacing: -0.019em;\n`;\n\nexport const BodyText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 32px;\n    line-height: 40px;\n    letter-spacing: -0.019em;\n`;\n\nexport const BodyText3 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 48px;\n    line-height: 60px;\n    letter-spacing: -0.025em;\n`;\n\nexport const BodyTextDev = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 48px;\n    line-height: 60px;\n    letter-spacing: -0.025em;\n`;\n","import React from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useFocusOnChange } from 'hooks/useFocusOnChange';\nimport { useSelector } from 'hooks/useSelector';\nimport { catalogSelectItemAction } from 'store/actions/catalogPage';\nimport { addItemAction } from 'store/actions/native';\nimport { Badge, BadgeProps } from 'components/Badge/Badge';\nimport { IndexBadge } from 'components/IndexBadge/IndexBadge';\nimport { BodyText1, BodyText2 } from 'components/Text/Body';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport plusIcon from 'assets/icons/plus.svg';\nimport doneIcon from 'assets/icons/done.svg';\n\nexport const cardWidthPx = 392;\nexport const cardHeightPx = 592;\nexport const cardBorderRadiusPx = 40;\n\nconst thumbSizePx = cardWidthPx;\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\nconst StyledThumb = styled.div<StyledThumbProps>`\n    display: block;\n    height: ${thumbSizePx}px;\n    width: ${thumbSizePx}px;\n\n    background: rgba(255, 255, 255, .04);\n    background-image: url('${(props) => props.imageUrl}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n\n    border-top-left-radius: ${cardBorderRadiusPx}px;\n    border-top-right-radius: ${cardBorderRadiusPx}px;\n`;\n\nconst descriptionHeightPx = cardHeightPx - thumbSizePx;\nconst descriptionPaddingPx = 32;\n\nconst StyledDescription = styled.div`\n    position: relative;\n\n    height: ${descriptionHeightPx}px;\n\n    box-sizing: border-box;\n    padding: ${descriptionPaddingPx}px;\n\n    border-bottom-left-radius: ${cardBorderRadiusPx}px;\n    border-bottom-right-radius: ${cardBorderRadiusPx}px;\n`;\n\nconst nameLineCount = 2;\n\nconst StyledName = styled(BodyText1)`\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: ${nameLineCount};\n    overflow: hidden;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPriceContainer = styled.div`\n    position: absolute;\n    bottom: 36px;\n\n    display: flex;\n`;\n\nconst StyledPrice = styled(BodyText2)`\n    color: ${color.text.primary};\n`;\n\nconst StyledOldPrice = styled(BodyText2)`\n    position: relative;\n    opacity: 0.24;\n    color: ${color.text.primary};\n    margin-left: 8px;\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: calc(50% - 2px);\n        border-top: 4px solid ${color.text.primary};\n        left: 2px;\n        right: 2px;\n    }\n`;\n\ninterface StyledCountProps {\n    isWarning?: boolean;\n}\nconst StyledCount = styled(BodyText2)<StyledCountProps>`\n    margin-left: 8px;\n\n    color: ${({ isWarning }) => (isWarning ? color.text.warning : color.text.active)};\n`;\n\nconst buttonIconSizePx = icon.m.sizePx;\nconst buttonSizePx = 72;\nconst buttonOffsetXPx = 12;\nconst buttonOffsetYPx = -52;\n\ninterface StyledButtonProps {\n    isActive: boolean;\n    isDisabled?: boolean;\n}\nconst StyledButton = styled.div<StyledButtonProps>`\n    position: absolute;\n    top: ${buttonOffsetYPx}px;\n    right: ${buttonOffsetXPx}px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    width: ${buttonSizePx}px;\n    height: ${buttonSizePx}px;\n\n    border-radius: 50%;\n\n    background-color: ${({ isDisabled }) => (isDisabled ? '#3b3f44' : color.text.active)};\n\n    opacity: 0;\n\n    transition: opacity ${transition.default}, background-color ${transition.default};\n\n    &::before {\n        content: '';\n\n        display: block;\n\n        height: ${buttonIconSizePx}px;\n        width: ${buttonIconSizePx}px;\n\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-position: center;\n\n        transition: opacity ${transition.default};\n\n        opacity: ${({ isDisabled }) => (isDisabled ? '0.56' : '1')};\n\n        background-image: url('${({ isActive }) => (isActive ? doneIcon : plusIcon)}');\n    }\n`;\n\nconst badgePositionPx = 16;\n\nconst CatalogListItemBadge = styled(Badge)`\n    position: absolute;\n    top: ${badgePositionPx}px;\n    left: ${badgePositionPx}px;\n    z-index: 1;\n`;\n\nconst StyledIndexBadge = styled(IndexBadge)`\n    top: 8px;\n    right: 8px;\n`;\n\nconst cardScaleFactor = 1 / 1.04;\nconst addActiveDurationMs = 200;\n\nconst AddAnimation = css`\n    animation-name: ${keyframes`\n        0% {\n            transform: scale(1);\n        }\n        100% {\n            transform: scale(${cardScaleFactor});\n        }\n    `};\n    animation-duration: ${addActiveDurationMs / 2}ms;\n    animation-iteration-count: 2;\n    animation-timing-function: ease-in-out;\n    animation-fill-mode: forwards;\n    animation-direction: alternate;\n`;\n\nconst shakeDurationMs = 200;\nconst shakeAmplitudePx = 10;\n\nconst ShakeAnimation = css`\n    animation-name: ${keyframes`\n        0% {\n            transform: translateX(0);\n        }\n        25% {\n            transform: translateX(${-1 * shakeAmplitudePx}px);\n        }\n        75% {\n            transform: translateX(${shakeAmplitudePx}px);\n        }\n        100% {\n            transform: translateX(0);\n        }\n    `};\n    animation-duration: ${shakeDurationMs}ms;\n    animation-iteration-count: 1;\n    animation-timing-function: ease-in-out;\n    animation-fill-mode: forwards;\n`;\n\ninterface StyledCatalogListItemProps {\n    disabled?: boolean;\n    isActive: boolean;\n    isShaking: boolean;\n}\nconst StyledCatalogListItem = styled.div<StyledCatalogListItemProps>`\n    position: relative;\n    width: ${cardWidthPx}px;\n    height: ${cardHeightPx}px;\n\n    display: flex;\n    flex-direction: column;\n    grid-row: 1;\n\n    border-radius: ${cardBorderRadiusPx}px;\n    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.1);\n    background: ${color.surface.liquid1};\n\n    transition: ${addActiveDurationMs / 2}ms ${transition.timingFn.default};\n    will-change: transform;\n    will-change: background-color;\n\n    ${focusBorderMixin({ borderRadius: cardBorderRadiusPx })}\n\n    ${({ disabled }) =>\n        !disabled &&\n        css`\n            &:focus {\n                ${StyledButton} {\n                    opacity: 1;\n                }\n            }\n        `}\n\n    ${({ disabled }) =>\n        disabled &&\n        css`\n            ${StyledDescription},\n            ${StyledThumb} {\n                opacity: 0.5;\n            }\n        `}\n\n    ${({ isActive }) =>\n        isActive &&\n        css`\n            ${AddAnimation}\n        `}\n\n    ${({ isShaking }) =>\n        isShaking &&\n        css`\n            ${ShakeAnimation}\n        `}\n`;\n\nconst useActive = (count: number) => {\n    const [isCardActive, setCardActive] = React.useState(false);\n    const [isButtonActive, setButtonActive] = React.useState(false);\n    const [displayCount, setDisplayCount] = React.useState(count);\n    const prevCountRef = React.useRef(0);\n\n    // проставление стейта нужно делать обязательно в эффекте,\n    // иначе происходит слишком много перерисовок из-за того что,\n    // мы во время рендера вызываем проставление стейта и так по кругу\n    // реакту такое не нравится\n    React.useEffect(() => {\n        if (count > prevCountRef.current) {\n            const nextCount = count;\n\n            setCardActive(true);\n\n            setTimeout(() => {\n                setButtonActive(true);\n                setDisplayCount(nextCount);\n            }, addActiveDurationMs * 0.5);\n\n            setTimeout(() => {\n                setCardActive(false);\n            }, addActiveDurationMs);\n\n            setTimeout(() => {\n                setButtonActive(false);\n            }, addActiveDurationMs * 1.5);\n        } else {\n            setDisplayCount(count);\n        }\n\n        prevCountRef.current = count;\n    }, [count]);\n\n    return {\n        isCardActive,\n        isButtonActive,\n        displayCount,\n    };\n};\n\nconst useShake = () => {\n    const [isShaking, setShaking] = React.useState(false);\n\n    const doShake = React.useCallback(() => {\n        if (!isShaking) {\n            setShaking(true);\n        }\n\n        setTimeout(() => setShaking(false), shakeDurationMs);\n    }, [isShaking, setShaking]);\n\n    return { isShaking, doShake };\n};\n\nexport interface CatalogListItemProps {\n    id: string;\n}\n\nexport interface CatalogListItemViewProps {\n    imageUrl: string;\n    count: number;\n    isWantMoreThanHave?: boolean;\n    name: string;\n    index: number;\n    price: number;\n    oldPrice?: number;\n    badge?: BadgeProps;\n    disabled?: boolean;\n    isButtonDisabled?: boolean;\n}\n\nexport const CatalogListItem: React.FC<CatalogListItemProps> = ({ id }) => {\n    const dispatch = useDispatch();\n    const itemFocusHash = useSelector(({ catalogPage }) => catalogPage.itemsFocusHashMap[id] || 0);\n    const {\n        imageUrl,\n        count,\n        isWantMoreThanHave,\n        index,\n        name,\n        price,\n        oldPrice,\n        badge,\n        disabled,\n        isButtonDisabled,\n    } = useSelector(({ catalogPage }) => catalogPage.itemsMap[id]);\n    const { isCardActive, isButtonActive, displayCount } = useActive(count);\n    const { isShaking, doShake } = useShake();\n    const handleFocus = React.useCallback(() => dispatch(catalogSelectItemAction(id)), [dispatch, id]);\n\n    const handleClick = React.useCallback(() => {\n        if (!disabled) {\n            if (isButtonDisabled) {\n                doShake();\n            } else {\n                dispatch(addItemAction({ item: id, count: '1', skipFocus: true }));\n            }\n        }\n    }, [dispatch, id, disabled, isButtonDisabled, doShake]);\n\n    const ref = useFocusOnChange<HTMLDivElement>(undefined, itemFocusHash, 400);\n\n    return (\n        <StyledCatalogListItem\n            ref={ref}\n            tabIndex={0}\n            disabled={disabled}\n            isActive={isCardActive}\n            isShaking={isShaking}\n            onFocus={handleFocus}\n            onClick={handleClick}\n        >\n            {badge ? <CatalogListItemBadge {...badge} /> : null}\n            <StyledIndexBadge size=\"m\" index={index} />\n            <StyledThumb imageUrl={imageUrl} />\n            <StyledDescription>\n                <StyledButton isActive={isButtonActive} isDisabled={isButtonDisabled} />\n                <StyledName>{name}</StyledName>\n                <StyledPriceContainer>\n                    {price ? <StyledPrice>{price} ₽</StyledPrice> : null}\n                    {oldPrice ? <StyledOldPrice>{oldPrice} ₽</StyledOldPrice> : null}\n                    {displayCount ? <StyledCount isWarning={isWantMoreThanHave}>×{displayCount}</StyledCount> : null}\n                </StyledPriceContainer>\n            </StyledDescription>\n        </StyledCatalogListItem>\n    );\n};\n","import { createAction } from 'tools/create-action';\n\nexport const catalogSelectItemAction = (payload: string) => createAction('catalog/SELECT_ITEM', payload);\n","import React from 'react';\n\nexport const useFocusOnChange = <T = HTMLElement>(\n    forwardRef: React.RefObject<T> | undefined,\n    hash: unknown,\n    timeout = 0,\n) => {\n    const ref = React.useRef<T>(null);\n\n    const onChangeFocusRef = forwardRef || ref;\n\n    React.useEffect(() => {\n        setTimeout(() => {\n            if (hash && onChangeFocusRef.current instanceof HTMLElement) {\n                onChangeFocusRef.current.focus();\n            }\n        }, timeout);\n    }, [onChangeFocusRef, hash, timeout]);\n\n    return onChangeFocusRef;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { layout } from 'style/const/layout';\n\nimport { CatalogListItem, cardHeightPx } from '../ListItem/CatalogListItem';\n\nconst preventScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    e.currentTarget.scrollLeft = 0;\n};\n\nconst StyledCatalogList = styled.div`\n    position: relative;\n\n    height: ${layout.contentHeightPx}px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    overflow: hidden;\n    --spatial-navigation-contain: contain;\n`;\n\nexport const cardGapPx = 32;\n\nconst StyledWrapper = styled.div`\n    box-sizing: border-box;\n    width: max-content;\n    height: ${cardHeightPx}px;\n    min-width: 100%;\n\n    display: grid;\n    grid-template-columns: repeat(auto-fill, 392px);\n    grid-auto-flow: row;\n    grid-gap: ${cardGapPx}px;\n\n    will-change: transform;\n\n    transition: transform 0.4s ease-in-out;\n`;\n\nexport const CatalogList: React.FC = () => {\n    const order = useSelector(({ catalogPage }) => catalogPage.order);\n    const wrapperXShift = useSelector(({ catalogPage }) => catalogPage.wrapperXShift);\n\n    const wrapperStyle = React.useMemo(\n        () => ({\n            transform: `translateX(${-1 * wrapperXShift}px)`,\n        }),\n        [wrapperXShift],\n    );\n\n    return (\n        <StyledCatalogList onScroll={preventScroll}>\n            <StyledWrapper style={wrapperStyle}>\n                {order.map((itemId) => (\n                    <CatalogListItem key={itemId} id={itemId} />\n                ))}\n            </StyledWrapper>\n        </StyledCatalogList>\n    );\n};\n","import React from 'react';\nimport ContentLoader, { IContentLoaderProps } from 'react-content-loader';\n\ninterface SkeletonProps extends IContentLoaderProps {\n    itemWidth: number;\n    itemHeight: number;\n    borderRadius: number;\n    rowCount: number;\n    columnCount: number;\n    paddingBetweenColumns: number;\n    paddingBetweenRows: number;\n}\n\nexport const Skeleton: React.FC<SkeletonProps> = ({\n    itemWidth,\n    itemHeight,\n    borderRadius,\n    rowCount,\n    columnCount,\n    paddingBetweenColumns,\n    paddingBetweenRows,\n    ...props\n}) => {\n    const list = Array.from(Array(columnCount)).map((_, columnIndex) =>\n        // eslint-disable-next-line no-shadow\n        Array.from(Array(rowCount)).map((_, rowIndex) => (\n            <rect\n                key={`${columnIndex} ${rowIndex}`}\n                x={columnIndex * (itemWidth + paddingBetweenColumns)}\n                y={rowIndex * (itemHeight + paddingBetweenRows)}\n                width={itemWidth}\n                height={itemHeight}\n                rx={borderRadius}\n                ry={borderRadius}\n            />\n        )),\n    );\n\n    return <ContentLoader {...props}>{list}</ContentLoader>;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Skeleton } from 'components/Skeleton/Skeleton';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout';\n\nimport { cardWidthPx, cardHeightPx } from '../ListItem/CatalogListItem';\nimport { cardGapPx } from '../List/CatalogList';\n\nconst columnCount = Math.floor((layout.widthPx + cardGapPx) / (cardWidthPx + cardGapPx)) + 1;\n\nconst getWidthByCount = (count: number) => cardWidthPx * count + cardGapPx * (count - 1);\n\nconst skeletonWidthPx = getWidthByCount(columnCount);\n\nconst skeletonPaddingXPx = (layout.widthPx - getWidthByCount(columnCount - 1)) / 2;\nconst skeletonPaddingYPx = (layout.contentHeightPx - cardHeightPx) / 2;\n\nconst backgroundColor = color.surface.liquid1;\nconst foregroundColor = color.surface.liquid2;\n\nconst StyledRoot = styled.div`\n    box-sizing: border-box;\n    height: ${layout.contentHeightPx}px;\n    padding-left: ${skeletonPaddingXPx}px;\n    padding-top: ${skeletonPaddingYPx}px;\n`;\n\nexport const CatalogSkeleton: React.FC = () => (\n    <StyledRoot>\n        <Skeleton\n            width={skeletonWidthPx}\n            height={cardHeightPx}\n            backgroundColor={backgroundColor}\n            foregroundColor={foregroundColor}\n            itemWidth={cardWidthPx}\n            itemHeight={cardHeightPx}\n            borderRadius={40}\n            rowCount={1}\n            columnCount={columnCount}\n            paddingBetweenRows={cardGapPx}\n            paddingBetweenColumns={cardGapPx}\n            speed={2}\n        />\n    </StyledRoot>\n);\n","import React from 'react';\nimport { useSelector } from 'hooks/useSelector';\n\nimport { CatalogList } from './List/CatalogList';\nimport { CatalogSkeleton } from './Skeleton/CatalogSkeleton';\n\nexport const Catalog: React.FC = () => {\n    const order = useSelector(({ catalogPage }) => catalogPage.order);\n\n    return order.length ? <CatalogList /> : <CatalogSkeleton />;\n};\n","import styled from 'styled-components';\n\nimport bgImage from './Cart.assets/bg.jpg';\n\nexport const CartRoot = styled.div`\n    position: relative;\n    z-index: 2;\n\n    padding-left: 112px;\n    padding-right: 128px;\n\n    display: flex;\n    justify-content: space-between;\n`;\n\nexport const CartBackground = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1;\n\n    background-image: url('${bgImage}');\n`;\n","import React from 'react';\n\nexport interface MultilineTextProps {\n    text: string;\n}\n\nexport const MultilineText: React.FC<MultilineTextProps> = ({ text }) => {\n    const lineList = text.split('\\n').reduce((nodeList, line, index) => {\n        if (index) {\n            nodeList.push(<br key={`${index}br`} />);\n        }\n\n        nodeList.push(line.trim());\n\n        return nodeList;\n    }, [] as React.ReactNode[]);\n\n    return <>{lineList}</>;\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"g\", {\n  filter: \"url(#filter0_f)\"\n}, /*#__PURE__*/React.createElement(\"ellipse\", {\n  cx: 43.0039,\n  cy: 8.99902,\n  rx: 37,\n  ry: 3,\n  fill: \"#141414\"\n}));\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  filter: \"url(#filter1_f)\"\n}, /*#__PURE__*/React.createElement(\"ellipse\", {\n  cx: 43.0039,\n  cy: 7.99902,\n  rx: 25,\n  ry: 2,\n  fill: \"#121212\"\n}));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"filter\", {\n  id: \"filter0_f\",\n  x: 0.0039053,\n  y: -0.000977516,\n  width: 86,\n  height: 18,\n  filterUnits: \"userSpaceOnUse\",\n  colorInterpolationFilters: \"sRGB\"\n}, /*#__PURE__*/React.createElement(\"feFlood\", {\n  floodOpacity: 0,\n  result: \"BackgroundImageFix\"\n}), /*#__PURE__*/React.createElement(\"feBlend\", {\n  mode: \"normal\",\n  in: \"SourceGraphic\",\n  in2: \"BackgroundImageFix\",\n  result: \"shape\"\n}), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 3,\n  result: \"effect1_foregroundBlur\"\n})), /*#__PURE__*/React.createElement(\"filter\", {\n  id: \"filter1_f\",\n  x: 16.0039,\n  y: 3.99902,\n  width: 54,\n  height: 8,\n  filterUnits: \"userSpaceOnUse\",\n  colorInterpolationFilters: \"sRGB\"\n}, /*#__PURE__*/React.createElement(\"feFlood\", {\n  floodOpacity: 0,\n  result: \"BackgroundImageFix\"\n}), /*#__PURE__*/React.createElement(\"feBlend\", {\n  mode: \"normal\",\n  in: \"SourceGraphic\",\n  in2: \"BackgroundImageFix\",\n  result: \"shape\"\n}), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 1,\n  result: \"effect1_foregroundBlur\"\n})));\n\nconst SvgShadow = ({\n  svgRef,\n  title,\n  ...props\n}) => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  width: 87,\n  height: 18,\n  viewBox: \"0 0 87 18\",\n  fill: \"none\",\n  ref: svgRef\n}, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref, _ref2, _ref3);\n\nconst ForwardRef = React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(SvgShadow, _extends({\n  svgRef: ref\n}, props)));\nexport default __webpack_public_path__ + \"static/media/shadow.bb1d84f8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M10.9393 12.9393C11.5251 12.3536 12.4749 12.3536 13.0607 12.9393L18.0607 17.9393C18.6464 18.5251 18.6464 19.4749 18.0607 20.0607C17.4749 20.6464 16.5251 20.6464 15.9393 20.0607L10.9393 15.0607C10.3536 14.4749 10.3536 13.5251 10.9393 12.9393Z\",\n  fill: \"white\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M18.0607 12.9393C18.6464 13.5251 18.6464 14.4749 18.0607 15.0607L13.0607 20.0607C12.4749 20.6464 11.5251 20.6464 10.9393 20.0607C10.3536 19.4749 10.3536 18.5251 10.9393 17.9393L15.9393 12.9393C16.5251 12.3536 17.4749 12.3536 18.0607 12.9393Z\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M23.9393 15.9393C24.5251 15.3536 25.4749 15.3536 26.0607 15.9393L31.0607 20.9393C31.6464 21.5251 31.6464 22.4749 31.0607 23.0607C30.4749 23.6464 29.5251 23.6464 28.9393 23.0607L23.9393 18.0607C23.3536 17.4749 23.3536 16.5251 23.9393 15.9393Z\",\n  fill: \"white\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M31.0607 15.9393C31.6464 16.5251 31.6464 17.4749 31.0607 18.0607L26.0607 23.0607C25.4749 23.6464 24.5251 23.6464 23.9393 23.0607C23.3536 22.4749 23.3536 21.5251 23.9393 20.9393L28.9393 15.9393C29.5251 15.3536 30.4749 15.3536 31.0607 15.9393Z\",\n  fill: \"white\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M13 30C13 29.1716 13.6716 28.5 14.5 28.5H27.5C28.3284 28.5 29 29.1716 29 30C29 30.8284 28.3284 31.5 27.5 31.5H14.5C13.6716 31.5 13 30.8284 13 30Z\",\n  fill: \"white\"\n});\n\nconst SvgDeadFace = ({\n  svgRef,\n  title,\n  ...props\n}) => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  width: 42,\n  height: 42,\n  viewBox: \"0 0 42 42\",\n  fill: \"none\",\n  ref: svgRef\n}, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref, _ref2, _ref3, _ref4, _ref5);\n\nconst ForwardRef = React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(SvgDeadFace, _extends({\n  svgRef: ref\n}, props)));\nexport default __webpack_public_path__ + \"static/media/dead-face.53d3ac6a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"rect\", {\n  width: 42,\n  height: 42,\n  fill: \"none\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14 25C15.75 27.8 18.2 29 21 29C23.8 29 26.25 27.8 28 25\",\n  stroke: \"white\",\n  strokeWidth: 3,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n});\n\nconst SvgHappyFace = ({\n  svgRef,\n  title,\n  ...props\n}) => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  width: 42,\n  height: 42,\n  viewBox: \"0 0 42 42\",\n  fill: \"none\",\n  ref: svgRef\n}, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref, _ref2);\n\nconst ForwardRef = React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(SvgHappyFace, _extends({\n  svgRef: ref\n}, props)));\nexport default __webpack_public_path__ + \"static/media/happy-face.08a38b07.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { ReactComponent as ShadowSvg } from './Pin.assets/shadow.svg';\nimport { ReactComponent as DeadFaceSvg } from './Pin.assets/dead-face.svg';\nimport { ReactComponent as HappyFaceSvg } from './Pin.assets/happy-face.svg';\n\nconst badgeHeightPx = 84;\n\nexport const DeadFaceIcon = styled(DeadFaceSvg)`\n    display: block;\n    height: 72px;\n    width: 72px;\n`;\n\nexport const HappyFaceIcon = styled(HappyFaceSvg)`\n    display: block;\n    height: 72px;\n    width: 72px;\n`;\n\ninterface StyledBodyProps {\n    isBroken?: boolean;\n}\nconst StyledBody = styled.div<StyledBodyProps>`\n    position: relative;\n\n    height: ${badgeHeightPx}px;\n    min-width: ${badgeHeightPx}px;\n    padding: 6px;\n    border-radius: ${badgeHeightPx / 2}px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    text-align: center;\n\n    ${({ isBroken }) =>\n        isBroken\n            ? css`\n                  transform: rotate(-50deg);\n                  left: -40px;\n                  bottom: -20px;\n              `\n            : ''}\n`;\n\nconst kernelWidthPx = 4;\nconst kernelBorderRadiusPx = kernelWidthPx / 2;\n\ninterface StyledKernelTopProps {\n    isBroken?: boolean;\n}\nconst StyledKernelTop = styled.div<StyledKernelTopProps>`\n    position: relative;\n    display: flex;\n\n    height: 18px;\n    width: ${kernelWidthPx}px;\n\n    border-top-left-radius: ${kernelBorderRadiusPx}px;\n    border-top-right-radius: ${kernelBorderRadiusPx}px;\n    border-bottom-left-radius: ${kernelBorderRadiusPx}px;\n    border-bottom-right-radius: ${kernelBorderRadiusPx}px;\n\n    margin-bottom: -4px;\n    margin-top: -2px;\n\n    ${({ isBroken }) =>\n        isBroken\n            ? css`\n                  transform: rotate(-50deg);\n                  left: -6px;\n                  bottom: -2px;\n              `\n            : ''}\n`;\n\nconst StyledKernelBottom = styled.div`\n    height: 26px;\n    position: relative;\n    width: ${kernelWidthPx}px;\n\n    border-top-left-radius: ${kernelBorderRadiusPx}px;\n    border-top-right-radius: ${kernelBorderRadiusPx}px;\n    border-bottom-left-radius: ${kernelBorderRadiusPx}px;\n    border-bottom-right-radius: ${kernelBorderRadiusPx}px;\n`;\n\nconst StyledShadow = styled(ShadowSvg)`\n    display: block;\n    margin-top: -8px;\n\n    width: 86px;\n    height: 18px;\n`;\n\nconst StyledPin = styled.div<PinInterface>`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    ${StyledBody}, ${StyledKernelBottom}, ${StyledKernelTop} {\n        background-color: ${({ pinColor }) => pinColor};\n    }\n`;\n\ninterface PinInterface {\n    pinColor: string;\n    isBroken?: boolean;\n}\nexport const Pin: React.FC<PinInterface> = ({ pinColor, isBroken, children }) => {\n    return (\n        <StyledPin pinColor={pinColor}>\n            <StyledBody isBroken={isBroken}>{children}</StyledBody>\n            <StyledKernelTop isBroken={isBroken} />\n            <StyledKernelBottom />\n            <StyledShadow />\n        </StyledPin>\n    );\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const ParagraphText1 = styled.div`\n    font-size: 32px;\n    line-height: 44px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.regular};\n`;\n\nexport const ParagraphText2 = styled.div`\n    font-size: 32px;\n    line-height: 44px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.semibold};\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Pin, HappyFaceIcon } from 'components/Pin/Pin';\nimport { color } from 'style/const/color';\nimport { ParagraphText2 } from 'components/Text/Paragraph';\nimport { CaptionText } from 'components/Text/Caption';\nimport { BodyText1 } from 'components/Text/Body';\nimport { HeadlineText2 } from 'components/Text/Headline';\n\nexport const CartInfoContainer = styled.div`\n    position: relative;\n\n    width: 744px;\n    padding-top: 48px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nconst StyledTime = styled(ParagraphText2)`\n    color: ${color.text.primary};\n`;\n\nconst StyledUnit = styled(CaptionText)`\n    margin-top: -10px;\n\n    color: ${color.text.primary};\n`;\n\ninterface CartInfoProps {\n    time?: number;\n}\n\nexport const CartInfoPin: React.FC<CartInfoProps> = ({ time }) => (\n    <Pin pinColor={color.button.critical}>\n        {time !== undefined ? (\n            <>\n                <StyledTime>{time}</StyledTime>\n                <StyledUnit>мин</StyledUnit>\n            </>\n        ) : (\n            <HappyFaceIcon />\n        )}\n    </Pin>\n);\n\nconst StyledPersonal = styled.div`\n    margin-top: 8px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nconst StyledPersonalLocation = styled(BodyText1)`\n    -webkit-line-clamp: 2;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPersonalPhoneNumber = styled(HeadlineText2)`\n    margin-top: 60px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPersonalName = styled(BodyText1)`\n    margin-top: 8px;\n\n    color: ${color.text.primary};\n`;\n\ninterface CartPersonalProps {\n    address: string;\n    phone: string;\n    name?: string;\n}\n\nexport const CartPersonal: React.FC<CartPersonalProps> = ({ address, phone, name }) => (\n    <StyledPersonal>\n        <StyledPersonalLocation>{address}</StyledPersonalLocation>\n        <StyledPersonalPhoneNumber>{phone}</StyledPersonalPhoneNumber>\n        {name ? <StyledPersonalName>{name}</StyledPersonalName> : null}\n    </StyledPersonal>\n);\n\nexport const CartAddress = styled(HeadlineText2)`\n    margin-top: 48px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    -webkit-line-clamp: 2;\n\n    color: ${color.text.primary};\n`;\n","import { MultilineText } from 'components/MultilineText/MultilineText';\nimport React from 'react';\nimport { goToAddressFullAllThunk } from 'store/thunks/native';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { makePurchaseAction } from 'store/actions/server';\nimport { CartInfoPin, CartInfoContainer, CartPersonal, CartAddress } from 'components/Cart/CartInfo';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { ParagraphText1 } from 'components/Text/Paragraph';\nimport { color } from 'style/const/color';\n\nconst StyledAskPersonal = styled(ParagraphText1)`\n    margin-top: 14px;\n\n    text-align: center;\n\n    color: ${color.text.secondary};\n`;\n\nconst CartInfoButton = styled(Button)`\n    margin-top: 60px;\n    padding: 20px 32px;\n\n    &[disabled] {\n        opacity: 0.3;\n    }\n`;\n\nconst askPersonal = 'Чтобы сделать заказ, укажите номер телефона, \\nквартиру и другую дополнительную \\nинформацию';\n\nexport const CartInfo: React.FC = () => {\n    const dispatch = useDispatch();\n    const { address, customerName } = useSelector(({ userData }) => userData);\n    const {\n        deliveryTime,\n        isMakePurchaseButtonDisabled,\n        makePurchaseButtonView,\n        hasRequiredData,\n        phoneNumber,\n        personalAddress,\n    } = useSelector(({ cartPage }) => cartPage);\n    const handlePurchaseClick = React.useCallback(() => dispatch(makePurchaseAction()), [dispatch]);\n\n    const handleSetAddressClick = React.useCallback(() => {\n        dispatch(goToAddressFullAllThunk());\n    }, [dispatch]);\n\n    return (\n        <CartInfoContainer>\n            <CartInfoPin time={deliveryTime} />\n            <CartAddress>{address}</CartAddress>\n            {hasRequiredData ? (\n                <>\n                    <CartPersonal address={personalAddress} phone={phoneNumber} name={customerName} />\n                    <CartInfoButton\n                        view={makePurchaseButtonView}\n                        disabled={isMakePurchaseButtonDisabled}\n                        shouldFocusOnMount\n                        shouldLockAfterClick\n                        onClick={handlePurchaseClick}\n                    >\n                        Перейти к оплате\n                    </CartInfoButton>\n                </>\n            ) : (\n                <>\n                    <StyledAskPersonal>\n                        <MultilineText text={askPersonal} />\n                    </StyledAskPersonal>\n                    <CartInfoButton view={ButtonViews.primary} shouldFocusOnMount onClick={handleSetAddressClick}>\n                        Продолжить\n                    </CartInfoButton>\n                </>\n            )}\n        </CartInfoContainer>\n    );\n};\n","import styled, { css } from 'styled-components';\nimport { transition } from 'style/const/transition';\n\ninterface GradientFadeProps {\n    sizePx: number;\n    kind: 'top' | 'bottom' | 'left' | 'right';\n    isVisible: boolean;\n}\n\nexport const GradientFade = styled.div<GradientFadeProps>`\n    ${({ kind, sizePx }) => css`\n        mask-image: linear-gradient(to ${kind}, #000 calc(100% - ${sizePx}px), transparent 100%);\n        mask-size: calc(100% + ${sizePx}px) calc(100% + ${sizePx}px);\n    `}\n\n    mask-position: ${({ kind, isVisible, sizePx }) => {\n        switch (kind) {\n            case 'top':\n                return `0 ${-1 * Number(!isVisible) * sizePx}px`;\n            case 'bottom':\n                return `0 ${-1 * Number(isVisible) * sizePx}px`;\n            case 'left':\n                return `${-1 * Number(!isVisible) * sizePx}px 0`;\n            case 'right':\n                return `${-1 * Number(isVisible) * sizePx}px 0`;\n            default:\n                return '0 0';\n        }\n    }};\n\n    mask-repeat: no-repeat;\n    transition: mask-position ${transition.default}, -webkit-mask-position ${transition.default};\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { GradientFade } from 'components/GradientFade/GradientFade';\nimport { HeadlineText2 } from 'components/Text/Headline';\nimport { color } from 'style/const/color';\n\nexport const CartListContainer = styled.div`\n    position: relative;\n\n    height: 792px;\n    width: 832px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n`;\n\nconst preventScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    e.currentTarget.scrollTop = 0;\n};\n\nconst StyledScrollerContainer = styled.div`\n    position: relative;\n\n    margin-bottom: 56px;\n\n    max-height: 600px;\n    overflow: hidden;\n\n    --spatial-navigation-contain: contain;\n`;\n\nconst StyledScrollerWrapper = styled.div`\n    overflow-x: hidden;\n\n    will-change: transform;\n    transition: transform 0.5s ease-in-out;\n`;\n\ninterface CartListScrollerProps {\n    topGradientVisible: boolean;\n    bottomGradientVisible: boolean;\n    wrapperYShift: number;\n}\n\nexport const CartListScroller: React.FC<CartListScrollerProps> = ({\n    children,\n    topGradientVisible,\n    bottomGradientVisible,\n    wrapperYShift,\n}) => {\n    const wrapperStyle = React.useMemo(\n        () => ({\n            transform: `translateY(${-1 * wrapperYShift}px)`,\n        }),\n        [wrapperYShift],\n    );\n\n    return (\n        <GradientFade sizePx={160} kind=\"top\" isVisible={topGradientVisible}>\n            <GradientFade sizePx={160} kind=\"bottom\" isVisible={bottomGradientVisible}>\n                <StyledScrollerContainer onScroll={preventScroll}>\n                    <StyledScrollerWrapper style={wrapperStyle}>{children}</StyledScrollerWrapper>\n                </StyledScrollerContainer>\n            </GradientFade>\n        </GradientFade>\n    );\n};\n\nexport const CartTotalPrice = styled(HeadlineText2)`\n    padding-left: 16px;\n\n    color: ${color.text.primary};\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/const/color';\nimport { FootnoteText1 } from 'components/Text/Footnote';\n\nexport type LabelType = 'sold-out' | 'few-left' | 'sale' | 'price-changed' | 'you-want' | 'warning' | 'critical';\n\nconst contentMap: Record<LabelType, (s?: string) => string> = {\n    'sold-out': () => 'Раскупили',\n    'few-left': () => 'Больше нет',\n    'price-changed': () => 'Изменилась цена',\n    sale: (value) => `Скидка ${value}%`,\n    'you-want': (value) => `Вы хотели ${value} товара`,\n    warning: (value) => value || '',\n    critical: (value) => value || '',\n};\n\nconst textColorMap: Record<LabelType, string> = {\n    'sold-out': color.text.warning,\n    'few-left': color.text.warning,\n    'price-changed': color.text.warning,\n    sale: color.text.active,\n    'you-want': color.text.warning,\n    warning: color.text.warning,\n    critical: color.text.critical,\n};\n\ninterface StyledLabelProps {\n    type: LabelType;\n}\nconst StyledLabel = styled(FootnoteText1)<StyledLabelProps>`\n    color: ${({ type }) => textColorMap[type]};\n`;\n\nexport interface LabelProps extends React.HTMLAttributes<HTMLDivElement> {\n    className?: string;\n    type: LabelType;\n    content?: string;\n}\nexport const Label: React.FC<LabelProps> = ({ type, content, className }) => {\n    const contentProvider = contentMap[type];\n\n    return (\n        <StyledLabel className={className} type={type}>\n            {contentProvider(content)}\n        </StyledLabel>\n    );\n};\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { IndexBadge } from 'components/IndexBadge/IndexBadge';\nimport { BodyText1 } from 'components/Text/Body';\nimport { Label, LabelProps } from 'components/Label/Label';\nimport { color } from 'style/const/color';\nimport { FootnoteText1 } from 'components/Text/Footnote';\n\nconst StyledIndexBadge = styled(IndexBadge)`\n    top: 4px;\n    right: 4px;\n`;\n\nconst thumbSizePx = 120;\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\n\nconst StyledThumb = styled.div<StyledThumbProps>`\n    position: relative;\n\n    margin-right: 32px;\n\n    height: ${thumbSizePx}px;\n    width: ${thumbSizePx}px;\n\n    border-radius: 24px;\n\n    background-image: url('${({ imageUrl }) => imageUrl}');\n    background-size: contain;\n    background-position: center;\n    background-repeat: no-repeat;\n`;\n\nconst StyledInfo = styled.div`\n    margin-right: 48px;\n\n    width: 384px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n`;\n\ninterface StyledNameProps {\n    isOneLine?: boolean;\n}\nconst StyledName = styled(BodyText1)<StyledNameProps>`\n    overflow: hidden;\n\n    ${({ isOneLine }) =>\n        isOneLine &&\n        css`\n            white-space: nowrap;\n            text-overflow: ellipsis;\n        `}\n\n    ${({ isOneLine }) =>\n        !isOneLine &&\n        css`\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 2;\n        `}\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPriceContainer = styled.div`\n    display: flex;\n`;\n\nconst StyledPrice = styled(FootnoteText1)`\n    margin-top: 4px;\n\n    color: ${color.text.secondary};\n`;\n\nconst StyledOldPrice = styled(FootnoteText1)`\n    position: relative;\n    opacity: 0.24;\n    color: ${color.text.primary};\n    margin-top: 4px;\n    margin-left: 8px;\n\n    &::before {\n        content: '';\n        position: absolute;\n        top: calc(50% - 2px);\n        border-top: 4px solid ${color.text.primary};\n        left: 2px;\n        right: 2px;\n    }\n`;\n\nconst StyledLabel = styled(Label)`\n    margin-top: 4px;\n`;\n\ninterface StyledCartListItemProps {\n    disabled?: boolean;\n}\n\nexport const CartListItemRoot = styled.div<StyledCartListItemProps>`\n    position: relative;\n\n    box-sizing: border-box;\n    height: 152px;\n    width: 832px;\n    padding: 16px;\n\n    display: flex;\n    align-items: center;\n\n    ${({ disabled }) =>\n        disabled &&\n        css`\n            ${StyledThumb},\n            ${StyledName},\n            ${StyledPrice} {\n                opacity: .24;\n            }\n\n            ${StyledPrice} {\n                color: ${color.text.primary};\n            }\n        `}\n`;\ninterface CartListItemThumbProps {\n    imageUrl: string;\n    index?: number;\n}\n\nconst StyledCount = styled.span`\n    color: ${color.text.active};\n\n    &::before {\n        content: '×';\n    }\n`;\n\nexport const CartListItemThumb: React.FC<CartListItemThumbProps> = ({ imageUrl, index }) => (\n    <StyledThumb imageUrl={imageUrl}>{index !== undefined && <StyledIndexBadge size=\"s\" index={index} />}</StyledThumb>\n);\n\ninterface CartListItemInfoProps {\n    disabled?: boolean;\n    label?: LabelProps;\n    name: string;\n    price: number;\n    oldPrice?: number;\n    count?: number;\n}\n\nexport const CartListItemInfo: React.FC<CartListItemInfoProps> = ({\n    disabled,\n    label,\n    name,\n    price,\n    oldPrice,\n    count,\n}) => (\n    <StyledInfo>\n        <StyledName isOneLine={disabled || Boolean(label)}>\n            {name}\n            &nbsp;\n            {count ? <StyledCount>{count}</StyledCount> : null}\n        </StyledName>\n        <StyledPriceContainer>\n            {price ? <StyledPrice>{price} ₽</StyledPrice> : null}\n            {oldPrice ? <StyledOldPrice>{oldPrice} ₽</StyledOldPrice> : null}\n        </StyledPriceContainer>\n        {label ? <StyledLabel {...label} /> : null}\n    </StyledInfo>\n);\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { removeItemAction, addItemAction } from 'store/actions/native';\nimport { cartSelectItemAction } from 'store/actions/cartPage';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { LabelProps } from 'components/Label/Label';\nimport { BodyText2 } from 'components/Text/Body';\nimport { CartListItemRoot, CartListItemThumb, CartListItemInfo } from 'components/Cart/CartListItem';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport addIcon from 'assets/icons/add.svg';\nimport removeIcon from 'assets/icons/remove.svg';\n\nconst StyledSelector = styled.div`\n    box-sizing: border-box;\n    padding: 8px;\n    width: 216px;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n`;\n\ninterface StyledSelectorValue {\n    isWarning?: boolean;\n}\nconst StyledSelectorValue = styled(BodyText2)<StyledSelectorValue>`\n    color: ${({ isWarning }) => (isWarning ? color.text.warning : color.text.primary)};\n`;\n\ntype SelectorButtonIconType = 'less' | 'more' | 'remove';\n\nconst iconTypeIconMap: Record<SelectorButtonIconType, string> = {\n    less: removeIcon,\n    more: addIcon,\n    remove: addIcon,\n};\n\nconst selectorButtonSizePx = 64;\nconst selectorBorderRadiusPx = selectorButtonSizePx / 2;\nconst selectorIconSizePx = icon.s.sizePx;\n\ninterface StyledSelectorButtonProps {\n    iconType: SelectorButtonIconType;\n}\nconst StyledSelectorButton = styled.button<StyledSelectorButtonProps>`\n    position: relative;\n\n    height: ${selectorButtonSizePx}px;\n    width: ${selectorButtonSizePx}px;\n    border: none;\n    border-radius: ${selectorBorderRadiusPx}px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background: ${color.button.secondary1};\n\n    will-change: background-color, transform, opacity;\n    transition: ${transition.default};\n\n    &::before {\n        content: '';\n\n        height: ${selectorIconSizePx}px;\n        width: ${selectorIconSizePx}px;\n\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-position: center;\n    }\n\n    &[disabled] {\n        opacity: 0.3;\n    }\n\n    ${focusBorderMixin({ borderRadius: selectorBorderRadiusPx })}\n\n    &::before {\n        background-image: url('${({ iconType }) => iconTypeIconMap[iconType]}');\n    }\n\n    ${({ iconType }) =>\n        iconType === 'remove' &&\n        css`\n            transform: rotate(45deg);\n            background: ${color.button.critical};\n        `}\n`;\n\nconst StyledDeleteButton = styled(Button)`\n    padding: 20px 32px;\n`;\n\nexport interface CartListItemProps {\n    id: string;\n    index: number;\n}\n\nexport interface CartListItemViewProps {\n    imageUrl: string;\n    name: string;\n    price: number;\n    oldPrice?: number;\n    count: number;\n    isWantMoreThanHave?: boolean;\n    disabled?: boolean;\n    label?: LabelProps;\n    isMoreButtonDisabled?: boolean;\n}\n\nexport const CartListItem: React.FC<CartListItemProps> = ({ index, id }) => {\n    const {\n        imageUrl,\n        name,\n        price,\n        oldPrice,\n        label,\n        count,\n        isWantMoreThanHave,\n        disabled,\n        isMoreButtonDisabled,\n    } = useSelector(({ cartPage: { itemsMap } }) => itemsMap[id]);\n    const dispatch = useDispatch();\n\n    const handleLessClick = React.useCallback(() => {\n        dispatch(\n            removeItemAction({\n                item: id,\n                count: '1',\n                shouldRemoveMention: !count,\n            }),\n        );\n    }, [dispatch, id, count]);\n\n    const handleMoreClick = React.useCallback(() => {\n        dispatch(\n            addItemAction({\n                item: id,\n                count: '1',\n            }),\n        );\n    }, [dispatch, id]);\n\n    const handleRemoveClick = React.useCallback(() => {\n        dispatch(\n            removeItemAction({\n                item: id,\n                count: String(Infinity),\n                shouldRemoveMention: true,\n            }),\n        );\n    }, [dispatch, id]);\n\n    const handleFocus = React.useCallback(() => dispatch(cartSelectItemAction(id)), [dispatch, id]);\n\n    return (\n        <CartListItemRoot disabled={disabled}>\n            <CartListItemThumb imageUrl={imageUrl} index={index} />\n            <CartListItemInfo disabled={disabled} label={label} name={name} price={price} oldPrice={oldPrice} />\n            {disabled ? (\n                <StyledDeleteButton view={ButtonViews.secondary} onFocus={handleFocus} onClick={handleRemoveClick}>\n                    Удалить\n                </StyledDeleteButton>\n            ) : (\n                <StyledSelector>\n                    <StyledSelectorButton\n                        type=\"button\"\n                        aria-label=\"less\"\n                        iconType={count ? 'less' : 'remove'}\n                        onFocus={handleFocus}\n                        onClick={handleLessClick}\n                    />\n                    <StyledSelectorValue isWarning={isWantMoreThanHave}>{count}</StyledSelectorValue>\n                    <StyledSelectorButton\n                        type=\"button\"\n                        aria-label=\"more\"\n                        iconType=\"more\"\n                        disabled={isMoreButtonDisabled}\n                        onFocus={handleFocus}\n                        onClick={handleMoreClick}\n                    />\n                </StyledSelector>\n            )}\n        </CartListItemRoot>\n    );\n};\n","import { createAction } from 'tools/create-action';\n\nexport const cartSelectItemAction = (payload: string) => createAction('cart/SELECT_ITEM', payload);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { CartListContainer, CartListScroller, CartTotalPrice } from 'components/Cart/CartList';\nimport { BodyText1 } from 'components/Text/Body';\nimport { color } from 'style/const/color';\n\nimport { CartListItem } from '../ListItem/CartListItem';\n\nconst StyledMinimalPrice = styled(BodyText1)`\n    margin-top: 8px;\n\n    padding-left: 16px;\n\n    color: ${color.text.warning};\n`;\n\nexport const CartList: React.FC = () => {\n    const { order, totalPrice, toMinimumPrice, wrapperYShift, topGradientVisible, bottomGradientVisible } = useSelector(\n        ({ cartPage }) => cartPage,\n    );\n\n    const itemList = React.useMemo(\n        () => order.map((itemId, index) => <CartListItem key={itemId} index={index + 1} id={itemId} />),\n        [order],\n    );\n\n    return (\n        <CartListContainer>\n            {order.length > 0 && (\n                <CartListScroller\n                    topGradientVisible={topGradientVisible}\n                    bottomGradientVisible={bottomGradientVisible}\n                    wrapperYShift={wrapperYShift}\n                >\n                    {itemList}\n                </CartListScroller>\n            )}\n            <CartTotalPrice>Сумма заказа {totalPrice} ₽</CartTotalPrice>\n            {Boolean(toMinimumPrice) && (\n                <StyledMinimalPrice>До минимального заказа еще {toMinimumPrice} ₽</StyledMinimalPrice>\n            )}\n        </CartListContainer>\n    );\n};\n","import React from 'react';\nimport { CartRoot, CartBackground } from 'components/Cart/Cart';\n\nimport { CartInfo } from './Info/CartInfo';\nimport { CartList } from './List/CartList';\n\nexport const Cart: React.FC = () => (\n    <>\n        <CartRoot>\n            <CartList />\n            <CartInfo />\n        </CartRoot>\n        <CartBackground />\n    </>\n);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { ButtonViews, Button, ButtonSize, ButtonProps } from 'components/Button/Button';\nimport { HeadlineText1 } from 'components/Text/Headline';\nimport { BodyText1 } from 'components/Text/Body';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout';\n\nconst StyledContainer = styled.div`\n    position: relative;\n\n    height: ${layout.contentHeightPx}px;\n    padding-left: 128px;\n`;\n\nconst StyledContent = styled.div`\n    position: relative;\n    width: 816px;\n    height: ${layout.contentHeightPx}px;\n    z-index: 2;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    align-content: left;\n`;\n\nexport const DialogTitle = styled(HeadlineText1)`\n    color: ${color.text.primary};\n`;\n\nexport const DialogText = styled(BodyText1)`\n    margin-top: 24px;\n\n    min-height: 72px;\n\n    white-space: pre-wrap;\n\n    color: ${color.text.secondary};\n`;\n\nconst StyledButtonContainer = styled.div`\n    margin-left: -24px;\n    margin-top: 64px;\n\n    display: flex;\n    flex-direction: row;\n`;\n\nconst StyledButton = styled(Button)`\n    margin: 0 24px;\n\n    padding: 20px 32px;\n`;\n\nconst StyledDecorations = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1;\n\n    width: 100%;\n    height: 100%;\n`;\n\nexport interface DialogActionProps {\n    shouldFocusOnMount?: boolean;\n    buttonText: string;\n    buttonView: ButtonViews;\n    onClick: (event: React.SyntheticEvent<HTMLButtonElement>) => void;\n}\n\ninterface DialogPageProps {\n    buttons?: React.ReactNode;\n    decorations?: React.ReactNode;\n}\n\nexport const DialogPage: React.FC<DialogPageProps> = ({ children, buttons, decorations, ...props }) => {\n    return (\n        <StyledContainer {...props}>\n            <StyledContent>\n                {children}\n                {buttons && <StyledButtonContainer>{buttons}</StyledButtonContainer>}\n            </StyledContent>\n            <StyledDecorations>{decorations}</StyledDecorations>\n        </StyledContainer>\n    );\n};\n\nexport const DialogButton: React.FC<ButtonProps> = ({\n    children,\n    size = ButtonSize.s,\n    view = ButtonViews.secondary,\n    ...props\n}) => (\n    <StyledButton size={size} view={view} {...props}>\n        {children}\n    </StyledButton>\n);\n\nexport const FullscreenDecoration = styled.div`\n    position: absolute;\n    top: ${-1 * layout.headerHeightPx}px;\n    left: 0;\n\n    width: ${layout.widthPx}px;\n    height: ${layout.heightPx}px;\n\n    background-size: contain;\n    background-repeat: no-repeat;\n`;\n","import React from 'react';\nimport { useLottie, LottieConfig, Lottie } from 'react-lottie-hook';\nimport styled, { css } from 'styled-components';\nimport { transition } from 'style/const/transition';\n\ninterface StyledSpinnerProps {\n    isPaused: boolean;\n}\n\nconst StyledSpinner = styled(Lottie)<StyledSpinnerProps>`\n    position: relative;\n\n    opacity: 0;\n\n    ${({ isPaused }) =>\n        !isPaused &&\n        css`\n            opacity: 1;\n            transition: opacity ${transition.default};\n        `}\n`;\n\nconst defaultConfig: LottieConfig = {\n    renderer: 'svg',\n    loop: true,\n    autoplay: false,\n};\n\ninterface SplendidAnimationProps {\n    width: number;\n    height: number;\n    config: LottieConfig;\n    delayMs?: number;\n}\n\nexport const SplendidAnimation: React.FC<SplendidAnimationProps> = ({\n    width,\n    height,\n    config,\n    delayMs = 0,\n    ...props\n}) => {\n    const lottieOptions = React.useMemo(\n        () => ({\n            ...defaultConfig,\n            ...config,\n        }),\n        [config],\n    );\n\n    const [lottieRef, state, { pause, play }] = useLottie(lottieOptions);\n\n    // эта магия нужна, потому что Lottie может достаточно долго инициализироватся,\n    // чтобы иногдаморгать первым кадром анимации.\n    // поэтому изначально мы скрываем анимацию, а после инициализации показываем\n\n    const [isDelayed, setDelayed] = React.useState(true);\n\n    const start = React.useCallback(() => {\n        setDelayed(false);\n        play();\n    }, [setDelayed, play]);\n\n    React.useLayoutEffect(() => {\n        pause();\n        const timeoutId = setTimeout(start, delayMs);\n\n        return () => {\n            pause();\n            clearTimeout(timeoutId);\n        };\n    }, [pause, start, delayMs]);\n\n    return (\n        <StyledSpinner\n            lottieRef={lottieRef}\n            isPaused={isDelayed || state.isPaused || state.isStopped}\n            width={width}\n            height={height}\n            {...props}\n        />\n    );\n};\n","import React from 'react';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { closeAppAction } from 'store/actions/app';\nimport { ButtonViews } from 'components/Button/Button';\nimport {\n    DialogPage,\n    DialogButton,\n    DialogTitle,\n    FullscreenDecoration,\n    DialogText,\n} from 'components/DialogPage/DialogPage';\nimport { SplendidAnimation } from 'components/SplendidAnimation/SplendidAnimation';\nimport { MultilineText } from 'components/MultilineText/MultilineText';\nimport { layout } from 'style/const/layout';\n\nimport successAnimationData from './Success.assets/success.animation.json';\n\nexport const Success: React.FC = () => {\n    const dispatch = useDispatch();\n    const { deliveryTime } = useSelector(({ delivery }) => delivery);\n\n    const buttons = React.useMemo(\n        () => (\n            <DialogButton\n                shouldFocusOnMount\n                view={ButtonViews.primary}\n                onClick={() => {\n                    dispatch(closeAppAction());\n                }}\n            >\n                Очень жду\n            </DialogButton>\n        ),\n        [dispatch],\n    );\n\n    const decorations = React.useMemo(\n        () => (\n            <FullscreenDecoration>\n                <SplendidAnimation\n                    width={layout.widthPx}\n                    height={layout.heightPx}\n                    delayMs={300}\n                    config={{\n                        loop: false,\n                        animationData: successAnimationData,\n                    }}\n                />\n            </FullscreenDecoration>\n        ),\n        [],\n    );\n\n    return (\n        <DialogPage buttons={buttons} decorations={decorations}>\n            <DialogTitle>\n                <MultilineText text={`Заказ принят. \\nБудем у вас через \\n${deliveryTime} минут.`} />\n            </DialogTitle>\n            <DialogText>\n                <MultilineText text={'Чтобы узнать статус заказа, спросите \\n«Какой статус заказа?»'} />\n            </DialogText>\n        </DialogPage>\n    );\n};\n","import React from 'react';\nimport { push } from 'connected-react-router';\nimport styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { ROUTES } from 'store/constants/router';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { HeadlineText3 } from 'components/Text/Headline';\nimport { MultilineText } from 'components/MultilineText/MultilineText';\nimport { font } from 'style/const/font';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\n\nimport popcornPromo from './Promo.assets/popcorn-promo.png';\nimport popcorn1 from './Promo.assets/popcorn-box_1.png';\nimport popcorn2 from './Promo.assets/popcorn-box_2.png';\nimport popcorn3 from './Promo.assets/popcorn-box_3.png';\nimport popcorn4 from './Promo.assets/popcorn-box_4.png';\n\nconst TextContainer = styled.div`\n    position: absolute;\n    top: 80px;\n    left: 128px;\n    z-index: 2;\n\n    width: 958px;\n`;\n\nconst Title = styled.div`\n    font-weight: ${font.weight.extrabold};\n    font-size: 80px;\n    line-height: 88px;\n    letter-spacing: -0.0375em;\n\n    color: ${color.text.primary};\n`;\n\nconst Subtitle = styled(HeadlineText3)`\n    margin-top: 32px;\n\n    color: ${color.text.secondary};\n`;\n\nconst buttonsMarginTopPx = 64;\n\nconst ButtonContainer = styled.div`\n    margin-top: ${buttonsMarginTopPx}px;\n    display: flex;\n`;\n\nconst buttonMarginRightPx = 32;\n\nconst StyledButton = styled(Button)`\n    margin-right: ${buttonMarginRightPx}px;\n`;\n\nconst PopcornContainer = styled.div`\n    position: fixed;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    z-index: 1;\n\n    display: flex;\n    justify-content: center;\n`;\n\nconst popcornList: FlattenSimpleInterpolation[] = [\n    css`\n        top: 120px;\n        right: 10px;\n        width: 920px;\n        height: 902px;\n        background-image: url('${popcornPromo}');\n    `,\n    css`\n        top: 162px;\n        right: 248px;\n        width: 440px;\n        height: 783px;\n        background-image: url('${popcorn1}');\n    `,\n    css`\n        top: 110px;\n        right: 66px;\n        width: 788px;\n        height: 816px;\n        background-image: url('${popcorn2}');\n    `,\n    css`\n        top: 215px;\n        right: 229px;\n        width: 469px;\n        height: 686px;\n        background-image: url('${popcorn3}');\n    `,\n    css`\n        top: 110px;\n        right: 66px;\n        width: 788px;\n        height: 816px;\n        background-image: url('${popcorn4}');\n    `,\n];\n\ninterface PopcornProps {\n    popcornStyle: FlattenSimpleInterpolation;\n    isVisible: boolean;\n}\n\nconst Popcorn = styled.div<PopcornProps>`\n    position: absolute;\n\n    background-position: center;\n    background-size: contain;\n    background-repeat: no-repeat;\n\n    transition: opacity 1s ${transition.timingFn.default};\n\n    opacity: ${({ isVisible }) => Number(isVisible)};\n\n    ${({ popcornStyle }) => popcornStyle}\n`;\n\nconst promoTitle = 'Доставляем попкорн \\nк просмотру фильмов \\nи сериалов';\nconst promoSubTitle =\n    'Бесплатно за 15-30 минут для Москвы \\nи Санкт-Петербурга. \\nЗа 1 час в Подмосковье и Ленобласть.';\n\nexport const Promo: React.FC = () => {\n    const dispatch = useDispatch();\n    const handleClickSubmitButton = React.useCallback(() => {\n        dispatch(push(ROUTES.ADDRESS_SIMPLE_GUIDE));\n    }, [dispatch]);\n\n    return (\n        <>\n            <TextContainer>\n                <Title>\n                    <MultilineText text={promoTitle} />\n                </Title>\n                <Subtitle>\n                    <MultilineText text={promoSubTitle} />\n                </Subtitle>\n                <ButtonContainer>\n                    <StyledButton view={ButtonViews.primary} shouldFocusOnMount onClick={handleClickSubmitButton}>\n                        Хочу заказать\n                    </StyledButton>\n                </ButtonContainer>\n            </TextContainer>\n            <PopcornContainer>\n                <Popcorn isVisible popcornStyle={popcornList[0]} />\n            </PopcornContainer>\n        </>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { layout } from 'style/const/layout';\n\nimport bgImage from './LocationPage.assets/bg.jpg';\n\nconst StyledBackground = styled.div`\n    position: absolute;\n    top: -${layout.headerHeightPx}px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1;\n\n    height: ${layout.heightPx}px;\n\n    background-image: url('${bgImage}');\n`;\n\nconst StyledContainer = styled.div`\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 2;\n`;\n\ninterface LocationPageProps {\n    showMap?: boolean;\n}\n\nexport const LocationPage: React.FC<LocationPageProps> = ({ showMap = true, children }) => {\n    return (\n        <>\n            <StyledContainer>{children}</StyledContainer>\n            {showMap && <StyledBackground />}\n        </>\n    );\n};\n","import { LocationPage } from 'components/LocationPage/LocationPage';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { replace } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { ROUTES } from 'store/constants/router';\nimport { closeAppAction } from 'store/actions/app';\nimport { Pin } from 'components/Pin/Pin';\nimport { HeadlineText1 } from 'components/Text/Headline';\nimport { BodyText1 } from 'components/Text/Body';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { color } from 'style/const/color';\n\nimport faceIcon from './NoArea.assets/face.svg';\n\nconst faceIconSizePx = 36;\n\nconst StyledFaceIcon = styled.div`\n    height: ${faceIconSizePx}px;\n    width: ${faceIconSizePx}px;\n\n    background-image: url(${faceIcon});\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: contain;\n`;\n\nconst StyledTitle = styled(HeadlineText1)`\n    margin-top: 52px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledSubtitle = styled(BodyText1)`\n    margin-top: 12px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledButtonContainer = styled.div`\n    display: flex;\n    justify-content: center;\n`;\n\nconst StyledButton = styled(Button)`\n    margin-top: 64px;\n    margin-left: 40px;\n`;\n\nconst StyledContainer = styled.div`\n    display: flex;\n    height: 100%;\n\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n`;\n\nexport const NoArea: React.FC = () => {\n    const dispatch = useDispatch();\n    const address = useSelector(({ userModel }) => userModel.address);\n    const city = useSelector(({ userModel }) => userModel.city);\n\n    const handleChangeButtonClick = React.useCallback(() => {\n        dispatch(replace(ROUTES.ADDRESS_SIMPLE_GUIDE));\n    }, [dispatch]);\n\n    const handleCloseButtonClick = React.useCallback(() => {\n        dispatch(closeAppAction());\n    }, [dispatch]);\n\n    const addressString = [city, address].join(', ');\n\n    return (\n        <LocationPage>\n            <StyledContainer>\n                <Pin pinColor={color.button.disabled}>\n                    <StyledFaceIcon />\n                </Pin>\n                <StyledTitle>{addressString}</StyledTitle>\n                <StyledSubtitle>К сожалению, пока не доставляем по этому адресу</StyledSubtitle>\n                <StyledButtonContainer>\n                    <StyledButton view={ButtonViews.primary} shouldFocusOnMount onClick={handleChangeButtonClick}>\n                        Ввести другой\n                    </StyledButton>\n                    <StyledButton onClick={handleCloseButtonClick} view={ButtonViews.secondary}>\n                        Не сейчас\n                    </StyledButton>\n                </StyledButtonContainer>\n            </StyledContainer>\n        </LocationPage>\n    );\n};\n","import { DGBuildingSuggest } from 'tools/twoGis/api/suggest';\nimport { createAction, createEmptyAction } from 'tools/create-action';\n\nexport const startFetchingTwoGisSuggests = () => createEmptyAction('START_FETCHING_TWO_GIS_SUGGESTS');\n\nexport const finishFetchingTwoGisSuggests = (payload: DGBuildingSuggest[]) =>\n    createAction('FINISH_FETCHING_TWO_GIS_SUGGESTS', payload);\n","export type DGLocale =\n    | 'ru_RU' // русский (Россия),\n    | 'ru_UA' // русский(Украина),\n    | 'ru_KG' // русский(Казахстан),\n    | 'ru_KZ' // русский(Киргизия),\n    | 'ru_UZ' // русский(Узбекистан),\n    | 'uk_RU' // украинский(Россия),\n    | 'uk_UA' // украинский(Украина),\n    | 'en_RU' // английский(Россия),\n    | 'en_AE' // английский(ОАЭ),\n    | 'en_CY' // английский(Кипр),\n    | 'it_RU' // итальянский(Россия),\n    | 'it_IT' // итальянский(Россия),\n    | 'es_RU' // испанский(Россия),\n    | 'es_CL' // испанский(Кипр),\n    | 'ar_AE' // арабский(ОАЭ),\n    | 'ar_RU' // арабский(Россия),\n    | 'cs_CZ' // чешский(Чехия),\n    | 'cs_RU' // чешский(Россия),\n    | 'az_AZ'; // азербайджанский (Азербайджан).\n\ninterface DGBaseResponse {\n    meta: {\n        code: number;\n        api_version: string;\n        issue_date: string;\n    };\n}\n\nexport interface DGErrorResponse extends DGBaseResponse {\n    meta: {\n        code: number;\n        api_version: string;\n        issue_date: string;\n        error: {\n            type: string;\n            message: string;\n        };\n    };\n}\n\nexport interface DGSuccessResponse<ResponseType> extends DGBaseResponse {\n    meta: {\n        code: number;\n        api_version: string;\n        issue_date: string;\n    };\n    result: ResponseType;\n}\n\nexport type DGApiResponse<ResponseType> = DGSuccessResponse<ResponseType> | DGErrorResponse;\n\nexport const isErrorResponse = (response: DGApiResponse<unknown>): response is DGErrorResponse =>\n    'error' in response.meta;\n\nexport interface DGListResult<Item> {\n    total: number;\n    items: Item[];\n}\n\nexport interface DGLatLng {\n    lat: number;\n    lon: number;\n}\n","import * as Sentry from '@sentry/react';\nimport destination from '@turf/destination';\nimport { memoize, memoizeResolvedPromise } from 'tools/memoize';\n\nimport { getSuggests } from './api/suggest';\nimport { DGLocale, isErrorResponse } from './api/common';\n\ntype Point = [string, string];\n\ninterface SearchBox {\n    viewpoint1: Point;\n    viewpoint2: Point;\n}\n\nconst memoizedGetSuggests = memoizeResolvedPromise(getSuggests);\n\nconst primarySearchRadiusKm = 1;\n\nconst getPrimarySearchParams = memoize(\n    (longitude: string, latitude: string): SearchBox => {\n        const userLocation: [number, number] = [parseFloat(longitude), parseFloat(latitude)];\n\n        const points = [0, 90, 180, 270].map(\n            (direction) =>\n                destination(userLocation, primarySearchRadiusKm, direction, { units: 'kilometers' }).geometry\n                    ?.coordinates ?? userLocation,\n        );\n\n        const topLeft: Point = [\n            Math.min(...points.map((point) => point[0])).toFixed(6),\n            Math.max(...points.map((point) => point[1])).toFixed(6),\n        ];\n\n        const bottomRight: Point = [\n            Math.max(...points.map((point) => point[0])).toFixed(6),\n            Math.min(...points.map((point) => point[1])).toFixed(6),\n        ];\n\n        return {\n            viewpoint1: topLeft,\n            viewpoint2: bottomRight,\n        };\n    },\n);\n\nexport interface GetSuggestsListParams {\n    q: string;\n    locale: DGLocale;\n    longitude: string;\n    latitude: string;\n}\n\nconst defaultSuggestOptions = {\n    fields: ['items.address', 'items.point'],\n    suggestType: 'address',\n    type: ['building'],\n};\n\nconst getSuggestListBySearchParams = async (\n    { q, locale, longitude, latitude }: GetSuggestsListParams,\n    searchParams: SearchBox,\n) =>\n    memoizedGetSuggests({\n        ...defaultSuggestOptions,\n        q: q.toLowerCase(),\n        locale,\n        location: [longitude, latitude],\n        ...searchParams,\n    })\n        .then((response) => {\n            if (isErrorResponse(response)) {\n                if (response.meta.code === 404) {\n                    // не выкидываем ошибку, если ничего не нашли\n                    return [];\n                }\n\n                throw new Error(`Error: 2GIS Suggests List: ${response.meta.error.message}`);\n            }\n\n            return response.result.items;\n        })\n        .catch((error) => {\n            if (process.env.REACT_APP_ENVIRONMENT === 'production') {\n                Sentry.captureException(error);\n            } else {\n                // eslint-disable-next-line no-console\n                console.error(error);\n            }\n\n            return [];\n        });\n\nexport const getSuggestsList = async (params: GetSuggestsListParams) => {\n    const { q, longitude, latitude } = params;\n\n    if (q.length === 0) {\n        return [];\n    }\n\n    const searchParams = getPrimarySearchParams(longitude, latitude);\n\n    const result = await getSuggestListBySearchParams(params, searchParams);\n\n    if (!result.length) {\n        return [];\n    }\n\n    return result;\n};\n","import React from 'react';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { startFetchingTwoGisSuggests, finishFetchingTwoGisSuggests } from 'store/actions/twoGisSuggests';\nimport { TwoGisSuggestFetchingStatus } from 'store/reducers/data/twoGisSuggestsData';\nimport { getSuggestsList } from 'tools/twoGis/getSuggestsList';\n\nexport const useAddressSimpleUpdateSuggests = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressSimplePage }) => addressSimplePage.inputValue);\n    const latitude = useSelector(({ userData }) => userData.deviceLocationLatitude);\n    const longitude = useSelector(({ userData }) => userData.deviceLocationLongitude);\n    const suggestsFetchingStatus = useSelector(({ twoGisSuggestsData }) => twoGisSuggestsData.fetchingStatus);\n\n    React.useEffect(() => {\n        if (suggestsFetchingStatus !== TwoGisSuggestFetchingStatus.INITIAL) {\n            return;\n        }\n\n        dispatch(startFetchingTwoGisSuggests());\n\n        getSuggestsList({ q: inputValue, locale: 'ru_RU', latitude, longitude })\n            .then((items) => {\n                dispatch(finishFetchingTwoGisSuggests(items));\n            })\n            .catch(() => {\n                dispatch(finishFetchingTwoGisSuggests([]));\n            });\n    }, [dispatch, inputValue, latitude, longitude, suggestsFetchingStatus]);\n};\n","import { DGBuildingSuggest } from 'tools/twoGis/api/suggest';\n\nexport const buildAddressString = (suggest: DGBuildingSuggest) => {\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    const { address, full_name } = suggest;\n    /**\n     * этот ифак скорее тайпгвард\n     * саджесты без компонентов адреса фильтруются в самом начале\n     */\n    if (!address.components || !address.components.length) {\n        return;\n    }\n\n    const [addressComponent] = address.components;\n    const { street, number } = addressComponent;\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    const [city] = full_name.split(', ');\n\n    return [city, street, number].join(', ');\n};\n","import React from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { addressSelectSuggestItemAction } from 'store/actions/addressSimplePage';\nimport { buildAddressString } from 'pages/AddressSimple/AddressSimple.tools';\nimport { Button, ButtonSize, ButtonTextAlign, ButtonViews } from 'components/Button/Button';\nimport { addressSubmitThunk } from 'store/thunks/native';\n\ninterface StyledButtonProps {\n    isFlashing?: boolean;\n}\nconst StyledButton = styled(Button)<StyledButtonProps>`\n    width: 100%;\n    padding: 36px 40px;\n\n    ${({ isFlashing }) =>\n        isFlashing &&\n        css`\n            &::after {\n                animation-name: ${keyframes`\n                    0% {\n                        opacity: 1;\n                    }\n                    50% {\n                        opacity: 0;\n                    }\n                    100% {\n                        opacity: 1;\n                    }\n                `};\n                animation-iteration-count: infinite;\n                animation-timing-function: linear;\n                animation-duration: 1.5s;\n            }\n        `}\n`;\n\ninterface SuggestListItemProps {\n    id: string;\n    shouldFocusOnMount?: boolean;\n}\nexport const AddressSimpleSuggestListItem: React.FC<SuggestListItemProps> = ({ id, shouldFocusOnMount }) => {\n    const suggest = useSelector(({ twoGisSuggestsData: { itemsMap } }) => itemsMap[id]);\n    const selectedSuggestItemId = useSelector(({ addressSimplePage }) => addressSimplePage.selectedSuggestItemId);\n    const isAddressSubmitting = useSelector(({ addressSimplePage }) => addressSimplePage.isAddressSubmitting);\n    const isSelectedItem = selectedSuggestItemId === id;\n    const isDisabled = isAddressSubmitting && !isSelectedItem;\n    const isFlashing = isAddressSubmitting && isSelectedItem;\n    const dispatch = useDispatch();\n\n    const handleClick = React.useCallback(() => {\n        if (isAddressSubmitting) {\n            return;\n        }\n\n        dispatch(addressSubmitThunk());\n    }, [dispatch, isAddressSubmitting]);\n\n    const handleFocus = React.useCallback(() => {\n        dispatch(addressSelectSuggestItemAction(id));\n    }, [dispatch, id]);\n\n    const addressName = suggest && buildAddressString(suggest);\n\n    return (\n        <StyledButton\n            shouldFocusOnMount={shouldFocusOnMount}\n            disabled={isDisabled && !isFlashing}\n            isFlashing={isFlashing}\n            onFocus={handleFocus}\n            onClick={handleClick}\n            view={ButtonViews.secondary}\n            size={ButtonSize.l}\n            textAlign={ButtonTextAlign.left}\n        >\n            {addressName}\n        </StyledButton>\n    );\n};\n","import { goBack } from 'connected-react-router';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { GradientFade } from 'components/GradientFade/GradientFade';\nimport { HeadlineText1 } from 'components/Text/Headline';\nimport { useAddressSimpleUpdateSuggests } from 'pages/AddressSimple/AddressSimple.hooks';\nimport React from 'react';\nimport { color } from 'style/const/color';\nimport styled from 'styled-components';\nimport Swiper from 'swiper';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\n\nimport { AddressSimpleSuggestListItem } from './SuggestItem/AddressSimpleSuggestItem';\n\nconst slideHeight = 112;\nconst spaceBetween = 24;\nconst slideWithMarginHeight = slideHeight + spaceBetween;\nconst paddingForFocus = 8;\nconst itemsInViewport = 4;\n\nconst StyledSwiperContainer = styled.div`\n    margin: ${80 - paddingForFocus}px auto 0;\n    width: ${900 + paddingForFocus * 2}px;\n    height: ${slideWithMarginHeight * itemsInViewport - spaceBetween + paddingForFocus * 2 + slideHeight / 2}px;\n    overflow-y: hidden;\n`;\n\nconst StyledSwiperWrapper = styled.div``;\n\nconst preventScroll = (event: React.SyntheticEvent<HTMLDivElement>) => {\n    event.currentTarget.scrollTop = 0;\n};\n\nconst StyledSwiperSlide = styled.div`\n    height: ${slideHeight}px;\n    padding: 0 8px;\n`;\n\nconst StyledTitle = styled(HeadlineText1)`\n    margin-top: 48px;\n    color: ${color.text.primary};\n    text-align: center;\n`;\n\nconst StyledButton = styled(Button)`\n    width: 100%;\n    padding: 36px 0;\n`;\n\nexport const AddressSimple: React.FC = () => {\n    const dispatch = useDispatch();\n    const isAddressSubmitting = useSelector(({ addressSimplePage }) => addressSimplePage.isAddressSubmitting);\n    const suggestsListIndex = useSelector(({ addressSimplePage }) => addressSimplePage.suggestsListIndex);\n    const suggestIds = useSelector(({ addressSimplePage }) => addressSimplePage.suggests);\n    const swiperContainerRef = React.useRef<HTMLDivElement>(null);\n    const swiperRef = React.useRef<Swiper | null>(null);\n\n    useAddressSimpleUpdateSuggests();\n\n    React.useLayoutEffect(() => {\n        if (swiperContainerRef.current) {\n            swiperRef.current =\n                swiperRef.current ||\n                new Swiper(swiperContainerRef.current, {\n                    direction: 'vertical',\n                    slidesPerView: 'auto',\n                    speed: 400,\n                    spaceBetween,\n                    initialSlide: 0,\n                    slidesOffsetBefore: paddingForFocus,\n                    slidesOffsetAfter: paddingForFocus + 52,\n                });\n        }\n    }, []);\n\n    React.useLayoutEffect(() => {\n        if (swiperRef.current) {\n            swiperRef.current.updateSize();\n            swiperRef.current.updateSlides();\n            swiperRef.current.updateProgress();\n            swiperRef.current.updateSlidesClasses();\n        }\n    }, [suggestIds]);\n\n    React.useLayoutEffect(() => {\n        if (swiperRef.current) {\n            swiperRef.current.slideTo(suggestsListIndex - 1, 400);\n        }\n    }, [suggestsListIndex]);\n\n    const handleCantFindAddressClick = React.useCallback(() => {\n        dispatch(goBack());\n    }, [dispatch]);\n\n    const suggestItems = React.useMemo(() => {\n        return suggestIds\n            .map((itemId, index) => (\n                <StyledSwiperSlide className=\"swiper-slide\" key={itemId}>\n                    <AddressSimpleSuggestListItem shouldFocusOnMount={index === 0} id={itemId} />\n                </StyledSwiperSlide>\n            ))\n            .concat([\n                <StyledSwiperSlide className=\"swiper-slide\" key=\"button\">\n                    <StyledButton\n                        view={ButtonViews.primary}\n                        onClick={handleCantFindAddressClick}\n                        disabled={isAddressSubmitting}\n                    >\n                        Моего адреса нет в списке\n                    </StyledButton>\n                </StyledSwiperSlide>,\n            ]);\n    }, [suggestIds, handleCantFindAddressClick, isAddressSubmitting]);\n\n    const isTopGradientVisible = suggestsListIndex > 1;\n    const isBottomGradientVisible =\n        // prettier-ignore\n        (suggestsListIndex === 0 && suggestItems.length > 1) ||\n        // -2 потому что все элементы уже видны, когда мы доходим до этого индекса\n        // пора убирать градиент снизу\n        suggestsListIndex < suggestItems.length - 1 - 2;\n\n    return (\n        <>\n            <StyledTitle>Выберите адрес</StyledTitle>\n            <GradientFade sizePx={150} isVisible={isTopGradientVisible} kind=\"top\">\n                <GradientFade sizePx={250} isVisible={isBottomGradientVisible} kind=\"bottom\">\n                    <StyledSwiperContainer\n                        tabIndex={-1}\n                        className=\"swiper-container\"\n                        ref={swiperContainerRef}\n                        onScroll={preventScroll}\n                    >\n                        <StyledSwiperWrapper className=\"swiper-wrapper\">{suggestItems}</StyledSwiperWrapper>\n                    </StyledSwiperContainer>\n                </GradientFade>\n            </GradientFade>\n        </>\n    );\n};\n","import React from 'react';\n\ninterface PlasmaIconProps {\n    className?: string;\n    fill?: string;\n}\nexport const PlasmaIcon: React.FC<PlasmaIconProps> = ({ className, children, fill = 'white' }) => (\n    <svg\n        className={className}\n        width=\"23\"\n        height=\"24\"\n        viewBox=\"0 0 23 24\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        {children}\n        <path\n            d=\"M23 14.9214C22.4799 14.0641 20.2694 14.097 18.124 14.13C17.0675 14.13 15.9786 14.13 14.9871 14.13C9.60724 13.6848 7.33177 11.5415 6.37282 9.89269C5.89828 9.05038 5.62862 8.10541 5.58622 7.1362C5.54382 6.16699 5.7299 5.2015 6.12902 4.31986C6.67661 3.23848 7.45055 2.29156 8.39669 1.54539C9.34282 0.799214 10.4383 0.271813 11.6064 0.000101213C9.57796 -0.00831337 7.58091 0.508078 5.80396 1.50048C4.88633 2.03156 4.03967 2.67987 3.28469 3.42953C2.43 4.32612 1.787 5.40775 1.40411 6.59297C1.02122 7.77818 0.908431 9.03607 1.07423 10.2719C1.29691 11.5764 1.80725 12.813 2.56715 13.8893C3.32704 14.9656 4.31685 15.8539 5.46264 16.4877C8.89209 18.6311 13.0367 18.4828 15.946 18.3838H17.5714C18.8879 18.3838 19.8143 18.5322 20.1232 19.1752C20.1989 19.411 20.1989 19.665 20.1232 19.9007C20.1232 20.0161 20.2369 20.0491 20.3344 19.9007C21.5781 18.4862 22.4698 16.7901 22.935 14.9544\"\n            fill={fill}\n        />\n        <path\n            d=\"M15.984 22.9919C15.8721 22.3426 14.3856 22.2059 12.5155 22.0521C11.1224 21.955 9.7384 21.7436 8.37562 21.4199C6.57366 20.9888 4.89214 20.1097 3.46747 18.854C2.04279 17.5982 0.915083 16.0011 0.175825 14.1923C9.7654e-07 13.9018 0 13.9531 0 14.2607C0.395244 16.2351 1.23718 18.0758 2.45211 19.6218C3.66703 21.1677 5.21792 22.3718 6.96903 23.1286C8.832 23.9337 10.3896 23.9726 11.1888 23.9726C11.3581 23.9902 11.5285 24 11.7003 24C13.1813 23.9524 14.6404 23.6045 16 22.9748\"\n            fill={fill}\n        />\n        <path\n            d=\"M9.14667 4.81246C8.96368 5.50774 8.95174 6.23637 9.11186 6.93718C9.27198 7.63798 9.59949 8.2905 10.0669 8.83996C11.372 10.2256 13.0497 11.2129 14.9023 11.6856C16.7549 12.1584 18.7053 12.0969 20.5238 11.5084C21.5558 11.1477 22.4304 10.4451 23 9.5195C22.752 8.43653 22.3521 7.39329 21.8121 6.42014C21.4565 6.79157 21.0141 7.0705 20.5238 7.23227C19.5794 7.52033 18.5784 7.57578 17.6075 7.39383C16.6366 7.21187 15.7252 6.79799 14.9524 6.18811C14.7542 5.96516 14.614 5.69761 14.544 5.40875C14.474 5.11989 14.4764 4.81846 14.5508 4.5307C14.6794 4.14405 14.8977 3.79267 15.1883 3.50481C15.4789 3.21696 15.8336 3.00065 16.2239 2.87329C16.9507 2.69104 17.7 2.6129 18.4491 2.64126C17.6783 2.09104 16.8674 1.59801 16.0231 1.16616C15.8152 1.06253 15.5866 1.00593 15.3539 1.00042H15.0695C14.1559 0.990731 13.2484 1.14805 12.3925 1.4645C11.6279 1.72778 10.9361 2.1647 10.3725 2.7403C9.80883 3.3159 9.38904 4.01419 9.14667 4.77931\"\n            fill={fill}\n        />\n    </svg>\n);\n","import { GradientFade } from 'components/GradientFade/GradientFade';\nimport { PlasmaIcon } from 'components/PlasmaIcon/PlasmaIcon';\nimport { BodyText1 } from 'components/Text/Body';\nimport { FootnoteText1 } from 'components/Text/Footnote';\nimport { HeadlineText1 } from 'components/Text/Headline';\nimport { useFocusOnMount } from 'hooks/useFocusOnMount';\nimport React from 'react';\nimport { color } from 'style/const/color';\nimport styled from 'styled-components';\n\nconst circleContainerSize = 316;\nconst plasmaIconSize = 48;\nconst offsetToCenteringIcon = circleContainerSize / 2 - plasmaIconSize / 2;\nconst StyledPlasmaIcon = styled(PlasmaIcon)`\n    position: absolute;\n    height: ${plasmaIconSize}px;\n    width: ${plasmaIconSize}px;\n    top: ${offsetToCenteringIcon}px;\n    left: ${offsetToCenteringIcon}px;\n`;\n\nexport const StyledCircles = styled.div`\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: ${circleContainerSize}px;\n    width: ${circleContainerSize}px;\n    margin-top: 106px;\n\n    &::after {\n        position: absolute;\n        top: 86px;\n        left: 86px;\n        right: 86px;\n        bottom: 86px;\n\n        content: '';\n        border-radius: 50%;\n\n        opacity: 0.3;\n        background: rgba(255, 255, 255, 0.06);\n        box-shadow: inset 0 4px 4px rgba(255, 255, 255, 0.15);\n        backdrop-filter: blur(48px);\n    }\n\n    &::before {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n\n        content: '';\n        border-radius: 50%;\n\n        opacity: 0.3;\n        background: rgba(255, 255, 255, 0.02);\n        box-shadow: inset 0 4px 4px rgba(255, 255, 255, 0.15);\n        backdrop-filter: blur(48px);\n    }\n`;\n\nconst StyledOkButton = styled(FootnoteText1)`\n    position: relative;\n    display: inline-flex;\n    height: 78px;\n    width: 78px;\n    justify-content: center;\n    align-items: center;\n    color: ${color.text.primary};\n    margin-left: 12px;\n\n    &::before {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n\n        content: '';\n        border-radius: 50%;\n        z-index: -1;\n\n        opacity: 0.3;\n        background: ${color.surface.liquid1};\n        box-shadow: inset 0 4px 4px rgba(255, 255, 255, 0.15);\n        backdrop-filter: blur(48px);\n    }\n`;\n\nexport const GuidePageRoot = styled.div`\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nexport const GuidePagePlasmaIcon = () => (\n    <GradientFade sizePx={50} isVisible kind=\"bottom\">\n        <StyledCircles>\n            <StyledPlasmaIcon />\n        </StyledCircles>\n    </GradientFade>\n);\n\nexport const GuidePageTitle = styled(BodyText1)`\n    margin-top: -54px;\n    color: ${color.text.primary};\n`;\n\nexport const GuidePageSource = styled(HeadlineText1)`\n    position: relative;\n    margin-top: 32px;\n\n    background: linear-gradient(to right, #00ffdf, #00ff5a);\n    color: transparent;\n    -webkit-background-clip: text;\n`;\n\nexport const GuidePageSubtitle = styled(BodyText1)`\n    margin-top: 130px;\n    color: ${color.text.secondary};\n`;\n\ninterface GuidePageHintProps {\n    onOkClick: () => void;\n}\nexport const GuidePageHint: React.FC<GuidePageHintProps> = ({ onOkClick }) => {\n    const okButtonRef = useFocusOnMount<HTMLDivElement>();\n\n    return (\n        <GuidePageSubtitle>\n            Чтобы ввести с клавиатуры, нажмите на пульте кнопку\n            <StyledOkButton ref={okButtonRef} tabIndex={0} onClick={onOkClick}>\n                ОК\n            </StyledOkButton>\n        </GuidePageSubtitle>\n    );\n};\n","import { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport React from 'react';\nimport { addressShowKeyboardHintAction } from 'store/actions/addressSimplePage';\nimport { ROUTES } from 'store/constants/router';\nimport {\n    GuidePageHint,\n    GuidePagePlasmaIcon,\n    GuidePageRoot,\n    GuidePageSource,\n    GuidePageTitle,\n} from 'components/GuidePage/GuidePage';\n\nexport const AddressSimpleGuide: React.FC = () => {\n    const isKeyboardHintVisible = useSelector(({ addressSimplePage }) => addressSimplePage.isKeyboardHintVisible);\n    const dispatch = useDispatch();\n\n    const handleOkClick = React.useCallback(() => {\n        dispatch(push(ROUTES.ADDRESS_SIMPLE_INPUT));\n    }, [dispatch]);\n\n    React.useEffect(() => {\n        return () => {\n            if (!isKeyboardHintVisible) {\n                dispatch(addressShowKeyboardHintAction());\n            }\n        };\n    }, [dispatch, isKeyboardHintVisible]);\n\n    return (\n        <GuidePageRoot>\n            <GuidePagePlasmaIcon />\n            <GuidePageTitle>Нажмите кнопку на пульте и назовите</GuidePageTitle>\n            <GuidePageSource>улицу и дом</GuidePageSource>\n            {isKeyboardHintVisible ? <GuidePageHint onOkClick={handleOkClick} /> : null}\n        </GuidePageRoot>\n    );\n};\n","import { LocationPage } from 'components/LocationPage/LocationPage';\nimport { Pin, DeadFaceIcon, HappyFaceIcon } from 'components/Pin/Pin';\nimport { BodyText1 } from 'components/Text/Body';\nimport { useAddressSimpleUpdateSuggests } from 'pages/AddressSimple/AddressSimple.hooks';\nimport { buildAddressString } from 'pages/AddressSimple/AddressSimple.tools';\nimport React from 'react';\nimport { goBack } from 'connected-react-router';\nimport { TwoGisSuggestFetchingStatus } from 'store/reducers/data/twoGisSuggestsData';\nimport { addressInputDeclineThunk, addressSubmitThunk } from 'store/thunks/native';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { HeadlineText1 } from 'components/Text/Headline';\nimport { Button, ButtonViews } from 'components/Button/Button';\nimport { color } from 'style/const/color';\n\nconst StyledTitle = styled(HeadlineText1)`\n    margin-top: 48px;\n    color: ${color.text.primary};\n    text-align: center;\n`;\n\nconst StyledSubTitle = styled(BodyText1)`\n    margin-top: 12px;\n    color: ${color.text.primary};\n    text-align: center;\n`;\n\nconst StyledContainer = styled.div`\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n`;\n\nconst StyledButtonContainer = styled.div`\n    margin-top: 64px;\n    display: flex;\n    justify-content: center;\n`;\n\nconst StyledButtonDivider = styled.div`\n    width: 32px;\n`;\n\nexport const AddressSimpleQuestion: React.FC = () => {\n    const dispatch = useDispatch();\n    const suggest = useSelector(({ twoGisSuggestsData: { mostRepresentationSuggest } }) => mostRepresentationSuggest);\n    const suggestsFetchingStatus = useSelector(({ twoGisSuggestsData }) => twoGisSuggestsData.fetchingStatus);\n    const inputValue = useSelector(({ addressSimplePage }) => addressSimplePage.inputValue);\n    const isAddressSubmitting = useSelector(({ addressSimplePage }) => addressSimplePage.isAddressSubmitting);\n\n    const handleAcceptButtonClick = React.useCallback(() => {\n        dispatch(addressSubmitThunk());\n    }, [dispatch]);\n\n    const handleDeclineButtonClick = React.useCallback(() => {\n        dispatch(addressInputDeclineThunk());\n    }, [dispatch]);\n\n    const handleRepeatClick = React.useCallback(() => {\n        dispatch(goBack());\n    }, [dispatch]);\n\n    useAddressSimpleUpdateSuggests();\n\n    // саджесты еще не приехали, показываем пустой экран, потому здесь будет скелетон\n    if (suggestsFetchingStatus === TwoGisSuggestFetchingStatus.PENDING) {\n        return <LocationPage />;\n    }\n\n    if (!suggest) {\n        return (\n            <LocationPage>\n                <StyledContainer>\n                    <Pin isBroken pinColor={color.button.disabled}>\n                        <DeadFaceIcon />\n                    </Pin>\n                    <StyledTitle>{inputValue}</StyledTitle>\n                    <StyledSubTitle>Этот адрес не найден, попробуйте еще раз</StyledSubTitle>\n                    <StyledButtonContainer>\n                        <Button shouldFocusOnMount view={ButtonViews.secondary} onClick={handleRepeatClick}>\n                            Ввести еще раз\n                        </Button>\n                    </StyledButtonContainer>\n                </StyledContainer>\n            </LocationPage>\n        );\n    }\n\n    const addressName = buildAddressString(suggest);\n\n    return (\n        <LocationPage showMap={false}>\n            <StyledContainer>\n                <Pin pinColor={color.button.critical}>\n                    <HappyFaceIcon />\n                </Pin>\n                <StyledTitle>{addressName}</StyledTitle>\n                <StyledSubTitle>Это ваш адрес?</StyledSubTitle>\n                <StyledButtonContainer>\n                    <Button\n                        shouldFocusOnMount\n                        shouldLockAfterClick\n                        view={ButtonViews.primary}\n                        onClick={handleAcceptButtonClick}\n                    >\n                        Да, все верно\n                    </Button>\n                    <StyledButtonDivider />\n                    <Button\n                        view={ButtonViews.secondary}\n                        onClick={handleDeclineButtonClick}\n                        disabled={isAddressSubmitting}\n                    >\n                        Нет, выбрать другой\n                    </Button>\n                </StyledButtonContainer>\n            </StyledContainer>\n        </LocationPage>\n    );\n};\n","import React from 'react';\nimport { useKeyboardExpanded } from 'hooks/useKeyboardExpanded';\n\nexport const useKeyboardClose = (onKeyboardClose: () => void) => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const [_, keyboardExpandedCount] = useKeyboardExpanded();\n\n    React.useEffect(() => {\n        // ловим момент второго ресайза экрана, а именно, закрытия клавиатуры\n        if (keyboardExpandedCount <= 1) {\n            return;\n        }\n\n        onKeyboardClose();\n    }, [keyboardExpandedCount, onKeyboardClose]);\n};\n","import React from 'react';\n\nexport const useKeyboardExpanded = () => {\n    const [keyboardExpandedCount, setKeyboardExpandedCount] = React.useState(0);\n\n    React.useLayoutEffect(() => {\n        const handleWindowResize = () => {\n            setKeyboardExpandedCount((currentStateValue) => currentStateValue + 1);\n        };\n\n        window.addEventListener('resize', handleWindowResize);\n\n        return () => {\n            window.removeEventListener('resize', handleWindowResize);\n        };\n    }, [setKeyboardExpandedCount]);\n\n    const isKeyboardExpanded = keyboardExpandedCount % 2 !== 0;\n\n    return [isKeyboardExpanded, keyboardExpandedCount];\n};\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useFocusOnMount } from 'hooks/useFocusOnMount';\nimport { font } from 'style/const/font';\nimport { transition } from 'style/const/transition';\nimport { color } from 'style/const/color';\n\ninterface StyledTitleProps {\n    isMinified?: boolean;\n    isFocused?: boolean;\n    isInvalid?: boolean;\n}\nconst StyledTitle = styled.div<StyledTitleProps>`\n    position: absolute;\n    left: 32px;\n    top: 36px;\n\n    font-weight: 500;\n    font-size: 32px;\n    line-height: 40px;\n\n    color: ${({ isInvalid, isFocused }) => {\n        if (isInvalid) {\n            return color.text.critical;\n        }\n\n        if (isFocused) {\n            return color.text.active;\n        }\n\n        return color.text.tertiary;\n    }};\n\n    transition: font-size 0.2s ease-in-out, top 0.2s ease-in-out, color 0.2s ease-in-out;\n\n    ${({ isMinified }) =>\n        isMinified &&\n        css`\n            top: 12px;\n            font-size: 24px;\n        `};\n`;\n\ninterface StyledInputProps {\n    disabled?: boolean;\n}\nconst StyledInput = styled.input<StyledInputProps>`\n    margin-top: 50px;\n    height: 40px;\n    width: 100%;\n    font-family: inherit;\n    font-weight: ${font.weight.medium};\n    font-size: 32px;\n    color: ${({ disabled }) => (disabled ? 'rgba(255, 255, 255, 0.28)' : '#fff')};\n    caret-color: ${color.text.active};\n    line-height: 40px;\n    padding: 0;\n    border: none;\n    background: transparent;\n`;\n\nconst StyledWrapper = styled.div`\n    position: relative;\n    box-sizing: border-box;\n    height: 112px;\n    padding: 4px 36px;\n    background-color: ${color.surface.liquid1};\n\n    &::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n\n        display: block;\n        height: 4px;\n\n        background-color: ${color.surface.liquid2};\n\n        pointer-events: none;\n\n        transition: bottom ${transition.default};\n    }\n`;\n\ninterface StyledRootProps {\n    isFocused?: boolean;\n}\nconst StyledRoot = styled.div<StyledRootProps>`\n    margin: -4px;\n    height: 120px;\n    box-sizing: border-box;\n    border: 4px solid transparent;\n    border-radius: 28px;\n\n    overflow: hidden;\n\n    transition: border ${transition.default};\n\n    ${({ isFocused }) =>\n        isFocused &&\n        css`\n            border-color: ${color.text.active};\n\n            ${StyledTitle} {\n                transition: color ${transition.default};\n            }\n\n            ${StyledWrapper}::after {\n                bottom: -4px;\n            }\n        `}\n`;\n\ninterface InputProps {\n    title: string;\n    value: string;\n    className?: string;\n    type?: string;\n    disabled?: boolean;\n    isInvalid?: boolean;\n    onSubmit?: (event: React.SyntheticEvent<HTMLInputElement>) => void;\n    onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n    onRootKeyPress?: (event: React.KeyboardEvent<HTMLInputElement>) => void;\n    forwardRef?: React.RefObject<HTMLDivElement>;\n    forwardInputRef?: React.RefObject<HTMLInputElement>;\n    shouldFocusOnMount?: boolean;\n    shouldFocusInputOnMount?: boolean;\n}\n\nexport const Input: React.FC<InputProps> = ({\n    title,\n    value,\n    className,\n    type = 'text',\n    disabled,\n    isInvalid,\n    onSubmit,\n    onChange,\n    onRootKeyPress,\n    forwardRef,\n    forwardInputRef,\n    shouldFocusOnMount,\n    shouldFocusInputOnMount,\n}) => {\n    const [isFocused, setFocus] = React.useState(false);\n    const [isUsing, setUsing] = React.useState(false);\n    const inputRootRef = React.useRef<HTMLInputElement>(null);\n    const inputRef = forwardInputRef || inputRootRef;\n    const onMountRootRef = useFocusOnMount<HTMLDivElement>(forwardRef);\n    const rootRef = shouldFocusOnMount ? onMountRootRef : forwardRef;\n    const handleRootFocus = React.useCallback(() => setFocus(true), [setFocus]);\n    const handleRootBlur = React.useCallback(() => {\n        setFocus(false);\n        setUsing(false);\n    }, [setFocus, setUsing]);\n    const handleRootKeyPress = React.useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            if (inputRef && inputRef.current) {\n                if (onRootKeyPress) {\n                    onRootKeyPress(e);\n                }\n\n                if (!e.defaultPrevented) {\n                    inputRef.current.focus();\n                    setUsing(true);\n                }\n            }\n        },\n        [onRootKeyPress, setUsing, inputRef],\n    );\n    const handleInputKeyPress = React.useCallback(\n        (event: React.KeyboardEvent<HTMLInputElement>) => {\n            if (onSubmit && event && event.key === 'Enter') {\n                event.stopPropagation();\n                onSubmit(event);\n            }\n        },\n        [onSubmit],\n    );\n\n    React.useEffect(() => {\n        if (shouldFocusInputOnMount && inputRef && inputRef.current) {\n            inputRef.current.focus();\n            setUsing(true);\n        }\n    }, [shouldFocusInputOnMount, inputRef, setUsing]);\n\n    const isTitleMinified = isUsing || Boolean(value);\n\n    return (\n        <StyledRoot\n            tabIndex={disabled ? -1 : 0}\n            className={className}\n            ref={rootRef}\n            isFocused={isFocused}\n            onFocus={handleRootFocus}\n            onBlur={handleRootBlur}\n            onKeyPress={handleRootKeyPress}\n        >\n            <StyledWrapper>\n                <StyledTitle isMinified={isTitleMinified} isFocused={isFocused} isInvalid={isInvalid}>\n                    {title}\n                </StyledTitle>\n                <StyledInput\n                    tabIndex={-1}\n                    ref={inputRef}\n                    type={type}\n                    disabled={disabled}\n                    onKeyPress={handleInputKeyPress}\n                    onChange={onChange}\n                    value={value}\n                />\n            </StyledWrapper>\n        </StyledRoot>\n    );\n};\n","import { useIsValueChanged } from 'hooks/useIsValueChanged';\nimport { useKeyboardClose } from 'hooks/useKeyboardClose';\nimport React from 'react';\nimport { ROUTES } from 'store/constants/router';\nimport styled from 'styled-components';\nimport { goBack, replace } from 'connected-react-router';\nimport { Input } from 'components/Input/Input';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressChangeInputValueAction } from 'store/actions/addressSimplePage';\n\nconst StyledInput = styled(Input)`\n    margin: 54px auto 0;\n    width: 900px;\n`;\n\nexport const AddressSimpleInput = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressSimplePage }) => addressSimplePage.inputValue);\n    const isInputValueChanged = useIsValueChanged(inputValue);\n    /**\n     * Логично предположить что этот коллбек отработает два раза.\n     * Первый при нажатии \"ок\" в клавиатуре, второй при закрытии клавиатуры.\n     * Но так как закрытие клавиатуры хендлится через эффект, который в\n     * свою очередь подчиняется lifecycle'у компонента, обработчик не сработает,\n     * потому что к этому времени компонент уже размонтирован.\n     */\n    const handleKeyboardClose = React.useCallback(() => {\n        if (isInputValueChanged) {\n            dispatch(replace(ROUTES.ADDRESS_SIMPLE_QUESTION));\n        } else {\n            dispatch(goBack());\n        }\n    }, [dispatch, isInputValueChanged]);\n\n    useKeyboardClose(handleKeyboardClose);\n\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressChangeInputValueAction(e.target.value));\n        },\n        [dispatch],\n    );\n\n    return (\n        <StyledInput\n            shouldFocusInputOnMount\n            title=\"Адрес\"\n            value={inputValue}\n            onChange={handleInputChange}\n            onSubmit={handleKeyboardClose}\n        />\n    );\n};\n","import React from 'react';\n\nexport const useIsValueChanged = (source: unknown) => {\n    const [value] = React.useState(source);\n\n    return source !== value;\n};\n","// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop() {}\n","import { Button, ButtonViews } from 'components/Button/Button';\nimport { Input } from 'components/Input/Input';\nimport { PlasmaIcon } from 'components/PlasmaIcon/PlasmaIcon';\nimport { BodyText1 } from 'components/Text/Body';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport React from 'react';\nimport { addressFullSubmitAction } from 'store/actions/server';\nimport { ROUTES } from 'store/constants/router';\nimport styled from 'styled-components';\nimport { noop } from 'tools/noop';\n\nconst StyledFirstRow = styled.div`\n    grid-area: first-row;\n    display: grid;\n    grid-column-gap: 32px;\n    grid-template-columns: 1.4fr 1fr;\n    color: #fff;\n`;\n\nconst StyledSecondRow = styled.div`\n    grid-area: second-row;\n    display: grid;\n    grid-column-gap: 32px;\n    grid-template-columns: 1fr 1fr 1fr;\n    color: #fff;\n`;\n\nconst StyledThirdRow = styled.div`\n    grid-area: third-row;\n    display: grid;\n    grid-column-gap: 32px;\n    grid-template-columns: 1.4fr 1fr;\n    color: #fff;\n`;\n\nconst StyledFourthRow = styled.div`\n    grid-area: fourth-row;\n    display: flex;\n`;\n\nconst SubmitButton = styled(Button)`\n    flex-grow: 0;\n    padding: 32px 40px;\n\n    &[disabled] {\n        opacity: 0.3;\n    }\n`;\n\nconst StyledRoot = styled.div`\n    display: grid;\n    padding: 82px 128px 0;\n    box-sizing: border-box;\n    grid-row-gap: 48px;\n    grid-column-gap: 32px;\n    grid-template-areas: 'first-row' 'second-row' 'third-row' 'fourth-row';\n\n    will-change: transform;\n`;\n\nconst StyledVoiceHint = styled(BodyText1)`\n    display: flex;\n    margin-left: 48px;\n    align-items: center;\n\n    background: linear-gradient(to right, #00ffdf, #00ff5a);\n    color: transparent;\n    -webkit-background-clip: text;\n`;\n\nconst StyledPlasmaIcon = styled(PlasmaIcon)`\n    height: 88px;\n    width: 88px;\n    border: solid 22px transparent;\n    box-sizing: border-box;\n`;\n\nexport const AddressFullAll: React.FC = () => {\n    const dispatch = useDispatch();\n    const {\n        addressInputValue,\n        phoneNumberInputValue,\n        apartmentInputValue,\n        entranceInputValue,\n        floorInputValue,\n        doorCodeInputValue,\n        isSubmitButtonDisabled,\n        nextFocus,\n        isPhoneValid,\n    } = useSelector(({ addressFullPage }) => addressFullPage);\n\n    const handleAddressKeyPress = React.useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            e.preventDefault();\n            dispatch(push(ROUTES.ADDRESS_SIMPLE_GUIDE));\n        },\n        [dispatch],\n    );\n    const handlePhoneKeyPress = React.useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            e.preventDefault();\n            dispatch(push(ROUTES.ADDRESS_FULL_PHONE));\n        },\n        [dispatch],\n    );\n    const handleApartmentKeyPress = React.useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            e.preventDefault();\n            dispatch(push(ROUTES.ADDRESS_FULL_APARTMENT));\n        },\n        [dispatch],\n    );\n    const handleEntranceKeyPress = React.useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            e.preventDefault();\n            dispatch(push(ROUTES.ADDRESS_FULL_ENTRANCE));\n        },\n        [dispatch],\n    );\n    const handleFloorKeyPress = React.useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            e.preventDefault();\n            dispatch(push(ROUTES.ADDRESS_FULL_FLOOR));\n        },\n        [dispatch],\n    );\n    const handleDoorCodeKeyPress = React.useCallback(\n        (e: React.KeyboardEvent<HTMLInputElement>) => {\n            e.preventDefault();\n            dispatch(push(ROUTES.ADDRESS_FULL_DOOR_CODE));\n        },\n        [dispatch],\n    );\n    const handleSubmitClick = React.useCallback(() => {\n        dispatch(addressFullSubmitAction());\n    }, [dispatch]);\n\n    return (\n        <StyledRoot>\n            <StyledFirstRow>\n                <Input\n                    title=\"Улица и дом\"\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootKeyPress={handleAddressKeyPress}\n                    value={addressInputValue}\n                />\n                <Input\n                    title=\"Номер телефона\"\n                    shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_PHONE}\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootKeyPress={handlePhoneKeyPress}\n                    value={phoneNumberInputValue}\n                    isInvalid={!isPhoneValid}\n                />\n            </StyledFirstRow>\n            <StyledSecondRow>\n                <Input\n                    title=\"Квартира\"\n                    shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_APARTMENT}\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootKeyPress={handleApartmentKeyPress}\n                    value={apartmentInputValue}\n                />\n                <Input\n                    title=\"Подъезд\"\n                    shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_ENTRANCE}\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootKeyPress={handleEntranceKeyPress}\n                    value={entranceInputValue}\n                />\n                <Input\n                    title=\"Этаж\"\n                    shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_FLOOR}\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootKeyPress={handleFloorKeyPress}\n                    value={floorInputValue}\n                />\n            </StyledSecondRow>\n            <StyledThirdRow>\n                <Input\n                    title=\"Комментарий\"\n                    shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_DOOR_CODE}\n                    onChange={noop} // реакт запрещает прокидывать в инпут значение без обработчика изменений\n                    onRootKeyPress={handleDoorCodeKeyPress}\n                    value={doorCodeInputValue}\n                />\n            </StyledThirdRow>\n            <StyledFourthRow>\n                <SubmitButton\n                    view={isSubmitButtonDisabled ? ButtonViews.secondary : ButtonViews.primary}\n                    shouldFocusOnMount={nextFocus === ROUTES.ADDRESS_FULL_ALL}\n                    disabled={isSubmitButtonDisabled}\n                    shouldLockAfterClick\n                    onClick={handleSubmitClick}\n                >\n                    Сохранить\n                </SubmitButton>\n                <StyledVoiceHint>\n                    <StyledPlasmaIcon fill=\"url(#plasma-green-gradient)\">\n                        <linearGradient id=\"plasma-green-gradient\">\n                            <stop offset=\"0%\" stopColor=\"#00ffdf\" />\n                            <stop offset=\"100%\" stopColor=\"#00ff5a\" />\n                        </linearGradient>\n                    </StyledPlasmaIcon>\n                    Вы можете изменять данные голосом\n                </StyledVoiceHint>\n            </StyledFourthRow>\n        </StyledRoot>\n    );\n};\n","import { useKeyboardClose } from 'hooks/useKeyboardClose';\nimport React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullApartmentInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\n\nconst StyledInput = styled(Input)`\n    margin: 80px auto 0;\n    width: 900px;\n`;\n\nexport const AddressFullApartment = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.apartmentInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullApartmentInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    /**\n     * Логично предположить что этот коллбек отработает два раза.\n     * Первый при нажатии \"ок\" в клавиатуре, второй при закрытии клавиатуры.\n     * Но так как закрытие клавиатуры хендлится через эффект, который в\n     * свою очередь подчиняется lifecycle'у компонента, обработчик не сработает,\n     * потому что к этому времени компонент уже размонтирован.\n     */\n    const handleKeyboardClose = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    useKeyboardClose(handleKeyboardClose);\n\n    return (\n        <StyledInput\n            title=\"Квартира\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleKeyboardClose}\n        />\n    );\n};\n","import { createAction } from 'tools/create-action';\n\ninterface AddressFullPhoneNumberInputChangePayload {\n    inputType: InputEvent['inputType'];\n    data: InputEvent['data'];\n}\nexport const addressFullPhoneNumberInputChangeAction = (payload: AddressFullPhoneNumberInputChangePayload) =>\n    createAction('addressFull/PHONE_NUMBER_INPUT_CHANGE', payload);\n\nexport const addressFullApartmentInputChangeAction = (payload: string) =>\n    createAction('addressFull/APARTMENT_INPUT_CHANGE', payload);\n\nexport const addressFullEntranceInputChangeAction = (payload: string) =>\n    createAction('addressFull/ENTRANCE_INPUT_CHANGE', payload);\n\nexport const addressFullFloorInputChangeAction = (payload: string) =>\n    createAction('addressFull/FLOOR_INPUT_CHANGE', payload);\n\nexport const addressFullDoorCodeInputChangeAction = (payload: string) =>\n    createAction('addressFull/DOORCODE_INPUT_CHANGE', payload);\n","import { useKeyboardClose } from 'hooks/useKeyboardClose';\nimport React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullDoorCodeInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\n\nconst StyledInput = styled(Input)`\n    margin: 80px auto 0;\n    width: 900px;\n`;\n\nexport const AddressFullDoorCode = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.doorCodeInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullDoorCodeInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    /**\n     * Логично предположить что этот коллбек отработает два раза.\n     * Первый при нажатии \"ок\" в клавиатуре, второй при закрытии клавиатуры.\n     * Но так как закрытие клавиатуры хендлится через эффект, который в\n     * свою очередь подчиняется lifecycle'у компонента, обработчик не сработает,\n     * потому что к этому времени компонент уже размонтирован.\n     */\n    const handleKeyboardClose = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    useKeyboardClose(handleKeyboardClose);\n\n    return (\n        <StyledInput\n            title=\"Комментарий\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleKeyboardClose}\n        />\n    );\n};\n","import { useKeyboardClose } from 'hooks/useKeyboardClose';\nimport React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullEntranceInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\n\nconst StyledInput = styled(Input)`\n    margin: 80px auto 0;\n    width: 900px;\n`;\n\nexport const AddressFullEntrance = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.entranceInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullEntranceInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    /**\n     * Логично предположить что этот коллбек отработает два раза.\n     * Первый при нажатии \"ок\" в клавиатуре, второй при закрытии клавиатуры.\n     * Но так как закрытие клавиатуры хендлится через эффект, который в\n     * свою очередь подчиняется lifecycle'у компонента, обработчик не сработает,\n     * потому что к этому времени компонент уже размонтирован.\n     */\n    const handleKeyboardClose = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    useKeyboardClose(handleKeyboardClose);\n\n    return (\n        <StyledInput\n            title=\"Подъезд\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleKeyboardClose}\n        />\n    );\n};\n","import { useKeyboardClose } from 'hooks/useKeyboardClose';\nimport React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullFloorInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\n\nconst StyledInput = styled(Input)`\n    margin: 80px auto 0;\n    width: 900px;\n`;\n\nexport const AddressFullFloor = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.floorInputValue);\n    const handleInputChange = React.useCallback(\n        (e: React.ChangeEvent<HTMLInputElement>) => {\n            dispatch(addressFullFloorInputChangeAction(e.target.value));\n        },\n        [dispatch],\n    );\n    /**\n     * Логично предположить что этот коллбек отработает два раза.\n     * Первый при нажатии \"ок\" в клавиатуре, второй при закрытии клавиатуры.\n     * Но так как закрытие клавиатуры хендлится через эффект, который в\n     * свою очередь подчиняется lifecycle'у компонента, обработчик не сработает,\n     * потому что к этому времени компонент уже размонтирован.\n     */\n    const handleKeyboardClose = React.useCallback(() => {\n        dispatch(addressFullValidationOkThunk());\n    }, [dispatch]);\n\n    useKeyboardClose(handleKeyboardClose);\n\n    return (\n        <StyledInput\n            title=\"Этаж\"\n            value={inputValue}\n            shouldFocusInputOnMount\n            onChange={handleInputChange}\n            onSubmit={handleKeyboardClose}\n        />\n    );\n};\n","import { useKeyboardClose } from 'hooks/useKeyboardClose';\nimport React from 'react';\nimport { addressFullValidationOkThunk } from 'store/thunks/addressFullPage';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addressFullPhoneNumberInputChangeAction } from 'store/actions/addressFullPage';\nimport { Input } from 'components/Input/Input';\nimport { Label } from 'components/Label/Label';\n\nconst StyledContainer = styled.div`\n    position: relative;\n\n    margin: 80px auto 0;\n\n    width: 900px;\n`;\n\nconst StyledLabel = styled(Label)`\n    position: absolute;\n\n    margin-top: 12px;\n\n    width: 100%;\n    padding: 0 32px;\n`;\n\nexport const AddressFullPhone = () => {\n    const dispatch = useDispatch();\n    const inputValue = useSelector(({ addressFullPage }) => addressFullPage.phoneNumberInputValue);\n    const isPhoneValid = useSelector(({ addressFullPage }) => addressFullPage.isPhoneValid);\n    const [isFirstTry, setFirstTry] = React.useState(true);\n    const isErrorLabelVisible = !isPhoneValid && !isFirstTry;\n\n    const handleInputChange = React.useCallback(\n        ({ nativeEvent }: React.ChangeEvent<HTMLInputElement>) => {\n            // без этого тайпгварда TS не хочет показывать правильные поля\n            if (nativeEvent instanceof InputEvent) {\n                const { inputType, data } = nativeEvent;\n\n                dispatch(addressFullPhoneNumberInputChangeAction({ inputType, data }));\n            }\n        },\n        [dispatch],\n    );\n    /**\n     * Логично предположить что этот коллбек отработает два раза.\n     * Первый при нажатии \"ок\" в клавиатуре, второй при закрытии клавиатуры.\n     * Но так как закрытие клавиатуры хендлится через эффект, который в\n     * свою очередь подчиняется lifecycle'у компонента, обработчик не сработает,\n     * потому что к этому времени компонент уже размонтирован.\n     */\n    const handleKeyboardClose = React.useCallback(() => {\n        if (isPhoneValid) {\n            dispatch(addressFullValidationOkThunk());\n        } else {\n            setFirstTry(false);\n        }\n    }, [dispatch, isPhoneValid]);\n\n    useKeyboardClose(handleKeyboardClose);\n\n    return (\n        <StyledContainer>\n            <Input\n                title=\"Номер телефона\"\n                value={inputValue}\n                shouldFocusInputOnMount\n                onChange={handleInputChange}\n                onSubmit={handleKeyboardClose}\n            />\n            {isErrorLabelVisible ? <StyledLabel type=\"critical\" content=\"Неверно введен номер\" /> : null}\n        </StyledContainer>\n    );\n};\n","import React from 'react';\nimport { GuidePagePlasmaIcon, GuidePageRoot, GuidePageSource, GuidePageTitle } from 'components/GuidePage/GuidePage';\n\nexport const AddressFullAccommodationGuide = () => {\n    return (\n        <GuidePageRoot>\n            <GuidePagePlasmaIcon />\n            <GuidePageTitle>Нажмите кнопку на пульте и назовите</GuidePageTitle>\n            <GuidePageSource>квартиру, подъезд, этаж</GuidePageSource>\n        </GuidePageRoot>\n    );\n};\n","import React from 'react';\nimport { GuidePagePlasmaIcon, GuidePageRoot, GuidePageSource, GuidePageTitle } from 'components/GuidePage/GuidePage';\n\nexport const AddressFullPhoneGuide = () => {\n    return (\n        <GuidePageRoot>\n            <GuidePagePlasmaIcon />\n            <GuidePageTitle>Нажмите кнопку на пульте и назовите</GuidePageTitle>\n            <GuidePageSource>номер телефона</GuidePageSource>\n        </GuidePageRoot>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { goBack } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { closeAppAction } from 'store/actions/app';\nimport {\n    DialogPage,\n    DialogTitle,\n    DialogButton,\n    DialogText,\n    FullscreenDecoration,\n} from 'components/DialogPage/DialogPage';\nimport { MultilineText } from 'components/MultilineText/MultilineText';\n\nimport circlesImage from './Error.assets/circles.svg';\nimport warningIcon from './Error.assets/warning.svg';\n\nconst Circles = styled.div`\n    position: absolute;\n    top: -280px;\n    right: -266px;\n\n    box-sizing: border-box;\n    width: 1596px;\n    height: 1596px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    background-image: url('${circlesImage}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n`;\n\nconst WarningIcon = styled.div`\n    width: 384px;\n    height: 384px;\n\n    background-image: url('${warningIcon}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n`;\n\nexport const Error: React.FC = () => {\n    const { title, subtitle, retryButtonText, closeButtonText } = useSelector(({ errorPage }) => errorPage);\n\n    const dispatch = useDispatch();\n\n    const buttons = React.useMemo(\n        () => (\n            <>\n                <DialogButton\n                    shouldFocusOnMount\n                    onClick={() => {\n                        dispatch(goBack());\n                    }}\n                >\n                    {retryButtonText}\n                </DialogButton>\n                {closeButtonText ? (\n                    <DialogButton\n                        onClick={() => {\n                            dispatch(closeAppAction());\n                        }}\n                    >\n                        {closeButtonText}\n                    </DialogButton>\n                ) : null}\n            </>\n        ),\n        [retryButtonText, closeButtonText, dispatch],\n    );\n\n    const decorations = React.useMemo(\n        () => (\n            <FullscreenDecoration>\n                <Circles>\n                    <WarningIcon />\n                </Circles>\n            </FullscreenDecoration>\n        ),\n        [],\n    );\n\n    return (\n        <DialogPage buttons={buttons} decorations={decorations}>\n            <DialogTitle>\n                <MultilineText text={title} />\n            </DialogTitle>\n            <DialogText>\n                <MultilineText text={subtitle} />\n            </DialogText>\n        </DialogPage>\n    );\n};\n","import React from 'react';\nimport { DialogPage, DialogTitle, FullscreenDecoration } from 'components/DialogPage/DialogPage';\nimport { SplendidAnimation } from 'components/SplendidAnimation/SplendidAnimation';\nimport { MultilineText } from 'components/MultilineText/MultilineText';\nimport { layout } from 'style/const/layout';\n\nimport waitAnimationData from './Wait.assets/wait.animation.json';\n\nexport const Wait: React.FC = () => {\n    const decorations = React.useMemo(\n        () => (\n            <FullscreenDecoration>\n                <SplendidAnimation\n                    width={layout.widthPx}\n                    height={layout.heightPx}\n                    delayMs={0}\n                    config={{\n                        animationData: waitAnimationData,\n                    }}\n                />\n            </FullscreenDecoration>\n        ),\n        [],\n    );\n\n    return (\n        <DialogPage decorations={decorations}>\n            <DialogTitle>\n                <MultilineText text={'Оформляем\\n заказ'} />\n            </DialogTitle>\n        </DialogPage>\n    );\n};\n","import styled, { keyframes } from 'styled-components';\n\nimport spinnerImage from './spinner.svg';\n\nconst spinnerSizePx = 112;\n\nconst spinnerAnimationDurationMs = 1000;\n\nexport const Spinner = styled.div`\n    width: ${spinnerSizePx}px;\n    height: ${spinnerSizePx}px;\n\n    background: url('${spinnerImage}');\n    background-size: cover;\n\n    animation-name: ${keyframes`\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    `};\n    animation-duration: ${spinnerAnimationDurationMs}ms;\n    animation-timing-function: linear;\n    animation-iteration-count: infinite;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Spinner } from 'components/Spinner/Spinner';\nimport { BodyText1 } from 'components/Text/Body';\nimport { MultilineText } from 'components/MultilineText/MultilineText';\nimport { color } from 'style/const/color';\n\nconst StyledContainer = styled.div`\n    height: 100%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n`;\n\nconst StyledText = styled(BodyText1)`\n    margin-top: 32px;\n\n    color: ${color.text.primary};\n`;\n\ninterface SpinnerPageProps {\n    text?: string;\n}\n\nexport const SpinnerPage: React.FC<SpinnerPageProps> = ({ text = '' }) => (\n    <StyledContainer>\n        <Spinner />\n        {text && (\n            <StyledText>\n                <MultilineText text={text} />\n            </StyledText>\n        )}\n    </StyledContainer>\n);\n","import React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { ROUTES } from 'store/constants/router';\nimport { OrderStatusCategory } from 'store/constants/orderStatus';\nimport {\n    DialogPage,\n    DialogTitle,\n    DialogButton,\n    FullscreenDecoration,\n    DialogText,\n} from 'components/DialogPage/DialogPage';\nimport { SpinnerPage } from 'components/SpinnerPage/SpinnerPage';\nimport { MultilineText } from 'components/MultilineText/MultilineText';\nimport { ButtonViews } from 'components/Button/Button';\n\nimport pendingSvg from './StatusSummary.assets/pending.svg';\nimport deliveringSvg from './StatusSummary.assets/delivering.svg';\nimport successSvg from './StatusSummary.assets/success.svg';\nimport failedSvg from './StatusSummary.assets/failed.svg';\n\nconst mapCategoryToBackground: Record<OrderStatusCategory, string> = {\n    [OrderStatusCategory.PENDING]: `url('${pendingSvg}')`,\n    [OrderStatusCategory.DELIVERING]: `url('${deliveringSvg}')`,\n    [OrderStatusCategory.SUCCESS]: `url('${successSvg}')`,\n    [OrderStatusCategory.FAILED]: `url('${failedSvg}')`,\n};\n\ninterface StyledDecorationProps {\n    type: OrderStatusCategory;\n}\nconst StyledDecoration = styled(FullscreenDecoration)<StyledDecorationProps>`\n    background-image: ${({ type }) => mapCategoryToBackground[type]};\n`;\n\nexport const StatusSummary: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const isLoaded = useSelector((state) => state.orderStatusSummaryPage.isLoaded);\n    const title = useSelector((state) => state.orderStatusSummaryPage.title);\n    const text = useSelector((state) => state.orderStatusSummaryPage.text);\n    const orderStatusCategory = useSelector((state) => state.orderStatusSummaryPage.orderStatusCategory);\n\n    const isFailed = orderStatusCategory === OrderStatusCategory.FAILED;\n\n    const buttons: React.ReactNode = React.useMemo(() => {\n        const result = [\n            <DialogButton\n                shouldFocusOnMount={!isFailed}\n                key=\"dialog-button-details\"\n                onClick={() => {\n                    dispatch(push(ROUTES.STATUS_DETAILS));\n                }}\n            >\n                Детали заказа\n            </DialogButton>,\n            <DialogButton\n                shouldFocusOnMount={isFailed}\n                key=\"dialog-button-report\"\n                view={isFailed ? ButtonViews.primary : ButtonViews.secondary}\n                onClick={() => {\n                    dispatch(push(ROUTES.STATUS_REPORT));\n                }}\n            >\n                Связаться с нами\n            </DialogButton>,\n        ];\n\n        return isFailed ? result.reverse() : result;\n    }, [dispatch, isFailed]);\n\n    const decorations = React.useMemo(() => <StyledDecoration type={orderStatusCategory} />, [orderStatusCategory]);\n\n    if (!isLoaded) {\n        // TODO: Заменить на скелет https://sbtatlas.sigma.sbrf.ru/jira/browse/FOODTECHUI-243\n        return <SpinnerPage text=\"Обновляем статус заказа\" />;\n    }\n\n    return (\n        <DialogPage buttons={buttons} decorations={decorations}>\n            <DialogTitle>\n                <MultilineText text={title} />\n            </DialogTitle>\n            {text ? (\n                <DialogText>\n                    <MultilineText text={text} />\n                </DialogText>\n            ) : null}\n        </DialogPage>\n    );\n};\n","import React from 'react';\nimport { useSelector } from 'hooks/useSelector';\nimport { CartInfoPin, CartInfoContainer, CartPersonal, CartAddress } from 'components/Cart/CartInfo';\n\nexport const StatusDetailsInfo: React.FC = () => {\n    const { address } = useSelector(({ userData }) => userData);\n    const { phoneNumber, personalAddress } = useSelector(({ orderStatusDetailsPage }) => orderStatusDetailsPage);\n\n    return (\n        <CartInfoContainer>\n            <CartInfoPin />\n            <CartAddress>{address}</CartAddress>\n            <CartPersonal address={personalAddress} phone={phoneNumber} />\n        </CartInfoContainer>\n    );\n};\n","import React from 'react';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { statusDetailsSelectItemAction } from 'store/actions/statusDetailsPage';\nimport { LabelProps } from 'components/Label/Label';\nimport { CartListItemRoot, CartListItemThumb, CartListItemInfo } from 'components/Cart/CartListItem';\n\nexport interface CartListItemProps {\n    id: string;\n    index: number;\n    canFocus?: boolean;\n}\n\nexport interface StatusDetailsListItemViewProps {\n    productId: string;\n    imageUrl: string;\n    name: string;\n    disabled?: boolean;\n    price: number;\n    oldPrice?: number;\n    count: number;\n    label?: LabelProps;\n}\n\nexport const StatusDetailsListItem: React.FC<CartListItemProps> = ({ id, canFocus }) => {\n    const { imageUrl, name, price, oldPrice, label, count, disabled } = useSelector(\n        ({ orderStatusDetailsPage: { itemsMap } }) => itemsMap[id],\n    );\n    const dispatch = useDispatch();\n\n    const handleFocus = React.useCallback(() => dispatch(statusDetailsSelectItemAction(id)), [dispatch, id]);\n\n    return (\n        <CartListItemRoot tabIndex={canFocus ? 0 : undefined} disabled={disabled} onFocus={handleFocus}>\n            <CartListItemThumb imageUrl={imageUrl} />\n            <CartListItemInfo\n                disabled={disabled}\n                label={label}\n                name={name}\n                price={price}\n                oldPrice={oldPrice}\n                count={count}\n            />\n        </CartListItemRoot>\n    );\n};\n","import { createAction } from 'tools/create-action';\n\nexport const statusDetailsSelectItemAction = (payload: string) => createAction('statusDetails/SELECT_ITEM', payload);\n","import React from 'react';\nimport { useSelector } from 'hooks/useSelector';\nimport { CartListContainer, CartListScroller, CartTotalPrice } from 'components/Cart/CartList';\n\nimport { StatusDetailsListItem } from '../ListItem/StatusDetailsListItem';\n\nexport const StatusDetailsList: React.FC = () => {\n    const { order, wrapperYShift, topGradientVisible, bottomGradientVisible, totalPrice } = useSelector(\n        ({ orderStatusDetailsPage }) => orderStatusDetailsPage,\n    );\n\n    const itemList = React.useMemo(\n        () =>\n            order.map((itemId, index, list) => (\n                <StatusDetailsListItem\n                    key={itemId}\n                    canFocus={index > 0 && index < list.length - 2}\n                    index={index + 1}\n                    id={itemId}\n                />\n            )),\n        [order],\n    );\n\n    return (\n        <CartListContainer>\n            {order.length > 0 && (\n                <CartListScroller\n                    topGradientVisible={topGradientVisible}\n                    bottomGradientVisible={bottomGradientVisible}\n                    wrapperYShift={wrapperYShift}\n                >\n                    {itemList}\n                </CartListScroller>\n            )}\n            <CartTotalPrice>Сумма заказа {totalPrice} ₽</CartTotalPrice>\n        </CartListContainer>\n    );\n};\n","import React from 'react';\nimport { CartRoot, CartBackground } from 'components/Cart/Cart';\n\nimport { StatusDetailsInfo } from './Info/StatusDetailsInfo';\nimport { StatusDetailsList } from './List/StatusDetailsList';\n\nexport const StatusDetails: React.FC = () => (\n    <>\n        <CartRoot>\n            <StatusDetailsList />\n            <StatusDetailsInfo />\n        </CartRoot>\n        <CartBackground />\n    </>\n);\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const DisplayText1 = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 192px;\n    line-height: 192px;\n    letter-spacing: -0.019em;\n`;\n\nexport const DisplayText2 = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 120px;\n    line-height: 128px;\n    letter-spacing: -0.019em;\n`;\n\nexport const DisplayText3 = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 96px;\n    line-height: 104px;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { DialogPage } from 'components/DialogPage/DialogPage';\nimport { MultilineText } from 'components/MultilineText/MultilineText';\nimport { HeadlineText3 } from 'components/Text/Headline';\nimport { DisplayText3 } from 'components/Text/Display';\nimport { color } from 'style/const/color';\n\nconst StyledText = styled(HeadlineText3)`\n    margin-bottom: 48px;\n    color: ${color.text.white};\n`;\n\nconst StyledPhone = styled(DisplayText3)`\n    color: ${color.text.white};\n`;\n\nexport const StatusReport: React.FC = () => {\n    const phoneNumber = useSelector((state) => state.orderStatusReportPage.phoneNumber);\n\n    return (\n        <DialogPage>\n            <StyledText>\n                <MultilineText text={'Если что-то пошло не так,\\n позвоните нам по номеру'} />\n            </StyledText>\n            <StyledPhone>{phoneNumber}</StyledPhone>\n        </DialogPage>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { closeAppAction } from 'store/actions/app';\nimport {\n    DialogPage,\n    DialogTitle,\n    DialogButton,\n    FullscreenDecoration,\n    DialogText,\n} from 'components/DialogPage/DialogPage';\nimport { MultilineText } from 'components/MultilineText/MultilineText';\nimport { ButtonViews } from 'components/Button/Button';\n\nimport emptySvg from './StatusEmpty.assets/empty.svg';\n\nconst StyledDecoration = styled(FullscreenDecoration)`\n    background-image: url('${emptySvg}');\n`;\n\nexport const StatusEmpty: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const buttons = React.useMemo(\n        () => [\n            <DialogButton\n                shouldFocusOnMount\n                view={ButtonViews.secondary}\n                onClick={() => {\n                    dispatch(closeAppAction());\n                }}\n            >\n                Не сейчас\n            </DialogButton>,\n        ],\n        [dispatch],\n    );\n\n    const decorations = React.useMemo(() => <StyledDecoration />, []);\n\n    return (\n        <DialogPage buttons={buttons} decorations={decorations}>\n            <DialogTitle>\n                <MultilineText text=\"Заказов пока нет\" />\n            </DialogTitle>\n            <DialogText>\n                <MultilineText text=\"Чтобы сделать заказ, скажите «Хочу попкорн»\" />\n            </DialogText>\n        </DialogPage>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport { Switch, Route } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { history } from 'tools/history';\nimport { store } from 'store';\nimport { ROUTES } from 'store/constants/router';\nimport { AppLayout } from 'components/AppLayout/AppLayout';\nimport { Catalog } from 'pages/Catalog/Catalog';\nimport { Cart } from 'pages/Cart/Cart';\nimport { Success } from 'pages/Success/Success';\nimport { Promo } from 'pages/Promo/Promo';\nimport { NoArea } from 'pages/NoArea/NoArea';\nimport { AddressSimple } from 'pages/AddressSimple/AddressSimple';\nimport { AddressSimpleGuide } from 'pages/AddressSimpleGuide/AddressSimpleGuide';\nimport { AddressSimpleQuestion } from 'pages/AddressSimpleQuestion/AddressSimpleQuestion';\nimport { AddressSimpleInput } from 'pages/AddressSimpleInput/AddressSimpleInput';\nimport { AddressFullAll } from 'pages/AddressFullAll/AddressFullAll';\nimport { AddressFullApartment } from 'pages/AddressFullApartment/AddressFullApartment';\nimport { AddressFullDoorCode } from 'pages/AddressFullDoorCode/AddressFullDoorCode';\nimport { AddressFullEntrance } from 'pages/AddressFullEntrance/AddressFullEntrance';\nimport { AddressFullFloor } from 'pages/AddressFullFloor/AddressFullFloor';\nimport { AddressFullPhone } from 'pages/AddressFullPhone/AddressFullPhone';\nimport { AddressFullAccommodationGuide } from 'pages/AddressFullAccommodationGuide/AddressFullAccommodationGuide';\nimport { AddressFullPhoneGuide } from 'pages/AddressFullPhoneGuide/AddressFullPhoneGuide';\nimport { Error } from 'pages/Error/Error';\nimport { Wait } from 'pages/Wait/Wait';\nimport { StatusSummary } from 'pages/StatusSummary/StatusSummary';\nimport { StatusDetails } from 'pages/StatusDetails/StatusDetails';\nimport { StatusReport } from 'pages/StatusReport/StatusReport';\nimport { StatusEmpty } from 'pages/StatusEmpty/StatusEmpty';\n\nimport 'style/global.scss';\n\nconst StyledContainer = styled.div`\n    overflow: hidden;\n    width: 100%;\n    height: 100vh;\n    outline: none;\n    font-family: 'SB Sans Text', Helvetica, Arial, sans-serif;\n    background: #000;\n`;\n\nconst preventScroll = (event: React.SyntheticEvent<HTMLDivElement>) => {\n    event.currentTarget.scrollTop = 0;\n};\n\nexport const RootDesktop: React.FC = () => (\n    <ReduxProvider store={store}>\n        <ConnectedRouter history={history}>\n            <StyledContainer onScroll={preventScroll}>\n                <AppLayout>\n                    <Switch>\n                        <Route path={ROUTES.CATALOG}>\n                            <Catalog />\n                        </Route>\n                        <Route path={ROUTES.CART}>\n                            <Cart />\n                        </Route>\n                        <Route path={ROUTES.SUCCESS}>\n                            <Success />\n                        </Route>\n                        <Route path={ROUTES.STATUS_SUMMARY}>\n                            <StatusSummary />\n                        </Route>\n                        <Route path={ROUTES.STATUS_DETAILS}>\n                            <StatusDetails />\n                        </Route>\n                        <Route path={ROUTES.STATUS_REPORT}>\n                            <StatusReport />\n                        </Route>\n                        <Route path={ROUTES.STATUS_EMPTY}>\n                            <StatusEmpty />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_SIMPLE}>\n                            <AddressSimple />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_SIMPLE_GUIDE}>\n                            <AddressSimpleGuide />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_SIMPLE_QUESTION}>\n                            <AddressSimpleQuestion />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_SIMPLE_INPUT}>\n                            <AddressSimpleInput />\n                        </Route>\n                        <Route path={ROUTES.ADDRESS_FULL}>\n                            <Switch>\n                                <Route path={ROUTES.ADDRESS_FULL_ALL}>\n                                    <AddressFullAll />\n                                </Route>\n                                <Route path={ROUTES.ADDRESS_FULL_PHONE}>\n                                    <AddressFullPhone />\n                                </Route>\n                                <Route path={ROUTES.ADDRESS_FULL_APARTMENT}>\n                                    <AddressFullApartment />\n                                </Route>\n                                <Route path={ROUTES.ADDRESS_FULL_ENTRANCE}>\n                                    <AddressFullEntrance />\n                                </Route>\n                                <Route path={ROUTES.ADDRESS_FULL_FLOOR}>\n                                    <AddressFullFloor />\n                                </Route>\n                                <Route path={ROUTES.ADDRESS_FULL_DOOR_CODE}>\n                                    <AddressFullDoorCode />\n                                </Route>\n                                <Route path={ROUTES.ADDRESS_FULL_ACCOMMODATION_GUIDE}>\n                                    <AddressFullAccommodationGuide />\n                                </Route>\n                                <Route path={ROUTES.ADDRESS_FULL_PHONE_GUIDE}>\n                                    <AddressFullPhoneGuide />\n                                </Route>\n                            </Switch>\n                        </Route>\n                        <Route path={ROUTES.PROMO}>\n                            <Promo />\n                        </Route>\n                        <Route path={ROUTES.NO_AREA}>\n                            <NoArea />\n                        </Route>\n                        <Route path={ROUTES.ERROR}>\n                            <Error />\n                        </Route>\n                        <Route path={ROUTES.WAIT}>\n                            <Wait />\n                        </Route>\n                    </Switch>\n                </AppLayout>\n            </StyledContainer>\n        </ConnectedRouter>\n    </ReduxProvider>\n);\n","// TODO: FRNTND-1 mv to npm package\n\nconst headerHeightPx = 65;\n\nexport const layout = {\n    headerHeightPx,\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const BodyText1 = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 16px;\n    line-height: 20px;\n    letter-spacing: -0.019em;\n`;\n\nexport const BodyText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 16px;\n    line-height: 20px;\n    letter-spacing: -0.019em;\n`;\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const ButtonText2 = styled.div`\n    font-weight: ${font.weight.semibold};\n    font-size: 14px;\n    line-height: 16px;\n`;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { transition } from 'style/const/transition';\nimport { focusBorderMixin } from 'style/mixin/focus';\nimport { ButtonText2 } from 'components/Text/Button@touch';\nimport { color } from 'style/const/color';\nimport { icon } from 'style/const/icon';\n\nconst containerBorderRadiusPx = 24;\n\ninterface StyledHeaderButtonProps {\n    isVisible?: boolean;\n}\n\nconst StyledHeaderButton = styled.button<StyledHeaderButtonProps>`\n    position: relative;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    margin: 0 0 0 15px;\n\n    box-sizing: border-box;\n    height: 32px;\n    min-width: 32px;\n    padding: 0;\n    border: none;\n    border-radius: ${containerBorderRadiusPx}px;\n\n    background: transparent;\n\n    font-family: inherit;\n\n    transition: background-color ${transition.default};\n    will-change: background-color;\n\n    ${focusBorderMixin({ borderRadius: containerBorderRadiusPx })}\n\n    &:focus {\n        background: ${color.button.secondary1};\n    }\n\n    &:first-of-type {\n        margin-left: 0;\n    }\n\n    ${({ isVisible }) =>\n        !isVisible &&\n        css`\n            display: none;\n        `}\n`;\n\nconst textHeightPx = icon.xs.sizePx;\n\nconst StyledText = styled(ButtonText2)`\n    margin-left: 8px;\n\n    height: ${textHeightPx}px;\n    padding: 0 7px 0 1px;\n\n    line-height: ${textHeightPx}px;\n\n    color: ${color.text.white};\n\n    opacity: 0.88;\n`;\n\ninterface HeaderButtonProps {\n    text?: string;\n    isVisible?: boolean;\n    onClick?: () => void;\n}\n\nexport const HeaderButtonTouch: React.FC<HeaderButtonProps> = ({ text, isVisible, onClick: handleClick, children }) => {\n    return (\n        <StyledHeaderButton tabIndex={0} onClick={handleClick} isVisible={isVisible} type=\"button\">\n            {children}\n            {text ? <StyledText>{text}</StyledText> : null}\n        </StyledHeaderButton>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButtonTouch } from 'components/HeaderButton/HeaderButton@touch';\nimport { icon } from 'style/const/icon';\n\nimport addressIcon from './address.svg';\n\nconst addressIconSizePx = icon.xs.sizePx;\n\nconst StyledIcon = styled.div`\n    width: ${addressIconSizePx}px;\n    height: ${addressIconSizePx}px;\n\n    background-image: url('${addressIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nexport const HeaderAddressTouch: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const { isVisible } = useSelector((state) => selectHeader(state).address);\n\n    const handleClick = React.useCallback(() => dispatch(push(ROUTES.ADDRESS_SIMPLE)), [dispatch]);\n\n    return (\n        <HeaderButtonTouch isVisible={isVisible} onClick={handleClick}>\n            <StyledIcon />\n        </HeaderButtonTouch>\n    );\n};\n","import React from 'react';\nimport { push } from 'connected-react-router';\nimport styled from 'styled-components';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { selectHeader } from 'store/selectors';\nimport { ROUTES } from 'store/constants/router';\nimport { HeaderButtonTouch } from 'components/HeaderButton/HeaderButton@touch';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\n\nimport cartIcon from './HeaderCart.assets/cart.svg';\n\nconst cartIconSizePx = icon.xs.sizePx;\n\nconst StyledIcon = styled.div`\n    position: relative;\n\n    width: ${cartIconSizePx}px;\n    height: ${cartIconSizePx}px;\n\n    background-image: url('${cartIcon}');\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst badgeSizePx = 16;\nconst badgeOffsetPx = cartIconSizePx / 2;\n\nconst StyledBadge = styled.span`\n    position: absolute;\n    left: ${badgeOffsetPx}px;\n    bottom: ${badgeOffsetPx}px;\n\n    width: ${badgeSizePx}px;\n    height: ${badgeSizePx}px;\n    border-radius: 50%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    line-height: 12px;\n    font-size: 10px;\n    letter-spacing: -0.019em;\n\n    box-sizing: border-box;\n\n    color: ${color.text.primary};\n    background: ${color.button.primary};\n`;\n\nexport const HeaderCartTouch: React.FC = () => {\n    const dispatch = useDispatch();\n\n    const { count, price, isVisible } = useSelector((state) => selectHeader(state).cart);\n\n    const handleClick = React.useCallback(() => {\n        dispatch(push(ROUTES.CART));\n    }, [dispatch]);\n\n    const text = `${price} ₽`;\n\n    return (\n        <HeaderButtonTouch isVisible={isVisible} onClick={handleClick} text={text}>\n            <StyledIcon>\n                <StyledBadge>{count}</StyledBadge>\n            </StyledIcon>\n        </HeaderButtonTouch>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { selectHeader } from 'store/selectors';\nimport { icon } from 'style/const/icon';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout@touch';\nimport { transition } from 'style/const/transition';\nimport { BodyText2 } from 'components/Text/Body@touch';\n\nimport { HeaderAddressTouch } from '../HeaderAddress/HeaderAddress@touch';\nimport { HeaderCartTouch } from '../HeaderCart/HeaderCart@touch';\n\nimport backButtonIcon from './Header.assets/chevron-left.svg';\nimport logoIcon from './Header.assets/logo.svg';\n\ninterface StyledHeaderProps {\n    isVisible: boolean;\n}\n\nconst StyledHeader = styled.div<StyledHeaderProps>`\n    position: relative;\n\n    height: ${layout.headerHeightPx}px;\n\n    box-sizing: border-box;\n    padding: 14px 13px 9px;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    --spatial-navigation-contain: contain;\n\n    opacity: ${({ isVisible }) => Number(isVisible)};\n\n    transition: opacity ${transition.default};\n\n    z-index: 2;\n`;\n\nconst backButtonIconSizePx = icon.xs.sizePx;\n\nconst StyledBackButton = styled.span`\n    width: 32px;\n    height: 32px;\n    margin-right: 9px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &::before {\n        content: '';\n\n        display: block;\n        width: ${backButtonIconSizePx}px;\n        height: ${backButtonIconSizePx}px;\n\n        background-image: url(${backButtonIcon});\n        background-repeat: no-repeat;\n        background-size: contain;\n    }\n`;\n\nconst StyledSection = styled.div`\n    display: flex;\n    align-items: center;\n`;\n\nconst StyledLogo = styled.div`\n    margin-left: 3px;\n\n    width: 28px;\n    height: 28px;\n    border-radius: 8px;\n\n    background-image: url(${logoIcon});\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst StyledTitle = styled(BodyText2)`\n    margin-left: 10px;\n\n    display: inline-block;\n\n    color: ${color.text.white};\n`;\n\n// eslint-disable-next-line  @typescript-eslint/no-unused-vars\nexport const HeaderTouch: React.FC = ({ children, ...props }) => {\n    const { title, isBackButtonVisible, isVisible } = useSelector(selectHeader);\n\n    return (\n        <StyledHeader isVisible={isVisible} {...props}>\n            <StyledSection>\n                {isBackButtonVisible && <StyledBackButton />}\n                <StyledLogo />\n                <StyledTitle>{title}</StyledTitle>\n            </StyledSection>\n            <StyledSection>\n                <HeaderAddressTouch />\n                <HeaderCartTouch />\n            </StyledSection>\n        </StyledHeader>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { HeaderTouch } from 'components/Header/Header@touch';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout@touch';\nimport { TransparentPixel } from 'components/TransparentPixel/TransparentPixel';\n\nconst Container = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: stretch;\n    align-content: stretch;\n\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n\n    background-color: ${color.background.default};\n`;\n\nconst AppContent = styled.div`\n    position: absolute;\n    top: ${layout.headerHeightPx}px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n`;\n\nexport const AppLayoutTouch: React.FC = ({ children }) => {\n    return (\n        <Container>\n            <TransparentPixel />\n            <HeaderTouch />\n            <AppContent>{children}</AppContent>\n        </Container>\n    );\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const FootnoteText1 = styled.div`\n    font-size: 14px;\n    line-height: 18px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.medium};\n`;\n\nexport const FootnoteText2 = styled.div`\n    font-size: 14px;\n    line-height: 18px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.semibold};\n`;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { addItemAction, removeItemAction } from 'store/actions/native';\nimport { IndexBadge } from 'components/IndexBadge/IndexBadge';\nimport { FootnoteText1, FootnoteText2 } from 'components/Text/Footnote@touch';\nimport { color } from 'style/const/color';\nimport MoreIcon from 'assets/icons/add.svg';\nimport LessIcon from 'assets/icons/remove.svg';\n\nconst StyledCartListItemTouch = styled.div`\n    position: relative;\n    padding: 10px 16px;\n    margin-bottom: 4px;\n\n    display: flex;\n`;\n\nconst thumbSizePx = 40;\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\n\nconst StyledThumb = styled.div<StyledThumbProps>`\n    position: relative;\n\n    margin-right: 10px;\n\n    height: ${thumbSizePx}px;\n    width: ${thumbSizePx}px;\n\n    background-image: url('${({ imageUrl }) => imageUrl}');\n    background-size: contain;\n    background-position: center;\n    background-repeat: no-repeat;\n`;\n\nconst StyledInfo = styled.div`\n    display: flex;\n    flex-grow: 1;\n    flex-direction: column;\n    justify-content: center;\n`;\n\nconst StyledName = styled(FootnoteText1)`\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPrice = styled(FootnoteText1)`\n    margin-top: 2px;\n\n    color: ${color.text.secondary};\n`;\n\nconst StyledIndexBadge = styled(IndexBadge)`\n    top: -4px;\n    right: -4px;\n`;\n\nconst StyledSelector = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    margin-left: 16px;\n\n    width: 100px;\n`;\n\ninterface StyledCountTouchButtonProps {\n    isDanger?: boolean;\n}\n\nconst StyledCountTouchButton = styled.div<StyledCountTouchButtonProps>`\n    cursor: pointer;\n    background-color: rgba(255, 255, 255, 0.06);\n    border-radius: 8px;\n    display: flex;\n    width: 32px;\n    height: 32px;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    font-size: 14px;\n\n    ${({ isDanger }) =>\n        isDanger &&\n        css`\n            background-color: ${color.button.critical};\n        `}\n`;\n\ntype StyledIconProps = {\n    icon: string;\n};\n\nconst StyledIcon = styled.div<StyledIconProps>`\n    height: 12px;\n    width: 12px;\n\n    background-image: url(${({ icon }) => icon});\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst StyledRemoveIcon = styled(StyledIcon)`\n    transform: rotate(45deg);\n    height: 15px;\n    width: 15px;\n`;\n\nconst StyledCount = styled(FootnoteText2)`\n    color: ${color.text.primary};\n`;\n\nexport interface CartListItemTouchProps {\n    id: string;\n    index: number;\n}\n\nexport interface CartListItemTouchViewProps {\n    imageUrl: string;\n    name: string;\n    price: number;\n    count: number;\n    disabled?: boolean;\n    isMoreButtonDisabled?: boolean;\n}\n\nexport const CartListItemTouch: React.FC<CartListItemTouchProps> = ({ index, id }) => {\n    const { imageUrl, name, price, count, disabled } = useSelector(({ cartPageTouch: { itemsMap } }) => itemsMap[id]);\n\n    const dispatch = useDispatch();\n\n    const handleLessClick = React.useCallback(() => {\n        dispatch(\n            removeItemAction({\n                item: id,\n                count: '1',\n                shouldRemoveMention: !count,\n            }),\n        );\n    }, [dispatch, id, count]);\n\n    const handleMoreClick = React.useCallback(() => {\n        dispatch(\n            addItemAction({\n                item: id,\n                count: '1',\n            }),\n        );\n    }, [dispatch, id]);\n\n    return (\n        <StyledCartListItemTouch>\n            <StyledThumb imageUrl={imageUrl}>\n                <StyledIndexBadge size=\"xxs\" index={index + 1} />\n            </StyledThumb>\n            <StyledInfo>\n                <StyledName>{name}</StyledName>\n                <StyledPrice>{price} ₽</StyledPrice>\n            </StyledInfo>\n            {disabled ? null : (\n                <StyledSelector>\n                    <StyledCountTouchButton isDanger={!count} onClick={handleLessClick}>\n                        {count ? <StyledIcon icon={LessIcon} /> : <StyledRemoveIcon icon={MoreIcon} />}\n                    </StyledCountTouchButton>\n                    <StyledCount>{count}</StyledCount>\n                    <StyledCountTouchButton onClick={handleMoreClick}>\n                        <StyledIcon icon={MoreIcon} />\n                    </StyledCountTouchButton>\n                </StyledSelector>\n            )}\n        </StyledCartListItemTouch>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { BodyText1, BodyText2 } from 'components/Text/Body@touch';\nimport { color } from 'style/const/color';\n\nimport { CartListItemTouch } from '../ListItem/CartListItem@touch';\n\nconst StyledCartListTouch = styled.div`\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    margin-top: 17px;\n`;\n\nconst StyledContainer = styled.div`\n    height: 190px;\n    margin-bottom: 24px;\n`;\n\nconst StyledTotalPrice = styled(BodyText2)`\n    padding-left: 16px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledPrice = styled.span`\n    color: ${color.text.active};\n`;\n\nconst StyledMinimalPrice = styled(BodyText1)`\n    margin-top: 8px;\n\n    padding-left: 16px;\n\n    color: ${color.text.warning};\n`;\n\nexport const CartListTouch: React.FC = () => {\n    const { order, totalPrice, toMinimumPrice } = useSelector(({ cartPageTouch }) => cartPageTouch);\n\n    return (\n        <StyledCartListTouch>\n            {order.length > 0 && (\n                <StyledContainer>\n                    {order.map((itemId, index) => (\n                        <CartListItemTouch key={itemId} id={itemId} index={index} />\n                    ))}\n                </StyledContainer>\n            )}\n            <StyledTotalPrice>\n                Сумма к оплате\n                <StyledPrice> {totalPrice} ₽</StyledPrice>\n            </StyledTotalPrice>\n            {Boolean(toMinimumPrice) && (\n                <StyledMinimalPrice>До минимального заказа еще {toMinimumPrice} ₽</StyledMinimalPrice>\n            )}\n        </StyledCartListTouch>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { color } from 'style/const/color';\n\nimport shadowImage from './Pin.assets/shadow.svg';\n\nconst StyledPin = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nconst badgeHeightPx = 43;\n\nconst StyledBody = styled.div`\n    position: relative;\n\n    height: ${badgeHeightPx}px;\n    min-width: ${badgeHeightPx}px;\n    padding: 10px 11px;\n    border-radius: ${badgeHeightPx / 2}px;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    text-align: center;\n\n    background: ${color.button.critical};\n`;\n\nconst kernelWidthPx = 2;\nconst kernelBorderRadiusPx = kernelWidthPx / 2;\n\nconst StyledKernel = styled.div`\n    height: 16px;\n    width: ${kernelWidthPx}px;\n\n    border-bottom-left-radius: ${kernelBorderRadiusPx}px;\n    border-bottom-right-radius: ${kernelBorderRadiusPx}px;\n\n    background: ${color.button.critical};\n`;\n\nconst StyledShadow = styled.div`\n    margin-top: -3px;\n\n    width: 37px;\n    height: 8px;\n\n    background: transparent no-repeat center/contain;\n    background-image: url('${shadowImage}');\n`;\n\nexport const Pin: React.FC = ({ children }) => {\n    return (\n        <StyledPin>\n            <StyledBody>{children}</StyledBody>\n            <StyledKernel />\n            <StyledShadow />\n        </StyledPin>\n    );\n};\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const ParagraphText2 = styled.div`\n    font-size: 16px;\n    line-height: 22px;\n    letter-spacing: -0.019em;\n    font-weight: ${font.weight.medium};\n`;\n","import styled from 'styled-components';\nimport { font } from 'style/const/font';\n\nexport const HeadlineText2 = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 24px;\n    line-height: 28px;\n    letter-spacing: -0.022em;\n`;\n\nexport const HeadlineText4 = styled.div`\n    font-weight: ${font.weight.bold};\n    font-size: 20px;\n    line-height: 24px;\n    letter-spacing: -0.022em;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { Pin } from 'components/Pin/Pin@touch';\nimport { ParagraphText2 } from 'components/Text/Paragraph@touch';\nimport { CaptionText } from 'components/Text/Caption';\nimport { HeadlineText4 } from 'components/Text/Headline@touch';\nimport { BodyText1 } from 'components/Text/Body@touch';\nimport { color } from 'style/const/color';\nimport { font } from 'style/const/font';\n\nimport bgImage from '../Cart.assets/bg@touch.jpg';\n\nconst StyledBackground = styled.div`\n    position: absolute;\n    top: -65px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    background-image: url('${bgImage}');\n\n    opacity: 0.6;\n`;\n\nconst StyledCartInfoTouch = styled.div`\n    position: relative;\n\n    height: 236px;\n\n    padding: 15px 16px 0;\n    box-sizing: border-box;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    &::before {\n        content: '';\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        height: 96px;\n        background: linear-gradient(360deg, #080808 0%, rgba(8, 8, 8, 0) 100%);\n\n        z-index: 1;\n\n        pointer-events: none;\n    }\n`;\n\nconst StyledPlaceInfo = styled.div`\n    position: relative;\n    z-index: 1;\n`;\n\nconst StyledTime = styled(ParagraphText2)`\n    font-weight: ${font.weight.semibold};\n    color: ${color.text.primary};\n`;\n\nconst StyledUnit = styled(CaptionText)`\n    margin-top: -4px;\n\n    color: ${color.text.primary};\n`;\n\nconst StyledAddress = styled(HeadlineText4)`\n    margin-top: 14px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    -webkit-line-clamp: 2;\n\n    color: ${color.text.primary};\n    text-align: center;\n`;\n\nconst StyledPersonal = styled(BodyText1)`\n    margin-top: 6px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n`;\n\nconst StyledPersonalLocation = styled(BodyText1)`\n    -webkit-line-clamp: 2;\n\n    color: ${color.text.secondary};\n`;\n\nexport const CartInfoTouch: React.FC = () => {\n    const { address } = useSelector(({ userData }) => userData);\n    const { deliveryTime, hasRequiredData, personalAddress } = useSelector(({ cartPageTouch }) => cartPageTouch);\n\n    return (\n        <StyledCartInfoTouch>\n            <StyledPlaceInfo>\n                <Pin>\n                    <StyledTime>{deliveryTime}</StyledTime>\n                    <StyledUnit size={12} lineHeight={16}>\n                        мин\n                    </StyledUnit>\n                </Pin>\n                <StyledAddress>{address}</StyledAddress>\n                {hasRequiredData ? (\n                    <StyledPersonal>\n                        <StyledPersonalLocation>{personalAddress}</StyledPersonalLocation>\n                    </StyledPersonal>\n                ) : null}\n            </StyledPlaceInfo>\n            <StyledBackground />\n        </StyledCartInfoTouch>\n    );\n};\n","import React from 'react';\n\nimport { CartListTouch } from './List/CartList@touch';\nimport { CartInfoTouch } from './Info/CartInfo@touch';\n\nexport const CartTouch: React.FC = () => {\n    return (\n        <>\n            <CartInfoTouch />\n            <CartListTouch />\n        </>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport AddIcon from 'assets/icons/add.svg';\nimport RemoveIcon from 'assets/icons/remove.svg';\nimport { useDispatch } from 'hooks/useDispatch';\nimport { useSelector } from 'hooks/useSelector';\nimport { addItemAction, removeItemAction } from 'store/actions/native';\nimport { IndexBadge } from 'components/IndexBadge/IndexBadge';\nimport { BadgeType } from 'components/Badge/Badge';\n\nconst cardBorderRadiusPx = 20;\n\nconst StyledListItem = styled.div`\n    position: relative;\n    border-radius: ${cardBorderRadiusPx}px;\n    background-color: rgba(255, 255, 255, 0.06);\n    color: #fff;\n`;\n\ninterface StyledThumbProps {\n    imageUrl: string;\n}\n\nconst StyledThumb = styled.div<StyledThumbProps>`\n    display: block;\n    width: 100%;\n    height: 168px;\n\n    background-image: url('${({ imageUrl }) => imageUrl}');\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n\n    border-top-left-radius: ${cardBorderRadiusPx}px;\n    border-top-right-radius: ${cardBorderRadiusPx}px;\n`;\n\nconst StyledIndexBadge = styled(IndexBadge)`\n    top: 8px;\n    right: 8px;\n    color: #fff;\n`;\n\ntype StyledIconProps = {\n    icon: string;\n};\n\nconst StyledIcon = styled.div<StyledIconProps>`\n    height: 12px;\n    width: 12px;\n\n    background-image: url(${({ icon }) => icon});\n    background-repeat: no-repeat;\n    background-size: contain;\n`;\n\nconst StyledDescription = styled.div`\n    padding: 8px 16px 0;\n`;\n\nconst StyledButtonsContainer = styled.div`\n    padding: 12px;\n    margin-top: 6px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n`;\n\nconst StyledName = styled.div`\n    color: #fff;\n    font-size: 14px;\n    height: 36px;\n\n    display: block;\n    display: -webkit-box;\n\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n`;\n\ntype StyledTouchButtonProps = {\n    disabled?: boolean;\n};\n\nconst StyledTouchButton = styled.div<StyledTouchButtonProps>`\n    cursor: pointer;\n    padding: 11px 20px;\n    text-align: center;\n    font-size: 14px;\n    background-color: rgba(255, 255, 255, 0.06);\n    border-radius: 12px;\n    width: 100%;\n    opacity: ${({ disabled }) => (disabled ? 0.2 : 1)};\n`;\n\nconst StyledCountTouchButton = styled.div`\n    cursor: pointer;\n    background-color: rgba(255, 255, 255, 0.06);\n    border-radius: 12px;\n    display: flex;\n    width: 40px;\n    height: 40px;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    font-size: 14px;\n`;\n\nconst StyledCount = styled.div`\n    font-size: 16px;\n`;\n\ninterface CatalogListItemTouchProps {\n    id: string;\n}\n\nexport interface CatalogListItemTouchViewProps {\n    imageUrl: string;\n    count: number;\n    name: string;\n    index: number;\n    price: number;\n    badge?: BadgeType;\n    disabled?: boolean;\n    buttonDisabled?: boolean;\n}\n\nexport const CatalogListItemTouch: React.FC<CatalogListItemTouchProps> = ({ id }) => {\n    const dispatch = useDispatch();\n    const { imageUrl, count, index, name, price, disabled } = useSelector(\n        ({ catalogPageTouch }) => catalogPageTouch.itemsMap[id],\n    );\n    const isPossibleChangeCountActive = count > 0;\n\n    const handleClickAdd = React.useCallback(() => {\n        if (!disabled) {\n            dispatch(addItemAction({ item: id, count: '1' }));\n        }\n    }, [dispatch, id, disabled]);\n\n    const handleClickRemove = React.useCallback(() => {\n        if (!disabled) {\n            dispatch(removeItemAction({ item: id, count: '1' }));\n        }\n    }, [dispatch, id, disabled]);\n\n    return (\n        <StyledListItem tabIndex={0}>\n            <StyledThumb imageUrl={imageUrl} />\n            <StyledIndexBadge size=\"xs\" index={index} />\n            <StyledDescription>\n                <StyledName>{name}</StyledName>\n            </StyledDescription>\n            <StyledButtonsContainer>\n                {isPossibleChangeCountActive ? (\n                    <>\n                        <StyledCountTouchButton onClick={handleClickRemove}>\n                            <StyledIcon icon={RemoveIcon} />\n                        </StyledCountTouchButton>\n                        <StyledCount>{count}</StyledCount>\n                        <StyledCountTouchButton onClick={handleClickAdd}>\n                            <StyledIcon icon={AddIcon} />\n                        </StyledCountTouchButton>\n                    </>\n                ) : (\n                    <StyledTouchButton onClick={handleClickAdd} disabled={disabled}>\n                        {price} ₽\n                    </StyledTouchButton>\n                )}\n            </StyledButtonsContainer>\n        </StyledListItem>\n    );\n};\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\n\nimport { CatalogListItemTouch } from '../ListItem/CatalogListItem@touch';\n\nconst StyledCatalogList = styled.div`\n    width: 100%;\n    height: 100%;\n    overflow-y: auto;\n    padding: 6px 14px;\n    box-sizing: border-box;\n`;\n\nconst StyledScrollableCatalogContainer = styled.div`\n    display: grid;\n    grid-gap: 9px;\n    grid-template-columns: 1fr 1fr;\n`;\n\nexport const CatalogListTouch: React.FC = () => {\n    const itemIds = useSelector(({ catalogPageTouch }) => catalogPageTouch.order);\n    const itemsList = React.useMemo(() => itemIds.map((itemId) => <CatalogListItemTouch key={itemId} id={itemId} />), [\n        itemIds,\n    ]);\n\n    return (\n        <StyledCatalogList>\n            <StyledScrollableCatalogContainer>{itemsList}</StyledScrollableCatalogContainer>\n        </StyledCatalogList>\n    );\n};\n","import React from 'react';\n\nimport { CatalogListTouch } from './List/CatalogList@touch';\n\nexport const CatalogTouch: React.FC = () => {\n    return <CatalogListTouch />;\n};\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { useSprings, animated } from 'react-spring/web';\nimport { useGesture } from 'react-use-gesture';\n\nconst StyledSliderContainer = styled.div`\n    width: 100%;\n    height: 100%;\n`;\n\nconst StyledSlider = styled.div`\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n`;\n\nconst StyledSlide = styled.div`\n    width: 100%;\n    height: 100%;\n    will-change: transform;\n    user-select: none;\n    pointer-events: none;\n`;\n\nconst clamp = (input: number, lower: number, upper: number) => Math.min(Math.max(input, lower), upper);\n\ninterface SliderProps {\n    auto?: number;\n    className?: string;\n    children?: React.ReactNode[];\n    onSlideChange?: (slide: number) => void;\n    width: number;\n}\n\nexport const Slider: React.FC<SliderProps> = ({ auto = 0, className, children = [], onSlideChange, width }) => {\n    const [slide, setSlide] = useState(0);\n    const [isDragging, setDragging] = useState(false);\n\n    const [springProps, setSpringProps] = useSprings(children.length, (index) => ({\n        offset: index,\n    }));\n\n    const gestureBinds = useGesture(\n        {\n            onDrag: ({ down, movement: [xDelta], direction: [xDir], distance, cancel, first }) => {\n                if (first) {\n                    setDragging(true);\n                }\n\n                if (down && distance > width / 2) {\n                    if (cancel) cancel();\n\n                    setSlide(clamp(slide + (xDir > 0 ? -1 : 1), 0, children?.length - 1));\n                }\n\n                setSpringProps((index: number) => ({\n                    offset: (down ? xDelta : 0) / width + (index - slide),\n                }));\n            },\n            onClick: () => {\n                if (isDragging) {\n                    setDragging(false);\n                }\n\n                return false;\n            },\n        },\n        {\n            drag: {\n                delay: 200,\n            },\n        },\n    );\n\n    useEffect(() => {\n        setSpringProps((index: number) => ({ offset: index - slide }));\n\n        onSlideChange && onSlideChange(slide);\n    }, [slide, setSpringProps, onSlideChange]);\n\n    useEffect(() => {\n        let intervalId: number;\n\n        if (auto > 0) {\n            intervalId = setInterval(() => {\n                const targetIndex = (slide + 1) % children.length;\n\n                setSlide(targetIndex);\n            }, auto);\n        }\n\n        return () => {\n            if (intervalId) {\n                clearInterval(intervalId);\n            }\n        };\n    }, [auto, children.length, slide]);\n\n    return (\n        <StyledSliderContainer className={className}>\n            <StyledSlider>\n                {springProps.map(({ offset }, index) => (\n                    <animated.div\n                        {...gestureBinds()}\n                        key={index}\n                        style={{\n                            transform: offset.to((offsetX) => `translateX(${offsetX * 100}%)`),\n                            position: 'absolute',\n                            width: '100%',\n                            height: '100%',\n                            willChange: 'transform',\n                        }}\n                    >\n                        <StyledSlide>{children[index]}</StyledSlide>\n                    </animated.div>\n                ))}\n            </StyledSlider>\n        </StyledSliderContainer>\n    );\n};\n","import React, { useState, useMemo, useRef, useEffect } from 'react';\nimport styled, { css, FlattenSimpleInterpolation } from 'styled-components';\nimport { Slider } from 'components/Slider/Slider';\nimport { font } from 'style/const/font';\nimport { color } from 'style/const/color';\nimport { transition } from 'style/const/transition';\n\nimport popcornBox2 from './Promo.assets/popcorn-box_1.png';\nimport popcornBox1 from './Promo.assets/popcorn-box_2.png';\nimport popcornBox3 from './Promo.assets/popcorn-box_3.png';\nimport popcornBox4 from './Promo.assets/popcorn-box_4.png';\nimport popcorn1 from './Promo.assets/popcorn-1.png';\nimport popcorn2 from './Promo.assets/popcorn-2.png';\nimport popcorn3 from './Promo.assets/popcorn-3.png';\n\nconst popcornBoxList: FlattenSimpleInterpolation[] = [\n    css`\n        width: 250px;\n        height: 385px;\n        background-image: url('${popcornBox1}');\n    `,\n    css`\n        width: 250px;\n        height: 280px;\n        margin-top: 84px;\n        background-image: url('${popcornBox2}');\n    `,\n    css`\n        width: 250px;\n        height: 280px;\n        margin-top: 84px;\n        background-image: url('${popcornBox3}');\n    `,\n    css`\n        width: 250px;\n        height: 380px;\n        margin-top: 31px;\n        background-image: url('${popcornBox4}');\n    `,\n];\n\nconst popcornList: FlattenSimpleInterpolation[] = [\n    css`\n        width: 54px;\n        height: 54px;\n        top: 41px;\n        left: 260px;\n        background-image: url(${popcorn2});\n    `,\n    css`\n        width: 71px;\n        height: 71px;\n        top: 226px;\n        left: 75px;\n        background-image: url(${popcorn1});\n    `,\n    css`\n        width: 76px;\n        height: 76px;\n        top: 271px;\n        left: 287px;\n        background-image: url(${popcorn1});\n    `,\n    css`\n        width: 64px;\n        height: 64px;\n        top: 311px;\n        left: 7px;\n        background-image: url(${popcorn3});\n    `,\n    css`\n        width: 74px;\n        height: 74px;\n        top: 530px;\n        left: 274px;\n        background-image: url(${popcorn3});\n    `,\n];\n\n/* Slider */\nconst StyledSlider = styled(Slider)`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n`;\n\ninterface PopcornBoxProps {\n    popcornStyle: FlattenSimpleInterpolation;\n}\n\nconst PopcornBox = styled.div<PopcornBoxProps>`\n    margin: 26px auto 0;\n\n    background-position: center;\n    background-size: contain;\n    background-repeat: no-repeat;\n\n    transition: opacity 1s ${transition.timingFn.default};\n\n    ${({ popcornStyle }) => popcornStyle}\n`;\n\n/* Text container */\nconst TextContainer = styled.div`\n    position: relative;\n    text-align: center;\n    padding: 253px 24px 0;\n    user-select: none;\n    pointer-events: none;\n`;\n\nconst Title = styled.div`\n    font-weight: ${font.weight.bold};\n    font-size: 32px;\n    line-height: 36px;\n    letter-spacing: -0.0011em;\n\n    color: ${color.text.primary};\n`;\n\nconst Subtitle = styled.div`\n    font-weight: ${font.weight.medium};\n    font-size: 16px;\n    line-height: 22px;\n    letter-spacing: -0.019em;\n\n    color: ${color.text.secondary};\n\n    margin-top: 10px;\n`;\n\n/* Pins container */\nconst SliderPinsContainer = styled.div`\n    position: absolute;\n    display: grid;\n    grid-auto-flow: column;\n    grid-gap: 6px;\n    top: 483px;\n    left: 50%;\n    transform: translateX(-50%);\n    pointer-events: none;\n`;\n\n/* Corns container */\nconst CornsContainer = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n    z-index: 1;\n`;\n\ninterface CornProps {\n    popcornStyle: FlattenSimpleInterpolation;\n}\n\nconst Corn = styled.div<CornProps>`\n    position: absolute;\n\n    background-position: center;\n    background-size: contain;\n    background-repeat: no-repeat;\n\n    ${({ popcornStyle }) => popcornStyle}\n`;\n\ninterface PinProps {\n    isActive: boolean;\n}\n\nconst Pin = styled.div<PinProps>`\n    background-color: #fff;\n    border-radius: 1.5px;\n    width: 12px;\n    height: 3px;\n\n    opacity: ${({ isActive }) => (isActive ? 1 : 0.16)};\n    transition: opacity 0.5s ease-in-out;\n`;\n\nexport const PromoTouch: React.FC = () => {\n    const promoRef = useRef<HTMLDivElement>(null);\n    const [promoWidth, setPromoWidth] = useState(0);\n    const [currentSlideIndex, setCurrentSlideIndex] = useState(0);\n    const cornsList = useMemo(() => popcornList.map((style, index) => <Corn key={index} popcornStyle={style} />), []);\n\n    useEffect(() => {\n        if (promoRef.current) {\n            const { width } = promoRef.current.getBoundingClientRect();\n\n            setPromoWidth(width);\n        }\n    }, []);\n\n    return (\n        <div ref={promoRef}>\n            <CornsContainer>{cornsList}</CornsContainer>\n            <TextContainer>\n                <Title>Доставляем попкорн к просмотру фильмов</Title>\n                <Subtitle>Бесплатно в течении 15-30 минут для Москвы и Санкт-Петербурга</Subtitle>\n            </TextContainer>\n            <SliderPinsContainer>\n                {popcornBoxList.map((_, index) => (\n                    <Pin key={index} isActive={index === currentSlideIndex} />\n                ))}\n            </SliderPinsContainer>\n            <StyledSlider auto={5000} onSlideChange={(slide: number) => setCurrentSlideIndex(slide)} width={promoWidth}>\n                {popcornBoxList.map((style, index) => (\n                    <PopcornBox key={index} popcornStyle={style} />\n                ))}\n            </StyledSlider>\n        </div>\n    );\n};\n","import React, { useMemo } from 'react';\nimport styled, { css } from 'styled-components';\nimport { useSelector } from 'hooks/useSelector';\nimport { ParagraphText2 } from 'components/Text/Paragraph@touch';\nimport { HeadlineText2 } from 'components/Text/Headline@touch';\nimport { color } from 'style/const/color';\nimport { layout } from 'style/const/layout@touch';\n\nimport figureIcon1 from './Success.assets/figure-1.svg';\nimport figureIcon2 from './Success.assets/figure-2.svg';\nimport figureIcon3 from './Success.assets/figure-3.svg';\nimport figureIcon4 from './Success.assets/figure-4.svg';\nimport figureIcon5 from './Success.assets/figure-5.svg';\nimport figureIcon6 from './Success.assets/figure-6.svg';\nimport figureIcon7 from './Success.assets/figure-7.svg';\nimport figureIcon8 from './Success.assets/figure-8.svg';\nimport figureIcon9 from './Success.assets/figure-9.svg';\n\nconst SuccessTouchContainer = styled.div`\n    position: relative;\n\n    height: 100vh;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n`;\n\nconst SuccessTouchOrderInfo = styled.div`\n    text-align: center;\n    padding: 0 30px;\n\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    margin-top: -${layout.headerHeightPx}px;\n`;\n\nconst SuccessTouchOrderNumber = styled(ParagraphText2)`\n    color: ${color.text.secondary};\n`;\n\nconst SuccessTouchOrderTime = styled(HeadlineText2)`\n    margin-top: 10px;\n\n    color: ${color.text.primary};\n`;\n\ninterface FigureTouchProps {\n    params: [string, number, number, number];\n}\n\nconst SuccessTouchFigure = styled.div<FigureTouchProps>`\n    position: absolute;\n\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: contain;\n\n    ${({ params: [bgUrl, topPx, leftPx, sizePx] }) => css`\n        top: ${topPx}%;\n        left: ${leftPx}%;\n\n        height: ${sizePx}px;\n        width: ${sizePx}px;\n\n        background-image: url('${bgUrl}');\n    `}\n`;\n\nconst figureList: FigureTouchProps['params'][] = [\n    [figureIcon1, 6.1, 13.9, 30],\n    [figureIcon2, 27.3, 83.7, 36],\n    [figureIcon3, 0.6, 78, 24],\n    [figureIcon4, 70.6, 74, 32],\n    [figureIcon5, 51.4, 62.2, 31],\n    [figureIcon6, 20.6, 51.3, 28],\n    [figureIcon7, 15.6, 39.7, 18],\n    [figureIcon8, 53.8, 46.5, 20],\n    [figureIcon9, 63.8, 18, 36],\n    [figureIcon4, 44.3, 11.3, 17],\n];\n\nexport const SuccessTouch: React.FC = () => {\n    const deliveryTime = useSelector(({ delivery }) => delivery.deliveryTime);\n    const { orderId } = useSelector(({ cart }) => cart);\n    const touchFigureList = useMemo(\n        () => figureList.map((params, index) => <SuccessTouchFigure key={index} params={params} />),\n        [],\n    );\n\n    return (\n        <SuccessTouchContainer>\n            <SuccessTouchOrderInfo>\n                <SuccessTouchOrderNumber>Заказ #{orderId} оформлен</SuccessTouchOrderNumber>\n                <SuccessTouchOrderTime>\n                    Спасибо за заказ!\n                    <br />\n                    Будем у вас через {deliveryTime} минут.\n                </SuccessTouchOrderTime>\n            </SuccessTouchOrderInfo>\n            {touchFigureList}\n        </SuccessTouchContainer>\n    );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport { Switch, Route } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { history } from 'tools/history';\nimport { store } from 'store';\nimport { ROUTES } from 'store/constants/router';\nimport { AppLayoutTouch } from 'components/AppLayout/AppLayout@touch';\nimport { CartTouch } from 'pages/Cart/Cart@touch';\nimport { CatalogTouch } from 'pages/Catalog/Catalog@touch';\nimport { PromoTouch } from 'pages/Promo/Promo@touch';\nimport { SuccessTouch } from 'pages/Success/Success@touch';\n\nconst StyledContainer = styled.div`\n    overflow: hidden;\n    width: 100%;\n    height: 100vh;\n    outline: none;\n    font-family: 'SB Sans Text', Helvetica, Arial, sans-serif;\n    background: #000;\n`;\n\nconst preventScroll = (event: React.SyntheticEvent<HTMLDivElement>) => {\n    event.currentTarget.scrollTop = 0;\n};\n\nexport const RootTouch: React.FC = () => (\n    <ReduxProvider store={store}>\n        <ConnectedRouter history={history}>\n            <StyledContainer onScroll={preventScroll}>\n                <AppLayoutTouch>\n                    <Switch>\n                        <Route path={ROUTES.CATALOG}>\n                            <CatalogTouch />\n                        </Route>\n                        <Route path={ROUTES.CART}>\n                            <CartTouch />\n                        </Route>\n                        <Route path={ROUTES.SUCCESS}>\n                            <SuccessTouch />\n                        </Route>\n                        <Route path={ROUTES.PROMO}>\n                            <PromoTouch />\n                        </Route>\n                    </Switch>\n                </AppLayoutTouch>\n            </StyledContainer>\n        </ConnectedRouter>\n    </ReduxProvider>\n);\n","import { mobileDetect } from 'tools/browser';\n\nimport { RootDesktop } from './Root@desktop';\nimport { RootTouch } from './Root@touch';\n\nconst isMobile = mobileDetect();\n\nexport const Root = isMobile ? RootTouch : RootDesktop;\n","import 'core-js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from '@sentry/react';\nimport { Root } from 'components/Root/Root';\n\nimport 'tools/new-spatial-navigation';\n\nif (process.env.REACT_APP_ENVIRONMENT === 'production') {\n    Sentry.init({ dsn: 'https://b33b53e4a61946f1a44139076cefb598@o414705.ingest.sentry.io/5304676' });\n}\n\nexport const renderApp = (App: React.FC) => {\n    ReactDOM.render(<App />, document.getElementById('application_root'));\n};\n\nrenderApp(Root);\n\nif (process.env.REACT_APP_ENVIRONMENT !== 'production' && module.hot) {\n    module.hot.accept('./components/Root/Root', () => {\n        // eslint-disable-next-line\n        const { Root } = require('./components/Root/Root.tsx');\n        renderApp(Root);\n    });\n}\n\n// eslint-disable-next-line no-console\nconsole.log('rev', process.env.REACT_APP_REV);\n","module.exports = __webpack_public_path__ + \"static/media/add.6f87e0cb.svg\";","module.exports = __webpack_public_path__ + \"static/media/remove.856b6a95.svg\";","module.exports = __webpack_public_path__ + \"static/media/address.786915f5.svg\";","module.exports = __webpack_public_path__ + \"static/media/cart.f9b30afb.svg\";","module.exports = __webpack_public_path__ + \"static/media/chevron-left.88658df7.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.1072bc0d.svg\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-box_1.518d9c78.png\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-box_2.24d90011.png\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-box_3.d7453441.png\";","module.exports = __webpack_public_path__ + \"static/media/popcorn-box_4.482bbaa4.png\";"],"sourceRoot":""}